(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[888],{2224:function(t,e,n){"use strict";var r=n(6099),i=n(909),o=n(7582),a=n(4589),s=n(4594);function u(t){return t&&"object"===typeof t&&"default"in t?t:{default:t}}var c,h=u(r),l=((c={})["already-activated"]="You are trying to activate AppCheck for FirebaseApp {$appName}, while it is already activated. AppCheck can only be activated once.",c["use-before-activation"]="AppCheck is being used before activate() is called for FirebaseApp {$appName}. Please make sure you call activate() before instantiating other Firebase services.",c["fetch-network-error"]="Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.",c["fetch-parse-error"]="Fetch client could not parse response. Original error: {$originalErrorMessage}.",c["fetch-status-error"]="Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.",c["storage-open"]="Error thrown when opening storage. Original error: {$originalErrorMessage}.",c["storage-get"]="Error thrown when reading from storage. Original error: {$originalErrorMessage}.",c["storage-set"]="Error thrown when writing to storage. Original error: {$originalErrorMessage}.",c["recaptcha-error"]="ReCAPTCHA error.",c),f=new a.ErrorFactory("appCheck","AppCheck",l),p=new Map,d={activated:!1,tokenObservers:[]},v={enabled:!1};function g(t){return p.get(t)||d}function m(t,e){p.set(t,e)}function y(){return v}var b="https://content-firebaseappcheck.googleapis.com/v1beta",w=3e4,_=96e4,I=function(){function t(t,e,n,r,i){if(this.operation=t,this.retryPolicy=e,this.getWaitDuration=n,this.lowerBound=r,this.upperBound=i,this.pending=null,this.nextErrorWaitInterval=r,r>i)throw new Error("Proactive refresh lower bound greater than upper bound!")}return t.prototype.start=function(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch((function(){}))},t.prototype.stop=function(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)},t.prototype.isRunning=function(){return!!this.pending},t.prototype.process=function(t){return o.__awaiter(this,void 0,void 0,(function(){var e;return o.__generator(this,(function(n){switch(n.label){case 0:this.stop(),n.label=1;case 1:return n.trys.push([1,6,,7]),this.pending=new a.Deferred,[4,(r=this.getNextRun(t),new Promise((function(t){setTimeout(t,r)})))];case 2:return n.sent(),this.pending.resolve(),[4,this.pending.promise];case 3:return n.sent(),this.pending=new a.Deferred,[4,this.operation()];case 4:return n.sent(),this.pending.resolve(),[4,this.pending.promise];case 5:return n.sent(),this.process(!0).catch((function(){})),[3,7];case 6:return e=n.sent(),this.retryPolicy(e)?this.process(!1).catch((function(){})):this.stop(),[3,7];case 7:return[2]}var r}))}))},t.prototype.getNextRun=function(t){if(t)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();var e=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),e},t}();function T(){return self.grecaptcha}function E(t){if(!g(t).activated)throw f.create("use-before-activation",{appName:t.name})}function S(t){return a.base64.encodeString(JSON.stringify(t),!1)}function A(t,e){var n=t.url,r=t.body;return o.__awaiter(this,void 0,void 0,(function(){var t,i,a,s,u,c,h,l,p,d;return o.__generator(this,(function(o){switch(o.label){case 0:t={"Content-Type":"application/json"},(i=e.getImmediate({optional:!0}))&&(t["X-Firebase-Client"]=i.getPlatformInfoString()),a={method:"POST",body:JSON.stringify(r),headers:t},o.label=1;case 1:return o.trys.push([1,3,,4]),[4,fetch(n,a)];case 2:return s=o.sent(),[3,4];case 3:throw u=o.sent(),f.create("fetch-network-error",{originalErrorMessage:u.message});case 4:if(200!==s.status)throw f.create("fetch-status-error",{httpStatus:s.status});o.label=5;case 5:return o.trys.push([5,7,,8]),[4,s.json()];case 6:return c=o.sent(),[3,8];case 7:throw h=o.sent(),f.create("fetch-parse-error",{originalErrorMessage:h.message});case 8:if(!(l=c.ttl.match(/^([\d.]+)(s)$/))||!l[2]||isNaN(Number(l[1])))throw f.create("fetch-parse-error",{originalErrorMessage:"ttl field (timeToLive) is not in standard Protobuf Duration format: "+c.ttl});return p=1e3*Number(l[1]),d=Date.now(),[2,{token:c.attestationToken,expireTimeMillis:d+p,issuedAtTimeMillis:d}]}}))}))}function k(t,e){var n=t.options,r=n.projectId,i=n.appId,o=n.apiKey;return{url:b+"/projects/"+r+"/apps/"+i+":exchangeRecaptchaToken?key="+o,body:{recaptcha_token:e}}}function N(t,e){var n=t.options,r=n.projectId,i=n.appId,o=n.apiKey;return{url:b+"/projects/"+r+"/apps/"+i+":exchangeDebugToken?key="+o,body:{debug_token:e}}}var C="firebase-app-check-store",O="debug-token",D=null;function R(){return D||(D=new Promise((function(t,e){try{var n=indexedDB.open("firebase-app-check-database",1);n.onsuccess=function(e){t(e.target.result)},n.onerror=function(t){var n;e(f.create("storage-open",{originalErrorMessage:null===(n=t.target.error)||void 0===n?void 0:n.message}))},n.onupgradeneeded=function(t){var e=t.target.result;if(0===t.oldVersion)e.createObjectStore(C,{keyPath:"compositeKey"})}}catch(r){e(f.create("storage-open",{originalErrorMessage:r.message}))}})),D)}function P(t){return L(M(t))}function x(t,e){return o.__awaiter(this,void 0,void 0,(function(){var n,r,i,a;return o.__generator(this,(function(o){switch(o.label){case 0:return[4,R()];case 1:return n=o.sent(),r=n.transaction(C,"readwrite"),i=r.objectStore(C),a=i.put({compositeKey:t,value:e}),[2,new Promise((function(t,e){a.onsuccess=function(e){t()},r.onerror=function(t){var n;e(f.create("storage-set",{originalErrorMessage:null===(n=t.target.error)||void 0===n?void 0:n.message}))}}))]}}))}))}function L(t){return o.__awaiter(this,void 0,void 0,(function(){var e,n,r,i;return o.__generator(this,(function(o){switch(o.label){case 0:return[4,R()];case 1:return e=o.sent(),n=e.transaction(C,"readonly"),r=n.objectStore(C),i=r.get(t),[2,new Promise((function(t,e){i.onsuccess=function(e){var n=e.target.result;t(n?n.value:void 0)},n.onerror=function(t){var n;e(f.create("storage-get",{originalErrorMessage:null===(n=t.target.error)||void 0===n?void 0:n.message}))}}))]}}))}))}function M(t){return t.options.appId+"-"+t.name}var F=new s.Logger("@firebase/app-check");function U(t,e){return a.isIndexedDBAvailable()?function(t,e){return x(M(t),e)}(t,e).catch((function(t){F.warn("Failed to write token to indexeddb. Error: "+t)})):Promise.resolve()}function j(){return o.__awaiter(this,void 0,void 0,(function(){var t,e;return o.__generator(this,(function(n){switch(n.label){case 0:t=void 0,n.label=1;case 1:return n.trys.push([1,3,,4]),[4,L(O)];case 2:return t=n.sent(),[3,4];case 3:return n.sent(),[3,4];case 4:return t?[2,t]:(e="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){var e=16*Math.random()|0;return("x"===t?e:3&e|8).toString(16)})),(r=e,x(O,r)).catch((function(t){return F.warn("Failed to persist debug token to indexeddb. Error: "+t)})),console.log("AppCheck debug token: "+e+". You will need to whitelist it in the Firebase console for it to work"),[2,e])}var r}))}))}function V(){return o.__awaiter(this,void 0,void 0,(function(){var t;return o.__generator(this,(function(e){if((t=y()).enabled&&t.token)return[2,t.token.promise];throw Error("\n            Can't get debug token in production mode.\n        ")}))}))}var B={error:"UNKNOWN_ERROR"};function q(t,e,n){return void 0===n&&(n=!1),o.__awaiter(this,void 0,void 0,(function(){var r,i,a,s,u,c,h,l,f,p;return o.__generator(this,(function(d){switch(d.label){case 0:return E(t),r=g(t),i=r.token,a=void 0,i?[3,2]:[4,r.cachedTokenPromise];case 1:(s=d.sent())&&z(s)&&(i=s,m(t,o.__assign(o.__assign({},r),{token:i})),H(t,{token:i.token})),d.label=2;case 2:return!n&&i&&z(i)?[2,{token:i.token}]:y().enabled?(c=A,h=N,l=[t],[4,V()]):[3,6];case 3:return[4,c.apply(void 0,[h.apply(void 0,l.concat([d.sent()])),e])];case 4:return u=d.sent(),[4,U(t,u)];case 5:return d.sent(),m(t,o.__assign(o.__assign({},r),{token:u})),[2,{token:u.token}];case 6:return d.trys.push([6,8,,9]),[4,r.provider.getToken()];case 7:return i=d.sent(),[3,9];case 8:return f=d.sent(),F.error(f),a=f,[3,9];case 9:return i?[3,10]:(p=function(t){return{token:S(B),error:t}}(a),[3,12]);case 10:return p={token:i.token},m(t,o.__assign(o.__assign({},r),{token:i})),[4,U(t,i)];case 11:d.sent(),d.label=12;case 12:return H(t,p),[2,p]}}))}))}function K(t,e,n,r,i){var a=g(t),s={next:r,error:i,type:n},u=o.__assign(o.__assign({},a),{tokenObservers:o.__spreadArray(o.__spreadArray([],a.tokenObservers),[s])});if(!u.tokenRefresher){var c=function(t,e){var n=this;return new I((function(){return o.__awaiter(n,void 0,void 0,(function(){var n;return o.__generator(this,(function(r){switch(r.label){case 0:return g(t).token?[3,2]:[4,q(t,e)];case 1:return n=r.sent(),[3,4];case 2:return[4,q(t,e,!0)];case 3:n=r.sent(),r.label=4;case 4:if(n.error)throw n.error;return[2]}}))}))}),(function(){return!0}),(function(){var e=g(t);if(e.token){var n=e.token.issuedAtTimeMillis+.5*(e.token.expireTimeMillis-e.token.issuedAtTimeMillis)+3e5,r=e.token.expireTimeMillis-3e5;return n=Math.min(n,r),Math.max(0,n-Date.now())}return 0}),w,_)}(t,e);u.tokenRefresher=c}if(!u.tokenRefresher.isRunning()&&a.isTokenAutoRefreshEnabled&&u.tokenRefresher.start(),a.token&&z(a.token)){var h=a.token;Promise.resolve().then((function(){return r({token:h.token})})).catch((function(){}))}else null==a.token&&a.cachedTokenPromise.then((function(t){t&&z(t)&&r({token:t.token})})).catch((function(){}));m(t,u)}function G(t,e){var n=g(t),r=n.tokenObservers.filter((function(t){return t.next!==e}));0===r.length&&n.tokenRefresher&&n.tokenRefresher.isRunning()&&n.tokenRefresher.stop(),m(t,o.__assign(o.__assign({},n),{tokenObservers:r}))}function H(t,e){for(var n=0,r=g(t).tokenObservers;n<r.length;n++){var i=r[n];try{"EXTERNAL"===i.type&&null!=e.error?i.error(e.error):i.next(e)}catch(o){}}}function z(t){return t.expireTimeMillis-Date.now()>0}var W="https://www.google.com/recaptcha/api.js";function X(t,e){var n=g(t),r=new a.Deferred;m(t,o.__assign(o.__assign({},n),{reCAPTCHAState:{initialized:r}}));var i="fire_app_check_"+t.name,s=document.createElement("div");s.id=i,s.style.display="none",document.body.appendChild(s);var u=T();return u?u.ready((function(){Y(t,e,u,i),r.resolve(u)})):function(t){var e=document.createElement("script");e.src=""+W,e.onload=t,document.head.appendChild(e)}((function(){var n=T();if(!n)throw new Error("no recaptcha");n.ready((function(){Y(t,e,n,i),r.resolve(n)}))})),r.promise}function Q(t){return o.__awaiter(this,void 0,void 0,(function(){var e;return o.__generator(this,(function(n){switch(n.label){case 0:return E(t),[4,g(t).reCAPTCHAState.initialized.promise];case 1:return e=n.sent(),[2,new Promise((function(n,r){var i=g(t).reCAPTCHAState;e.ready((function(){n(e.execute(i.widgetId,{action:"fire_app_check"}))}))}))]}}))}))}function Y(t,e,n,r){var i=n.render(r,{sitekey:e,size:"invisible"}),a=g(t);m(t,o.__assign(o.__assign({},a),{reCAPTCHAState:o.__assign(o.__assign({},a.reCAPTCHAState),{widgetId:i})}))}var J=function(){function t(t){this._siteKey=t}return t.prototype.getToken=function(){return o.__awaiter(this,void 0,void 0,(function(){var t;return o.__generator(this,(function(e){switch(e.label){case 0:if(!this._app||!this._platformLoggerProvider)throw f.create("use-before-activation",{appName:""});e.label=1;case 1:return e.trys.push([1,3,,4]),[4,Q(this._app)];case 2:return t=e.sent(),[3,4];case 3:throw e.sent(),f.create("recaptcha-error");case 4:return[2,A(k(this._app,t),this._platformLoggerProvider)]}}))}))},t.prototype.initialize=function(t,e){this._app=t,this._platformLoggerProvider=e,X(t,this._siteKey).catch((function(){}))},t}(),$=function(){function t(t){this._customProviderOptions=t}return t.prototype.getToken=function(){return o.__awaiter(this,void 0,void 0,(function(){var t,e,n;return o.__generator(this,(function(r){switch(r.label){case 0:if(!this._app)throw f.create("use-before-activation",{appName:""});return[4,this._customProviderOptions.getToken()];case 1:return t=r.sent(),e=a.issuedAtTime(t.token),n=null!==e&&e<Date.now()&&e>0?1e3*e:Date.now(),[2,o.__assign(o.__assign({},t),{issuedAtTimeMillis:n})]}}))}))},t.prototype.initialize=function(t){this._app=t},t}();function Z(t,e,n,r){var i=g(t);if(i.activated)throw f.create("already-activated",{appName:t.name});var s=o.__assign(o.__assign({},i),{activated:!0});s.cachedTokenPromise=function(t){return o.__awaiter(this,void 0,void 0,(function(){var e,n;return o.__generator(this,(function(r){switch(r.label){case 0:if(!a.isIndexedDBAvailable())return[3,5];e=void 0,r.label=1;case 1:return r.trys.push([1,3,,4]),[4,P(t)];case 2:return e=r.sent(),[3,4];case 3:return n=r.sent(),F.warn("Failed to read token from indexeddb. Error: "+n),[3,4];case 4:return[2,e];case 5:return[2,void 0]}}))}))}(t).then((function(e){return e&&z(e)&&m(t,o.__assign(o.__assign({},g(t)),{token:e})),e})),s.provider="string"===typeof e?new J(e):e instanceof J||e instanceof $?e:new $({getToken:e.getToken}),s.isTokenAutoRefreshEnabled=void 0===r?t.automaticDataCollectionEnabled:r,m(t,s),s.provider.initialize(t,n)}function tt(t,e){return{app:t,activate:function(n,r){return Z(t,n,e,r)},setTokenAutoRefreshEnabled:function(e){return function(t,e){var n=g(t);n.tokenRefresher&&(!0===e?n.tokenRefresher.start():n.tokenRefresher.stop()),m(t,o.__assign(o.__assign({},n),{isTokenAutoRefreshEnabled:e}))}(t,e)},getToken:function(n){return function(t,e,n){return o.__awaiter(this,void 0,void 0,(function(){var r;return o.__generator(this,(function(i){switch(i.label){case 0:return[4,q(t,e,n)];case 1:if((r=i.sent()).error)throw r.error;return[2,{token:r.token}]}}))}))}(t,e,n)},onTokenChanged:function(n,r,i){return function(t,e,n,r,i){var o=function(){},a=function(){};return o=null!=n.next?n.next.bind(n):n,null!=n.error?a=n.error.bind(n):r&&(a=r),K(t,e,"EXTERNAL",o,a),function(){return G(t,o)}}(t,e,n,r)},INTERNAL:{delete:function(){for(var e=0,n=g(t).tokenObservers;e<n.length;e++){var r=n[e];G(t,r.next)}return Promise.resolve()}}}}var et="app-check-internal";!function(t){t.INTERNAL.registerComponent(new i.Component("appCheck",(function(t){return tt(t.getProvider("app").getImmediate(),t.getProvider("platform-logger"))}),"PUBLIC").setServiceProps({ReCaptchaV3Provider:J,CustomProvider:$}).setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((function(t,e,n){t.getProvider(et).initialize()}))),t.INTERNAL.registerComponent(new i.Component(et,(function(t){return function(t,e){return{getToken:function(n){return q(t,e,n)},addTokenListener:function(n){return K(t,e,"INTERNAL",n)},removeTokenListener:function(e){return G(t,e)}}}(t.getProvider("app").getImmediate(),t.getProvider("platform-logger"))}),"PUBLIC").setInstantiationMode("EXPLICIT")),t.registerVersion("@firebase/app-check","0.3.2")}(h.default),function(){var t=a.getGlobal();if("string"===typeof t.FIREBASE_APPCHECK_DEBUG_TOKEN||!0===t.FIREBASE_APPCHECK_DEBUG_TOKEN){var e=y();e.enabled=!0;var n=new a.Deferred;e.token=n,"string"===typeof t.FIREBASE_APPCHECK_DEBUG_TOKEN?n.resolve(t.FIREBASE_APPCHECK_DEBUG_TOKEN):n.resolve(j())}}()},6099:function(t,e,n){"use strict";n.r(e),n.d(e,{firebase:function(){return w}});var r,i,o=n(7582),a=n(4589),s=n(909),u=n(4594),c=((r={})["no-app"]="No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",r["bad-app-name"]="Illegal App name: '{$appName}",r["duplicate-app"]="Firebase App named '{$appName}' already exists",r["app-deleted"]="Firebase App named '{$appName}' already deleted",r["invalid-app-argument"]="firebase.{$appName}() takes either no argument or a Firebase App instance.",r["invalid-log-argument"]="First argument to `onLog` must be null or a function.",r),h=new a.ErrorFactory("app","Firebase",c),l="@firebase/app",f="[DEFAULT]",p=((i={})[l]="fire-core",i["@firebase/analytics"]="fire-analytics",i["@firebase/app-check"]="fire-app-check",i["@firebase/auth"]="fire-auth",i["@firebase/database"]="fire-rtdb",i["@firebase/functions"]="fire-fn",i["@firebase/installations"]="fire-iid",i["@firebase/messaging"]="fire-fcm",i["@firebase/performance"]="fire-perf",i["@firebase/remote-config"]="fire-rc",i["@firebase/storage"]="fire-gcs",i["@firebase/firestore"]="fire-fst",i["fire-js"]="fire-js",i["firebase-wrapper"]="fire-js-all",i),d=new u.Logger("@firebase/app"),v=function(){function t(t,e,n){var r=this;this.firebase_=n,this.isDeleted_=!1,this.name_=e.name,this.automaticDataCollectionEnabled_=e.automaticDataCollectionEnabled||!1,this.options_=(0,a.deepCopy)(t),this.container=new s.ComponentContainer(e.name),this._addComponent(new s.Component("app",(function(){return r}),"PUBLIC")),this.firebase_.INTERNAL.components.forEach((function(t){return r._addComponent(t)}))}return Object.defineProperty(t.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this.automaticDataCollectionEnabled_},set:function(t){this.checkDestroyed_(),this.automaticDataCollectionEnabled_=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!1,configurable:!0}),t.prototype.delete=function(){var t=this;return new Promise((function(e){t.checkDestroyed_(),e()})).then((function(){return t.firebase_.INTERNAL.removeApp(t.name_),Promise.all(t.container.getProviders().map((function(t){return t.delete()})))})).then((function(){t.isDeleted_=!0}))},t.prototype._getService=function(t,e){var n;void 0===e&&(e=f),this.checkDestroyed_();var r=this.container.getProvider(t);return r.isInitialized()||"EXPLICIT"!==(null===(n=r.getComponent())||void 0===n?void 0:n.instantiationMode)||r.initialize(),r.getImmediate({identifier:e})},t.prototype._removeServiceInstance=function(t,e){void 0===e&&(e=f),this.container.getProvider(t).clearInstance(e)},t.prototype._addComponent=function(t){try{this.container.addComponent(t)}catch(e){d.debug("Component "+t.name+" failed to register with FirebaseApp "+this.name,e)}},t.prototype._addOrOverwriteComponent=function(t){this.container.addOrOverwriteComponent(t)},t.prototype.toJSON=function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}},t.prototype.checkDestroyed_=function(){if(this.isDeleted_)throw h.create("app-deleted",{appName:this.name_})},t}();v.prototype.name&&v.prototype.options||v.prototype.delete||console.log("dc");var g=function t(){var e=function(t){var e={},n=new Map,r={__esModule:!0,initializeApp:function(n,i){void 0===i&&(i={}),"object"===typeof i&&null!==i||(i={name:i});var o=i;void 0===o.name&&(o.name=f);var s=o.name;if("string"!==typeof s||!s)throw h.create("bad-app-name",{appName:String(s)});if((0,a.contains)(e,s))throw h.create("duplicate-app",{appName:s});var u=new t(n,o,r);return e[s]=u,u},app:i,registerVersion:function(t,e,n){var r,i=null!==(r=p[t])&&void 0!==r?r:t;n&&(i+="-"+n);var a=i.match(/\s|\//),u=e.match(/\s|\//);if(a||u){var c=['Unable to register library "'+i+'" with version "'+e+'":'];return a&&c.push('library name "'+i+'" contains illegal characters (whitespace or "/")'),a&&u&&c.push("and"),u&&c.push('version name "'+e+'" contains illegal characters (whitespace or "/")'),void d.warn(c.join(" "))}o(new s.Component(i+"-version",(function(){return{library:i,version:e}}),"VERSION"))},setLogLevel:u.setLogLevel,onLog:function(t,e){if(null!==t&&"function"!==typeof t)throw h.create("invalid-log-argument");(0,u.setUserLogHandler)(t,e)},apps:null,SDK_VERSION:"8.10.0",INTERNAL:{registerComponent:o,removeApp:function(t){delete e[t]},components:n,useAsService:function(t,e){return"serverAuth"===e?null:e}}};function i(t){if(t=t||f,!(0,a.contains)(e,t))throw h.create("no-app",{appName:t});return e[t]}function o(o){var s=o.name;if(n.has(s))return d.debug("There were multiple attempts to register component "+s+"."),"PUBLIC"===o.type?r[s]:null;if(n.set(s,o),"PUBLIC"===o.type){var u=function(t){if(void 0===t&&(t=i()),"function"!==typeof t[s])throw h.create("invalid-app-argument",{appName:s});return t[s]()};void 0!==o.serviceProps&&(0,a.deepExtend)(u,o.serviceProps),r[s]=u,t.prototype[s]=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return this._getService.bind(this,s).apply(this,o.multipleInstances?t:[])}}for(var c=0,l=Object.keys(e);c<l.length;c++){var f=l[c];e[f]._addComponent(o)}return"PUBLIC"===o.type?r[s]:null}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(e).map((function(t){return e[t]}))}}),i.App=t,r}(v);return e.INTERNAL=(0,o.__assign)((0,o.__assign)({},e.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(t){(0,a.deepExtend)(e,t)},createSubscribe:a.createSubscribe,ErrorFactory:a.ErrorFactory,deepExtend:a.deepExtend}),e}(),m=function(){function t(t){this.container=t}return t.prototype.getPlatformInfoString=function(){return this.container.getProviders().map((function(t){if(function(t){var e=t.getComponent();return"VERSION"===(null===e||void 0===e?void 0:e.type)}(t)){var e=t.getImmediate();return e.library+"/"+e.version}return null})).filter((function(t){return t})).join(" ")},t}();if((0,a.isBrowser)()&&void 0!==self.firebase){d.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var y=self.firebase.SDK_VERSION;y&&y.indexOf("LITE")>=0&&d.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var b=g.initializeApp;g.initializeApp=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return(0,a.isNode)()&&d.warn('\n      Warning: This is a browser-targeted Firebase bundle but it appears it is being\n      run in a Node environment.  If running in a Node environment, make sure you\n      are using the bundle specified by the "main" field in package.json.\n      \n      If you are using Webpack, you can specify "main" as the first item in\n      "resolve.mainFields":\n      https://webpack.js.org/configuration/resolve/#resolvemainfields\n      \n      If using Rollup, use the @rollup/plugin-node-resolve plugin and specify "main"\n      as the first item in "mainFields", e.g. [\'main\', \'module\'].\n      https://github.com/rollup/@rollup/plugin-node-resolve\n      '),b.apply(void 0,t)};var w=g;!function(t,e){t.INTERNAL.registerComponent(new s.Component("platform-logger",(function(t){return new m(t)}),"PRIVATE")),t.registerVersion(l,"0.6.30",e),t.registerVersion("fire-js","")}(w),e.default=w},909:function(t,e,n){"use strict";n.r(e),n.d(e,{Component:function(){return o},ComponentContainer:function(){return u},Provider:function(){return s}});var r=n(7582),i=n(4589),o=function(){function t(t,e,n){this.name=t,this.instanceFactory=e,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return t.prototype.setInstantiationMode=function(t){return this.instantiationMode=t,this},t.prototype.setMultipleInstances=function(t){return this.multipleInstances=t,this},t.prototype.setServiceProps=function(t){return this.serviceProps=t,this},t.prototype.setInstanceCreatedCallback=function(t){return this.onInstanceCreated=t,this},t}(),a="[DEFAULT]",s=function(){function t(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}return t.prototype.get=function(t){var e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){var n=new i.Deferred;if(this.instancesDeferred.set(e,n),this.isInitialized(e)||this.shouldAutoInitialize())try{var r=this.getOrInitializeService({instanceIdentifier:e});r&&n.resolve(r)}catch(o){}}return this.instancesDeferred.get(e).promise},t.prototype.getImmediate=function(t){var e,n=this.normalizeInstanceIdentifier(null===t||void 0===t?void 0:t.identifier),r=null!==(e=null===t||void 0===t?void 0:t.optional)&&void 0!==e&&e;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service "+this.name+" is not available")}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}},t.prototype.getComponent=function(){return this.component},t.prototype.setComponent=function(t){var e,n;if(t.name!==this.name)throw Error("Mismatching Component "+t.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if(this.component=t,this.shouldAutoInitialize()){if(function(t){return"EAGER"===t.instantiationMode}(t))try{this.getOrInitializeService({instanceIdentifier:a})}catch(f){}try{for(var i=(0,r.__values)(this.instancesDeferred.entries()),o=i.next();!o.done;o=i.next()){var s=(0,r.__read)(o.value,2),u=s[0],c=s[1],h=this.normalizeInstanceIdentifier(u);try{var l=this.getOrInitializeService({instanceIdentifier:h});c.resolve(l)}catch(f){}}}catch(p){e={error:p}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}}},t.prototype.clearInstance=function(t){void 0===t&&(t=a),this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)},t.prototype.delete=function(){return(0,r.__awaiter)(this,void 0,void 0,(function(){var t;return(0,r.__generator)(this,(function(e){switch(e.label){case 0:return t=Array.from(this.instances.values()),[4,Promise.all((0,r.__spreadArray)((0,r.__spreadArray)([],(0,r.__read)(t.filter((function(t){return"INTERNAL"in t})).map((function(t){return t.INTERNAL.delete()})))),(0,r.__read)(t.filter((function(t){return"_delete"in t})).map((function(t){return t._delete()})))))];case 1:return e.sent(),[2]}}))}))},t.prototype.isComponentSet=function(){return null!=this.component},t.prototype.isInitialized=function(t){return void 0===t&&(t=a),this.instances.has(t)},t.prototype.getOptions=function(t){return void 0===t&&(t=a),this.instancesOptions.get(t)||{}},t.prototype.initialize=function(t){var e,n;void 0===t&&(t={});var i=t.options,o=void 0===i?{}:i,a=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(a))throw Error(this.name+"("+a+") has already been initialized");if(!this.isComponentSet())throw Error("Component "+this.name+" has not been registered yet");var s=this.getOrInitializeService({instanceIdentifier:a,options:o});try{for(var u=(0,r.__values)(this.instancesDeferred.entries()),c=u.next();!c.done;c=u.next()){var h=(0,r.__read)(c.value,2),l=h[0],f=h[1];a===this.normalizeInstanceIdentifier(l)&&f.resolve(s)}}catch(p){e={error:p}}finally{try{c&&!c.done&&(n=u.return)&&n.call(u)}finally{if(e)throw e.error}}return s},t.prototype.onInit=function(t,e){var n,r=this.normalizeInstanceIdentifier(e),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(t),this.onInitCallbacks.set(r,i);var o=this.instances.get(r);return o&&t(o,r),function(){i.delete(t)}},t.prototype.invokeOnInitCallbacks=function(t,e){var n,i,o=this.onInitCallbacks.get(e);if(o)try{for(var a=(0,r.__values)(o),s=a.next();!s.done;s=a.next()){var u=s.value;try{u(t,e)}catch(c){}}}catch(h){n={error:h}}finally{try{s&&!s.done&&(i=a.return)&&i.call(a)}finally{if(n)throw n.error}}},t.prototype.getOrInitializeService=function(t){var e,n=t.instanceIdentifier,r=t.options,i=void 0===r?{}:r,o=this.instances.get(n);if(!o&&this.component&&(o=this.component.instanceFactory(this.container,{instanceIdentifier:(e=n,e===a?void 0:e),options:i}),this.instances.set(n,o),this.instancesOptions.set(n,i),this.invokeOnInitCallbacks(o,n),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,n,o)}catch(s){}return o||null},t.prototype.normalizeInstanceIdentifier=function(t){return void 0===t&&(t=a),this.component?this.component.multipleInstances?t:a:t},t.prototype.shouldAutoInitialize=function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode},t}();var u=function(){function t(t){this.name=t,this.providers=new Map}return t.prototype.addComponent=function(t){var e=this.getProvider(t.name);if(e.isComponentSet())throw new Error("Component "+t.name+" has already been registered with "+this.name);e.setComponent(t)},t.prototype.addOrOverwriteComponent=function(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)},t.prototype.getProvider=function(t){if(this.providers.has(t))return this.providers.get(t);var e=new s(t,this);return this.providers.set(t,e),e},t.prototype.getProviders=function(){return Array.from(this.providers.values())},t}()},4594:function(t,e,n){"use strict";function r(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],a=0,s=o.length;a<s;a++,i++)r[i]=o[a];return r}var i;n.r(e),n.d(e,{LogLevel:function(){return o},Logger:function(){return l},setLogLevel:function(){return f},setUserLogHandler:function(){return p}});var o,a=[];!function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"}(o||(o={}));var s={debug:o.DEBUG,verbose:o.VERBOSE,info:o.INFO,warn:o.WARN,error:o.ERROR,silent:o.SILENT},u=o.INFO,c=((i={})[o.DEBUG]="log",i[o.VERBOSE]="log",i[o.INFO]="info",i[o.WARN]="warn",i[o.ERROR]="error",i),h=function(t,e){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];if(!(e<t.logLevel)){var o=(new Date).toISOString(),a=c[e];if(!a)throw new Error("Attempted to log a message with an invalid logType (value: "+e+")");console[a].apply(console,r(["["+o+"]  "+t.name+":"],n))}},l=function(){function t(t){this.name=t,this._logLevel=u,this._logHandler=h,this._userLogHandler=null,a.push(this)}return Object.defineProperty(t.prototype,"logLevel",{get:function(){return this._logLevel},set:function(t){if(!(t in o))throw new TypeError('Invalid value "'+t+'" assigned to `logLevel`');this._logLevel=t},enumerable:!1,configurable:!0}),t.prototype.setLogLevel=function(t){this._logLevel="string"===typeof t?s[t]:t},Object.defineProperty(t.prototype,"logHandler",{get:function(){return this._logHandler},set:function(t){if("function"!==typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"userLogHandler",{get:function(){return this._userLogHandler},set:function(t){this._userLogHandler=t},enumerable:!1,configurable:!0}),t.prototype.debug=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,o.DEBUG],t)),this._logHandler.apply(this,r([this,o.DEBUG],t))},t.prototype.log=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,o.VERBOSE],t)),this._logHandler.apply(this,r([this,o.VERBOSE],t))},t.prototype.info=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,o.INFO],t)),this._logHandler.apply(this,r([this,o.INFO],t))},t.prototype.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,o.WARN],t)),this._logHandler.apply(this,r([this,o.WARN],t))},t.prototype.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,o.ERROR],t)),this._logHandler.apply(this,r([this,o.ERROR],t))},t}();function f(t){a.forEach((function(e){e.setLogLevel(t)}))}function p(t,e){for(var n=function(n){var r=null;e&&e.level&&(r=s[e.level]),n.userLogHandler=null===t?null:function(e,n){for(var i=[],a=2;a<arguments.length;a++)i[a-2]=arguments[a];var s=i.map((function(t){if(null==t)return null;if("string"===typeof t)return t;if("number"===typeof t||"boolean"===typeof t)return t.toString();if(t instanceof Error)return t.message;try{return JSON.stringify(t)}catch(e){return null}})).filter((function(t){return t})).join(" ");n>=(null!==r&&void 0!==r?r:e.logLevel)&&t({level:o[n].toLowerCase(),message:s,args:i,type:e.name})}},r=0,i=a;r<i.length;r++){n(i[r])}}},4589:function(t,e,n){"use strict";n.r(e),n.d(e,{CONSTANTS:function(){return i},Deferred:function(){return d},ErrorFactory:function(){return R},FirebaseError:function(){return D},MAX_VALUE_MILLIS:function(){return ct},RANDOM_FACTOR:function(){return ht},Sha1:function(){return J},areCookiesEnabled:function(){return C},assert:function(){return o},assertionError:function(){return a},async:function(){return tt},base64:function(){return u},base64Decode:function(){return l},base64Encode:function(){return c},base64urlEncodeWithoutPadding:function(){return h},calculateBackoffMillis:function(){return lt},contains:function(){return q},createMockUserToken:function(){return v},createSubscribe:function(){return $},decode:function(){return F},deepCopy:function(){return f},deepEqual:function(){return z},deepExtend:function(){return p},errorPrefix:function(){return rt},extractQuerystring:function(){return Y},getGlobal:function(){return O},getModularInstance:function(){return pt},getUA:function(){return g},isAdmin:function(){return B},isBrowser:function(){return b},isBrowserExtension:function(){return w},isElectron:function(){return I},isEmpty:function(){return G},isIE:function(){return T},isIndexedDBAvailable:function(){return k},isMobileCordova:function(){return m},isNode:function(){return y},isNodeSdk:function(){return S},isReactNative:function(){return _},isSafari:function(){return A},isUWP:function(){return E},isValidFormat:function(){return V},isValidTimestamp:function(){return U},issuedAtTime:function(){return j},jsonEval:function(){return L},map:function(){return H},ordinal:function(){return ft},querystring:function(){return X},querystringDecode:function(){return Q},safeGet:function(){return K},stringLength:function(){return ut},stringToByteArray:function(){return st},stringify:function(){return M},validateArgCount:function(){return nt},validateCallback:function(){return ot},validateContextObject:function(){return at},validateIndexedDBOpenable:function(){return N},validateNamespace:function(){return it}});var r=n(7582),i={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"},o=function(t,e){if(!t)throw a(e)},a=function(t){return new Error("Firebase Database ("+i.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)},s=function(t){for(var e=[],n=0,r=0;r<t.length;r++){var i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=63&i|128):55296===(64512&i)&&r+1<t.length&&56320===(64512&t.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&t.charCodeAt(++r)),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=63&i|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=63&i|128)}return e},u={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray:function(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<t.length;i+=3){var o=t[i],a=i+1<t.length,s=a?t[i+1]:0,u=i+2<t.length,c=u?t[i+2]:0,h=o>>2,l=(3&o)<<4|s>>4,f=(15&s)<<2|c>>6,p=63&c;u||(p=64,a||(f=64)),r.push(n[h],n[l],n[f],n[p])}return r.join("")},encodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(s(t),e)},decodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):function(t){for(var e=[],n=0,r=0;n<t.length;){var i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){var o=t[n++];e[r++]=String.fromCharCode((31&i)<<6|63&o)}else if(i>239&&i<365){var a=((7&i)<<18|(63&(o=t[n++]))<<12|(63&(s=t[n++]))<<6|63&t[n++])-65536;e[r++]=String.fromCharCode(55296+(a>>10)),e[r++]=String.fromCharCode(56320+(1023&a))}else{o=t[n++];var s=t[n++];e[r++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&s)}}return e.join("")}(this.decodeStringToByteArray(t,e))},decodeStringToByteArray:function(t,e){this.init_();for(var n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<t.length;){var o=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0,s=++i<t.length?n[t.charAt(i)]:64,u=++i<t.length?n[t.charAt(i)]:64;if(++i,null==o||null==a||null==s||null==u)throw Error();var c=o<<2|a>>4;if(r.push(c),64!==s){var h=a<<4&240|s>>2;if(r.push(h),64!==u){var l=s<<6&192|u;r.push(l)}}}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},c=function(t){var e=s(t);return u.encodeByteArray(e,!0)},h=function(t){return c(t).replace(/\./g,"")},l=function(t){try{return u.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function f(t){return p(void 0,t)}function p(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:return new Date(e.getTime());case Object:void 0===t&&(t={});break;case Array:t=[];break;default:return e}for(var n in e)e.hasOwnProperty(n)&&"__proto__"!==n&&(t[n]=p(t[n],e[n]));return t}var d=function(){function t(){var t=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))}return t.prototype.wrapCallback=function(t){var e=this;return function(n,r){n?e.reject(n):e.resolve(r),"function"===typeof t&&(e.promise.catch((function(){})),1===t.length?t(n):t(n,r))}},t}();function v(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');var n=e||"demo-project",i=t.iat||0,o=t.sub||t.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");var a=(0,r.__assign)({iss:"https://securetoken.google.com/"+n,aud:n,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},t);return[h(JSON.stringify({alg:"none",type:"JWT"})),h(JSON.stringify(a)),""].join(".")}function g(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function m(){return"undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(g())}function y(){try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(t){return!1}}function b(){return"object"===typeof self&&self.self===self}function w(){var t="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof t&&void 0!==t.id}function _(){return"object"===typeof navigator&&"ReactNative"===navigator.product}function I(){return g().indexOf("Electron/")>=0}function T(){var t=g();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function E(){return g().indexOf("MSAppHost/")>=0}function S(){return!0===i.NODE_CLIENT||!0===i.NODE_ADMIN}function A(){return!y()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function k(){return"indexedDB"in self&&null!=indexedDB}function N(){return new Promise((function(t,e){try{var n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=function(){i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=function(){n=!1},i.onerror=function(){var t;e((null===(t=i.error)||void 0===t?void 0:t.message)||"")}}catch(o){e(o)}}))}function C(){return!(!navigator||!navigator.cookieEnabled)}function O(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}var D=function(t){function e(n,r,i){var o=t.call(this,r)||this;return o.code=n,o.customData=i,o.name="FirebaseError",Object.setPrototypeOf(o,e.prototype),Error.captureStackTrace&&Error.captureStackTrace(o,R.prototype.create),o}return(0,r.__extends)(e,t),e}(Error),R=function(){function t(t,e,n){this.service=t,this.serviceName=e,this.errors=n}return t.prototype.create=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r=e[0]||{},i=this.service+"/"+t,o=this.errors[t],a=o?P(o,r):"Error",s=this.serviceName+": "+a+" ("+i+").",u=new D(i,s,r);return u},t}();function P(t,e){return t.replace(x,(function(t,n){var r=e[n];return null!=r?String(r):"<"+n+"?>"}))}var x=/\{\$([^}]+)}/g;function L(t){return JSON.parse(t)}function M(t){return JSON.stringify(t)}var F=function(t){var e={},n={},r={},i="";try{var o=t.split(".");e=L(l(o[0])||""),n=L(l(o[1])||""),i=o[2],r=n.d||{},delete n.d}catch(a){}return{header:e,claims:n,data:r,signature:i}},U=function(t){var e=F(t).claims,n=Math.floor((new Date).getTime()/1e3),r=0,i=0;return"object"===typeof e&&(e.hasOwnProperty("nbf")?r=e.nbf:e.hasOwnProperty("iat")&&(r=e.iat),i=e.hasOwnProperty("exp")?e.exp:r+86400),!!n&&!!r&&!!i&&n>=r&&n<=i},j=function(t){var e=F(t).claims;return"object"===typeof e&&e.hasOwnProperty("iat")?e.iat:null},V=function(t){var e=F(t).claims;return!!e&&"object"===typeof e&&e.hasOwnProperty("iat")},B=function(t){var e=F(t).claims;return"object"===typeof e&&!0===e.admin};function q(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function K(t,e){return Object.prototype.hasOwnProperty.call(t,e)?t[e]:void 0}function G(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function H(t,e,n){var r={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=e.call(n,t[i],i,t));return r}function z(t,e){if(t===e)return!0;for(var n=Object.keys(t),r=Object.keys(e),i=0,o=n;i<o.length;i++){var a=o[i];if(!r.includes(a))return!1;var s=t[a],u=e[a];if(W(s)&&W(u)){if(!z(s,u))return!1}else if(s!==u)return!1}for(var c=0,h=r;c<h.length;c++){a=h[c];if(!n.includes(a))return!1}return!0}function W(t){return null!==t&&"object"===typeof t}function X(t){for(var e=[],n=function(t,n){Array.isArray(n)?n.forEach((function(n){e.push(encodeURIComponent(t)+"="+encodeURIComponent(n))})):e.push(encodeURIComponent(t)+"="+encodeURIComponent(n))},r=0,i=Object.entries(t);r<i.length;r++){var o=i[r];n(o[0],o[1])}return e.length?"&"+e.join("&"):""}function Q(t){var e={};return t.replace(/^\?/,"").split("&").forEach((function(t){if(t){var n=t.split("="),r=n[0],i=n[1];e[decodeURIComponent(r)]=decodeURIComponent(i)}})),e}function Y(t){var e=t.indexOf("?");if(!e)return"";var n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}var J=function(){function t(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(var t=1;t<this.blockSize;++t)this.pad_[t]=0;this.reset()}return t.prototype.reset=function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0},t.prototype.compress_=function(t,e){e||(e=0);var n=this.W_;if("string"===typeof t)for(var r=0;r<16;r++)n[r]=t.charCodeAt(e)<<24|t.charCodeAt(e+1)<<16|t.charCodeAt(e+2)<<8|t.charCodeAt(e+3),e+=4;else for(r=0;r<16;r++)n[r]=t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3],e+=4;for(r=16;r<80;r++){var i=n[r-3]^n[r-8]^n[r-14]^n[r-16];n[r]=4294967295&(i<<1|i>>>31)}var o,a,s=this.chain_[0],u=this.chain_[1],c=this.chain_[2],h=this.chain_[3],l=this.chain_[4];for(r=0;r<80;r++){r<40?r<20?(o=h^u&(c^h),a=1518500249):(o=u^c^h,a=1859775393):r<60?(o=u&c|h&(u|c),a=2400959708):(o=u^c^h,a=3395469782);i=(s<<5|s>>>27)+o+l+a+n[r]&4294967295;l=h,h=c,c=4294967295&(u<<30|u>>>2),u=s,s=i}this.chain_[0]=this.chain_[0]+s&4294967295,this.chain_[1]=this.chain_[1]+u&4294967295,this.chain_[2]=this.chain_[2]+c&4294967295,this.chain_[3]=this.chain_[3]+h&4294967295,this.chain_[4]=this.chain_[4]+l&4294967295},t.prototype.update=function(t,e){if(null!=t){void 0===e&&(e=t.length);for(var n=e-this.blockSize,r=0,i=this.buf_,o=this.inbuf_;r<e;){if(0===o)for(;r<=n;)this.compress_(t,r),r+=this.blockSize;if("string"===typeof t){for(;r<e;)if(i[o]=t.charCodeAt(r),++r,++o===this.blockSize){this.compress_(i),o=0;break}}else for(;r<e;)if(i[o]=t[r],++r,++o===this.blockSize){this.compress_(i),o=0;break}}this.inbuf_=o,this.total_+=e}},t.prototype.digest=function(){var t=[],e=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(var n=this.blockSize-1;n>=56;n--)this.buf_[n]=255&e,e/=256;this.compress_(this.buf_);var r=0;for(n=0;n<5;n++)for(var i=24;i>=0;i-=8)t[r]=this.chain_[n]>>i&255,++r;return t},t}();function $(t,e){var n=new Z(t,e);return n.subscribe.bind(n)}var Z=function(){function t(t,e){var n=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then((function(){t(n)})).catch((function(t){n.error(t)}))}return t.prototype.next=function(t){this.forEachObserver((function(e){e.next(t)}))},t.prototype.error=function(t){this.forEachObserver((function(e){e.error(t)})),this.close(t)},t.prototype.complete=function(){this.forEachObserver((function(t){t.complete()})),this.close()},t.prototype.subscribe=function(t,e,n){var r,i=this;if(void 0===t&&void 0===e&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(t,e){if("object"!==typeof t||null===t)return!1;for(var n=0,r=e;n<r.length;n++){var i=r[n];if(i in t&&"function"===typeof t[i])return!0}return!1}(t,["next","error","complete"])?t:{next:t,error:e,complete:n}).next&&(r.next=et),void 0===r.error&&(r.error=et),void 0===r.complete&&(r.complete=et);var o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(t){}})),this.observers.push(r),o},t.prototype.unsubscribeOne=function(t){void 0!==this.observers&&void 0!==this.observers[t]&&(delete this.observers[t],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},t.prototype.forEachObserver=function(t){if(!this.finalized)for(var e=0;e<this.observers.length;e++)this.sendOne(e,t)},t.prototype.sendOne=function(t,e){var n=this;this.task.then((function(){if(void 0!==n.observers&&void 0!==n.observers[t])try{e(n.observers[t])}catch(r){"undefined"!==typeof console&&console.error&&console.error(r)}}))},t.prototype.close=function(t){var e=this;this.finalized||(this.finalized=!0,void 0!==t&&(this.finalError=t),this.task.then((function(){e.observers=void 0,e.onNoObservers=void 0})))},t}();function tt(t,e){return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];Promise.resolve(!0).then((function(){t.apply(void 0,n)})).catch((function(t){e&&e(t)}))}}function et(){}var nt=function(t,e,n,r){var i;if(r<e?i="at least "+e:r>n&&(i=0===n?"none":"no more than "+n),i)throw new Error(t+" failed: Was called with "+r+(1===r?" argument.":" arguments.")+" Expects "+i+".")};function rt(t,e){return t+" failed: "+e+" argument "}function it(t,e,n){if((!n||e)&&"string"!==typeof e)throw new Error(rt(t,"namespace")+"must be a valid firebase namespace.")}function ot(t,e,n,r){if((!r||n)&&"function"!==typeof n)throw new Error(rt(t,e)+"must be a valid function.")}function at(t,e,n,r){if((!r||n)&&("object"!==typeof n||null===n))throw new Error(rt(t,e)+"must be a valid context object.")}var st=function(t){for(var e=[],n=0,r=0;r<t.length;r++){var i=t.charCodeAt(r);if(i>=55296&&i<=56319){var a=i-55296;r++,o(r<t.length,"Surrogate pair missing trail surrogate."),i=65536+(a<<10)+(t.charCodeAt(r)-56320)}i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=63&i|128):i<65536?(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=63&i|128):(e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=63&i|128)}return e},ut=function(t){for(var e=0,n=0;n<t.length;n++){var r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,n++):e+=3}return e},ct=144e5,ht=.5;function lt(t,e,n){void 0===e&&(e=1e3),void 0===n&&(n=2);var r=e*Math.pow(n,t),i=Math.round(ht*r*(Math.random()-.5)*2);return Math.min(ct,r+i)}function ft(t){return Number.isFinite(t)?t+function(t){var e=(t=Math.abs(t))%100;if(e>=10&&e<=20)return"th";var n=t%10;if(1===n)return"st";if(2===n)return"nd";if(3===n)return"rd";return"th"}(t):""+t}function pt(t){return t&&t._delegate?t._delegate:t}},8676:function(t,e){!function(t){"use strict";function e(t){return Array.prototype.slice.call(t)}function n(t){return new Promise((function(e,n){t.onsuccess=function(){e(t.result)},t.onerror=function(){n(t.error)}}))}function r(t,e,r){var i,o=new Promise((function(o,a){n(i=t[e].apply(t,r)).then(o,a)}));return o.request=i,o}function i(t,e,n){var i=r(t,e,n);return i.then((function(t){if(t)return new h(t,i.request)}))}function o(t,e,n){n.forEach((function(n){Object.defineProperty(t.prototype,n,{get:function(){return this[e][n]},set:function(t){this[e][n]=t}})}))}function a(t,e,n,i){i.forEach((function(i){i in n.prototype&&(t.prototype[i]=function(){return r(this[e],i,arguments)})}))}function s(t,e,n,r){r.forEach((function(r){r in n.prototype&&(t.prototype[r]=function(){return this[e][r].apply(this[e],arguments)})}))}function u(t,e,n,r){r.forEach((function(r){r in n.prototype&&(t.prototype[r]=function(){return i(this[e],r,arguments)})}))}function c(t){this._index=t}function h(t,e){this._cursor=t,this._request=e}function l(t){this._store=t}function f(t){this._tx=t,this.complete=new Promise((function(e,n){t.oncomplete=function(){e()},t.onerror=function(){n(t.error)},t.onabort=function(){n(t.error)}}))}function p(t,e,n){this._db=t,this.oldVersion=e,this.transaction=new f(n)}function d(t){this._db=t}function v(t,e,n){var i=r(indexedDB,"open",[t,e]),o=i.request;return o&&(o.onupgradeneeded=function(t){n&&n(new p(o.result,t.oldVersion,o.transaction))}),i.then((function(t){return new d(t)}))}function g(t){return r(indexedDB,"deleteDatabase",[t])}o(c,"_index",["name","keyPath","multiEntry","unique"]),a(c,"_index",IDBIndex,["get","getKey","getAll","getAllKeys","count"]),u(c,"_index",IDBIndex,["openCursor","openKeyCursor"]),o(h,"_cursor",["direction","key","primaryKey","value"]),a(h,"_cursor",IDBCursor,["update","delete"]),["advance","continue","continuePrimaryKey"].forEach((function(t){t in IDBCursor.prototype&&(h.prototype[t]=function(){var e=this,r=arguments;return Promise.resolve().then((function(){return e._cursor[t].apply(e._cursor,r),n(e._request).then((function(t){if(t)return new h(t,e._request)}))}))})})),l.prototype.createIndex=function(){return new c(this._store.createIndex.apply(this._store,arguments))},l.prototype.index=function(){return new c(this._store.index.apply(this._store,arguments))},o(l,"_store",["name","keyPath","indexNames","autoIncrement"]),a(l,"_store",IDBObjectStore,["put","add","delete","clear","get","getAll","getKey","getAllKeys","count"]),u(l,"_store",IDBObjectStore,["openCursor","openKeyCursor"]),s(l,"_store",IDBObjectStore,["deleteIndex"]),f.prototype.objectStore=function(){return new l(this._tx.objectStore.apply(this._tx,arguments))},o(f,"_tx",["objectStoreNames","mode"]),s(f,"_tx",IDBTransaction,["abort"]),p.prototype.createObjectStore=function(){return new l(this._db.createObjectStore.apply(this._db,arguments))},o(p,"_db",["name","version","objectStoreNames"]),s(p,"_db",IDBDatabase,["deleteObjectStore","close"]),d.prototype.transaction=function(){return new f(this._db.transaction.apply(this._db,arguments))},o(d,"_db",["name","version","objectStoreNames"]),s(d,"_db",IDBDatabase,["close"]),["openCursor","openKeyCursor"].forEach((function(t){[l,c].forEach((function(n){t in n.prototype&&(n.prototype[t.replace("open","iterate")]=function(){var n=e(arguments),r=n[n.length-1],i=this._store||this._index,o=i[t].apply(i,n.slice(0,-1));o.onsuccess=function(){r(o.result)}})}))})),[c,l].forEach((function(t){t.prototype.getAll||(t.prototype.getAll=function(t,e){var n=this,r=[];return new Promise((function(i){n.iterateCursor(t,(function(t){t?(r.push(t.value),void 0===e||r.length!=e?t.continue():i(r)):i(r)}))}))})})),t.openDb=v,t.deleteDb=g,Object.defineProperty(t,"__esModule",{value:!0})}(e)},3454:function(t,e,n){"use strict";var r,i;t.exports=(null===(r=n.g.process)||void 0===r?void 0:r.env)&&"object"===typeof(null===(i=n.g.process)||void 0===i?void 0:i.env)?n.g.process:n(7663)},6363:function(t,e,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/_app",function(){return n(5656)}])},5656:function(t,e,n){"use strict";n.r(e);var r=n(5893),i=n(6385);n(7332);function o(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}e.default=function(t){var e=t.Component,n=t.pageProps;return null==i.xc.getTempUser()&&i.xc.initTempUser(),(0,r.jsx)(e,function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable})))),r.forEach((function(e){o(t,e,n[e])}))}return t}({},n))}},7630:function(t,e,n){"use strict";n.d(e,{A:function(){return r},e:function(){return i}});var r="0.1.19",i=10},1071:function(t,e,n){"use strict";n.d(e,{f:function(){return i}});var r=n(8546),i=(0,r.yv)()?{FIREBASE_STORAGE_USER_GENERATED:"shots-user-generated",FIREBASE_API_KEY:"AIzaSyCm-gj6lGRN-7cUgqSm1yps5cPSaQ-olWU",FIREBASE_AUTH_DOMAIN:"shotsappso.firebaseapp.com",FIREBASE_PROJECT_ID:"shotsappso",FIREBASE_STORAGE_BUCKET:"shotsappso.appspot.com",FIREBASE_MESSAGING_SENDER_ID:"24168713789",FIREBASE_APP_ID:"1:24168713789:web:eb8eba19b97183156c6454",FIREBASE_MEASURMENT_ID:"G-2C7JMYNZ5P",TYPE:"prod"}:{FIREBASE_STORAGE_USER_GENERATED:"shots-user-generated",FIREBASE_API_KEY:"AIzaSyCm-gj6lGRN-7cUgqSm1yps5cPSaQ-olWU",FIREBASE_AUTH_DOMAIN:"shotsappso.firebaseapp.com",FIREBASE_PROJECT_ID:"shotsappso",FIREBASE_STORAGE_BUCKET:"shotsappso.appspot.com",FIREBASE_MESSAGING_SENDER_ID:"24168713789",FIREBASE_APP_ID:"1:24168713789:web:eb8eba19b97183156c6454",FIREBASE_MEASURMENT_ID:"G-2C7JMYNZ5P",TYPE:"dev"};(0,r.yv)()},1685:function(t,e,n){"use strict";n.d(e,{$2:function(){return u},j$:function(){return c}});var r=n(8546);function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function a(t,e,n){return e&&o(t.prototype,e),n&&o(t,n),t}var s=function(){function t(e){var n,r;i(this,t),this.uid=null!==(n=null===e||void 0===e?void 0:e.uid)&&void 0!==n?n:"",this.email=null!==(r=null===e||void 0===e?void 0:e.email)&&void 0!==r?r:"",this.name=null===e||void 0===e?void 0:e.name}return a(t,[{key:"toJSON",value:function(){return{uid:this.uid,email:this.email,name:this.name}}}]),t}(),u=function(){function t(e){i(this,t),this.createdAt=e.createdAt,this.user=new s(e.user)}return a(t,[{key:"toJSON",value:function(){return{user:this.user.toJSON()}}}]),t}(),c=function(){function t(e){var n;i(this,t),this.uid=null!==(n=null===e||void 0===e?void 0:e.uid)&&void 0!==n?n:(0,r.c9)()}return a(t,[{key:"toJSON",value:function(){return{uid:this.uid}}}]),t}()},2107:function(t,e,n){"use strict";var r=n(4051),i=n.n(r),o=n(1850),a=n(1685),s=n(2373);function u(t,e,n,r,i,o,a){try{var s=t[o](a),u=s.value}catch(c){return void n(c)}s.done?e(u):Promise.resolve(u).then(r,i)}function c(t){return function(){var e=this,n=arguments;return new Promise((function(r,i){var o=t.apply(e,n);function a(t){u(o,r,i,a,s,"next",t)}function s(t){u(o,r,i,a,s,"throw",t)}a(void 0)}))}}function h(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var l=new(function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.db=s.wC.firestore(),this.auth=s.wC.auth()}var e,n,r;return e=t,(n=[{key:"getUser",value:function(t){var e=this;return c(i().mark((function n(){var r,o,s,u;return i().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=e.db.collection("users").doc("private").collection("users").doc(t),n.next=3,r.get();case 3:if(o=n.sent,null!==(u=null!==(s=null===o||void 0===o?void 0:o.data())&&void 0!==s?s:null)){n.next=8;break}return n.abrupt("return",null);case 8:return n.abrupt("return",new a.$2(u));case 9:case"end":return n.stop()}}),n)})))()}},{key:"listenToUser",value:function(t){var e=this.db.collection("users").doc("private").collection("users").doc(t);return new o.y((function(t){var n=e.onSnapshot((function(e){var n,r=null!==(n=null===e||void 0===e?void 0:e.data())&&void 0!==n?n:null;null!==r?t.next(new a.$2(r)):t.next(null)}));return function(){return n()}}))}},{key:"emailSignIn",value:function(t,e){var n=this;return c(i().mark((function r(){return i().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,n.auth.signInWithEmailAndPassword(t,e);case 2:return r.abrupt("return",r.sent);case 3:case"end":return r.stop()}}),r)})))()}},{key:"emailSignUpAndCreateAccount",value:function(t,e){var n=this;return c(i().mark((function r(){var o;return i().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,n.auth.createUserWithEmailAndPassword(t,e);case 2:return o=r.sent,r.next=5,n.createAccount(o);case 5:case"end":return r.stop()}}),r)})))()}},{key:"googleSignIn",value:function(){var t=this;return c(i().mark((function e(){var n;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=new s.wC.auth.GoogleAuthProvider).setCustomParameters({prompt:"select_account"}),e.next=4,t.auth.signInWithPopup(n);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})))()}},{key:"googleSignUp",value:function(){var t=this;return c(i().mark((function e(){var n,r;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=new s.wC.auth.GoogleAuthProvider).setCustomParameters({prompt:"select_account"}),e.next=4,t.auth.signInWithPopup(n);case 4:return r=e.sent,e.next=7,t.createAccount(r);case 7:return e.abrupt("return",r);case 8:case"end":return e.stop()}}),e)})))()}},{key:"createAccount",value:function(t){var e=this;return c(i().mark((function n(){var r,o,a,u,c,h;return i().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(r=t.user){n.next=3;break}return n.abrupt("return");case 3:return o=e.db.collection("users").doc("private").collection("users").doc(r.uid),a=e.db.collection("users").doc("public").collection("users").doc(r.uid),n.next=7,o.get();case 7:if(!n.sent.exists){n.next=10;break}return n.abrupt("return");case 10:u=r.email,c=r.displayName,h=r.photoURL,o.set({createdAt:(0,s.Bt)(),user:{email:u,name:c,photoURL:h,uid:r.uid}}),a.set({createdAt:(0,s.Bt)(),user:{email:u,name:c,photoURL:h,uid:r.uid}});case 13:case"end":return n.stop()}}),n)})))()}}])&&h(e.prototype,n),r&&h(e,r),t}());e.Z=l},2373:function(t,e,n){"use strict";n.d(e,{wC:function(){return r.default},RZ:function(){return My},Bt:function(){return Fy}});var r=n(6099),i="8.10.1";r.default.registerVersion("firebase",i,"app"),r.default.SDK_VERSION=i,function(){var t,e="function"==typeof Object.defineProperties?Object.defineProperty:function(t,e,n){t!=Array.prototype&&t!=Object.prototype&&(t[e]=n.value)};var i=function(t){t=["object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof n.g&&n.g,t];for(var e=0;e<t.length;++e){var r=t[e];if(r&&r.Math==Math)return r}return globalThis}(this);function o(t){var e=0;return function(){return e<t.length?{done:!1,value:t[e++]}:{done:!0}}}function a(t){var e="undefined"!=typeof Symbol&&Symbol.iterator&&t[Symbol.iterator];return e?e.call(t):{next:o(t)}}!function(t,n){if(n){var r=i;t=t.split(".");for(var o=0;o<t.length-1;o++){var a=t[o];a in r||(r[a]={}),r=r[a]}(n=n(o=r[t=t[t.length-1]]))!=o&&null!=n&&e(r,t,{configurable:!0,writable:!0,value:n})}}("Promise",(function(t){function e(t){this.b=0,this.c=void 0,this.a=[];var e=this.f();try{t(e.resolve,e.reject)}catch(n){e.reject(n)}}function n(){this.a=null}function r(t){return t instanceof e?t:new e((function(e){e(t)}))}if(t)return t;n.prototype.b=function(t){if(null==this.a){this.a=[];var e=this;this.c((function(){e.g()}))}this.a.push(t)};var o=i.setTimeout;n.prototype.c=function(t){o(t,0)},n.prototype.g=function(){for(;this.a&&this.a.length;){var t=this.a;this.a=[];for(var e=0;e<t.length;++e){var n=t[e];t[e]=null;try{n()}catch(Xt){this.f(Xt)}}}this.a=null},n.prototype.f=function(t){this.c((function(){throw t}))},e.prototype.f=function(){function t(t){return function(r){n||(n=!0,t.call(e,r))}}var e=this,n=!1;return{resolve:t(this.m),reject:t(this.g)}},e.prototype.m=function(t){if(t===this)this.g(new TypeError("A Promise cannot resolve to itself"));else if(t instanceof e)this.s(t);else{t:switch(typeof t){case"object":var n=null!=t;break t;case"function":n=!0;break t;default:n=!1}n?this.v(t):this.h(t)}},e.prototype.v=function(t){var e=void 0;try{e=t.then}catch(n){return void this.g(n)}"function"==typeof e?this.u(e,t):this.h(t)},e.prototype.g=function(t){this.i(2,t)},e.prototype.h=function(t){this.i(1,t)},e.prototype.i=function(t,e){if(0!=this.b)throw Error("Cannot settle("+t+", "+e+"): Promise already settled in state"+this.b);this.b=t,this.c=e,this.l()},e.prototype.l=function(){if(null!=this.a){for(var t=0;t<this.a.length;++t)s.b(this.a[t]);this.a=null}};var s=new n;return e.prototype.s=function(t){var e=this.f();t.Ra(e.resolve,e.reject)},e.prototype.u=function(t,e){var n=this.f();try{t.call(e,n.resolve,n.reject)}catch(Xt){n.reject(Xt)}},e.prototype.then=function(t,n){function r(t,e){return"function"==typeof t?function(e){try{i(t(e))}catch(vi){o(vi)}}:e}var i,o,a=new e((function(t,e){i=t,o=e}));return this.Ra(r(t,i),r(n,o)),a},e.prototype.catch=function(t){return this.then(void 0,t)},e.prototype.Ra=function(t,e){function n(){switch(r.b){case 1:t(r.c);break;case 2:e(r.c);break;default:throw Error("Unexpected state: "+r.b)}}var r=this;null==this.a?s.b(n):this.a.push(n)},e.resolve=r,e.reject=function(t){return new e((function(e,n){n(t)}))},e.race=function(t){return new e((function(e,n){for(var i=a(t),o=i.next();!o.done;o=i.next())r(o.value).Ra(e,n)}))},e.all=function(t){var n=a(t),i=n.next();return i.done?r([]):new e((function(t,e){function o(e){return function(n){a[e]=n,0==--s&&t(a)}}var a=[],s=0;do{a.push(void 0),s++,r(i.value).Ra(o(a.length-1),e),i=n.next()}while(!i.done)}))},e}));var s=s||{},u=this||self,c=/^[\w+/_-]+[=]{0,2}$/,h=null;function l(t){return(t=t.querySelector&&t.querySelector("script[nonce]"))&&(t=t.nonce||t.getAttribute("nonce"))&&c.test(t)?t:""}function f(){}function p(t){var e=typeof t;return"object"!=e?e:t?Array.isArray(t)?"array":e:"null"}function d(t){var e=p(t);return"array"==e||"object"==e&&"number"==typeof t.length}function v(t){return"function"==p(t)}function g(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}function m(t){return Object.prototype.hasOwnProperty.call(t,y)&&t[y]||(t[y]=++b)}var y="closure_uid_"+(1e9*Math.random()>>>0),b=0;function w(t,e,n){return t.call.apply(t.bind,arguments)}function _(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function I(t,e,n){return(I=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?w:_).apply(null,arguments)}function T(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}var E=Date.now;function S(t,e){function n(){}n.prototype=e.prototype,t.bb=e.prototype,t.prototype=new n,t.prototype.constructor=t}function A(t){return t}function k(t,e,n){this.code=O+t,this.message=e||D[t]||"",this.a=n||null}function N(t){var e=t&&t.code;return e?new k(e.substring(O.length),t.message,t.serverResponse):null}S(k,Error),k.prototype.w=function(){var t={code:this.code,message:this.message};return this.a&&(t.serverResponse=this.a),t},k.prototype.toJSON=function(){return this.w()};var C,O="auth/",D={"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","expired-action-code":"The action code has expired. ","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal error has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal error has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal error has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network error (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal error has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled."},R={ld:{Ua:"https://staging-identitytoolkit.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/",$a:"https://staging-securetoken.sandbox.googleapis.com/v1/token",Xa:"https://staging-identitytoolkit.sandbox.googleapis.com/v2/",id:"b"},sd:{Ua:"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",$a:"https://securetoken.googleapis.com/v1/token",Xa:"https://identitytoolkit.googleapis.com/v2/",id:"p"},ud:{Ua:"https://staging-www.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/",$a:"https://staging-securetoken.sandbox.googleapis.com/v1/token",Xa:"https://staging-identitytoolkit.sandbox.googleapis.com/v2/",id:"s"},vd:{Ua:"https://www-googleapis-test.sandbox.google.com/identitytoolkit/v3/relyingparty/",$a:"https://test-securetoken.sandbox.googleapis.com/v1/token",Xa:"https://test-identitytoolkit.sandbox.googleapis.com/v2/",id:"t"}};function P(t){for(var e in R)if(R[e].id===t)return{firebaseEndpoint:(t=R[e]).Ua,secureTokenEndpoint:t.$a,identityPlatformEndpoint:t.Xa};return null}function x(t){if(!t)return!1;try{return!!t.$goog_Thenable}catch(e){return!1}}function L(t){if(Error.captureStackTrace)Error.captureStackTrace(this,L);else{var e=Error().stack;e&&(this.stack=e)}t&&(this.message=String(t))}function M(t,e){for(var n="",r=(t=t.split("%s")).length-1,i=0;i<r;i++)n+=t[i]+(i<e.length?e[i]:"%s");L.call(this,n+t[r])}function F(t,e){throw new M("Failure"+(t?": "+t:""),Array.prototype.slice.call(arguments,1))}function U(t,e){this.c=t,this.f=e,this.b=0,this.a=null}function j(t,e){t.f(e),100>t.b&&(t.b++,e.next=t.a,t.a=e)}function V(){this.b=this.a=null}C=P("__EID__")?"__EID__":void 0,S(L,Error),L.prototype.name="CustomError",S(M,L),M.prototype.name="AssertionError",U.prototype.get=function(){if(0<this.b){this.b--;var t=this.a;this.a=t.next,t.next=null}else t=this.c();return t};var B=new U((function(){return new K}),(function(t){t.reset()}));function q(){var t=_e,e=null;return t.a&&(e=t.a,t.a=t.a.next,t.a||(t.b=null),e.next=null),e}function K(){this.next=this.b=this.a=null}V.prototype.add=function(t,e){var n=B.get();n.set(t,e),this.b?this.b.next=n:this.a=n,this.b=n},K.prototype.set=function(t,e){this.a=t,this.b=e,this.next=null},K.prototype.reset=function(){this.next=this.b=this.a=null};var G=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"===typeof t)return"string"!==typeof e||1!=e.length?-1:t.indexOf(e,0);for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},H=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i="string"===typeof t?t.split(""):t,o=0;o<r;o++)o in i&&e.call(n,i[o],o,t)};var z=Array.prototype.filter?function(t,e){return Array.prototype.filter.call(t,e,void 0)}:function(t,e){for(var n=t.length,r=[],i=0,o="string"===typeof t?t.split(""):t,a=0;a<n;a++)if(a in o){var s=o[a];e.call(void 0,s,a,t)&&(r[i++]=s)}return r},W=Array.prototype.map?function(t,e){return Array.prototype.map.call(t,e,void 0)}:function(t,e){for(var n=t.length,r=Array(n),i="string"===typeof t?t.split(""):t,o=0;o<n;o++)o in i&&(r[o]=e.call(void 0,i[o],o,t));return r},X=Array.prototype.some?function(t,e){return Array.prototype.some.call(t,e,void 0)}:function(t,e){for(var n=t.length,r="string"===typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t))return!0;return!1};function Q(t,e){return 0<=G(t,e)}function Y(t,e){var n;return(n=0<=(e=G(t,e)))&&Array.prototype.splice.call(t,e,1),n}function J(t,e){!function(t,e){for(var n="string"===typeof t?t.split(""):t,r=t.length-1;0<=r;--r)r in n&&e.call(void 0,n[r],r,t)}(t,(function(n,r){e.call(void 0,n,r,t)&&1==Array.prototype.splice.call(t,r,1).length&&0}))}function $(t){return Array.prototype.concat.apply([],arguments)}function Z(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}var tt,et=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]},nt=/&/g,rt=/</g,it=/>/g,ot=/"/g,at=/'/g,st=/\x00/g,ut=/[\x00&<>"']/;function ct(t,e){return-1!=t.indexOf(e)}function ht(t,e){return t<e?-1:t>e?1:0}t:{var lt=u.navigator;if(lt){var ft=lt.userAgent;if(ft){tt=ft;break t}}tt=""}function pt(t){return ct(tt,t)}function dt(t,e){for(var n in t)e.call(void 0,t[n],n,t)}function vt(t){for(var e in t)return!1;return!0}function gt(t){var e,n={};for(e in t)n[e]=t[e];return n}var mt="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function yt(t,e){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])t[n]=r[n];for(var o=0;o<mt.length;o++)n=mt[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function bt(t,e){t:{try{var n=t&&t.ownerDocument,r=n&&(n.defaultView||n.parentWindow);if((r=r||u).Element&&r.Location){var i=r;break t}}catch(a){}i=null}if(i&&"undefined"!=typeof i[e]&&(!t||!(t instanceof i[e])&&(t instanceof i.Location||t instanceof i.Element))){if(g(t))try{var o=t.constructor.displayName||t.constructor.name||Object.prototype.toString.call(t)}catch(a){o="<object could not be stringified>"}else o=void 0===t?"undefined":null===t?"null":typeof t;F("Argument is not a %s (or a non-Element, non-Location mock); got: %s",e,o)}}function wt(t,e){this.a=t===Et&&e||"",this.b=Tt}function _t(t){return t instanceof wt&&t.constructor===wt&&t.b===Tt?t.a:(F("expected object of type Const, got '"+t+"'"),"type_error:Const")}wt.prototype.ta=!0,wt.prototype.sa=function(){return this.a},wt.prototype.toString=function(){return"Const{"+this.a+"}"};var It,Tt={},Et={};function St(){if(void 0===It){var t=null,e=u.trustedTypes;if(e&&e.createPolicy){try{t=e.createPolicy("goog#html",{createHTML:A,createScript:A,createScriptURL:A})}catch(n){u.console&&u.console.error(n.message)}It=t}else It=t}return It}function At(t,e){this.a=e===Dt?t:""}function kt(t){return t instanceof At&&t.constructor===At?t.a:(F("expected object of type TrustedResourceUrl, got '"+t+"' of type "+p(t)),"type_error:TrustedResourceUrl")}function Nt(t,e){var n=_t(t);if(!Ot.test(n))throw Error("Invalid TrustedResourceUrl format: "+n);return function(t){var e=St();return new At(t=e?e.createScriptURL(t):t,Dt)}(t=n.replace(Ct,(function(t,r){if(!Object.prototype.hasOwnProperty.call(e,r))throw Error('Found marker, "'+r+'", in format string, "'+n+'", but no valid label mapping found in args: '+JSON.stringify(e));return(t=e[r])instanceof wt?_t(t):encodeURIComponent(String(t))})))}At.prototype.ta=!0,At.prototype.sa=function(){return this.a.toString()},At.prototype.toString=function(){return"TrustedResourceUrl{"+this.a+"}"};var Ct=/%{(\w+)}/g,Ot=/^((https:)?\/\/[0-9a-z.:[\]-]+\/|\/[^/\\]|[^:/\\%]+\/|[^:/\\%]*[?#]|about:blank#)/i,Dt={};function Rt(t,e){this.a=e===jt?t:""}function Pt(t){return t instanceof Rt&&t.constructor===Rt?t.a:(F("expected object of type SafeUrl, got '"+t+"' of type "+p(t)),"type_error:SafeUrl")}Rt.prototype.ta=!0,Rt.prototype.sa=function(){return this.a.toString()},Rt.prototype.toString=function(){return"SafeUrl{"+this.a+"}"};var xt=/^(?:audio\/(?:3gpp2|3gpp|aac|L16|midi|mp3|mp4|mpeg|oga|ogg|opus|x-m4a|x-matroska|x-wav|wav|webm)|font\/\w+|image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp|x-icon)|text\/csv|video\/(?:mpeg|mp4|ogg|webm|quicktime|x-matroska))(?:;\w+=(?:\w+|"[\w;,= ]+"))*$/i,Lt=/^data:(.*);base64,[a-z0-9+\/]+=*$/i,Mt=/^(?:(?:https?|mailto|ftp):|[^:/?#]*(?:[/?#]|$))/i;function Ft(t){if(t instanceof Rt)return t;if(t="object"==typeof t&&t.ta?t.sa():String(t),Mt.test(t))t=new Rt(t,jt);else{var e=(t=(t=String(t)).replace(/(%0A|%0D)/g,"")).match(Lt);t=e&&xt.test(e[1])?new Rt(t,jt):null}return t}function Ut(t){return t instanceof Rt?t:(t="object"==typeof t&&t.ta?t.sa():String(t),Mt.test(t)||(t="about:invalid#zClosurez"),new Rt(t,jt))}var jt={},Vt=new Rt("about:invalid#zClosurez",jt);function Bt(t,e,n){this.a=n===qt?t:""}Bt.prototype.ta=!0,Bt.prototype.sa=function(){return this.a.toString()},Bt.prototype.toString=function(){return"SafeHtml{"+this.a+"}"};var qt={};function Kt(t,e,n,r){return t=t instanceof Rt?t:Ut(t),e=e||u,n=n instanceof wt?_t(n):n||"",e.open(Pt(t),n,r,void 0)}function Gt(t,e){for(var n=t.split("%s"),r="",i=Array.prototype.slice.call(arguments,1);i.length&&1<n.length;)r+=n.shift()+i.shift();return r+n.join("%s")}function Ht(t){return ut.test(t)&&(-1!=t.indexOf("&")&&(t=t.replace(nt,"&amp;")),-1!=t.indexOf("<")&&(t=t.replace(rt,"&lt;")),-1!=t.indexOf(">")&&(t=t.replace(it,"&gt;")),-1!=t.indexOf('"')&&(t=t.replace(ot,"&quot;")),-1!=t.indexOf("'")&&(t=t.replace(at,"&#39;")),-1!=t.indexOf("\0")&&(t=t.replace(st,"&#0;"))),t}function zt(t){return zt[" "](t),t}zt[" "]=f;var Wt,Qt=pt("Opera"),Yt=pt("Trident")||pt("MSIE"),Jt=pt("Edge"),$t=Jt||Yt,Zt=pt("Gecko")&&!(ct(tt.toLowerCase(),"webkit")&&!pt("Edge"))&&!(pt("Trident")||pt("MSIE"))&&!pt("Edge"),te=ct(tt.toLowerCase(),"webkit")&&!pt("Edge");function ee(){var t=u.document;return t?t.documentMode:void 0}t:{var ne="",re=function(){var t=tt;return Zt?/rv:([^\);]+)(\)|;)/.exec(t):Jt?/Edge\/([\d\.]+)/.exec(t):Yt?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t):te?/WebKit\/(\S+)/.exec(t):Qt?/(?:Version)[ \/]?(\S+)/.exec(t):void 0}();if(re&&(ne=re?re[1]:""),Yt){var ie=ee();if(null!=ie&&ie>parseFloat(ne)){Wt=String(ie);break t}}Wt=ne}var oe,ae={};function se(t){return function(t,e){var n=ae;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t)}(t,(function(){for(var e=0,n=et(String(Wt)).split("."),r=et(String(t)).split("."),i=Math.max(n.length,r.length),o=0;0==e&&o<i;o++){var a=n[o]||"",s=r[o]||"";do{if(a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],0==a[0].length&&0==s[0].length)break;e=ht(0==a[1].length?0:parseInt(a[1],10),0==s[1].length?0:parseInt(s[1],10))||ht(0==a[2].length,0==s[2].length)||ht(a[2],s[2]),a=a[3],s=s[3]}while(0==e)}return 0<=e}))}if(u.document&&Yt){var ue=ee();oe=ue||(parseInt(Wt,10)||void 0)}else oe=void 0;var ce=oe;try{new self.OffscreenCanvas(0,0).getContext("2d")}catch(da){}var he=!Yt||9<=Number(ce);function le(t){var e=document;return"string"===typeof t?e.getElementById(t):t}function fe(t,e){dt(e,(function(e,n){e&&"object"==typeof e&&e.ta&&(e=e.sa()),"style"==n?t.style.cssText=e:"class"==n?t.className=e:"for"==n?t.htmlFor=e:ve.hasOwnProperty(n)?t.setAttribute(ve[n],e):0==n.lastIndexOf("aria-",0)||0==n.lastIndexOf("data-",0)?t.setAttribute(n,e):t[n]=e}))}var pe,de,ve={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",frameborder:"frameBorder",height:"height",maxlength:"maxLength",nonce:"nonce",role:"role",rowspan:"rowSpan",type:"type",usemap:"useMap",valign:"vAlign",width:"width"};function ge(t,e,n){function r(n){n&&e.appendChild("string"===typeof n?t.createTextNode(n):n)}for(var i=2;i<n.length;i++){var o=n[i];if(!d(o)||g(o)&&0<o.nodeType)r(o);else{t:{if(o&&"number"==typeof o.length){if(g(o)){var a="function"==typeof o.item||"string"==typeof o.item;break t}if(v(o)){a="function"==typeof o.item;break t}}a=!1}H(a?Z(o):o,r)}}}function me(t,e){return e=String(e),"application/xhtml+xml"===t.contentType&&(e=e.toLowerCase()),t.createElement(e)}function ye(t){u.setTimeout((function(){throw t}),0)}function be(t,e){de||function(){if(u.Promise&&u.Promise.resolve){var t=u.Promise.resolve(void 0);de=function(){t.then(Ie)}}else de=function(){var t=Ie;!v(u.setImmediate)||u.Window&&u.Window.prototype&&!pt("Edge")&&u.Window.prototype.setImmediate==u.setImmediate?(pe||(pe=function(){var t=u.MessageChannel;if("undefined"===typeof t&&"undefined"!==typeof window&&window.postMessage&&window.addEventListener&&!pt("Presto")&&(t=function(){var t=me(document,"IFRAME");t.style.display="none",document.documentElement.appendChild(t);var e=t.contentWindow;(t=e.document).open(),t.close();var n="callImmediate"+Math.random(),r="file:"==e.location.protocol?"*":e.location.protocol+"//"+e.location.host;t=I((function(t){"*"!=r&&t.origin!=r||t.data!=n||this.port1.onmessage()}),this),e.addEventListener("message",t,!1),this.port1={},this.port2={postMessage:function(){e.postMessage(n,r)}}}),"undefined"!==typeof t&&!pt("Trident")&&!pt("MSIE")){var e=new t,n={},r=n;return e.port1.onmessage=function(){if(void 0!==n.next){var t=(n=n.next).Hb;n.Hb=null,t()}},function(t){r.next={Hb:t},r=r.next,e.port2.postMessage(0)}}return function(t){u.setTimeout(t,0)}}()),pe(t)):u.setImmediate(t)}}(),we||(de(),we=!0),_e.add(t,e)}var we=!1,_e=new V;function Ie(){for(var t;t=q();){try{t.a.call(t.b)}catch(e){ye(e)}j(B,t)}we=!1}function Te(t,e){if(this.a=Ee,this.i=void 0,this.f=this.b=this.c=null,this.g=this.h=!1,t!=f)try{var n=this;t.call(e,(function(t){Fe(n,Se,t)}),(function(t){if(!(t instanceof Ge))try{if(t instanceof Error)throw t;throw Error("Promise rejected.")}catch(dv){}Fe(n,Ae,t)}))}catch(r){Fe(this,Ae,r)}}var Ee=0,Se=2,Ae=3;function ke(){this.next=this.f=this.b=this.g=this.a=null,this.c=!1}ke.prototype.reset=function(){this.f=this.b=this.g=this.a=null,this.c=!1};var Ne=new U((function(){return new ke}),(function(t){t.reset()}));function Ce(t,e,n){var r=Ne.get();return r.g=t,r.b=e,r.f=n,r}function Oe(t){if(t instanceof Te)return t;var e=new Te(f);return Fe(e,Se,t),e}function De(t){return new Te((function(e,n){n(t)}))}function Re(t,e,n){Ue(t,e,n,null)||be(T(e,t))}function Pe(t){return new Te((function(e){var n=t.length,r=[];if(n)for(var i=function(t,i,o){n--,r[t]=i?{Qb:!0,value:o}:{Qb:!1,reason:o},0==n&&e(r)},o=0;o<t.length;o++)Re(t[o],T(i,o,!0),T(i,o,!1));else e(r)}))}function xe(t,e){if(t.a==Ee)if(t.c){var n=t.c;if(n.b){for(var r=0,i=null,o=null,a=n.b;a&&(a.c||(r++,a.a==t&&(i=a),!(i&&1<r)));a=a.next)i||(o=a);i&&(n.a==Ee&&1==r?xe(n,e):(o?((r=o).next==n.f&&(n.f=r),r.next=r.next.next):Ve(n),Be(n,i,Ae,e)))}t.c=null}else Fe(t,Ae,e)}function Le(t,e){t.b||t.a!=Se&&t.a!=Ae||je(t),t.f?t.f.next=e:t.b=e,t.f=e}function Me(t,e,n,r){var i=Ce(null,null,null);return i.a=new Te((function(t,o){i.g=e?function(n){try{var i=e.call(r,n);t(i)}catch(Xt){o(Xt)}}:t,i.b=n?function(e){try{var i=n.call(r,e);void 0===i&&e instanceof Ge?o(e):t(i)}catch(Xt){o(Xt)}}:o})),i.a.c=t,Le(t,i),i.a}function Fe(t,e,n){t.a==Ee&&(t===n&&(e=Ae,n=new TypeError("Promise cannot resolve to itself")),t.a=1,Ue(n,t.$c,t.ad,t)||(t.i=n,t.a=e,t.c=null,je(t),e!=Ae||n instanceof Ge||function(t,e){t.g=!0,be((function(){t.g&&Ke.call(null,e)}))}(t,n)))}function Ue(t,e,n,r){if(t instanceof Te)return Le(t,Ce(e||f,n||null,r)),!0;if(x(t))return t.then(e,n,r),!0;if(g(t))try{var i=t.then;if(v(i))return function(t,e,n,r,i){function o(t){s||(s=!0,r.call(i,t))}function a(t){s||(s=!0,n.call(i,t))}var s=!1;try{e.call(t,a,o)}catch(u){o(u)}}(t,i,e,n,r),!0}catch(o){return n.call(r,o),!0}return!1}function je(t){t.h||(t.h=!0,be(t.gc,t))}function Ve(t){var e=null;return t.b&&(e=t.b,t.b=e.next,e.next=null),t.b||(t.f=null),e}function Be(t,e,n,r){if(n==Ae&&e.b&&!e.c)for(;t&&t.g;t=t.c)t.g=!1;if(e.a)e.a.c=null,qe(e,n,r);else try{e.c?e.g.call(e.f):qe(e,n,r)}catch(dv){Ke.call(null,dv)}j(Ne,e)}function qe(t,e,n){e==Se?t.g.call(t.f,n):t.b&&t.b.call(t.f,n)}Te.prototype.then=function(t,e,n){return Me(this,v(t)?t:null,v(e)?e:null,n)},Te.prototype.$goog_Thenable=!0,(t=Te.prototype).oa=function(t,e){return(t=Ce(t,t,e)).c=!0,Le(this,t),this},t.o=function(t,e){return Me(this,null,t,e)},t.cancel=function(t){if(this.a==Ee){var e=new Ge(t);be((function(){xe(this,e)}),this)}},t.$c=function(t){this.a=Ee,Fe(this,Se,t)},t.ad=function(t){this.a=Ee,Fe(this,Ae,t)},t.gc=function(){for(var t;t=Ve(this);)Be(this,t,this.a,this.i);this.h=!1};var Ke=ye;function Ge(t){L.call(this,t)}function He(){0!=ze&&(We[m(this)]=this),this.ya=this.ya,this.pa=this.pa}S(Ge,L),Ge.prototype.name="cancel";var ze=0,We={};function Xe(t){if(!t.ya&&(t.ya=!0,t.Da(),0!=ze)){var e=m(t);if(0!=ze&&t.pa&&0<t.pa.length)throw Error(t+" did not empty its onDisposeCallbacks queue. This probably means it overrode dispose() or disposeInternal() without calling the superclass' method.");delete We[e]}}He.prototype.ya=!1,He.prototype.Da=function(){if(this.pa)for(;this.pa.length;)this.pa.shift()()};var Qe=Object.freeze||function(t){return t},Ye=!Yt||9<=Number(ce),Je=Yt&&!se("9"),$e=function(){if(!u.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{u.addEventListener("test",f,e),u.removeEventListener("test",f,e)}catch(n){}return t}();function Ze(t,e){this.type=t,this.b=this.target=e,this.defaultPrevented=!1}function tn(t,e){if(Ze.call(this,t?t.type:""),this.relatedTarget=this.b=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.a=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.b=e,e=t.relatedTarget){if(Zt){t:{try{zt(e.nodeName);var i=!0;break t}catch(o){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"===typeof t.pointerType?t.pointerType:en[t.pointerType]||"",this.a=t,t.defaultPrevented&&this.preventDefault()}}Ze.prototype.preventDefault=function(){this.defaultPrevented=!0},S(tn,Ze);var en=Qe({2:"touch",3:"pen",4:"mouse"});tn.prototype.preventDefault=function(){tn.bb.preventDefault.call(this);var t=this.a;if(t.preventDefault)t.preventDefault();else if(t.returnValue=!1,Je)try{(t.ctrlKey||112<=t.keyCode&&123>=t.keyCode)&&(t.keyCode=-1)}catch(e){}},tn.prototype.g=function(){return this.a};var nn="closure_listenable_"+(1e6*Math.random()|0),rn=0;function on(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.Wa=i,this.key=++rn,this.wa=this.Qa=!1}function an(t){t.wa=!0,t.listener=null,t.proxy=null,t.src=null,t.Wa=null}function sn(t){this.src=t,this.a={},this.b=0}function un(t,e){var n=e.type;n in t.a&&Y(t.a[n],e)&&(an(e),0==t.a[n].length&&(delete t.a[n],t.b--))}function cn(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.wa&&o.listener==e&&o.capture==!!n&&o.Wa==r)return i}return-1}sn.prototype.add=function(t,e,n,r,i){var o=t.toString();(t=this.a[o])||(t=this.a[o]=[],this.b++);var a=cn(t,e,r,i);return-1<a?(e=t[a],n||(e.Qa=!1)):((e=new on(e,this.src,o,!!r,i)).Qa=n,t.push(e)),e};var hn="closure_lm_"+(1e6*Math.random()|0),ln={};function fn(t,e,n,r,i){if(r&&r.once)dn(t,e,n,r,i);else if(Array.isArray(e))for(var o=0;o<e.length;o++)fn(t,e[o],n,r,i);else n=Tn(n),t&&t[nn]?Sn(t,e,n,g(r)?!!r.capture:!!r,i):pn(t,e,n,!1,r,i)}function pn(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var a=g(i)?!!i.capture:!!i,s=_n(t);if(s||(t[hn]=s=new sn(t)),!(n=s.add(e,n,r,a,o)).proxy){if(r=function(){var t=wn,e=Ye?function(n){return t.call(e.src,e.listener,n)}:function(n){if(!(n=t.call(e.src,e.listener,n)))return n};return e}(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)$e||(i=a),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(mn(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}0}}function dn(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)dn(t,e[o],n,r,i);else n=Tn(n),t&&t[nn]?An(t,e,n,g(r)?!!r.capture:!!r,i):pn(t,e,n,!0,r,i)}function vn(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)vn(t,e[o],n,r,i);else r=g(r)?!!r.capture:!!r,n=Tn(n),t&&t[nn]?(t=t.v,(e=String(e).toString())in t.a&&(-1<(n=cn(o=t.a[e],n,r,i))&&(an(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete t.a[e],t.b--)))):t&&(t=_n(t))&&(e=t.a[e.toString()],t=-1,e&&(t=cn(e,n,r,i)),(n=-1<t?e[t]:null)&&gn(n))}function gn(t){if("number"!==typeof t&&t&&!t.wa){var e=t.src;if(e&&e[nn])un(e.v,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(mn(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=_n(e))?(un(n,t),0==n.b&&(n.src=null,e[hn]=null)):an(t)}}}function mn(t){return t in ln?ln[t]:ln[t]="on"+t}function yn(t,e,n,r){var i=!0;if((t=_n(t))&&(e=t.a[e.toString()]))for(e=e.concat(),t=0;t<e.length;t++){var o=e[t];o&&o.capture==n&&!o.wa&&(o=bn(o,r),i=i&&!1!==o)}return i}function bn(t,e){var n=t.listener,r=t.Wa||t.src;return t.Qa&&gn(t),n.call(r,e)}function wn(t,e){if(t.wa)return!0;if(!Ye){if(!e)t:{e=["window","event"];for(var n=u,r=0;r<e.length;r++)if(null==(n=n[e[r]])){e=null;break t}e=n}if(e=new tn(r=e,this),n=!0,!(0>r.keyCode||void 0!=r.returnValue)){t:{var i=!1;if(0==r.keyCode)try{r.keyCode=-1;break t}catch(a){i=!0}(i||void 0==r.returnValue)&&(r.returnValue=!0)}for(r=[],i=e.b;i;i=i.parentNode)r.push(i);for(t=t.type,i=r.length-1;0<=i;i--){e.b=r[i];var o=yn(r[i],t,!0,e);n=n&&o}for(i=0;i<r.length;i++)e.b=r[i],o=yn(r[i],t,!1,e),n=n&&o}return n}return bn(t,new tn(e,this))}function _n(t){return(t=t[hn])instanceof sn?t:null}var In="__closure_events_fn_"+(1e9*Math.random()>>>0);function Tn(t){return v(t)?t:(t[In]||(t[In]=function(e){return t.handleEvent(e)}),t[In])}function En(){He.call(this),this.v=new sn(this),this.bc=this,this.hb=null}function Sn(t,e,n,r,i){t.v.add(String(e),n,!1,r,i)}function An(t,e,n,r,i){t.v.add(String(e),n,!0,r,i)}function kn(t,e,n,r){if(!(e=t.v.a[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var a=e[o];if(a&&!a.wa&&a.capture==n){var s=a.listener,u=a.Wa||a.src;a.Qa&&un(t.v,a),i=!1!==s.call(u,r)&&i}}return i&&!r.defaultPrevented}function Nn(t,e,n){if(v(t))n&&(t=I(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=I(t.handleEvent,t)}return 2147483647<Number(e)?-1:u.setTimeout(t,e||0)}function Cn(t){var e=null;return new Te((function(n,r){-1==(e=Nn((function(){n(void 0)}),t))&&r(Error("Failed to schedule timer."))})).o((function(t){throw u.clearTimeout(e),t}))}function On(t){if(t.X&&"function"==typeof t.X)return t.X();if("string"===typeof t)return t.split("");if(d(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}function Dn(t){if(t.Y&&"function"==typeof t.Y)return t.Y();if(!t.X||"function"!=typeof t.X){if(d(t)||"string"===typeof t){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}for(var r in e=[],n=0,t)e[n++]=r;return e}}function Rn(t,e){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof Rn)for(n=t.Y(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function Pn(t){if(t.c!=t.a.length){for(var e=0,n=0;e<t.a.length;){var r=t.a[e];xn(t.b,r)&&(t.a[n++]=r),e++}t.a.length=n}if(t.c!=t.a.length){var i={};for(n=e=0;e<t.a.length;)xn(i,r=t.a[e])||(t.a[n++]=r,i[r]=1),e++;t.a.length=n}}function xn(t,e){return Object.prototype.hasOwnProperty.call(t,e)}S(En,He),En.prototype[nn]=!0,En.prototype.addEventListener=function(t,e,n,r){fn(this,t,e,n,r)},En.prototype.removeEventListener=function(t,e,n,r){vn(this,t,e,n,r)},En.prototype.dispatchEvent=function(t){var e,n=this.hb;if(n)for(e=[];n;n=n.hb)e.push(n);n=this.bc;var r=t.type||t;if("string"===typeof t)t=new Ze(t,n);else if(t instanceof Ze)t.target=t.target||n;else{var i=t;yt(t=new Ze(r,n),i)}if(i=!0,e)for(var o=e.length-1;0<=o;o--){var a=t.b=e[o];i=kn(a,r,!0,t)&&i}if(i=kn(a=t.b=n,r,!0,t)&&i,i=kn(a,r,!1,t)&&i,e)for(o=0;o<e.length;o++)i=kn(a=t.b=e[o],r,!1,t)&&i;return i},En.prototype.Da=function(){if(En.bb.Da.call(this),this.v){var t,e=this.v;for(t in e.a){for(var n=e.a[t],r=0;r<n.length;r++)an(n[r]);delete e.a[t],e.b--}}this.hb=null},(t=Rn.prototype).X=function(){Pn(this);for(var t=[],e=0;e<this.a.length;e++)t.push(this.b[this.a[e]]);return t},t.Y=function(){return Pn(this),this.a.concat()},t.clear=function(){this.b={},this.c=this.a.length=0},t.get=function(t,e){return xn(this.b,t)?this.b[t]:e},t.set=function(t,e){xn(this.b,t)||(this.c++,this.a.push(t)),this.b[t]=e},t.forEach=function(t,e){for(var n=this.Y(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}};var Ln=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Mn(t,e){var n;this.a=this.l=this.c="",this.g=null,this.h=this.f="",this.i=!1,t instanceof Mn?(this.i=void 0!==e?e:t.i,Fn(this,t.c),this.l=t.l,this.a=t.a,Un(this,t.g),this.f=t.f,jn(this,ir(t.b)),this.h=t.h):t&&(n=String(t).match(Ln))?(this.i=!!e,Fn(this,n[1]||"",!0),this.l=Gn(n[2]||""),this.a=Gn(n[3]||"",!0),Un(this,n[4]),this.f=Gn(n[5]||"",!0),jn(this,n[6]||"",!0),this.h=Gn(n[7]||"")):(this.i=!!e,this.b=new $n(null,this.i))}function Fn(t,e,n){t.c=n?Gn(e,!0):e,t.c&&(t.c=t.c.replace(/:$/,""))}function Un(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.g=e}else t.g=null}function jn(t,e,n){e instanceof $n?(t.b=e,function(t,e){e&&!t.f&&(Zn(t),t.c=null,t.a.forEach((function(t,e){var n=e.toLowerCase();e!=n&&(er(this,e),rr(this,n,t))}),t)),t.f=e}(t.b,t.i)):(n||(e=Hn(e,Yn)),t.b=new $n(e,t.i))}function Vn(t,e,n){t.b.set(e,n)}function Bn(t,e){return t.b.get(e)}function qn(t){return t instanceof Mn?new Mn(t):new Mn(t,void 0)}function Kn(t,e,n,r){var i=new Mn(null,void 0);return t&&Fn(i,t),e&&(i.a=e),n&&Un(i,n),r&&(i.f=r),i}function Gn(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function Hn(t,e,n){return"string"===typeof t?(t=encodeURI(t).replace(e,zn),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function zn(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}Mn.prototype.toString=function(){var t=[],e=this.c;e&&t.push(Hn(e,Wn,!0),":");var n=this.a;return(n||"file"==e)&&(t.push("//"),(e=this.l)&&t.push(Hn(e,Wn,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.g)&&t.push(":",String(n))),(n=this.f)&&(this.a&&"/"!=n.charAt(0)&&t.push("/"),t.push(Hn(n,"/"==n.charAt(0)?Qn:Xn,!0))),(n=this.b.toString())&&t.push("?",n),(n=this.h)&&t.push("#",Hn(n,Jn)),t.join("")},Mn.prototype.resolve=function(t){var e=new Mn(this),n=!!t.c;n?Fn(e,t.c):n=!!t.l,n?e.l=t.l:n=!!t.a,n?e.a=t.a:n=null!=t.g;var r=t.f;if(n)Un(e,t.g);else if(n=!!t.f){if("/"!=r.charAt(0))if(this.a&&!this.f)r="/"+r;else{var i=e.f.lastIndexOf("/");-1!=i&&(r=e.f.substr(0,i+1)+r)}if(".."==(i=r)||"."==i)r="";else if(ct(i,"./")||ct(i,"/.")){r=0==i.lastIndexOf("/",0),i=i.split("/");for(var o=[],a=0;a<i.length;){var s=i[a++];"."==s?r&&a==i.length&&o.push(""):".."==s?((1<o.length||1==o.length&&""!=o[0])&&o.pop(),r&&a==i.length&&o.push("")):(o.push(s),r=!0)}r=o.join("/")}else r=i}return n?e.f=r:n=""!==t.b.toString(),n?jn(e,ir(t.b)):n=!!t.h,n&&(e.h=t.h),e};var Wn=/[#\/\?@]/g,Xn=/[#\?:]/g,Qn=/[#\?]/g,Yn=/[#\?@]/g,Jn=/#/g;function $n(t,e){this.b=this.a=null,this.c=t||null,this.f=!!e}function Zn(t){t.a||(t.a=new Rn,t.b=0,t.c&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var o=t[n].substring(0,r);i=t[n].substring(r+1)}else o=t[n];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(t.c,(function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)})))}function tr(t){var e=Dn(t);if("undefined"==typeof e)throw Error("Keys are undefined");var n=new $n(null,void 0);t=On(t);for(var r=0;r<e.length;r++){var i=e[r],o=t[r];Array.isArray(o)?rr(n,i,o):n.add(i,o)}return n}function er(t,e){Zn(t),e=or(t,e),xn(t.a.b,e)&&(t.c=null,t.b-=t.a.get(e).length,xn((t=t.a).b,e)&&(delete t.b[e],t.c--,t.a.length>2*t.c&&Pn(t)))}function nr(t,e){return Zn(t),e=or(t,e),xn(t.a.b,e)}function rr(t,e,n){er(t,e),0<n.length&&(t.c=null,t.a.set(or(t,e),Z(n)),t.b+=n.length)}function ir(t){var e=new $n;return e.c=t.c,t.a&&(e.a=new Rn(t.a),e.b=t.b),e}function or(t,e){return e=String(e),t.f&&(e=e.toLowerCase()),e}function ar(t){var e=[];return ur(new sr,t,e),e.join("")}function sr(){}function ur(t,e,n){if(null==e)n.push("null");else{if("object"==typeof e){if(Array.isArray(e)){var r=e;e=r.length,n.push("[");for(var i="",o=0;o<e;o++)n.push(i),ur(t,r[o],n),i=",";return void n.push("]")}if(!(e instanceof String||e instanceof Number||e instanceof Boolean)){for(r in n.push("{"),i="",e)Object.prototype.hasOwnProperty.call(e,r)&&("function"!=typeof(o=e[r])&&(n.push(i),lr(r,n),n.push(":"),ur(t,o,n),i=","));return void n.push("}")}e=e.valueOf()}switch(typeof e){case"string":lr(e,n);break;case"number":n.push(isFinite(e)&&!isNaN(e)?String(e):"null");break;case"boolean":n.push(String(e));break;case"function":n.push("null");break;default:throw Error("Unknown type: "+typeof e)}}}(t=$n.prototype).add=function(t,e){Zn(this),this.c=null,t=or(this,t);var n=this.a.get(t);return n||this.a.set(t,n=[]),n.push(e),this.b+=1,this},t.clear=function(){this.a=this.c=null,this.b=0},t.forEach=function(t,e){Zn(this),this.a.forEach((function(n,r){H(n,(function(n){t.call(e,n,r,this)}),this)}),this)},t.Y=function(){Zn(this);for(var t=this.a.X(),e=this.a.Y(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},t.X=function(t){Zn(this);var e=[];if("string"===typeof t)nr(this,t)&&(e=$(e,this.a.get(or(this,t))));else{t=this.a.X();for(var n=0;n<t.length;n++)e=$(e,t[n])}return e},t.set=function(t,e){return Zn(this),this.c=null,nr(this,t=or(this,t))&&(this.b-=this.a.get(t).length),this.a.set(t,[e]),this.b+=1,this},t.get=function(t,e){return t&&0<(t=this.X(t)).length?String(t[0]):e},t.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var t=[],e=this.a.Y(),n=0;n<e.length;n++){var r=e[n],i=encodeURIComponent(String(r));r=this.X(r);for(var o=0;o<r.length;o++){var a=i;""!==r[o]&&(a+="="+encodeURIComponent(String(r[o]))),t.push(a)}}return this.c=t.join("&")};var cr={'"':'\\"',"\\":"\\\\","/":"\\/","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\v":"\\u000b"},hr=/\uffff/.test("\uffff")?/[\\"\x00-\x1f\x7f-\uffff]/g:/[\\"\x00-\x1f\x7f-\xff]/g;function lr(t,e){e.push('"',t.replace(hr,(function(t){var e=cr[t];return e||(e="\\u"+(65536|t.charCodeAt(0)).toString(16).substr(1),cr[t]=e),e})),'"')}function fr(){var t=Rr();return Yt&&!!ce&&11==ce||/Edge\/\d+/.test(t)}function pr(){return u.window&&u.window.location.href||self&&self.location&&self.location.href||""}function dr(t,e){e=e||u.window;var n="about:blank";t&&(n=Pt(Ft(t)||Vt)),e.location.href=n}function vr(t,e){var n,r=[];for(n in t)n in e?typeof t[n]!=typeof e[n]?r.push(n):"object"==typeof t[n]&&null!=t[n]&&null!=e[n]?0<vr(t[n],e[n]).length&&r.push(n):t[n]!==e[n]&&r.push(n):r.push(n);for(n in e)n in t||r.push(n);return r}function gr(t){return!!((t=(t||Rr()).toLowerCase()).match(/android/)||t.match(/webos/)||t.match(/iphone|ipad|ipod/)||t.match(/blackberry/)||t.match(/windows phone/)||t.match(/iemobile/))}function mr(t){t=t||u.window;try{t.close()}catch(e){}}function yr(t,e,n){var r=Math.floor(1e9*Math.random()).toString();e=e||500,n=n||600;var i=(window.screen.availHeight-n)/2,o=(window.screen.availWidth-e)/2;for(a in e={width:e,height:n,top:0<i?i:0,left:0<o?o:0,location:!0,resizable:!0,statusbar:!0,toolbar:!1},n=Rr().toLowerCase(),r&&(e.target=r,ct(n,"crios/")&&(e.target="_blank")),Cr(Rr())==kr&&(t=t||"http://localhost",e.scrollbars=!0),n=t||"",(t=e)||(t={}),r=window,e=n instanceof Rt?n:Ft("undefined"!=typeof n.href?n.href:String(n))||Vt,n=t.target||n.target,i=[],t)switch(a){case"width":case"height":case"top":case"left":i.push(a+"="+t[a]);break;case"target":case"noopener":case"noreferrer":break;default:i.push(a+"="+(t[a]?1:0))}var a=i.join(",");if((pt("iPhone")&&!pt("iPod")&&!pt("iPad")||pt("iPad")||pt("iPod"))&&r.navigator&&r.navigator.standalone&&n&&"_self"!=n?(bt(a=me(document,"A"),"HTMLAnchorElement"),e=e instanceof Rt?e:Ut(e),a.href=Pt(e),a.setAttribute("target",n),t.noreferrer&&a.setAttribute("rel","noreferrer"),(t=document.createEvent("MouseEvent")).initMouseEvent("click",!0,!0,r,1),a.dispatchEvent(t),a={}):t.noreferrer?(a=Kt("",r,n,a),t=Pt(e),a&&($t&&ct(t,";")&&(t="'"+t.replace(/'/g,"%27")+"'"),a.opener=null,t='<meta name="referrer" content="no-referrer"><meta http-equiv="refresh" content="0; url='+Ht(t)+'">',t=new Bt(t=(r=St())?r.createHTML(t):t,null,qt),r=a.document)&&(r.write(function(t){return t instanceof Bt&&t.constructor===Bt?t.a:(F("expected object of type SafeHtml, got '"+t+"' of type "+p(t)),"type_error:SafeHtml")}(t)),r.close())):(a=Kt(e,r,n,a))&&t.noopener&&(a.opener=null),a)try{a.focus()}catch(s){}return a}var br=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,wr=/^[^@]+@[^@]+$/;function _r(){var t=null;return new Te((function(e){"complete"==u.document.readyState?e():(t=function(){e()},dn(window,"load",t))})).o((function(e){throw vn(window,"load",t),e}))}function Ir(t){return t=t||Rr(),!("file:"!==Fr()&&"ionic:"!==Fr()||!t.toLowerCase().match(/iphone|ipad|ipod|android/))}function Tr(){var t=u.window;try{return!(!t||t==t.top)}catch(e){return!1}}function Er(){return"undefined"!==typeof u.WorkerGlobalScope&&"function"===typeof u.importScripts}function Sr(){return r.default.INTERNAL.hasOwnProperty("reactNative")?"ReactNative":r.default.INTERNAL.hasOwnProperty("node")?"Node":Er()?"Worker":"Browser"}function Ar(){var t=Sr();return"ReactNative"===t||"Node"===t}var kr="Firefox",Nr="Chrome";function Cr(t){var e=t.toLowerCase();return ct(e,"opera/")||ct(e,"opr/")||ct(e,"opios/")?"Opera":ct(e,"iemobile")?"IEMobile":ct(e,"msie")||ct(e,"trident/")?"IE":ct(e,"edge/")?"Edge":ct(e,"firefox/")?kr:ct(e,"silk/")?"Silk":ct(e,"blackberry")?"Blackberry":ct(e,"webos")?"Webos":!ct(e,"safari/")||ct(e,"chrome/")||ct(e,"crios/")||ct(e,"android")?!ct(e,"chrome/")&&!ct(e,"crios/")||ct(e,"edge/")?ct(e,"android")?"Android":(t=t.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/))&&2==t.length?t[1]:"Other":Nr:"Safari"}var Or={md:"FirebaseCore-web",od:"FirebaseUI-web"};function Dr(t,e){e=e||[];var n,r=[],i={};for(n in Or)i[Or[n]]=!0;for(n=0;n<e.length;n++)"undefined"!==typeof i[e[n]]&&(delete i[e[n]],r.push(e[n]));return r.sort(),(e=r).length||(e=["FirebaseCore-web"]),"Browser"===(r=Sr())?r=Cr(i=Rr()):"Worker"===r&&(r=Cr(i=Rr())+"-"+r),r+"/JsCore/"+t+"/"+e.join(",")}function Rr(){return u.navigator&&u.navigator.userAgent||""}function Pr(t,e){t=t.split("."),e=e||u;for(var n=0;n<t.length&&"object"==typeof e&&null!=e;n++)e=e[t[n]];return n!=t.length&&(e=void 0),e}function xr(){try{var t=u.localStorage,e=qr();if(t)return t.setItem(e,"1"),t.removeItem(e),!fr()||!!u.indexedDB}catch(n){return Er()&&!!u.indexedDB}return!1}function Lr(){return(Mr()||"chrome-extension:"===Fr()||Ir())&&!Ar()&&xr()&&!Er()}function Mr(){return"http:"===Fr()||"https:"===Fr()}function Fr(){return u.location&&u.location.protocol||null}function Ur(t){return!gr(t=t||Rr())&&Cr(t)!=kr}function jr(t){return"undefined"===typeof t?null:ar(t)}function Vr(t){var e,n={};for(e in t)t.hasOwnProperty(e)&&null!==t[e]&&void 0!==t[e]&&(n[e]=t[e]);return n}function Br(t){if(null!==t)return JSON.parse(t)}function qr(t){return t||Math.floor(1e9*Math.random()).toString()}function Kr(t){return"Safari"!=Cr(t=t||Rr())&&!t.toLowerCase().match(/iphone|ipad|ipod/)}function Gr(){var t=u.___jsl;if(t&&t.H)for(var e in t.H)if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=t.H[e].L.concat(),t.CP)for(var n=0;n<t.CP.length;n++)t.CP[n]=null}function Hr(t,e){if(t>e)throw Error("Short delay should be less than long delay!");this.a=t,this.c=e,t=Rr(),e=Sr(),this.b=gr(t)||"ReactNative"===e}function zr(){var t=u.document;return!t||"undefined"===typeof t.visibilityState||"visible"==t.visibilityState}function Wr(t){try{var e=new Date(parseInt(t,10));if(!isNaN(e.getTime())&&!/[^0-9]/.test(t))return e.toUTCString()}catch(n){}return null}function Xr(){return!(!Pr("fireauth.oauthhelper",u)&&!Pr("fireauth.iframe",u))}Hr.prototype.get=function(){var t=u.navigator;return!t||"boolean"!==typeof t.onLine||!Mr()&&"chrome-extension:"!==Fr()&&"undefined"===typeof t.connection||t.onLine?this.b?this.c:this.a:Math.min(5e3,this.a)};var Qr,Yr={};function Jr(t){Yr[t]||(Yr[t]=!0,"undefined"!==typeof console&&"function"===typeof console.warn&&console.warn(t))}try{var $r={};Object.defineProperty($r,"abcd",{configurable:!0,enumerable:!0,value:1}),Object.defineProperty($r,"abcd",{configurable:!0,enumerable:!0,value:2}),Qr=2==$r.abcd}catch(da){Qr=!1}function Zr(t,e,n){Qr?Object.defineProperty(t,e,{configurable:!0,enumerable:!0,value:n}):t[e]=n}function ti(t,e){if(e)for(var n in e)e.hasOwnProperty(n)&&Zr(t,n,e[n])}function ei(t){var e={};return ti(e,t),e}function ni(t){var e=t;if("object"==typeof t&&null!=t)for(var n in e="length"in t?[]:{},t)Zr(e,n,ni(t[n]));return e}function ri(t){var e=t&&(t[ui]?"phone":null);if(!(e&&t&&t[si]))throw new k("internal-error","Internal assert: invalid MultiFactorInfo object");Zr(this,"uid",t[si]),Zr(this,"displayName",t[oi]||null);var n=null;t[ai]&&(n=new Date(t[ai]).toUTCString()),Zr(this,"enrollmentTime",n),Zr(this,"factorId",e)}function ii(t){try{var e=new ci(t)}catch(n){e=null}return e}ri.prototype.w=function(){return{uid:this.uid,displayName:this.displayName,factorId:this.factorId,enrollmentTime:this.enrollmentTime}};var oi="displayName",ai="enrolledAt",si="mfaEnrollmentId",ui="phoneInfo";function ci(t){ri.call(this,t),Zr(this,"phoneNumber",t[ui])}function hi(t){var e={},n=t[di],r=t[mi],i=t[yi];if(t=ii(t[gi]),!i||i!=fi&&i!=pi&&!n||i==pi&&!r||i==li&&!t)throw Error("Invalid checkActionCode response!");i==pi?(e[wi]=n||null,e[Ii]=n||null,e[bi]=r):(e[wi]=r||null,e[Ii]=r||null,e[bi]=n||null),e[_i]=t||null,Zr(this,Ei,i),Zr(this,Ti,ni(e))}S(ci,ri),ci.prototype.w=function(){var t=ci.bb.w.call(this);return t.phoneNumber=this.phoneNumber,t};var li="REVERT_SECOND_FACTOR_ADDITION",fi="EMAIL_SIGNIN",pi="VERIFY_AND_CHANGE_EMAIL",di="email",gi="mfaInfo",mi="newEmail",yi="requestType",bi="email",wi="fromEmail",_i="multiFactorInfo",Ii="previousEmail",Ti="data",Ei="operation";function Si(t){var e=Bn(t=qn(t),Ai)||null,n=Bn(t,ki)||null,r=Bn(t,Oi)||null;if(r=r&&Ri[r]||null,!e||!n||!r)throw new k("argument-error",Ai+", "+ki+"and "+Oi+" are required in a valid action code URL.");ti(this,{apiKey:e,operation:r,code:n,continueUrl:Bn(t,Ni)||null,languageCode:Bn(t,Ci)||null,tenantId:Bn(t,Di)||null})}var Ai="apiKey",ki="oobCode",Ni="continueUrl",Ci="languageCode",Oi="mode",Di="tenantId",Ri={recoverEmail:"RECOVER_EMAIL",resetPassword:"PASSWORD_RESET",revertSecondFactorAddition:li,signIn:fi,verifyAndChangeEmail:pi,verifyEmail:"VERIFY_EMAIL"};function Pi(t){try{return new Si(t)}catch(e){return null}}function xi(t){var e=t[ji];if("undefined"===typeof e)throw new k("missing-continue-uri");if("string"!==typeof e||"string"===typeof e&&!e.length)throw new k("invalid-continue-uri");this.h=e,this.b=this.a=null,this.g=!1;var n=t[Li];if(n&&"object"===typeof n){e=n[qi];var r=n[Vi];if(n=n[Bi],"string"===typeof e&&e.length){if(this.a=e,"undefined"!==typeof r&&"boolean"!==typeof r)throw new k("argument-error",Vi+" property must be a boolean when specified.");if(this.g=!!r,"undefined"!==typeof n&&("string"!==typeof n||"string"===typeof n&&!n.length))throw new k("argument-error",Bi+" property must be a non empty string when specified.");this.b=n||null}else{if("undefined"!==typeof e)throw new k("argument-error",qi+" property must be a non empty string when specified.");if("undefined"!==typeof r||"undefined"!==typeof n)throw new k("missing-android-pkg-name")}}else if("undefined"!==typeof n)throw new k("argument-error",Li+" property must be a non null object when specified.");if(this.f=null,(e=t[Ui])&&"object"===typeof e){if("string"===typeof(e=e[Ki])&&e.length)this.f=e;else if("undefined"!==typeof e)throw new k("argument-error",Ki+" property must be a non empty string when specified.")}else if("undefined"!==typeof e)throw new k("argument-error",Ui+" property must be a non null object when specified.");if("undefined"!==typeof(e=t[Fi])&&"boolean"!==typeof e)throw new k("argument-error",Fi+" property must be a boolean when specified.");if(this.c=!!e,"undefined"!==typeof(t=t[Mi])&&("string"!==typeof t||"string"===typeof t&&!t.length))throw new k("argument-error",Mi+" property must be a non empty string when specified.");this.i=t||null}var Li="android",Mi="dynamicLinkDomain",Fi="handleCodeInApp",Ui="iOS",ji="url",Vi="installApp",Bi="minimumVersion",qi="packageName",Ki="bundleId";function Gi(t){var e={};for(var n in e.continueUrl=t.h,e.canHandleCodeInApp=t.c,(e.androidPackageName=t.a)&&(e.androidMinimumVersion=t.b,e.androidInstallApp=t.g),e.iOSBundleId=t.f,e.dynamicLinkDomain=t.i,e)null===e[n]&&delete e[n];return e}var Hi=null;function zi(t){var e=[];return function(t,e){function n(e){for(;r<t.length;){var n=t.charAt(r++),i=Hi[n];if(null!=i)return i;if(!/^[\s\xa0]*$/.test(n))throw Error("Unknown base64 encoding at char: "+n)}return e}!function(){if(!Hi){Hi={};for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),e=["+/=","+/","-_=","-_.","-_"],n=0;5>n;n++)for(var r=t.concat(e[n].split("")),i=0;i<r.length;i++){var o=r[i];void 0===Hi[o]&&(Hi[o]=i)}}}();for(var r=0;;){var i=n(-1),o=n(0),a=n(64),s=n(64);if(64===s&&-1===i)break;e(i<<2|o>>4),64!=a&&(e(o<<4&240|a>>2),64!=s&&e(a<<6&192|s))}}(t,(function(t){e.push(t)})),e}function Wi(t){var e=Qi(t);if(!(e&&e.sub&&e.iss&&e.aud&&e.exp))throw Error("Invalid JWT");this.h=t,this.a=e.exp,this.i=e.sub,t=Date.now()/1e3,this.g=e.iat||(t>this.a?this.a:t),this.b=e.provider_id||e.firebase&&e.firebase.sign_in_provider||null,this.f=e.firebase&&e.firebase.tenant||null,this.c=!!e.is_anonymous||"anonymous"==this.b}function Xi(t){try{return new Wi(t)}catch(e){return null}}function Qi(t){if(!t)return null;if(3!=(t=t.split(".")).length)return null;for(var e=(4-(t=t[1]).length%4)%4,n=0;n<e;n++)t+=".";try{var r=zi(t);for(t=[],n=e=0;e<r.length;){var i=r[e++];if(128>i)t[n++]=String.fromCharCode(i);else if(191<i&&224>i){var o=r[e++];t[n++]=String.fromCharCode((31&i)<<6|63&o)}else if(239<i&&365>i){o=r[e++];var a=r[e++],s=((7&i)<<18|(63&o)<<12|(63&a)<<6|63&r[e++])-65536;t[n++]=String.fromCharCode(55296+(s>>10)),t[n++]=String.fromCharCode(56320+(1023&s))}else o=r[e++],a=r[e++],t[n++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&a)}return JSON.parse(t.join(""))}catch(Xt){}return null}Wi.prototype.T=function(){return this.f},Wi.prototype.l=function(){return this.c},Wi.prototype.toString=function(){return this.h};var Yi="oauth_consumer_key oauth_nonce oauth_signature oauth_signature_method oauth_timestamp oauth_token oauth_version".split(" "),Ji=["client_id","response_type","scope","redirect_uri","state"],$i={nd:{Ja:"locale",va:700,ua:600,fa:"facebook.com",Ya:Ji},pd:{Ja:null,va:500,ua:750,fa:"github.com",Ya:Ji},qd:{Ja:"hl",va:515,ua:680,fa:"google.com",Ya:Ji},wd:{Ja:"lang",va:485,ua:705,fa:"twitter.com",Ya:Yi},kd:{Ja:"locale",va:640,ua:600,fa:"apple.com",Ya:[]}};function Zi(t){for(var e in $i)if($i[e].fa==t)return $i[e];return null}function to(t){var e={};e["facebook.com"]=oo,e["google.com"]=so,e["github.com"]=ao,e["twitter.com"]=uo;var n=t&&t[no];try{if(n)return e[n]?new e[n](t):new io(t);if("undefined"!==typeof t[eo])return new ro(t)}catch(r){}return null}var eo="idToken",no="providerId";function ro(t){var e=t[no];if(!e&&t[eo]){var n=Xi(t[eo]);n&&n.b&&(e=n.b)}if(!e)throw Error("Invalid additional user info!");"anonymous"!=e&&"custom"!=e||(e=null),n=!1,"undefined"!==typeof t.isNewUser?n=!!t.isNewUser:"identitytoolkit#SignupNewUserResponse"===t.kind&&(n=!0),Zr(this,"providerId",e),Zr(this,"isNewUser",n)}function io(t){ro.call(this,t),Zr(this,"profile",ni((t=Br(t.rawUserInfo||"{}"))||{}))}function oo(t){if(io.call(this,t),"facebook.com"!=this.providerId)throw Error("Invalid provider ID!")}function ao(t){if(io.call(this,t),"github.com"!=this.providerId)throw Error("Invalid provider ID!");Zr(this,"username",this.profile&&this.profile.login||null)}function so(t){if(io.call(this,t),"google.com"!=this.providerId)throw Error("Invalid provider ID!")}function uo(t){if(io.call(this,t),"twitter.com"!=this.providerId)throw Error("Invalid provider ID!");Zr(this,"username",t.screenName||null)}function co(t){var e=qn(t),n=Bn(e,"link"),r=Bn(qn(n),"link");return e=Bn(e,"deep_link_id"),Bn(qn(e),"link")||e||r||n||t}function ho(t,e){if(!t&&!e)throw new k("internal-error","Internal assert: no raw session string available");if(t&&e)throw new k("internal-error","Internal assert: unable to determine the session type");this.a=t||null,this.b=e||null,this.type=this.a?lo:fo}S(io,ro),S(oo,io),S(ao,io),S(so,io),S(uo,io);var lo="enroll",fo="signin";function po(){}function vo(t,e){return t.then((function(t){if(t[is]){var n=Xi(t[is]);if(!n||e!=n.i)throw new k("user-mismatch");return t}throw new k("user-mismatch")})).o((function(t){throw t&&t.code&&t.code==O+"user-not-found"?new k("user-mismatch"):t}))}function go(t,e){if(!e)throw new k("internal-error","failed to construct a credential");this.a=e,Zr(this,"providerId",t),Zr(this,"signInMethod",t)}function mo(t){return{pendingToken:t.a,requestUri:"http://localhost"}}function yo(t){if(t&&t.providerId&&t.signInMethod&&0==t.providerId.indexOf("saml.")&&t.pendingToken)try{return new go(t.providerId,t.pendingToken)}catch(e){}return null}function bo(t,e,n){if(this.a=null,e.idToken||e.accessToken)e.idToken&&Zr(this,"idToken",e.idToken),e.accessToken&&Zr(this,"accessToken",e.accessToken),e.nonce&&!e.pendingToken&&Zr(this,"nonce",e.nonce),e.pendingToken&&(this.a=e.pendingToken);else{if(!e.oauthToken||!e.oauthTokenSecret)throw new k("internal-error","failed to construct a credential");Zr(this,"accessToken",e.oauthToken),Zr(this,"secret",e.oauthTokenSecret)}Zr(this,"providerId",t),Zr(this,"signInMethod",n)}function wo(t){var e={};return t.idToken&&(e.id_token=t.idToken),t.accessToken&&(e.access_token=t.accessToken),t.secret&&(e.oauth_token_secret=t.secret),e.providerId=t.providerId,t.nonce&&!t.a&&(e.nonce=t.nonce),e={postBody:tr(e).toString(),requestUri:"http://localhost"},t.a&&(delete e.postBody,e.pendingToken=t.a),e}function _o(t){if(t&&t.providerId&&t.signInMethod){var e={idToken:t.oauthIdToken,accessToken:t.oauthTokenSecret?null:t.oauthAccessToken,oauthTokenSecret:t.oauthTokenSecret,oauthToken:t.oauthTokenSecret&&t.oauthAccessToken,nonce:t.nonce,pendingToken:t.pendingToken};try{return new bo(t.providerId,e,t.signInMethod)}catch(n){}}return null}function Io(t,e){this.Qc=e||[],ti(this,{providerId:t,isOAuthProvider:!0}),this.Jb={},this.qb=(Zi(t)||{}).Ja||null,this.pb=null}function To(t){if("string"!==typeof t||0!=t.indexOf("saml."))throw new k("argument-error",'SAML provider IDs must be prefixed with "saml."');Io.call(this,t,[])}function Eo(t){Io.call(this,t,Ji),this.a=[]}function So(){Eo.call(this,"facebook.com")}function Ao(t){if(!t)throw new k("argument-error","credential failed: expected 1 argument (the OAuth access token).");var e=t;return g(t)&&(e=t.accessToken),(new So).credential({accessToken:e})}function ko(){Eo.call(this,"github.com")}function No(t){if(!t)throw new k("argument-error","credential failed: expected 1 argument (the OAuth access token).");var e=t;return g(t)&&(e=t.accessToken),(new ko).credential({accessToken:e})}function Co(){Eo.call(this,"google.com"),this.Ca("profile")}function Oo(t,e){var n=t;return g(t)&&(n=t.idToken,e=t.accessToken),(new Co).credential({idToken:n,accessToken:e})}function Do(){Io.call(this,"twitter.com",Yi)}function Ro(t,e){var n=t;if(g(n)||(n={oauthToken:t,oauthTokenSecret:e}),!n.oauthToken||!n.oauthTokenSecret)throw new k("argument-error","credential failed: expected 2 arguments (the OAuth access token and secret).");return new bo("twitter.com",n,"twitter.com")}function Po(t,e,n){this.a=t,this.f=e,Zr(this,"providerId","password"),Zr(this,"signInMethod",n===Lo.EMAIL_LINK_SIGN_IN_METHOD?Lo.EMAIL_LINK_SIGN_IN_METHOD:Lo.EMAIL_PASSWORD_SIGN_IN_METHOD)}function xo(t){return t&&t.email&&t.password?new Po(t.email,t.password,t.signInMethod):null}function Lo(){ti(this,{providerId:"password",isOAuthProvider:!1})}function Mo(t,e){if(!(e=Fo(e)))throw new k("argument-error","Invalid email link!");return new Po(t,e.code,Lo.EMAIL_LINK_SIGN_IN_METHOD)}function Fo(t){return(t=Pi(t=co(t)))&&t.operation===fi?t:null}function Uo(t){if(!(t.fb&&t.eb||t.La&&t.ea))throw new k("internal-error");this.a=t,Zr(this,"providerId","phone"),this.fa="phone",Zr(this,"signInMethod","phone")}function jo(t){if(t&&"phone"===t.providerId&&(t.verificationId&&t.verificationCode||t.temporaryProof&&t.phoneNumber)){var e={};return H(["verificationId","verificationCode","temporaryProof","phoneNumber"],(function(n){t[n]&&(e[n]=t[n])})),new Uo(e)}return null}function Vo(t){return t.a.La&&t.a.ea?{temporaryProof:t.a.La,phoneNumber:t.a.ea}:{sessionInfo:t.a.fb,code:t.a.eb}}function Bo(t){try{this.a=t||r.default.auth()}catch(e){throw new k("argument-error","Either an instance of firebase.auth.Auth must be passed as an argument to the firebase.auth.PhoneAuthProvider constructor, or the default firebase App instance must be initialized via firebase.initializeApp().")}ti(this,{providerId:"phone",isOAuthProvider:!1})}function qo(t,e){if(!t)throw new k("missing-verification-id");if(!e)throw new k("missing-verification-code");return new Uo({fb:t,eb:e})}function Ko(t){if(t.temporaryProof&&t.phoneNumber)return new Uo({La:t.temporaryProof,ea:t.phoneNumber});var e=t&&t.providerId;if(!e||"password"===e)return null;var n=t&&t.oauthAccessToken,r=t&&t.oauthTokenSecret,i=t&&t.nonce,o=t&&t.oauthIdToken,a=t&&t.pendingToken;try{switch(e){case"google.com":return Oo(o,n);case"facebook.com":return Ao(n);case"github.com":return No(n);case"twitter.com":return Ro(n,r);default:return n||r||o||a?a?0==e.indexOf("saml.")?new go(e,a):new bo(e,{pendingToken:a,idToken:t.oauthIdToken,accessToken:t.oauthAccessToken},e):new Eo(e).credential({idToken:o,accessToken:n,rawNonce:i}):null}}catch(s){return null}}function Go(t){if(!t.isOAuthProvider)throw new k("invalid-oauth-provider")}function Ho(t,e,n,r,i,o,a){if(this.c=t,this.b=e||null,this.g=n||null,this.f=r||null,this.i=o||null,this.h=a||null,this.a=i||null,!this.g&&!this.a)throw new k("invalid-auth-event");if(this.g&&this.a)throw new k("invalid-auth-event");if(this.g&&!this.f)throw new k("invalid-auth-event")}function zo(t){return(t=t||{}).type?new Ho(t.type,t.eventId,t.urlResponse,t.sessionId,t.error&&N(t.error),t.postBody,t.tenantId):null}function Wo(){this.b=null,this.a=[]}ho.prototype.Ha=function(){return this.a?Oe(this.a):Oe(this.b)},ho.prototype.w=function(){return this.type==lo?{multiFactorSession:{idToken:this.a}}:{multiFactorSession:{pendingCredential:this.b}}},po.prototype.ka=function(){},po.prototype.b=function(){},po.prototype.c=function(){},po.prototype.w=function(){},go.prototype.ka=function(t){return As(t,mo(this))},go.prototype.b=function(t,e){var n=mo(this);return n.idToken=e,ks(t,n)},go.prototype.c=function(t,e){return vo(Ns(t,mo(this)),e)},go.prototype.w=function(){return{providerId:this.providerId,signInMethod:this.signInMethod,pendingToken:this.a}},bo.prototype.ka=function(t){return As(t,wo(this))},bo.prototype.b=function(t,e){var n=wo(this);return n.idToken=e,ks(t,n)},bo.prototype.c=function(t,e){return vo(Ns(t,wo(this)),e)},bo.prototype.w=function(){var t={providerId:this.providerId,signInMethod:this.signInMethod};return this.idToken&&(t.oauthIdToken=this.idToken),this.accessToken&&(t.oauthAccessToken=this.accessToken),this.secret&&(t.oauthTokenSecret=this.secret),this.nonce&&(t.nonce=this.nonce),this.a&&(t.pendingToken=this.a),t},Io.prototype.Ka=function(t){return this.Jb=gt(t),this},S(To,Io),S(Eo,Io),Eo.prototype.Ca=function(t){return Q(this.a,t)||this.a.push(t),this},Eo.prototype.Rb=function(){return Z(this.a)},Eo.prototype.credential=function(t,e){var n;if(!(n=g(t)?{idToken:t.idToken||null,accessToken:t.accessToken||null,nonce:t.rawNonce||null}:{idToken:t||null,accessToken:e||null}).idToken&&!n.accessToken)throw new k("argument-error","credential failed: must provide the ID token and/or the access token.");return new bo(this.providerId,n,this.providerId)},S(So,Eo),Zr(So,"PROVIDER_ID","facebook.com"),Zr(So,"FACEBOOK_SIGN_IN_METHOD","facebook.com"),S(ko,Eo),Zr(ko,"PROVIDER_ID","github.com"),Zr(ko,"GITHUB_SIGN_IN_METHOD","github.com"),S(Co,Eo),Zr(Co,"PROVIDER_ID","google.com"),Zr(Co,"GOOGLE_SIGN_IN_METHOD","google.com"),S(Do,Io),Zr(Do,"PROVIDER_ID","twitter.com"),Zr(Do,"TWITTER_SIGN_IN_METHOD","twitter.com"),Po.prototype.ka=function(t){return this.signInMethod==Lo.EMAIL_LINK_SIGN_IN_METHOD?cu(t,Ms,{email:this.a,oobCode:this.f}):cu(t,iu,{email:this.a,password:this.f})},Po.prototype.b=function(t,e){return this.signInMethod==Lo.EMAIL_LINK_SIGN_IN_METHOD?cu(t,Fs,{idToken:e,email:this.a,oobCode:this.f}):cu(t,Ys,{idToken:e,email:this.a,password:this.f})},Po.prototype.c=function(t,e){return vo(this.ka(t),e)},Po.prototype.w=function(){return{email:this.a,password:this.f,signInMethod:this.signInMethod}},ti(Lo,{PROVIDER_ID:"password"}),ti(Lo,{EMAIL_LINK_SIGN_IN_METHOD:"emailLink"}),ti(Lo,{EMAIL_PASSWORD_SIGN_IN_METHOD:"password"}),Uo.prototype.ka=function(t){return t.gb(Vo(this))},Uo.prototype.b=function(t,e){var n=Vo(this);return n.idToken=e,cu(t,au,n)},Uo.prototype.c=function(t,e){var n=Vo(this);return n.operation="REAUTH",vo(t=cu(t,su,n),e)},Uo.prototype.w=function(){var t={providerId:"phone"};return this.a.fb&&(t.verificationId=this.a.fb),this.a.eb&&(t.verificationCode=this.a.eb),this.a.La&&(t.temporaryProof=this.a.La),this.a.ea&&(t.phoneNumber=this.a.ea),t},Bo.prototype.gb=function(t,e){var n=this.a.a;return Oe(e.verify()).then((function(r){if("string"!==typeof r)throw new k("argument-error","An implementation of firebase.auth.ApplicationVerifier.prototype.verify() must return a firebase.Promise that resolves with a string.");if("recaptcha"===e.type){var i,o=g(t)?t.session:null,a=g(t)?t.phoneNumber:t;return i=o&&o.type==lo?o.Ha().then((function(t){return function(t,e){return cu(t,$s,e).then((function(t){return t.phoneSessionInfo.sessionInfo}))}(n,{idToken:t,phoneEnrollmentInfo:{phoneNumber:a,recaptchaToken:r}})})):o&&o.type==fo?o.Ha().then((function(e){return function(t,e){return cu(t,Zs,e).then((function(t){return t.phoneResponseInfo.sessionInfo}))}(n,{mfaPendingCredential:e,mfaEnrollmentId:t.multiFactorHint&&t.multiFactorHint.uid||t.multiFactorUid,phoneSignInInfo:{recaptchaToken:r}})})):function(t,e){return cu(t,Xs,e)}(n,{phoneNumber:a,recaptchaToken:r}),i.then((function(t){return"function"===typeof e.reset&&e.reset(),t}),(function(t){throw"function"===typeof e.reset&&e.reset(),t}))}throw new k("argument-error",'Only firebase.auth.ApplicationVerifiers with type="recaptcha" are currently supported.')}))},ti(Bo,{PROVIDER_ID:"phone"}),ti(Bo,{PHONE_SIGN_IN_METHOD:"phone"}),Ho.prototype.getUid=function(){var t=[];return t.push(this.c),this.b&&t.push(this.b),this.f&&t.push(this.f),this.h&&t.push(this.h),t.join("-")},Ho.prototype.T=function(){return this.h},Ho.prototype.w=function(){return{type:this.c,eventId:this.b,urlResponse:this.g,sessionId:this.f,postBody:this.i,tenantId:this.h,error:this.a&&this.a.w()}};var Xo,Qo=null;function Yo(t){var e="unauthorized-domain",n=void 0,r=qn(t);t=r.a,"chrome-extension"==(r=r.c)?n=Gt("This chrome extension ID (chrome-extension://%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",t):"http"==r||"https"==r?n=Gt("This domain (%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",t):e="operation-not-supported-in-this-environment",k.call(this,e,n)}function Jo(t,e,n){k.call(this,t,n),(t=e||{}).Kb&&Zr(this,"email",t.Kb),t.ea&&Zr(this,"phoneNumber",t.ea),t.credential&&Zr(this,"credential",t.credential),t.$b&&Zr(this,"tenantId",t.$b)}function $o(t){if(t.code){var e=t.code||"";0==e.indexOf(O)&&(e=e.substring(O.length));var n={credential:Ko(t),$b:t.tenantId};if(t.email)n.Kb=t.email;else if(t.phoneNumber)n.ea=t.phoneNumber;else if(!n.credential)return new k(e,t.message||void 0);return new Jo(e,n,t.message)}return null}function Zo(){}function ta(t){return t.c||(t.c=t.b())}function ea(){}function na(t){if(!t.f&&"undefined"==typeof XMLHttpRequest&&"undefined"!=typeof ActiveXObject){for(var e=["MSXML2.XMLHTTP.6.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"],n=0;n<e.length;n++){var r=e[n];try{return new ActiveXObject(r),t.f=r}catch(dv){}}throw Error("Could not create ActiveXObject. ActiveX might be disabled, or MSXML might not be installed")}return t.f}function ra(){}function ia(){this.a=new XDomainRequest,this.readyState=0,this.onreadystatechange=null,this.responseType=this.responseText=this.response="",this.status=-1,this.statusText="",this.a.onload=I(this.qc,this),this.a.onerror=I(this.Tb,this),this.a.onprogress=I(this.rc,this),this.a.ontimeout=I(this.vc,this)}function oa(t,e){t.readyState=e,t.onreadystatechange&&t.onreadystatechange()}function aa(t,e,n){this.reset(t,e,n,void 0,void 0)}S(Yo,k),S(Jo,k),Jo.prototype.w=function(){var t={code:this.code,message:this.message};this.email&&(t.email=this.email),this.phoneNumber&&(t.phoneNumber=this.phoneNumber),this.tenantId&&(t.tenantId=this.tenantId);var e=this.credential&&this.credential.w();return e&&yt(t,e),t},Jo.prototype.toJSON=function(){return this.w()},Zo.prototype.c=null,S(ea,Zo),ea.prototype.a=function(){var t=na(this);return t?new ActiveXObject(t):new XMLHttpRequest},ea.prototype.b=function(){var t={};return na(this)&&(t[0]=!0,t[1]=!0),t},Xo=new ea,S(ra,Zo),ra.prototype.a=function(){var t=new XMLHttpRequest;if("withCredentials"in t)return t;if("undefined"!=typeof XDomainRequest)return new ia;throw Error("Unsupported browser")},ra.prototype.b=function(){return{}},(t=ia.prototype).open=function(t,e,n){if(null!=n&&!n)throw Error("Only async requests are supported.");this.a.open(t,e)},t.send=function(t){if(t){if("string"!=typeof t)throw Error("Only string data is supported");this.a.send(t)}else this.a.send()},t.abort=function(){this.a.abort()},t.setRequestHeader=function(){},t.getResponseHeader=function(t){return"content-type"==t.toLowerCase()?this.a.contentType:""},t.qc=function(){this.status=200,this.response=this.responseText=this.a.responseText,oa(this,4)},t.Tb=function(){this.status=500,this.response=this.responseText="",oa(this,4)},t.vc=function(){this.Tb()},t.rc=function(){this.status=200,oa(this,1)},t.getAllResponseHeaders=function(){return"content-type: "+this.a.contentType},aa.prototype.a=null;function sa(t){this.f=t,this.b=this.c=this.a=null}function ua(t,e){this.name=t,this.value=e}aa.prototype.reset=function(t,e,n,r,i){"number"==typeof i||0,r||E(),delete this.a},ua.prototype.toString=function(){return this.name};var ca=new ua("SEVERE",1e3),ha=new ua("WARNING",900),la=new ua("CONFIG",700),fa=new ua("FINE",500);function pa(t){return t.c?t.c:t.a?pa(t.a):(F("Root logger has no level set."),null)}sa.prototype.log=function(t,e,n){if(t.value>=pa(this).value)for(v(e)&&(e=e()),t=new aa(t,String(e),this.f),n&&(t.a=n),n=this;n;)n=n.a};var da,va={},ga=null;function ma(t){var e;if(ga||(ga=new sa(""),va[""]=ga,ga.c=la),!(e=va[t])){e=new sa(t);var n=t.lastIndexOf("."),r=t.substr(n+1);(n=ma(t.substr(0,n))).b||(n.b={}),n.b[r]=e,e.a=n,va[t]=e}return e}function ya(t,e){t&&t.log(fa,e,void 0)}function ba(t){this.f=t}function wa(t){En.call(this),this.u=t,this.h=void 0,this.readyState=_a,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.l=new Headers,this.b=null,this.s="GET",this.f="",this.a=!1,this.i=ma("goog.net.FetchXmlHttp"),this.m=this.c=this.g=null}S(ba,Zo),ba.prototype.a=function(){return new wa(this.f)},ba.prototype.b=(da={},function(){return da}),S(wa,En);var _a=0;function Ia(t){t.c.read().then(t.pc.bind(t)).catch(t.Va.bind(t))}function Ta(t){t.readyState=4,t.g=null,t.c=null,t.m=null,Ea(t)}function Ea(t){t.onreadystatechange&&t.onreadystatechange.call(t)}function Sa(t){En.call(this),this.headers=new Rn,this.D=t||null,this.c=!1,this.C=this.a=null,this.h=this.P=this.l="",this.f=this.N=this.i=this.J=!1,this.g=0,this.s=null,this.m=Aa,this.u=this.S=!1}(t=wa.prototype).open=function(t,e){if(this.readyState!=_a)throw this.abort(),Error("Error reopening a connection");this.s=t,this.f=e,this.readyState=1,Ea(this)},t.send=function(t){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.a=!0;var e={headers:this.l,method:this.s,credentials:this.h,cache:void 0};t&&(e.body=t),this.u.fetch(new Request(this.f,e)).then(this.uc.bind(this),this.Va.bind(this))},t.abort=function(){this.response=this.responseText="",this.l=new Headers,this.status=0,this.c&&this.c.cancel("Request was aborted."),1<=this.readyState&&this.a&&4!=this.readyState&&(this.a=!1,Ta(this)),this.readyState=_a},t.uc=function(t){this.a&&(this.g=t,this.b||(this.status=this.g.status,this.statusText=this.g.statusText,this.b=t.headers,this.readyState=2,Ea(this)),this.a&&(this.readyState=3,Ea(this),this.a&&("arraybuffer"===this.responseType?t.arrayBuffer().then(this.sc.bind(this),this.Va.bind(this)):"undefined"!==typeof u.ReadableStream&&"body"in t?(this.response=this.responseText="",this.c=t.body.getReader(),this.m=new TextDecoder,Ia(this)):t.text().then(this.tc.bind(this),this.Va.bind(this)))))},t.pc=function(t){if(this.a){var e=this.m.decode(t.value?t.value:new Uint8Array(0),{stream:!t.done});e&&(this.response=this.responseText+=e),t.done?Ta(this):Ea(this),3==this.readyState&&Ia(this)}},t.tc=function(t){this.a&&(this.response=this.responseText=t,Ta(this))},t.sc=function(t){this.a&&(this.response=t,Ta(this))},t.Va=function(t){var e=this.i;e&&e.log(ha,"Failed to fetch url "+this.f,t instanceof Error?t:Error(t)),this.a&&Ta(this)},t.setRequestHeader=function(t,e){this.l.append(t,e)},t.getResponseHeader=function(t){return this.b?this.b.get(t.toLowerCase())||"":((t=this.i)&&t.log(ha,"Attempting to get response header but no headers have been received for url: "+this.f,void 0),"")},t.getAllResponseHeaders=function(){if(!this.b){var t=this.i;return t&&t.log(ha,"Attempting to get all response headers but no headers have been received for url: "+this.f,void 0),""}t=[];for(var e=this.b.entries(),n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join("\r\n")},Object.defineProperty(wa.prototype,"withCredentials",{get:function(){return"include"===this.h},set:function(t){this.h=t?"include":"same-origin"}}),S(Sa,En);var Aa="";Sa.prototype.b=ma("goog.net.XhrIo");var ka=/^https?$/i,Na=["POST","PUT"];function Ca(t,e,n,r,i){if(t.a)throw Error("[goog.net.XhrIo] Object is active with another request="+t.l+"; newUri="+e);n=n?n.toUpperCase():"GET",t.l=e,t.h="",t.P=n,t.J=!1,t.c=!0,t.a=t.D?t.D.a():Xo.a(),t.C=t.D?ta(t.D):ta(Xo),t.a.onreadystatechange=I(t.Wb,t);try{ya(t.b,Ua(t,"Opening Xhr")),t.N=!0,t.a.open(n,String(e),!0),t.N=!1}catch(a){return ya(t.b,Ua(t,"Error opening Xhr: "+a.message)),void Da(t,a)}e=r||"";var o=new Rn(t.headers);i&&function(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(d(t)||"string"===typeof t)H(t,e,void 0);else for(var n=Dn(t),r=On(t),i=r.length,o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}(i,(function(t,e){o.set(e,t)})),i=function(t){t:{for(var e=Oa,n=t.length,r="string"===typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return 0>e?null:"string"===typeof t?t.charAt(e):t[e]}(o.Y()),r=u.FormData&&e instanceof u.FormData,!Q(Na,n)||i||r||o.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),o.forEach((function(t,e){this.a.setRequestHeader(e,t)}),t),t.m&&(t.a.responseType=t.m),"withCredentials"in t.a&&t.a.withCredentials!==t.S&&(t.a.withCredentials=t.S);try{La(t),0<t.g&&(t.u=function(t){return Yt&&se(9)&&"number"===typeof t.timeout&&void 0!==t.ontimeout}(t.a),ya(t.b,Ua(t,"Will abort after "+t.g+"ms if incomplete, xhr2 "+t.u)),t.u?(t.a.timeout=t.g,t.a.ontimeout=I(t.Ma,t)):t.s=Nn(t.Ma,t.g,t)),ya(t.b,Ua(t,"Sending request")),t.i=!0,t.a.send(e),t.i=!1}catch(a){ya(t.b,Ua(t,"Send error: "+a.message)),Da(t,a)}}function Oa(t){return"content-type"==t.toLowerCase()}function Da(t,e){t.c=!1,t.a&&(t.f=!0,t.a.abort(),t.f=!1),t.h=e,Ra(t),xa(t)}function Ra(t){t.J||(t.J=!0,t.dispatchEvent("complete"),t.dispatchEvent("error"))}function Pa(t){if(t.c&&"undefined"!=typeof s)if(t.C[1]&&4==Ma(t)&&2==Fa(t))ya(t.b,Ua(t,"Local request error detected and ignored"));else if(t.i&&4==Ma(t))Nn(t.Wb,0,t);else if(t.dispatchEvent("readystatechange"),4==Ma(t)){ya(t.b,Ua(t,"Request complete")),t.c=!1;try{var e,n=Fa(t);t:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break t;default:r=!1}if(!(e=r)){var i;if(i=0===n){var o=String(t.l).match(Ln)[1]||null;if(!o&&u.self&&u.self.location){var a=u.self.location.protocol;o=a.substr(0,a.length-1)}i=!ka.test(o?o.toLowerCase():"")}e=i}if(e)t.dispatchEvent("complete"),t.dispatchEvent("success");else{try{var c=2<Ma(t)?t.a.statusText:""}catch(h){ya(t.b,"Can not get status: "+h.message),c=""}t.h=c+" ["+Fa(t)+"]",Ra(t)}}finally{xa(t)}}}function xa(t,e){if(t.a){La(t);var n=t.a,r=t.C[0]?f:null;t.a=null,t.C=null,e||t.dispatchEvent("ready");try{n.onreadystatechange=r}catch(dv){(t=t.b)&&t.log(ca,"Problem encountered resetting onreadystatechange: "+dv.message,void 0)}}}function La(t){t.a&&t.u&&(t.a.ontimeout=null),t.s&&(u.clearTimeout(t.s),t.s=null)}function Ma(t){return t.a?t.a.readyState:0}function Fa(t){try{return 2<Ma(t)?t.a.status:-1}catch(e){return-1}}function Ua(t,e){return e+" ["+t.P+" "+t.l+" "+Fa(t)+"]"}function ja(t){var e=Ya;this.g=[],this.u=e,this.s=t||null,this.f=this.a=!1,this.c=void 0,this.v=this.C=this.i=!1,this.h=0,this.b=null,this.l=0}function Va(t,e,n){t.a=!0,t.c=n,t.f=!e,Ga(t)}function Ba(t){if(t.a){if(!t.v)throw new Ha(t);t.v=!1}}function qa(t,e,n,r){t.g.push([e,n,r]),t.a&&Ga(t)}function Ka(t){return X(t.g,(function(t){return v(t[1])}))}function Ga(t){if(t.h&&t.a&&Ka(t)){var e=t.h,n=Xa[e];n&&(u.clearTimeout(n.a),delete Xa[e]),t.h=0}t.b&&(t.b.l--,delete t.b),e=t.c;for(var r=n=!1;t.g.length&&!t.i;){var i=t.g.shift(),o=i[0],a=i[1];if(i=i[2],o=t.f?a:o)try{var s=o.call(i||t.s,e);void 0!==s&&(t.f=t.f&&(s==e||s instanceof Error),t.c=e=s),(x(e)||"function"===typeof u.Promise&&e instanceof u.Promise)&&(r=!0,t.i=!0)}catch(c){e=c,t.f=!0,Ka(t)||(n=!0)}}t.c=e,r&&(s=I(t.m,t,!0),r=I(t.m,t,!1),e instanceof ja?(qa(e,s,r),e.C=!0):e.then(s,r)),n&&(e=new Wa(e),Xa[e.a]=e,t.h=e.a)}function Ha(){L.call(this)}function za(){L.call(this)}function Wa(t){this.a=u.setTimeout(I(this.c,this),0),this.b=t}(t=Sa.prototype).Ma=function(){"undefined"!=typeof s&&this.a&&(this.h="Timed out after "+this.g+"ms, aborting",ya(this.b,Ua(this,this.h)),this.dispatchEvent("timeout"),this.abort(8))},t.abort=function(){this.a&&this.c&&(ya(this.b,Ua(this,"Aborting")),this.c=!1,this.f=!0,this.a.abort(),this.f=!1,this.dispatchEvent("complete"),this.dispatchEvent("abort"),xa(this))},t.Da=function(){this.a&&(this.c&&(this.c=!1,this.f=!0,this.a.abort(),this.f=!1),xa(this,!0)),Sa.bb.Da.call(this)},t.Wb=function(){this.ya||(this.N||this.i||this.f?Pa(this):this.Jc())},t.Jc=function(){Pa(this)},t.getResponse=function(){try{if(!this.a)return null;if("response"in this.a)return this.a.response;switch(this.m){case Aa:case"text":return this.a.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in this.a)return this.a.mozResponseArrayBuffer}var t=this.b;return t&&t.log(ca,"Response type "+this.m+" is not supported on this browser",void 0),null}catch(e){return ya(this.b,"Can not get response: "+e.message),null}},ja.prototype.cancel=function(t){if(this.a)this.c instanceof ja&&this.c.cancel();else{if(this.b){var e=this.b;delete this.b,t?e.cancel(t):(e.l--,0>=e.l&&e.cancel())}this.u?this.u.call(this.s,this):this.v=!0,this.a||(t=new za(this),Ba(this),Va(this,!1,t))}},ja.prototype.m=function(t,e){this.i=!1,Va(this,t,e)},ja.prototype.then=function(t,e,n){var r,i,o=new Te((function(t,e){r=t,i=e}));return qa(this,r,(function(t){t instanceof za?o.cancel():i(t)})),o.then(t,e,n)},ja.prototype.$goog_Thenable=!0,S(Ha,L),Ha.prototype.message="Deferred has already fired",Ha.prototype.name="AlreadyCalledError",S(za,L),za.prototype.message="Deferred was canceled",za.prototype.name="CanceledError",Wa.prototype.c=function(){throw delete Xa[this.a],this.b};var Xa={};function Qa(t){var e={},n=e.document||document,r=kt(t).toString(),i=me(document,"SCRIPT"),o={Xb:i,Ma:void 0},a=new ja(o),s=null,c=null!=e.timeout?e.timeout:5e3;return 0<c&&(s=window.setTimeout((function(){Ja(i,!0);var t=new ts(Za,"Timeout reached for loading script "+r);Ba(a),Va(a,!1,t)}),c),o.Ma=s),i.onload=i.onreadystatechange=function(){i.readyState&&"loaded"!=i.readyState&&"complete"!=i.readyState||(Ja(i,e.xd||!1,s),Ba(a),Va(a,!0,null))},i.onerror=function(){Ja(i,!0,s);var t=new ts($a,"Error while loading script "+r);Ba(a),Va(a,!1,t)},yt(o=e.attributes||{},{type:"text/javascript",charset:"UTF-8"}),fe(i,o),function(t,e){bt(t,"HTMLScriptElement"),t.src=kt(e),(e=t.ownerDocument&&t.ownerDocument.defaultView)&&e!=u?e=l(e.document):(null===h&&(h=l(u.document)),e=h),e&&t.setAttribute("nonce",e)}(i,t),function(t){var e;return(e=(t||document).getElementsByTagName("HEAD"))&&0!=e.length?e[0]:t.documentElement}(n).appendChild(i),a}function Ya(){if(this&&this.Xb){var t=this.Xb;t&&"SCRIPT"==t.tagName&&Ja(t,!0,this.Ma)}}function Ja(t,e,n){null!=n&&u.clearTimeout(n),t.onload=f,t.onerror=f,t.onreadystatechange=f,e&&window.setTimeout((function(){t&&t.parentNode&&t.parentNode.removeChild(t)}),0)}var $a=0,Za=1;function ts(t,e){var n="Jsloader error (code #"+t+")";e&&(n+=": "+e),L.call(this,n),this.code=t}function es(t){this.f=t}function ns(t,e,n){if(this.c=t,t=e||{},this.l=t.secureTokenEndpoint||"https://securetoken.googleapis.com/v1/token",this.m=t.secureTokenTimeout||os,this.g=gt(t.secureTokenHeaders||as),this.h=t.firebaseEndpoint||"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",this.i=t.identityPlatformEndpoint||"https://identitytoolkit.googleapis.com/v2/",this.v=t.firebaseTimeout||ss,this.a=gt(t.firebaseHeaders||us),n&&(this.a["X-Client-Version"]=n,this.g["X-Client-Version"]=n),n="Node"==Sr(),!(n=u.XMLHttpRequest||n&&r.default.INTERNAL.node&&r.default.INTERNAL.node.XMLHttpRequest)&&!Er())throw new k("internal-error","The XMLHttpRequest compatibility library was not found.");this.f=void 0,Er()?this.f=new ba(self):Ar()?this.f=new es(n):this.f=new ra,this.b=null}S(ts,L),S(es,Zo),es.prototype.a=function(){return new this.f},es.prototype.b=function(){return{}};var rs,is="idToken",os=new Hr(3e4,6e4),as={"Content-Type":"application/x-www-form-urlencoded"},ss=new Hr(3e4,6e4),us={"Content-Type":"application/json"};function cs(t,e){e?t.a["X-Firebase-Locale"]=e:delete t.a["X-Firebase-Locale"]}function hs(t,e){e&&(t.l=ls("https://securetoken.googleapis.com/v1/token",e),t.h=ls("https://www.googleapis.com/identitytoolkit/v3/relyingparty/",e),t.i=ls("https://identitytoolkit.googleapis.com/v2/",e))}function ls(t,e){return t=qn(t),e=qn(e.url),t.f=t.a+t.f,Fn(t,e.c),t.a=e.a,Un(t,e.g),t.toString()}function fs(t,e){e?(t.a["X-Client-Version"]=e,t.g["X-Client-Version"]=e):(delete t.a["X-Client-Version"],delete t.g["X-Client-Version"])}function ps(t,e,n,r,i,o,a){(function(){var t=Rr();return!((t=Cr(t)!=Nr?null:(t=t.match(/\sChrome\/(\d+)/i))&&2==t.length?parseInt(t[1],10):null)&&30>t)&&(!Yt||!ce||9<ce)})()||Er()?t=I(t.u,t):(rs||(rs=new Te((function(t,e){!function(t,e){if(((window.gapi||{}).client||{}).request)t();else{u[vs]=function(){((window.gapi||{}).client||{}).request?t():e(Error("CORS_UNSUPPORTED"))},function(t,e){qa(t,null,e,void 0)}(Qa(Nt(ds,{onload:vs})),(function(){e(Error("CORS_UNSUPPORTED"))}))}}(t,e)}))),t=I(t.s,t)),t(e,n,r,i,o,a)}ns.prototype.T=function(){return this.b},ns.prototype.u=function(t,e,n,r,i,o){if(Er()&&("undefined"===typeof u.fetch||"undefined"===typeof u.Headers||"undefined"===typeof u.Request))throw new k("operation-not-supported-in-this-environment","fetch, Headers and Request native APIs or equivalent Polyfills must be available to support HTTP requests from a Worker environment.");var a=new Sa(this.f);if(o){a.g=Math.max(0,o);var s=setTimeout((function(){a.dispatchEvent("timeout")}),o)}Sn(a,"complete",(function(){s&&clearTimeout(s);var t=null;try{t=JSON.parse(function(t){try{return t.a?t.a.responseText:""}catch(e){return ya(t.b,"Can not get responseText: "+e.message),""}}(this))||null}catch(Xt){t=null}e&&e(t)})),An(a,"ready",(function(){s&&clearTimeout(s),Xe(this)})),An(a,"timeout",(function(){s&&clearTimeout(s),Xe(this),e&&e(null)})),Ca(a,t,n,r,i)};var ds=new wt(Et,"https://apis.google.com/js/client.js?onload=%{onload}"),vs="__fcb"+Math.floor(1e6*Math.random()).toString();function gs(t,e,n,r,i,o,a){var s=qn(e+n);Vn(s,"key",t.c),a&&Vn(s,"cb",Date.now().toString());var u="GET"==r;if(u)for(var c in i)i.hasOwnProperty(c)&&Vn(s,c,i[c]);return new Te((function(e,n){ps(t,s.toString(),(function(t){t?t.error?n(lu(t,o||{})):e(t):n(new k("network-request-failed"))}),r,u?void 0:ar(Vr(i)),t.a,t.v.get())}))}function ms(t){if("string"!==typeof(t=t.email)||!wr.test(t))throw new k("invalid-email")}function ys(t){"email"in t&&ms(t)}function bs(t){if(!t[is]){if(t.mfaPendingCredential)throw new k("multi-factor-auth-required",null,gt(t));throw new k("internal-error")}}function ws(t){if(t.phoneNumber||t.temporaryProof){if(!t.phoneNumber||!t.temporaryProof)throw new k("internal-error")}else{if(!t.sessionInfo)throw new k("missing-verification-id");if(!t.code)throw new k("missing-verification-code")}}ns.prototype.s=function(t,e,n,r,i){var o=this;rs.then((function(){window.gapi.client.setApiKey(o.c);var a=window.gapi.auth.getToken();window.gapi.auth.setToken(null),window.gapi.client.request({path:t,method:n,body:r,headers:i,authType:"none",callback:function(t){window.gapi.auth.setToken(a),e&&e(t)}})})).o((function(t){e&&e({error:{message:t&&t.message||"CORS_UNSUPPORTED"}})}))},ns.prototype.Ab=function(){return cu(this,Js,{})},ns.prototype.Cb=function(t,e){return cu(this,Qs,{idToken:t,email:e})},ns.prototype.Db=function(t,e){return cu(this,Ys,{idToken:t,password:e})};var _s={displayName:"DISPLAY_NAME",photoUrl:"PHOTO_URL"};function Is(t){if(!t.phoneVerificationInfo)throw new k("internal-error");if(!t.phoneVerificationInfo.sessionInfo)throw new k("missing-verification-id");if(!t.phoneVerificationInfo.code)throw new k("missing-verification-code")}function Ts(t){if(!t.requestUri||!t.sessionId&&!t.postBody&&!t.pendingToken)throw new k("internal-error")}function Es(t,e){return e.oauthIdToken&&e.providerId&&0==e.providerId.indexOf("oidc.")&&!e.pendingToken&&(t.sessionId?e.nonce=t.sessionId:t.postBody&&(nr(t=new $n(t.postBody),"nonce")&&(e.nonce=t.get("nonce")))),e}function Ss(t){var e=null;if(t.needConfirmation?(t.code="account-exists-with-different-credential",e=$o(t)):"FEDERATED_USER_ID_ALREADY_LINKED"==t.errorMessage?(t.code="credential-already-in-use",e=$o(t)):"EMAIL_EXISTS"==t.errorMessage?(t.code="email-already-in-use",e=$o(t)):t.errorMessage&&(e=hu(t.errorMessage)),e)throw e;bs(t)}function As(t,e){return e.returnIdpCredential=!0,cu(t,tu,e)}function ks(t,e){return e.returnIdpCredential=!0,cu(t,nu,e)}function Ns(t,e){return e.returnIdpCredential=!0,e.autoCreate=!1,cu(t,eu,e)}function Cs(t){if(!t.oobCode)throw new k("invalid-action-code")}(t=ns.prototype).Eb=function(t,e){var n={idToken:t},r=[];return dt(_s,(function(t,i){var o=e[i];null===o?r.push(t):i in e&&(n[i]=o)})),r.length&&(n.deleteAttribute=r),cu(this,Qs,n)},t.wb=function(t,e){return yt(t={requestType:"PASSWORD_RESET",email:t},e),cu(this,Gs,t)},t.xb=function(t,e){return yt(t={requestType:"EMAIL_SIGNIN",email:t},e),cu(this,Bs,t)},t.vb=function(t,e){return yt(t={requestType:"VERIFY_EMAIL",idToken:t},e),cu(this,qs,t)},t.Fb=function(t,e,n){return yt(t={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:t,newEmail:e},n),cu(this,Ks,t)},t.gb=function(t){return cu(this,ou,t)},t.ob=function(t,e){return cu(this,Ws,{oobCode:t,newPassword:e})},t.Sa=function(t){return cu(this,Ds,{oobCode:t})},t.kb=function(t){return cu(this,Os,{oobCode:t})};var Os={endpoint:"setAccountInfo",A:Cs,Z:"email",B:!0},Ds={endpoint:"resetPassword",A:Cs,G:function(t){var e=t.requestType;if(!e||!t.email&&"EMAIL_SIGNIN"!=e&&"VERIFY_AND_CHANGE_EMAIL"!=e)throw new k("internal-error")},B:!0},Rs={endpoint:"signupNewUser",A:function(t){if(ms(t),!t.password)throw new k("weak-password")},G:bs,V:!0,B:!0},Ps={endpoint:"createAuthUri",B:!0},xs={endpoint:"deleteAccount",O:["idToken"]},Ls={endpoint:"setAccountInfo",O:["idToken","deleteProvider"],A:function(t){if(!Array.isArray(t.deleteProvider))throw new k("internal-error")}},Ms={endpoint:"emailLinkSignin",O:["email","oobCode"],A:ms,G:bs,V:!0,B:!0},Fs={endpoint:"emailLinkSignin",O:["idToken","email","oobCode"],A:ms,G:bs,V:!0},Us={endpoint:"accounts/mfaEnrollment:finalize",O:["idToken","phoneVerificationInfo"],A:Is,G:bs,B:!0,Na:!0},js={endpoint:"accounts/mfaSignIn:finalize",O:["mfaPendingCredential","phoneVerificationInfo"],A:Is,G:bs,B:!0,Na:!0},Vs={endpoint:"getAccountInfo"},Bs={endpoint:"getOobConfirmationCode",O:["requestType"],A:function(t){if("EMAIL_SIGNIN"!=t.requestType)throw new k("internal-error");ms(t)},Z:"email",B:!0},qs={endpoint:"getOobConfirmationCode",O:["idToken","requestType"],A:function(t){if("VERIFY_EMAIL"!=t.requestType)throw new k("internal-error")},Z:"email",B:!0},Ks={endpoint:"getOobConfirmationCode",O:["idToken","newEmail","requestType"],A:function(t){if("VERIFY_AND_CHANGE_EMAIL"!=t.requestType)throw new k("internal-error")},Z:"email",B:!0},Gs={endpoint:"getOobConfirmationCode",O:["requestType"],A:function(t){if("PASSWORD_RESET"!=t.requestType)throw new k("internal-error");ms(t)},Z:"email",B:!0},Hs={mb:!0,endpoint:"getProjectConfig",Vb:"GET"},zs={mb:!0,endpoint:"getRecaptchaParam",Vb:"GET",G:function(t){if(!t.recaptchaSiteKey)throw new k("internal-error")}},Ws={endpoint:"resetPassword",A:Cs,Z:"email",B:!0},Xs={endpoint:"sendVerificationCode",O:["phoneNumber","recaptchaToken"],Z:"sessionInfo",B:!0},Qs={endpoint:"setAccountInfo",O:["idToken"],A:ys,V:!0},Ys={endpoint:"setAccountInfo",O:["idToken"],A:function(t){if(ys(t),!t.password)throw new k("weak-password")},G:bs,V:!0},Js={endpoint:"signupNewUser",G:bs,V:!0,B:!0},$s={endpoint:"accounts/mfaEnrollment:start",O:["idToken","phoneEnrollmentInfo"],A:function(t){if(!t.phoneEnrollmentInfo)throw new k("internal-error");if(!t.phoneEnrollmentInfo.phoneNumber)throw new k("missing-phone-number");if(!t.phoneEnrollmentInfo.recaptchaToken)throw new k("missing-app-credential")},G:function(t){if(!t.phoneSessionInfo||!t.phoneSessionInfo.sessionInfo)throw new k("internal-error")},B:!0,Na:!0},Zs={endpoint:"accounts/mfaSignIn:start",O:["mfaPendingCredential","mfaEnrollmentId","phoneSignInInfo"],A:function(t){if(!t.phoneSignInInfo||!t.phoneSignInInfo.recaptchaToken)throw new k("missing-app-credential")},G:function(t){if(!t.phoneResponseInfo||!t.phoneResponseInfo.sessionInfo)throw new k("internal-error")},B:!0,Na:!0},tu={endpoint:"verifyAssertion",A:Ts,Za:Es,G:Ss,V:!0,B:!0},eu={endpoint:"verifyAssertion",A:Ts,Za:Es,G:function(t){if(t.errorMessage&&"USER_NOT_FOUND"==t.errorMessage)throw new k("user-not-found");if(t.errorMessage)throw hu(t.errorMessage);bs(t)},V:!0,B:!0},nu={endpoint:"verifyAssertion",A:function(t){if(Ts(t),!t.idToken)throw new k("internal-error")},Za:Es,G:Ss,V:!0},ru={endpoint:"verifyCustomToken",A:function(t){if(!t.token)throw new k("invalid-custom-token")},G:bs,V:!0,B:!0},iu={endpoint:"verifyPassword",A:function(t){if(ms(t),!t.password)throw new k("wrong-password")},G:bs,V:!0,B:!0},ou={endpoint:"verifyPhoneNumber",A:ws,G:bs,B:!0},au={endpoint:"verifyPhoneNumber",A:function(t){if(!t.idToken)throw new k("internal-error");ws(t)},G:function(t){if(t.temporaryProof)throw t.code="credential-already-in-use",$o(t);bs(t)}},su={Ib:{USER_NOT_FOUND:"user-not-found"},endpoint:"verifyPhoneNumber",A:ws,G:bs,B:!0},uu={endpoint:"accounts/mfaEnrollment:withdraw",O:["idToken","mfaEnrollmentId"],G:function(t){if(!!t[is]^!!t.refreshToken)throw new k("internal-error")},B:!0,Na:!0};function cu(t,e,n){if(!function(t,e){if(!e||!e.length)return!0;if(!t)return!1;for(var n=0;n<e.length;n++){var r=t[e[n]];if(void 0===r||null===r||""===r)return!1}return!0}(n,e.O))return De(new k("internal-error"));var r,i=!!e.Na,o=e.Vb||"POST";return Oe(n).then(e.A).then((function(){return e.V&&(n.returnSecureToken=!0),e.B&&t.b&&"undefined"===typeof n.tenantId&&(n.tenantId=t.b),gs(t,i?t.i:t.h,e.endpoint,o,n,e.Ib,e.mb||!1)})).then((function(t){return r=t,e.Za?e.Za(n,r):r})).then(e.G).then((function(){if(!e.Z)return r;if(!(e.Z in r))throw new k("internal-error");return r[e.Z]}))}function hu(t){return lu({error:{errors:[{message:t}],code:400,message:t}})}function lu(t,e){var n=(t.error&&t.error.errors&&t.error.errors[0]||{}).reason||"",r={keyInvalid:"invalid-api-key",ipRefererBlocked:"app-not-authorized"};if(n=r[n]?new k(r[n]):null)return n;for(var i in n=t.error&&t.error.message||"",yt(r={INVALID_CUSTOM_TOKEN:"invalid-custom-token",CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_EMAIL:"invalid-email",INVALID_PASSWORD:"wrong-password",USER_DISABLED:"user-disabled",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_OR_INVALID_NONCE:"missing-or-invalid-nonce",INVALID_MESSAGE_PAYLOAD:"invalid-message-payload",INVALID_RECIPIENT_EMAIL:"invalid-recipient-email",INVALID_SENDER:"invalid-sender",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",INVALID_PROVIDER_ID:"invalid-provider-id",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",CORS_UNSUPPORTED:"cors-unsupported",DYNAMIC_LINK_NOT_ACTIVATED:"dynamic-link-not-activated",INVALID_APP_ID:"invalid-app-id",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",WEAK_PASSWORD:"weak-password",OPERATION_NOT_ALLOWED:"operation-not-allowed",USER_CANCELLED:"user-cancelled",CAPTCHA_CHECK_FAILED:"captcha-check-failed",INVALID_APP_CREDENTIAL:"invalid-app-credential",INVALID_CODE:"invalid-verification-code",INVALID_PHONE_NUMBER:"invalid-phone-number",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_APP_CREDENTIAL:"missing-app-credential",MISSING_CODE:"missing-verification-code",MISSING_PHONE_NUMBER:"missing-phone-number",MISSING_SESSION_INFO:"missing-verification-id",QUOTA_EXCEEDED:"quota-exceeded",SESSION_EXPIRED:"code-expired",REJECTED_CREDENTIAL:"rejected-credential",INVALID_CONTINUE_URI:"invalid-continue-uri",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",MISSING_IOS_BUNDLE_ID:"missing-ios-bundle-id",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_DYNAMIC_LINK_DOMAIN:"invalid-dynamic-link-domain",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",INVALID_CERT_HASH:"invalid-cert-hash",UNSUPPORTED_TENANT_OPERATION:"unsupported-tenant-operation",INVALID_TENANT_ID:"invalid-tenant-id",TENANT_ID_MISMATCH:"tenant-id-mismatch",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",EMAIL_CHANGE_NEEDS_VERIFICATION:"email-change-needs-verification",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",UNSUPPORTED_FIRST_FACTOR:"unsupported-first-factor",UNVERIFIED_EMAIL:"unverified-email"},e||{}),e=(e=n.match(/^[^\s]+\s*:\s*([\s\S]*)$/))&&1<e.length?e[1]:void 0,r)if(0===n.indexOf(i))return new k(r[i],e);return!e&&t&&(e=jr(t)),new k("internal-error",e)}function fu(t){this.b=t,this.a=null,this.sb=function(t){return(gu||(gu=new Te((function(t,e){function n(){Gr(),Pr("gapi.load")("gapi.iframes",{callback:t,ontimeout:function(){Gr(),e(Error("Network Error"))},timeout:du.get()})}if(Pr("gapi.iframes.Iframe"))t();else if(Pr("gapi.load"))n();else{var r="__iframefcb"+Math.floor(1e6*Math.random()).toString();u[r]=function(){Pr("gapi.load")?n():e(Error("Network Error"))},Oe(Qa(r=Nt(pu,{onload:r}))).o((function(){e(Error("Network Error"))}))}})).o((function(t){throw gu=null,t})))).then((function(){return new Te((function(e,n){Pr("gapi.iframes.getContext")().open({where:document.body,url:t.b,messageHandlersFilter:Pr("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"),attributes:{style:{position:"absolute",top:"-100px",width:"1px",height:"1px"}},dontclear:!0},(function(r){function i(){clearTimeout(o),e()}t.a=r,t.a.restyle({setHideOnLeave:!1});var o=setTimeout((function(){n(Error("Network Error"))}),vu.get());r.ping(i).then(i,(function(){n(Error("Network Error"))}))}))}))}))}(this)}var pu=new wt(Et,"https://apis.google.com/js/api.js?onload=%{onload}"),du=new Hr(3e4,6e4),vu=new Hr(5e3,15e3),gu=null;function mu(t,e,n,r){this.l=t,this.h=e,this.i=n,this.g=r,this.f=null,this.g?t=Kn((t=qn(this.g.url)).c,t.a,t.g,"/emulator/auth/iframe"):t=Kn("https",this.l,null,"/__/auth/iframe"),this.a=t,Vn(this.a,"apiKey",this.h),Vn(this.a,"appName",this.i),this.b=null,this.c=[]}function yu(t,e,n,r,i,o){this.u=t,this.s=e,this.c=n,this.m=r,this.v=o,this.i=this.g=this.l=null,this.a=i,this.h=this.f=null}function bu(t){try{return r.default.app(t).auth().Ga()}catch(e){return[]}}function wu(t,e,n,r,i,o){this.s=t,this.g=e,this.b=n,this.f=o,this.c=r||null,this.i=i||null,this.l=this.u=this.C=null,this.h=[],this.m=this.a=null}function _u(t){var e=pr();return function(t){return cu(t,Hs,{}).then((function(t){return t.authorizedDomains||[]}))}(t).then((function(t){t:{var n=qn(e),r=n.c;n=n.a;for(var i=0;i<t.length;i++){var o=t[i],a=n,s=r;if(0==o.indexOf("chrome-extension://")?a=qn(o).a==a&&"chrome-extension"==s:"http"!=s&&"https"!=s?a=!1:br.test(o)?a=a==o:(o=o.split(".").join("\\."),a=new RegExp("^(.+\\."+o+"|"+o+")$","i").test(a)),a){t=!0;break t}}t=!1}if(!t)throw new Yo(pr())}))}function Iu(t){return t.m||(t.m=_r().then((function(){if(!t.u){var e=t.c,n=t.i,r=bu(t.b),i=new mu(t.s,t.g,t.b,t.f);i.f=e,i.b=n,i.c=Z(r||[]),t.u=i.toString()}t.v=new fu(t.u),function(t){if(!t.v)throw Error("IfcHandler must be initialized!");!function(t,e){t.sb.then((function(){t.a.register("authEvent",e,Pr("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))}))}(t.v,(function(e){var n={};if(e&&e.authEvent){var r=!1;for(e=zo(e.authEvent),n=0;n<t.h.length;n++)r=t.h[n](e)||r;return(n={}).status=r?"ACK":"ERROR",Oe(n)}return n.status="ERROR",Oe(n)}))}(t)}))),t.m}function Tu(t){return t.l||(t.C=t.c?Dr(t.c,bu(t.b)):null,t.l=new ns(t.g,P(t.i),t.C),t.f&&hs(t.l,t.f)),t.l}function Eu(t,e,n,r,i,o,a,s,u,c,h,l){return(t=new yu(t,e,n,r,i,l)).l=o,t.g=a,t.i=s,t.b=gt(u||null),t.f=c,t.zb(h).toString()}function Su(t){if(this.a=t||r.default.INTERNAL.reactNative&&r.default.INTERNAL.reactNative.AsyncStorage,!this.a)throw new k("internal-error","The React Native compatibility library was not found.");this.type="asyncStorage"}function Au(t){this.b=t,this.a={},this.f=I(this.c,this)}mu.prototype.toString=function(){return this.f?Vn(this.a,"v",this.f):er(this.a.b,"v"),this.b?Vn(this.a,"eid",this.b):er(this.a.b,"eid"),this.c.length?Vn(this.a,"fw",this.c.join(",")):er(this.a.b,"fw"),this.a.toString()},yu.prototype.zb=function(t){return this.h=t,this},yu.prototype.toString=function(){if(this.v){var t=qn(this.v.url);t=Kn(t.c,t.a,t.g,"/emulator/auth/handler")}else t=Kn("https",this.u,null,"/__/auth/handler");if(Vn(t,"apiKey",this.s),Vn(t,"appName",this.c),Vn(t,"authType",this.m),this.a.isOAuthProvider){var e=this.a;try{var n=r.default.app(this.c).auth().la()}catch(u){n=null}for(var i in e.pb=n,Vn(t,"providerId",this.a.providerId),e=Vr((n=this.a).Jb))e[i]=e[i].toString();i=n.Qc,e=gt(e);for(var o=0;o<i.length;o++){var a=i[o];a in e&&delete e[a]}n.qb&&n.pb&&!e[n.qb]&&(e[n.qb]=n.pb),vt(e)||Vn(t,"customParameters",jr(e))}if("function"===typeof this.a.Rb&&((n=this.a.Rb()).length&&Vn(t,"scopes",n.join(","))),this.l?Vn(t,"redirectUrl",this.l):er(t.b,"redirectUrl"),this.g?Vn(t,"eventId",this.g):er(t.b,"eventId"),this.i?Vn(t,"v",this.i):er(t.b,"v"),this.b)for(var s in this.b)this.b.hasOwnProperty(s)&&!Bn(t,s)&&Vn(t,s,this.b[s]);return this.h?Vn(t,"tid",this.h):er(t.b,"tid"),this.f?Vn(t,"eid",this.f):er(t.b,"eid"),(s=bu(this.c)).length&&Vn(t,"fw",s.join(",")),t.toString()},(t=wu.prototype).Pb=function(t,e,n){var r=new k("popup-closed-by-user"),i=new k("web-storage-unsupported"),o=this,a=!1;return this.ma().then((function(){(function(t){var e={type:"webStorageSupport"};return Iu(t).then((function(){return function(t,e){return t.sb.then((function(){return new Te((function(n){t.a.send(e.type,e,n,Pr("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))}))}))}(t.v,e)})).then((function(t){if(t&&t.length&&"undefined"!==typeof t[0].webStorageSupport)return t[0].webStorageSupport;throw Error()}))})(o).then((function(n){n||(t&&mr(t),e(i),a=!0)}))})).o((function(){})).then((function(){if(!a)return function(t){return new Te((function(e){return function n(){Cn(2e3).then((function(){if(t&&!t.closed)return n();e()}))}()}))}(t)})).then((function(){if(!a)return Cn(n).then((function(){e(r)}))}))},t.Yb=function(){var t=Rr();return!Ur(t)&&!Kr(t)},t.Ub=function(){return!1},t.Nb=function(t,e,n,r,i,o,a,s){if(!t)return De(new k("popup-blocked"));if(a&&!Ur())return this.ma().o((function(e){mr(t),i(e)})),r(),Oe();this.a||(this.a=_u(Tu(this)));var u=this;return this.a.then((function(){var e=u.ma().o((function(e){throw mr(t),i(e),e}));return r(),e})).then((function(){(Go(n),a)||dr(Eu(u.s,u.g,u.b,e,n,null,o,u.c,void 0,u.i,s,u.f),t)})).o((function(t){throw"auth/network-request-failed"==t.code&&(u.a=null),t}))},t.Ob=function(t,e,n,r){this.a||(this.a=_u(Tu(this)));var i=this;return this.a.then((function(){Go(e),dr(Eu(i.s,i.g,i.b,t,e,pr(),n,i.c,void 0,i.i,r,i.f))})).o((function(t){throw"auth/network-request-failed"==t.code&&(i.a=null),t}))},t.ma=function(){var t=this;return Iu(this).then((function(){return t.v.sb})).o((function(){throw t.a=null,new k("network-request-failed")}))},t.ac=function(){return!0},t.Ea=function(t){this.h.push(t)},t.Ta=function(t){J(this.h,(function(e){return e==t}))},(t=Su.prototype).get=function(t){return Oe(this.a.getItem(t)).then((function(t){return t&&Br(t)}))},t.set=function(t,e){return Oe(this.a.setItem(t,jr(e)))},t.U=function(t){return Oe(this.a.removeItem(t))},t.ca=function(){},t.ia=function(){};var ku,Nu=[];function Cu(t,e,n){vt(t.a)&&t.b.addEventListener("message",t.f),"undefined"===typeof t.a[e]&&(t.a[e]=[]),t.a[e].push(n)}function Ou(t){this.a=t}function Du(t){this.c=t,this.b=!1,this.a=[]}function Ru(t,e,n,r){var i,o,a,s,u=n||{},c=null;if(t.b)return De(Error("connection_unavailable"));var h=r?800:50,l="undefined"!==typeof MessageChannel?new MessageChannel:null;return new Te((function(n,r){l?(i=Math.floor(Math.random()*Math.pow(10,20)).toString(),l.port1.start(),a=setTimeout((function(){r(Error("unsupported_event"))}),h),o=function(t){t.data.eventId===i&&("ack"===t.data.status?(clearTimeout(a),s=setTimeout((function(){r(Error("timeout"))}),3e3)):"done"===t.data.status?(clearTimeout(s),"undefined"!==typeof t.data.response?n(t.data.response):r(Error("unknown_error"))):(clearTimeout(a),clearTimeout(s),r(Error("invalid_response"))))},c={messageChannel:l,onMessage:o},t.a.push(c),l.port1.addEventListener("message",o),t.c.postMessage({eventType:e,eventId:i,data:u},[l.port2])):r(Error("connection_unavailable"))})).then((function(e){return Pu(t,c),e})).o((function(e){throw Pu(t,c),e}))}function Pu(t,e){if(e){var n=e.messageChannel,r=e.onMessage;n&&(n.port1.removeEventListener("message",r),n.port1.close()),J(t.a,(function(t){return t==e}))}}function xu(){if(!Uu())throw new k("web-storage-unsupported");this.c={},this.a=[],this.b=0,this.m=u.indexedDB,this.type="indexedDB",this.g=this.v=this.f=this.l=null,this.s=!1,this.h=null;var t=this;Er()&&self?(this.v=function(){var t=Er()?self:null;if(H(Nu,(function(n){n.b==t&&(e=n)})),!e){var e=new Au(t);Nu.push(e)}return e}(),Cu(this.v,"keyChanged",(function(e,n){return Ku(t).then((function(e){return 0<e.length&&H(t.a,(function(t){t(e)})),{keyProcessed:Q(e,n.key)}}))})),Cu(this.v,"ping",(function(){return Oe(["keyChanged"])}))):function(){var t=u.navigator;return t&&t.serviceWorker?Oe().then((function(){return t.serviceWorker.ready})).then((function(t){return t.active||null})).o((function(){return null})):Oe(null)}().then((function(e){(t.h=e)&&(t.g=new Du(new Ou(e)),Ru(t.g,"ping",null,!0).then((function(e){e[0].fulfilled&&Q(e[0].value,"keyChanged")&&(t.s=!0)})).o((function(){})))}))}function Lu(t){return new Te((function(e,n){var r=t.m.open("firebaseLocalStorageDb",1);r.onerror=function(t){try{t.preventDefault()}catch(e){}n(Error(t.target.error))},r.onupgradeneeded=function(t){t=t.target.result;try{t.createObjectStore("firebaseLocalStorage",{keyPath:"fbase_key"})}catch(e){n(e)}},r.onsuccess=function(r){(r=r.target.result).objectStoreNames.contains("firebaseLocalStorage")?e(r):function(t){return new Te((function(e,n){var r=t.m.deleteDatabase("firebaseLocalStorageDb");r.onsuccess=function(){e()},r.onerror=function(t){n(Error(t.target.error))}}))}(t).then((function(){return Lu(t)})).then((function(t){e(t)})).o((function(t){n(t)}))}}))}function Mu(t){return t.i||(t.i=Lu(t)),t.i}function Fu(t,e){var n=0;return new Te((function r(i,o){Mu(t).then(e).then(i).o((function(e){if(!(3<++n))return Mu(t).then((function(e){return e.close(),t.i=void 0,r(i,o)})).o((function(t){o(t)}));o(e)}))}))}function Uu(){try{return!!u.indexedDB}catch(da){return!1}}function ju(t){return t.objectStore("firebaseLocalStorage")}function Vu(t,e){return t.transaction(["firebaseLocalStorage"],e?"readwrite":"readonly")}function Bu(t){return new Te((function(e,n){t.onsuccess=function(t){t&&t.target?e(t.target.result):e()},t.onerror=function(t){n(t.target.error)}}))}function qu(t,e){return t.g&&t.h&&function(){var t=u.navigator;return t&&t.serviceWorker&&t.serviceWorker.controller||null}()===t.h?Ru(t.g,"keyChanged",{key:e},t.s).then((function(){})).o((function(){})):Oe()}function Ku(t){return Mu(t).then((function(t){var e=ju(Vu(t,!1));return e.getAll?Bu(e.getAll()):new Te((function(t,n){var r=[],i=e.openCursor();i.onsuccess=function(e){(e=e.target.result)?(r.push(e.value),e.continue()):t(r)},i.onerror=function(t){n(t.target.error)}}))})).then((function(e){var n={},r=[];if(0==t.b){for(r=0;r<e.length;r++)n[e[r].fbase_key]=e[r].value;r=vr(t.c,n),t.c=n}return r}))}function Gu(t){t.l&&t.l.cancel("STOP_EVENT"),t.f&&(clearTimeout(t.f),t.f=null)}function Hu(t){var e=this,n=null;this.a=[],this.type="indexedDB",this.c=t,this.b=Oe().then((function(){if(Uu()){var t=qr(),r="__sak"+t;return ku||(ku=new xu),(n=ku).set(r,t).then((function(){return n.get(r)})).then((function(e){if(e!==t)throw Error("indexedDB not supported!");return n.U(r)})).then((function(){return n})).o((function(){return e.c}))}return e.c})).then((function(t){return e.type=t.type,t.ca((function(t){H(e.a,(function(e){e(t)}))})),t}))}function zu(){this.a={},this.type="inMemory"}function Wu(){if(!function(){var t="Node"==Sr();if(!(t=Xu()||t&&r.default.INTERNAL.node&&r.default.INTERNAL.node.localStorage))return!1;try{return t.setItem("__sak","1"),t.removeItem("__sak"),!0}catch(e){return!1}}()){if("Node"==Sr())throw new k("internal-error","The LocalStorage compatibility library was not found.");throw new k("web-storage-unsupported")}this.a=Xu()||r.default.INTERNAL.node.localStorage,this.type="localStorage"}function Xu(){try{var t=u.localStorage,e=qr();return t&&(t.setItem(e,"1"),t.removeItem(e)),t}catch(n){return null}}function Qu(){this.type="nullStorage"}function Yu(){if(!function(){var t="Node"==Sr();if(!(t=Ju()||t&&r.default.INTERNAL.node&&r.default.INTERNAL.node.sessionStorage))return!1;try{return t.setItem("__sak","1"),t.removeItem("__sak"),!0}catch(e){return!1}}()){if("Node"==Sr())throw new k("internal-error","The SessionStorage compatibility library was not found.");throw new k("web-storage-unsupported")}this.a=Ju()||r.default.INTERNAL.node.sessionStorage,this.type="sessionStorage"}function Ju(){try{var t=u.sessionStorage,e=qr();return t&&(t.setItem(e,"1"),t.removeItem(e)),t}catch(n){return null}}function $u(){var t={};t.Browser=ec,t.Node=nc,t.ReactNative=rc,t.Worker=ic,this.a=t[Sr()]}Au.prototype.c=function(t){var e=t.data.eventType,n=t.data.eventId,r=this.a[e];if(r&&0<r.length){t.ports[0].postMessage({status:"ack",eventId:n,eventType:e,response:null});var i=[];H(r,(function(e){i.push(Oe().then((function(){return e(t.origin,t.data.data)})))})),Pe(i).then((function(r){var i=[];H(r,(function(t){i.push({fulfilled:t.Qb,value:t.value,reason:t.reason?t.reason.message:void 0})})),H(i,(function(t){for(var e in t)"undefined"===typeof t[e]&&delete t[e]})),t.ports[0].postMessage({status:"done",eventId:n,eventType:e,response:i})}))}},Ou.prototype.postMessage=function(t,e){this.a.postMessage(t,e)},Du.prototype.close=function(){for(;0<this.a.length;)Pu(this,this.a[0]);this.b=!0},(t=xu.prototype).set=function(t,e){var n=this,r=!1;return Fu(this,(function(e){return Bu((e=ju(Vu(e,!0))).get(t))})).then((function(i){return Fu(n,(function(o){if(o=ju(Vu(o,!0)),i)return i.value=e,Bu(o.put(i));n.b++,r=!0;var a={};return a.fbase_key=t,a.value=e,Bu(o.add(a))}))})).then((function(){return n.c[t]=e,qu(n,t)})).oa((function(){r&&n.b--}))},t.get=function(t){return Fu(this,(function(e){return Bu(ju(Vu(e,!1)).get(t))})).then((function(t){return t&&t.value}))},t.U=function(t){var e=this,n=!1;return Fu(this,(function(r){return n=!0,e.b++,Bu(ju(Vu(r,!0)).delete(t))})).then((function(){return delete e.c[t],qu(e,t)})).oa((function(){n&&e.b--}))},t.ca=function(t){0==this.a.length&&function(t){function e(){t.f=setTimeout((function(){t.l=Ku(t).then((function(e){0<e.length&&H(t.a,(function(t){t(e)}))})).then((function(){e()})).o((function(t){"STOP_EVENT"!=t.message&&e()}))}),800)}Gu(t),e()}(this),this.a.push(t)},t.ia=function(t){J(this.a,(function(e){return e==t})),0==this.a.length&&Gu(this)},(t=Hu.prototype).get=function(t){return this.b.then((function(e){return e.get(t)}))},t.set=function(t,e){return this.b.then((function(n){return n.set(t,e)}))},t.U=function(t){return this.b.then((function(e){return e.U(t)}))},t.ca=function(t){this.a.push(t)},t.ia=function(t){J(this.a,(function(e){return e==t}))},(t=zu.prototype).get=function(t){return Oe(this.a[t])},t.set=function(t,e){return this.a[t]=e,Oe()},t.U=function(t){return delete this.a[t],Oe()},t.ca=function(){},t.ia=function(){},(t=Wu.prototype).get=function(t){var e=this;return Oe().then((function(){return Br(e.a.getItem(t))}))},t.set=function(t,e){var n=this;return Oe().then((function(){var r=jr(e);null===r?n.U(t):n.a.setItem(t,r)}))},t.U=function(t){var e=this;return Oe().then((function(){e.a.removeItem(t)}))},t.ca=function(t){u.window&&fn(u.window,"storage",t)},t.ia=function(t){u.window&&vn(u.window,"storage",t)},(t=Qu.prototype).get=function(){return Oe(null)},t.set=function(){return Oe()},t.U=function(){return Oe()},t.ca=function(){},t.ia=function(){},(t=Yu.prototype).get=function(t){var e=this;return Oe().then((function(){return Br(e.a.getItem(t))}))},t.set=function(t,e){var n=this;return Oe().then((function(){var r=jr(e);null===r?n.U(t):n.a.setItem(t,r)}))},t.U=function(t){var e=this;return Oe().then((function(){e.a.removeItem(t)}))},t.ca=function(){},t.ia=function(){};var Zu,tc,ec={F:Wu,cb:Yu},nc={F:Wu,cb:Yu},rc={F:Su,cb:Qu},ic={F:Wu,cb:Qu},oc={rd:"local",NONE:"none",td:"session"};function ac(){var t=!(Kr(Rr())||!Tr()),e=Ur(),n=xr();this.m=t,this.h=e,this.l=n,this.a={},Zu||(Zu=new $u),t=Zu;try{this.g=!fr()&&Xr()||!u.indexedDB?new t.a.F:new Hu(Er()?new zu:new t.a.F)}catch(r){this.g=new zu,this.h=!0}try{this.i=new t.a.cb}catch(r){this.i=new zu}this.v=new zu,this.f=I(this.Zb,this),this.b={}}function sc(){return tc||(tc=new ac),tc}function uc(t,e){switch(e){case"session":return t.i;case"none":return t.v;default:return t.g}}function cc(t,e){return"firebase:"+t.name+(e?":"+e:"")}function hc(t,e,n){return n=cc(e,n),"local"==e.F&&(t.b[n]=null),uc(t,e.F).U(n)}function lc(t){t.c&&(clearInterval(t.c),t.c=null)}function fc(t){this.a=t,this.b=sc()}(t=ac.prototype).get=function(t,e){return uc(this,t.F).get(cc(t,e))},t.set=function(t,e,n){var r=cc(t,n),i=this,o=uc(this,t.F);return o.set(r,e).then((function(){return o.get(r)})).then((function(e){"local"==t.F&&(i.b[r]=e)}))},t.addListener=function(t,e,n){t=cc(t,e),this.l&&(this.b[t]=u.localStorage.getItem(t)),vt(this.a)&&(uc(this,"local").ca(this.f),this.h||(fr()||!Xr())&&u.indexedDB||!this.l||function(t){lc(t),t.c=setInterval((function(){for(var e in t.a){var n=u.localStorage.getItem(e),r=t.b[e];n!=r&&(t.b[e]=n,n=new tn({type:"storage",key:e,target:window,oldValue:r,newValue:n,a:!0}),t.Zb(n))}}),1e3)}(this)),this.a[t]||(this.a[t]=[]),this.a[t].push(n)},t.removeListener=function(t,e,n){t=cc(t,e),this.a[t]&&(J(this.a[t],(function(t){return t==n})),0==this.a[t].length&&delete this.a[t]),vt(this.a)&&(uc(this,"local").ia(this.f),lc(this))},t.Zb=function(t){if(t&&t.g){var e=t.a.key;if(null==e)for(var n in this.a){var r=this.b[n];"undefined"===typeof r&&(r=null);var i=u.localStorage.getItem(n);i!==r&&(this.b[n]=i,this.nb(n))}else if(0==e.indexOf("firebase:")&&this.a[e]){if("undefined"!==typeof t.a.a?uc(this,"local").ia(this.f):lc(this),this.m)if(n=u.localStorage.getItem(e),(r=t.a.newValue)!==n)null!==r?u.localStorage.setItem(e,r):u.localStorage.removeItem(e);else if(this.b[e]===r&&"undefined"===typeof t.a.a)return;var o=this;n=function(){"undefined"===typeof t.a.a&&o.b[e]===u.localStorage.getItem(e)||(o.b[e]=u.localStorage.getItem(e),o.nb(e))},Yt&&ce&&10==ce&&u.localStorage.getItem(e)!==t.a.newValue&&t.a.newValue!==t.a.oldValue?setTimeout(n,10):n()}}else H(t,I(this.nb,this))},t.nb=function(t){this.a[t]&&H(this.a[t],(function(t){t()}))};var pc,dc={name:"authEvent",F:"local"};function vc(){this.a=sc()}function gc(t,e){this.b=mc,this.f=u.Uint8Array?new Uint8Array(this.b):Array(this.b),this.g=this.c=0,this.a=[],this.i=t,this.h=e,this.l=u.Int32Array?new Int32Array(64):Array(64),void 0===pc&&(pc=u.Int32Array?new Int32Array(Ec):Ec),this.reset()}S(gc,(function(){this.b=-1}));for(var mc=64,yc=mc-1,bc=[],wc=0;wc<yc;wc++)bc[wc]=0;var _c=$(128,bc);function Ic(t){for(var e=t.f,n=t.l,r=0,i=0;i<e.length;)n[r++]=e[i]<<24|e[i+1]<<16|e[i+2]<<8|e[i+3],i=4*r;for(e=16;64>e;e++){i=0|n[e-15],r=0|n[e-2];var o=(0|n[e-16])+((i>>>7|i<<25)^(i>>>18|i<<14)^i>>>3)|0,a=(0|n[e-7])+((r>>>17|r<<15)^(r>>>19|r<<13)^r>>>10)|0;n[e]=o+a|0}r=0|t.a[0],i=0|t.a[1];var s=0|t.a[2],u=0|t.a[3],c=0|t.a[4],h=0|t.a[5],l=0|t.a[6];for(o=0|t.a[7],e=0;64>e;e++){var f=((r>>>2|r<<30)^(r>>>13|r<<19)^(r>>>22|r<<10))+(r&i^r&s^i&s)|0;a=(o=o+((c>>>6|c<<26)^(c>>>11|c<<21)^(c>>>25|c<<7))|0)+((a=(a=c&h^~c&l)+(0|pc[e])|0)+(0|n[e])|0)|0,o=l,l=h,h=c,c=u+a|0,u=s,s=i,i=r,r=a+f|0}t.a[0]=t.a[0]+r|0,t.a[1]=t.a[1]+i|0,t.a[2]=t.a[2]+s|0,t.a[3]=t.a[3]+u|0,t.a[4]=t.a[4]+c|0,t.a[5]=t.a[5]+h|0,t.a[6]=t.a[6]+l|0,t.a[7]=t.a[7]+o|0}function Tc(t,e,n){void 0===n&&(n=e.length);var r=0,i=t.c;if("string"===typeof e)for(;r<n;)t.f[i++]=e.charCodeAt(r++),i==t.b&&(Ic(t),i=0);else{if(!d(e))throw Error("message must be string or array");for(;r<n;){var o=e[r++];if(!("number"==typeof o&&0<=o&&255>=o&&o==(0|o)))throw Error("message must be a byte array");t.f[i++]=o,i==t.b&&(Ic(t),i=0)}}t.c=i,t.g+=n}gc.prototype.reset=function(){this.g=this.c=0,this.a=u.Int32Array?new Int32Array(this.h):Z(this.h)};var Ec=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function Sc(){gc.call(this,8,Ac)}S(Sc,gc);var Ac=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225];function kc(t,e,n,r,i,o){this.v=t,this.i=e,this.l=n,this.m=r||null,this.u=i||null,this.s=o,this.h=e+":"+n,this.C=new vc,this.g=new fc(this.h),this.f=null,this.b=[],this.a=this.c=null}function Nc(t){return new k("invalid-cordova-configuration",t)}function Cc(t){var e=new Sc;Tc(e,t),t=[];var n=8*e.g;56>e.c?Tc(e,_c,56-e.c):Tc(e,_c,e.b-(e.c-56));for(var r=63;56<=r;r--)e.f[r]=255&n,n/=256;for(Ic(e),r=n=0;r<e.i;r++)for(var i=24;0<=i;i-=8)t[n++]=e.a[r]>>i&255;return function(t){return W(t,(function(t){return 1<(t=t.toString(16)).length?t:"0"+t})).join("")}(t)}function Oc(t,e){for(var n=0;n<t.b.length;n++)try{t.b[n](e)}catch(r){}}function Dc(t){return t.f||(t.f=t.ma().then((function(){return new Te((function(e){t.Ea((function n(r){return e(r),t.Ta(n),!1})),function(t){function e(e){r=!0,i&&i.cancel(),Rc(t).then((function(r){var i=n;if(r&&e&&e.url){var o=null;-1!=(i=co(e.url)).indexOf("/__/auth/callback")&&(o=(o="object"===typeof(o=Br(Bn(o=qn(i),"firebaseError")||null))?N(o):null)?new Ho(r.c,r.b,null,null,o,null,r.T()):new Ho(r.c,r.b,i,r.f,null,null,r.T())),i=o||n}Oc(t,i)}))}var n=new Ho("unknown",null,null,null,new k("no-auth-event")),r=!1,i=Cn(500).then((function(){return Rc(t).then((function(){r||Oc(t,n)}))})),o=u.handleOpenURL;u.handleOpenURL=function(t){if(0==t.toLowerCase().indexOf(Pr("BuildInfo.packageName",u).toLowerCase()+"://")&&e({url:t}),"function"===typeof o)try{o(t)}catch(n){console.error(n)}},Qo||(Qo=new Wo),function(t){var e=Qo;e.a.push(t),e.b||(e.b=function(t){for(var n=0;n<e.a.length;n++)e.a[n](t)},"function"===typeof(t=Pr("universalLinks.subscribe",u))&&t(null,e.b))}(e)}(t)}))}))),t.f}function Rc(t){var e=null;return function(t){return t.b.get(dc,t.a).then((function(t){return zo(t)}))}(t.g).then((function(n){return e=n,hc((n=t.g).b,dc,n.a)})).then((function(){return e}))}function Pc(t){this.a=t,this.b=sc()}(t=kc.prototype).ma=function(){return this.Ia?this.Ia:this.Ia=(Ir(void 0)?_r().then((function(){return new Te((function(t,e){var n=u.document,r=setTimeout((function(){e(Error("Cordova framework is not ready."))}),1e3);n.addEventListener("deviceready",(function(){clearTimeout(r),t()}),!1)}))})):De(Error("Cordova must run in an Android or iOS file scheme."))).then((function(){if("function"!==typeof Pr("universalLinks.subscribe",u))throw Nc("cordova-universal-links-plugin-fix is not installed");if("undefined"===typeof Pr("BuildInfo.packageName",u))throw Nc("cordova-plugin-buildinfo is not installed");if("function"!==typeof Pr("cordova.plugins.browsertab.openUrl",u))throw Nc("cordova-plugin-browsertab is not installed");if("function"!==typeof Pr("cordova.InAppBrowser.open",u))throw Nc("cordova-plugin-inappbrowser is not installed")}),(function(){throw new k("cordova-not-ready")}))},t.Pb=function(t,e){return e(new k("operation-not-supported-in-this-environment")),Oe()},t.Nb=function(){return De(new k("operation-not-supported-in-this-environment"))},t.ac=function(){return!1},t.Yb=function(){return!0},t.Ub=function(){return!0},t.Ob=function(t,e,n,r){if(this.c)return De(new k("redirect-operation-pending"));var i=this,o=u.document,a=null,s=null,c=null,h=null;return this.c=Oe().then((function(){return Go(e),Dc(i)})).then((function(){return function(t,e,n,r,i){var o=function(){for(var t=20,e=[];0<t;)e.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),t--;return e.join("")}(),a=new Ho(e,r,null,o,new k("no-auth-event"),null,i),s=Pr("BuildInfo.packageName",u);if("string"!==typeof s)throw new k("invalid-cordova-configuration");var c=Pr("BuildInfo.displayName",u),h={};if(Rr().toLowerCase().match(/iphone|ipad|ipod/))h.ibi=s;else{if(!Rr().toLowerCase().match(/android/))return De(new k("operation-not-supported-in-this-environment"));h.apn=s}c&&(h.appDisplayName=c),o=Cc(o),h.sessionId=o;var l=Eu(t.v,t.i,t.l,e,n,null,r,t.m,h,t.u,i,t.s);return t.ma().then((function(){var e=t.h;return t.C.a.set(dc,a.w(),e)})).then((function(){var e=Pr("cordova.plugins.browsertab.isAvailable",u);if("function"!==typeof e)throw new k("invalid-cordova-configuration");var n=null;e((function(e){if(e){if("function"!==typeof(n=Pr("cordova.plugins.browsertab.openUrl",u)))throw new k("invalid-cordova-configuration");n(l)}else{if("function"!==typeof(n=Pr("cordova.InAppBrowser.open",u)))throw new k("invalid-cordova-configuration");e=Rr(),t.a=n(l,e.match(/(iPad|iPhone|iPod).*OS 7_\d/i)||e.match(/(iPad|iPhone|iPod).*OS 8_\d/i)?"_blank":"_system","location=yes")}}))}))}(i,t,e,n,r)})).then((function(){return new Te((function(t,e){s=function(){var e=Pr("cordova.plugins.browsertab.close",u);return t(),"function"===typeof e&&e(),i.a&&"function"===typeof i.a.close&&(i.a.close(),i.a=null),!1},i.Ea(s),c=function(){a||(a=Cn(2e3).then((function(){e(new k("redirect-cancelled-by-user"))})))},h=function(){zr()&&c()},o.addEventListener("resume",c,!1),Rr().toLowerCase().match(/android/)||o.addEventListener("visibilitychange",h,!1)})).o((function(t){return Rc(i).then((function(){throw t}))}))})).oa((function(){c&&o.removeEventListener("resume",c,!1),h&&o.removeEventListener("visibilitychange",h,!1),a&&a.cancel(),s&&i.Ta(s),i.c=null}))},t.Ea=function(t){this.b.push(t),Dc(this).o((function(e){"auth/invalid-cordova-configuration"===e.code&&(e=new Ho("unknown",null,null,null,new k("no-auth-event")),t(e))}))},t.Ta=function(t){J(this.b,(function(e){return e==t}))};var xc={name:"pendingRedirect",F:"session"};function Lc(t){return hc(t.b,xc,t.a)}function Mc(t,e,n,r){this.i={},this.u=0,this.D=t,this.v=e,this.m=n,this.J=r,this.h=[],this.f=!1,this.l=I(this.s,this),this.b=new Jc,this.C=new nh,this.g=new Pc(Qc(this.v,this.m)),this.c={},this.c.unknown=this.b,this.c.signInViaRedirect=this.b,this.c.linkViaRedirect=this.b,this.c.reauthViaRedirect=this.b,this.c.signInViaPopup=this.C,this.c.linkViaPopup=this.C,this.c.reauthViaPopup=this.C,this.a=Fc(this.D,this.v,this.m,C,this.J)}function Fc(t,e,n,i,o){var a=r.default.SDK_VERSION||null;return Ir()?new kc(t,e,n,a,i,o):new wu(t,e,n,a,i,o)}function Uc(t){t.f||(t.f=!0,t.a.Ea(t.l));var e=t.a;return t.a.ma().o((function(n){throw t.a==e&&t.reset(),n}))}function jc(t){t.a.Yb()&&Uc(t).o((function(e){var n=new Ho("unknown",null,null,null,new k("operation-not-supported-in-this-environment"));Hc(e)&&t.s(n)})),t.a.Ub()||$c(t.b)}function Vc(t,e){Q(t.h,e)||t.h.push(e),t.f||function(t){return t.b.get(xc,t.a).then((function(t){return"pending"==t}))}(t.g).then((function(e){e?Lc(t.g).then((function(){Uc(t).o((function(e){var n=new Ho("unknown",null,null,null,new k("operation-not-supported-in-this-environment"));Hc(e)&&t.s(n)}))})):jc(t)})).o((function(){jc(t)}))}function Bc(t,e){J(t.h,(function(t){return t==e}))}Mc.prototype.reset=function(){this.f=!1,this.a.Ta(this.l),this.a=Fc(this.D,this.v,this.m,null,this.J),this.i={}},Mc.prototype.s=function(t){if(!t)throw new k("invalid-auth-event");if(6e5<=Date.now()-this.u&&(this.i={},this.u=0),t&&t.getUid()&&this.i.hasOwnProperty(t.getUid()))return!1;for(var e=!1,n=0;n<this.h.length;n++){var r=this.h[n];if(r.Gb(t.c,t.b)){(e=this.c[t.c])&&(e.h(t,r),t&&(t.f||t.b)&&(this.i[t.getUid()]=!0,this.u=Date.now())),e=!0;break}}return $c(this.b),e};var qc=new Hr(2e3,1e4),Kc=new Hr(3e4,6e4);function Gc(t,e,n,r,i,o,a){return t.a.Nb(e,n,r,(function(){t.f||(t.f=!0,t.a.Ea(t.l))}),(function(){t.reset()}),i,o,a)}function Hc(t){return!(!t||"auth/cordova-not-ready"!=t.code)}function zc(t,e,n,r,i){var o;return function(t){return t.b.set(xc,"pending",t.a)}(t.g).then((function(){return t.a.Ob(e,n,r,i).o((function(e){if(Hc(e))throw new k("operation-not-supported-in-this-environment");return o=e,Lc(t.g).then((function(){throw o}))})).then((function(){return t.a.ac()?new Te((function(){})):Lc(t.g).then((function(){return t.ra()})).then((function(){})).o((function(){}))}))}))}function Wc(t,e,n,r,i){return t.a.Pb(r,(function(t){e.na(n,null,t,i)}),qc.get())}Mc.prototype.ra=function(){return this.b.ra()};var Xc={};function Qc(t,e,n){return t=t+":"+e,n&&(t=t+":"+n.url),t}function Yc(t,e,n,r){var i=Qc(e,n,r);return Xc[i]||(Xc[i]=new Mc(t,e,n,r)),Xc[i]}function Jc(){this.b=null,this.f=[],this.c=[],this.a=null,this.i=this.g=!1}function $c(t){t.g||(t.g=!0,eh(t,!1,null,null))}function Zc(t){t.g&&!t.i&&eh(t,!1,null,null)}function th(t,e){if(t.b=function(){return Oe(e)},t.f.length)for(var n=0;n<t.f.length;n++)t.f[n](e)}function eh(t,e,n,r){e?r?function(t,e){if(t.b=function(){return De(e)},t.c.length)for(var n=0;n<t.c.length;n++)t.c[n](e)}(t,r):th(t,n):th(t,{user:null}),t.f=[],t.c=[]}function nh(){}function rh(){this.jb=!1,Object.defineProperty(this,"appVerificationDisabled",{get:function(){return this.jb},set:function(t){this.jb=t},enumerable:!1})}function ih(t,e){this.a=e,Zr(this,"verificationId",t)}function oh(t,e,n,r){return new Bo(t).gb(e,n).then((function(t){return new ih(t,r)}))}function ah(t){var e=Qi(t);if(!(e&&e.exp&&e.auth_time&&e.iat))throw new k("internal-error","An internal error occurred. The token obtained by Firebase appears to be malformed. Please retry the operation.");ti(this,{token:t,expirationTime:Wr(1e3*e.exp),authTime:Wr(1e3*e.auth_time),issuedAtTime:Wr(1e3*e.iat),signInProvider:e.firebase&&e.firebase.sign_in_provider?e.firebase.sign_in_provider:null,signInSecondFactor:e.firebase&&e.firebase.sign_in_second_factor?e.firebase.sign_in_second_factor:null,claims:e})}function sh(t,e,n){var r=e&&e[ch];if(!r)throw new k("argument-error","Internal assert: Invalid MultiFactorResolver");this.a=t,this.f=gt(e),this.g=n,this.c=new ho(null,r),this.b=[];var i=this;H(e[uh]||[],(function(t){(t=ii(t))&&i.b.push(t)})),Zr(this,"auth",this.a),Zr(this,"session",this.c),Zr(this,"hints",this.b)}Jc.prototype.reset=function(){this.b=null,this.a&&(this.a.cancel(),this.a=null)},Jc.prototype.h=function(t,e){if(t){this.reset(),this.g=!0;var n=t.c,r=t.b,i=t.a&&"auth/web-storage-unsupported"==t.a.code,o=t.a&&"auth/operation-not-supported-in-this-environment"==t.a.code;this.i=!(!i&&!o),"unknown"!=n||i||o?t.a?(eh(this,!0,null,t.a),Oe()):e.Fa(n,r)?function(t,e,n){n=n.Fa(e.c,e.b);var r=e.g,i=e.f,o=e.i,a=e.T(),s=!!e.c.match(/Redirect$/);n(r,i,a,o).then((function(e){eh(t,s,e,null)})).o((function(e){eh(t,s,null,e)}))}(this,t,e):De(new k("invalid-auth-event")):(eh(this,!1,null,null),Oe())}else De(new k("invalid-auth-event"))},Jc.prototype.ra=function(){var t=this;return new Te((function(e,n){t.b?t.b().then(e,n):(t.f.push(e),t.c.push(n),function(t){var e=new k("timeout");t.a&&t.a.cancel(),t.a=Cn(Kc.get()).then((function(){t.b||(t.g=!0,eh(t,!0,null,e))}))}(t))}))},nh.prototype.h=function(t,e){if(t){var n=t.c,r=t.b;t.a?(e.na(t.c,null,t.a,t.b),Oe()):e.Fa(n,r)?function(t,e){var n=t.b,r=t.c;e.Fa(r,n)(t.g,t.f,t.T(),t.i).then((function(t){e.na(r,t,null,n)})).o((function(t){e.na(r,null,t,n)}))}(t,e):De(new k("invalid-auth-event"))}else De(new k("invalid-auth-event"))},ih.prototype.confirm=function(t){return t=qo(this.verificationId,t),this.a(t)};var uh="mfaInfo",ch="mfaPendingCredential";function hh(t,e,n,r){k.call(this,"multi-factor-auth-required",r,e),this.b=new sh(t,e,n),Zr(this,"resolver",this.b)}function lh(t,e,n){if(t&&g(t.serverResponse)&&"auth/multi-factor-auth-required"===t.code)try{return new hh(e,t.serverResponse,n,t.message)}catch(r){}return null}function fh(){}function ph(t){Zr(this,"factorId",t.fa),this.a=t}function dh(t){if(ph.call(this,t),this.a.fa!=Bo.PROVIDER_ID)throw new k("argument-error","firebase.auth.PhoneMultiFactorAssertion requires a valid firebase.auth.PhoneAuthCredential")}function vh(t,e){for(var n in Ze.call(this,t),e)this[n]=e[n]}function gh(t,e){this.a=t,this.b=[],this.c=I(this.yc,this),fn(this.a,"userReloaded",this.c);var n=[];e&&e.multiFactor&&e.multiFactor.enrolledFactors&&H(e.multiFactor.enrolledFactors,(function(t){var e=null,r={};if(t){t.uid&&(r[si]=t.uid),t.displayName&&(r[oi]=t.displayName),t.enrollmentTime&&(r[ai]=new Date(t.enrollmentTime).toISOString()),t.phoneNumber&&(r[ui]=t.phoneNumber);try{e=new ci(r)}catch(i){}t=e}else t=null;t&&n.push(t)})),mh(this,n)}function mh(t,e){t.b=e,Zr(t,"enrolledFactors",e)}function yh(t,e,n){if(this.h=t,this.i=e,this.g=n,this.c=3e4,this.f=96e4,this.b=null,this.a=this.c,this.f<this.c)throw Error("Proactive refresh lower bound greater than upper bound!")}function bh(t,e){t.stop(),t.b=Cn(function(t,e){return e?(t.a=t.c,t.g()):(e=t.a,t.a*=2,t.a>t.f&&(t.a=t.f),e)}(t,e)).then((function(){return function(){var t=u.document,e=null;return zr()||!t?Oe():new Te((function(n){e=function(){zr()&&(t.removeEventListener("visibilitychange",e,!1),n())},t.addEventListener("visibilitychange",e,!1)})).o((function(n){throw t.removeEventListener("visibilitychange",e,!1),n}))}()})).then((function(){return t.h()})).then((function(){bh(t,!0)})).o((function(e){t.i(e)&&bh(t,!1)}))}function wh(t){this.f=t,this.b=this.a=null,this.c=Date.now()}function _h(t,e){"undefined"===typeof e&&(t.b?e=(e=t.b).a-e.g:e=0),t.c=Date.now()+1e3*e}function Ih(t,e){t.b=Xi(e[is]||""),t.a=e.refreshToken,_h(t,"undefined"!==typeof(e=e.expiresIn)?Number(e):void 0)}function Th(t,e){return function(t,e){return new Te((function(n,r){"refresh_token"==e.grant_type&&e.refresh_token||"authorization_code"==e.grant_type&&e.code?ps(t,t.l+"?key="+encodeURIComponent(t.c),(function(t){t?t.error?r(lu(t)):t.access_token&&t.refresh_token?n(t):r(new k("internal-error")):r(new k("network-request-failed"))}),"POST",tr(e).toString(),t.g,t.m.get()):r(new k("internal-error"))}))}(t.f,e).then((function(e){return t.b=Xi(e.access_token),t.a=e.refresh_token,_h(t,e.expires_in),{accessToken:t.b.toString(),refreshToken:t.a}})).o((function(e){throw"auth/user-token-expired"==e.code&&(t.a=null),e}))}function Eh(t,e){this.a=t||null,this.b=e||null,ti(this,{lastSignInTime:Wr(e||null),creationTime:Wr(t||null)})}function Sh(t,e,n,r,i,o){ti(this,{uid:t,displayName:r||null,photoURL:i||null,email:n||null,phoneNumber:o||null,providerId:e})}function Ah(t,e,n){this.N=[],this.l=t.apiKey,this.m=t.appName,this.s=t.authDomain||null;var i=r.default.SDK_VERSION?Dr(r.default.SDK_VERSION):null;this.a=new ns(this.l,P(C),i),(this.u=t.emulatorConfig||null)&&hs(this.a,this.u),this.h=new wh(this.a),Lh(this,e[is]),Ih(this.h,e),Zr(this,"refreshToken",this.h.a),Uh(this,n||{}),En.call(this),this.P=!1,this.s&&Lr()&&(this.b=Yc(this.s,this.l,this.m,this.u)),this.W=[],this.i=null,this.D=function(t){return new yh((function(){return t.I(!0)}),(function(t){return!(!t||"auth/network-request-failed"!=t.code)}),(function(){var e=t.h.c-Date.now()-3e5;return 0<e?e:0}))}(this),this.ba=I(this.ib,this);var o=this;this.za=null,this.Pa=function(t){o.xa(t.h)},this.qa=null,this.Ba=function(t){kh(o,t.c)},this.$=null,this.aa=[],this.Oa=function(t){Oh(o,t.f)},this.ja=null,this.S=new gh(this,n),Zr(this,"multiFactor",this.S)}function kh(t,e){t.u=e,hs(t.a,e),t.b&&(e=t.b,t.b=Yc(t.s,t.l,t.m,t.u),t.P&&(Bc(e,t),Vc(t.b,t)))}function Nh(t,e){t.qa&&vn(t.qa,"languageCodeChanged",t.Pa),(t.qa=e)&&fn(e,"languageCodeChanged",t.Pa)}function Ch(t,e){t.$&&vn(t.$,"emulatorConfigChanged",t.Ba),(t.$=e)&&fn(e,"emulatorConfigChanged",t.Ba)}function Oh(t,e){t.aa=e,fs(t.a,r.default.SDK_VERSION?Dr(r.default.SDK_VERSION,t.aa):null)}function Dh(t,e){t.ja&&vn(t.ja,"frameworkChanged",t.Oa),(t.ja=e)&&fn(e,"frameworkChanged",t.Oa)}function Rh(t){try{return r.default.app(t.m).auth()}catch(e){throw new k("internal-error","No firebase.auth.Auth instance is available for the Firebase App '"+t.m+"'!")}}function Ph(t){t.J||t.D.b||(t.D.start(),vn(t,"tokenChanged",t.ba),fn(t,"tokenChanged",t.ba))}function xh(t){vn(t,"tokenChanged",t.ba),t.D.stop()}function Lh(t,e){t.Aa=e,Zr(t,"_lat",e)}function Mh(t){for(var e=[],n=0;n<t.W.length;n++)e.push(t.W[n](t));return Pe(e).then((function(){return t}))}function Fh(t){t.b&&!t.P&&(t.P=!0,Vc(t.b,t))}function Uh(t,e){ti(t,{uid:e.uid,displayName:e.displayName||null,photoURL:e.photoURL||null,email:e.email||null,emailVerified:e.emailVerified||!1,phoneNumber:e.phoneNumber||null,isAnonymous:e.isAnonymous||!1,tenantId:e.tenantId||null,metadata:new Eh(e.createdAt,e.lastLoginAt),providerData:[]}),t.a.b=t.tenantId}function jh(){}function Vh(t){return Oe().then((function(){if(t.J)throw new k("app-deleted")}))}function Bh(t){return W(t.providerData,(function(t){return t.providerId}))}function qh(t,e){e&&(Kh(t,e.providerId),t.providerData.push(e))}function Kh(t,e){J(t.providerData,(function(t){return t.providerId==e}))}function Gh(t,e,n){("uid"!=e||n)&&t.hasOwnProperty(e)&&Zr(t,e,n)}function Hh(t,e){t!=e&&(ti(t,{uid:e.uid,displayName:e.displayName,photoURL:e.photoURL,email:e.email,emailVerified:e.emailVerified,phoneNumber:e.phoneNumber,isAnonymous:e.isAnonymous,tenantId:e.tenantId,providerData:[]}),e.metadata?Zr(t,"metadata",function(t){return new Eh(t.a,t.b)}(e.metadata)):Zr(t,"metadata",new Eh),H(e.providerData,(function(e){qh(t,e)})),function(t,e){t.b=e.b,t.a=e.a,t.c=e.c}(t.h,e.h),Zr(t,"refreshToken",t.h.a),mh(t.S,e.S.b))}function zh(t){return t.I().then((function(e){var n=t.isAnonymous;return function(t,e){return cu(t.a,Vs,{idToken:e}).then(I(t.Kc,t))}(t,e).then((function(){return n||Gh(t,"isAnonymous",!1),e}))}))}function Wh(t,e){e[is]&&t.Aa!=e[is]&&(Ih(t.h,e),t.dispatchEvent(new vh("tokenChanged")),Lh(t,e[is]),Gh(t,"refreshToken",t.h.a))}function Xh(t,e){return zh(t).then((function(){if(Q(Bh(t),e))return Mh(t).then((function(){throw new k("provider-already-linked")}))}))}function Qh(t,e,n){return ei({user:t,credential:Ko(e),additionalUserInfo:e=to(e),operationType:n})}function Yh(t,e){return Wh(t,e),t.reload().then((function(){return t}))}function Jh(t,e,n,i,o){if(!Lr())return De(new k("operation-not-supported-in-this-environment"));if(t.i&&!o)return De(t.i);var a=Zi(n.providerId),s=qr(t.uid+":::"),u=null;(!Ur()||Tr())&&t.s&&n.isOAuthProvider&&(u=Eu(t.s,t.l,t.m,e,n,null,s,r.default.SDK_VERSION||null,null,null,t.tenantId,t.u));var c=yr(u,a&&a.va,a&&a.ua);return i=i().then((function(){if(Zh(t),!o)return t.I().then((function(){}))})).then((function(){return Gc(t.b,c,e,n,s,!!u,t.tenantId)})).then((function(){return new Te((function(n,r){t.na(e,null,new k("cancelled-popup-request"),t.g||null),t.f=n,t.C=r,t.g=s,t.c=Wc(t.b,t,e,c,s)}))})).then((function(t){return c&&mr(c),t?ei(t):null})).o((function(t){throw c&&mr(c),t})),tl(t,i,o)}function $h(t,e,n,r,i){if(!Lr())return De(new k("operation-not-supported-in-this-environment"));if(t.i&&!i)return De(t.i);var o=null,a=qr(t.uid+":::");return r=r().then((function(){if(Zh(t),!i)return t.I().then((function(){}))})).then((function(){return t.ga=a,Mh(t)})).then((function(e){return t.ha&&(e=(e=t.ha).b.set(rl,t.w(),e.a)),e})).then((function(){return zc(t.b,e,n,a,t.tenantId)})).o((function(e){if(o=e,t.ha)return il(t.ha);throw o})).then((function(){if(o)throw o})),tl(t,r,i)}function Zh(t){if(!t.b||!t.P){if(t.b&&!t.P)throw new k("internal-error");throw new k("auth-domain-config-required")}}function tl(t,e,n){var r=function(t,e,n){return t.i&&!n?(e.cancel(),De(t.i)):e.o((function(e){throw!e||"auth/user-disabled"!=e.code&&"auth/user-token-expired"!=e.code||(t.i||t.dispatchEvent(new vh("userInvalidated")),t.i=e),e}))}(t,e,n);return t.N.push(r),r.oa((function(){Y(t.N,r)})),r.o((function(e){var n=null;throw e&&"auth/multi-factor-auth-required"===e.code&&(n=lh(e.w(),Rh(t),I(t.jc,t))),n||e}))}function el(t){if(!t.apiKey)return null;var e={apiKey:t.apiKey,authDomain:t.authDomain,appName:t.appName,emulatorConfig:t.emulatorConfig},n={};if(!t.stsTokenManager||!t.stsTokenManager.accessToken)return null;n[is]=t.stsTokenManager.accessToken,n.refreshToken=t.stsTokenManager.refreshToken||null;var r=t.stsTokenManager.expirationTime;r&&(n.expiresIn=(r-Date.now())/1e3);var i=new Ah(e,n,t);return t.providerData&&H(t.providerData,(function(t){t&&qh(i,ei(t))})),t.redirectEventId&&(i.ga=t.redirectEventId),i}function nl(t){this.a=t,this.b=sc()}sh.prototype.Rc=function(t){var e=this;return t.tb(this.a.a,this.c).then((function(t){var n=gt(e.f);return delete n[uh],delete n[ch],yt(n,t),e.g(n)}))},S(hh,k),fh.prototype.tb=function(t,e,n){return e.type==lo?function(t,e,n,r){return n.Ha().then((function(n){return n={idToken:n},"undefined"!==typeof r&&(n.displayName=r),yt(n,{phoneVerificationInfo:Vo(t.a)}),cu(e,Us,n)}))}(this,t,e,n):function(t,e,n){return n.Ha().then((function(n){return yt(n={mfaPendingCredential:n},{phoneVerificationInfo:Vo(t.a)}),cu(e,js,n)}))}(this,t,e)},S(ph,fh),S(dh,ph),S(vh,Ze),(t=gh.prototype).yc=function(t){mh(this,function(t){var e=[];return H(t.mfaInfo||[],(function(t){(t=ii(t))&&e.push(t)})),e}(t.hd))},t.Sb=function(){return this.a.I().then((function(t){return new ho(t,null)}))},t.fc=function(t,e){var n=this,r=this.a.a;return this.Sb().then((function(n){return t.tb(r,n,e)})).then((function(t){return Wh(n.a,t),n.a.reload()}))},t.bd=function(t){var e=this,n="string"===typeof t?t:t.uid,r=this.a.a;return this.a.I().then((function(t){return cu(r,uu,{idToken:t,mfaEnrollmentId:n})})).then((function(t){var r=z(e.b,(function(t){return t.uid!=n}));return mh(e,r),Wh(e.a,t),e.a.reload().o((function(t){if("auth/user-token-expired"!=t.code)throw t}))}))},t.w=function(){return{multiFactor:{enrolledFactors:W(this.b,(function(t){return t.w()}))}}},yh.prototype.start=function(){this.a=this.c,bh(this,!0)},yh.prototype.stop=function(){this.b&&(this.b.cancel(),this.b=null)},wh.prototype.w=function(){return{apiKey:this.f.c,refreshToken:this.a,accessToken:this.b&&this.b.toString(),expirationTime:this.c}},wh.prototype.getToken=function(t){return t=!!t,this.b&&!this.a?De(new k("user-token-expired")):t||!this.b||Date.now()>this.c-3e4?this.a?Th(this,{grant_type:"refresh_token",refresh_token:this.a}):Oe(null):Oe({accessToken:this.b.toString(),refreshToken:this.a})},Eh.prototype.w=function(){return{lastLoginAt:this.b,createdAt:this.a}},S(Ah,En),Ah.prototype.xa=function(t){this.za=t,cs(this.a,t)},Ah.prototype.la=function(){return this.za},Ah.prototype.Ga=function(){return Z(this.aa)},Ah.prototype.ib=function(){this.D.b&&(this.D.stop(),this.D.start())},Zr(Ah.prototype,"providerId","firebase"),(t=Ah.prototype).reload=function(){var t=this;return tl(this,Vh(this).then((function(){return zh(t).then((function(){return Mh(t)})).then(jh)})))},t.oc=function(t){return this.I(t).then((function(t){return new ah(t)}))},t.I=function(t){var e=this;return tl(this,Vh(this).then((function(){return e.h.getToken(t)})).then((function(t){if(!t)throw new k("internal-error");return t.accessToken!=e.Aa&&(Lh(e,t.accessToken),e.dispatchEvent(new vh("tokenChanged"))),Gh(e,"refreshToken",t.refreshToken),t.accessToken})))},t.Kc=function(t){if(!(t=t.users)||!t.length)throw new k("internal-error");Uh(this,{uid:(t=t[0]).localId,displayName:t.displayName,photoURL:t.photoUrl,email:t.email,emailVerified:!!t.emailVerified,phoneNumber:t.phoneNumber,lastLoginAt:t.lastLoginAt,createdAt:t.createdAt,tenantId:t.tenantId});for(var e=function(t){return(t=t.providerUserInfo)&&t.length?W(t,(function(t){return new Sh(t.rawId,t.providerId,t.email,t.displayName,t.photoUrl,t.phoneNumber)})):[]}(t),n=0;n<e.length;n++)qh(this,e[n]);Gh(this,"isAnonymous",!(this.email&&t.passwordHash)&&!(this.providerData&&this.providerData.length)),this.dispatchEvent(new vh("userReloaded",{hd:t}))},t.Lc=function(t){return Jr("firebase.User.prototype.reauthenticateAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.reauthenticateWithCredential instead."),this.ub(t)},t.ub=function(t){var e=this,n=null;return tl(this,t.c(this.a,this.uid).then((function(t){return Wh(e,t),n=Qh(e,t,"reauthenticate"),e.i=null,e.reload()})).then((function(){return n})),!0)},t.Cc=function(t){return Jr("firebase.User.prototype.linkAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.linkWithCredential instead."),this.rb(t)},t.rb=function(t){var e=this,n=null;return tl(this,Xh(this,t.providerId).then((function(){return e.I()})).then((function(n){return t.b(e.a,n)})).then((function(t){return n=Qh(e,t,"link"),Yh(e,t)})).then((function(){return n})))},t.Dc=function(t,e){var n=this;return tl(this,Xh(this,"phone").then((function(){return oh(Rh(n),t,e,I(n.rb,n))})))},t.Mc=function(t,e){var n=this;return tl(this,Oe().then((function(){return oh(Rh(n),t,e,I(n.ub,n))})),!0)},t.Cb=function(t){var e=this;return tl(this,this.I().then((function(n){return e.a.Cb(n,t)})).then((function(t){return Wh(e,t),e.reload()})))},t.ed=function(t){var e=this;return tl(this,this.I().then((function(n){return t.b(e.a,n)})).then((function(t){return Wh(e,t),e.reload()})))},t.Db=function(t){var e=this;return tl(this,this.I().then((function(n){return e.a.Db(n,t)})).then((function(t){return Wh(e,t),e.reload()})))},t.Eb=function(t){if(void 0===t.displayName&&void 0===t.photoURL)return Vh(this);var e=this;return tl(this,this.I().then((function(n){return e.a.Eb(n,{displayName:t.displayName,photoUrl:t.photoURL})})).then((function(t){return Wh(e,t),Gh(e,"displayName",t.displayName||null),Gh(e,"photoURL",t.photoUrl||null),H(e.providerData,(function(t){"password"===t.providerId&&(Zr(t,"displayName",e.displayName),Zr(t,"photoURL",e.photoURL))})),Mh(e)})).then(jh))},t.cd=function(t){var e=this;return tl(this,zh(this).then((function(n){return Q(Bh(e),t)?function(t,e,n){return cu(t,Ls,{idToken:e,deleteProvider:n})}(e.a,n,[t]).then((function(t){var n={};return H(t.providerUserInfo||[],(function(t){n[t.providerId]=!0})),H(Bh(e),(function(t){n[t]||Kh(e,t)})),n[Bo.PROVIDER_ID]||Zr(e,"phoneNumber",null),Mh(e)})):Mh(e).then((function(){throw new k("no-such-provider")}))})))},t.delete=function(){var t=this;return tl(this,this.I().then((function(e){return cu(t.a,xs,{idToken:e})})).then((function(){t.dispatchEvent(new vh("userDeleted"))}))).then((function(){for(var e=0;e<t.N.length;e++)t.N[e].cancel("app-deleted");Nh(t,null),Ch(t,null),Dh(t,null),t.N=[],t.J=!0,xh(t),Zr(t,"refreshToken",null),t.b&&Bc(t.b,t)}))},t.Gb=function(t,e){return!!("linkViaPopup"==t&&(this.g||null)==e&&this.f||"reauthViaPopup"==t&&(this.g||null)==e&&this.f||"linkViaRedirect"==t&&(this.ga||null)==e||"reauthViaRedirect"==t&&(this.ga||null)==e)},t.na=function(t,e,n,r){"linkViaPopup"!=t&&"reauthViaPopup"!=t||r!=(this.g||null)||(n&&this.C?this.C(n):e&&!n&&this.f&&this.f(e),this.c&&(this.c.cancel(),this.c=null),delete this.f,delete this.C)},t.Fa=function(t,e){return"linkViaPopup"==t&&e==(this.g||null)?I(this.Lb,this):"reauthViaPopup"==t&&e==(this.g||null)?I(this.Mb,this):"linkViaRedirect"==t&&(this.ga||null)==e?I(this.Lb,this):"reauthViaRedirect"==t&&(this.ga||null)==e?I(this.Mb,this):null},t.Ec=function(t){var e=this;return Jh(this,"linkViaPopup",t,(function(){return Xh(e,t.providerId).then((function(){return Mh(e)}))}),!1)},t.Nc=function(t){return Jh(this,"reauthViaPopup",t,(function(){return Oe()}),!0)},t.Fc=function(t){var e=this;return $h(this,"linkViaRedirect",t,(function(){return Xh(e,t.providerId)}),!1)},t.Oc=function(t){return $h(this,"reauthViaRedirect",t,(function(){return Oe()}),!0)},t.Lb=function(t,e,n,r){var i=this;this.c&&(this.c.cancel(),this.c=null);var o=null;return tl(this,this.I().then((function(n){return ks(i.a,{requestUri:t,postBody:r,sessionId:e,idToken:n})})).then((function(t){return o=Qh(i,t,"link"),Yh(i,t)})).then((function(){return o})))},t.Mb=function(t,e,n,r){var i=this;this.c&&(this.c.cancel(),this.c=null);var o=null;return tl(this,Oe().then((function(){return vo(Ns(i.a,{requestUri:t,sessionId:e,postBody:r,tenantId:n}),i.uid)})).then((function(t){return o=Qh(i,t,"reauthenticate"),Wh(i,t),i.i=null,i.reload()})).then((function(){return o})),!0)},t.vb=function(t){var e=this,n=null;return tl(this,this.I().then((function(e){return n=e,"undefined"===typeof t||vt(t)?{}:Gi(new xi(t))})).then((function(t){return e.a.vb(n,t)})).then((function(t){if(e.email!=t)return e.reload()})).then((function(){})))},t.Fb=function(t,e){var n=this,r=null;return tl(this,this.I().then((function(t){return r=t,"undefined"===typeof e||vt(e)?{}:Gi(new xi(e))})).then((function(e){return n.a.Fb(r,t,e)})).then((function(t){if(n.email!=t)return n.reload()})).then((function(){})))},t.jc=function(t){var e=null,n=this;return tl(this,t=vo(Oe(t),n.uid).then((function(t){return e=Qh(n,t,"reauthenticate"),Wh(n,t),n.i=null,n.reload()})).then((function(){return e})),!0)},t.toJSON=function(){return this.w()},t.w=function(){var t={uid:this.uid,displayName:this.displayName,photoURL:this.photoURL,email:this.email,emailVerified:this.emailVerified,phoneNumber:this.phoneNumber,isAnonymous:this.isAnonymous,tenantId:this.tenantId,providerData:[],apiKey:this.l,appName:this.m,authDomain:this.s,stsTokenManager:this.h.w(),redirectEventId:this.ga||null};return this.metadata&&yt(t,this.metadata.w()),H(this.providerData,(function(e){t.providerData.push(function(t){var e,n={};for(e in t)t.hasOwnProperty(e)&&(n[e]=t[e]);return n}(e))})),yt(t,this.S.w()),t};var rl={name:"redirectUser",F:"session"};function il(t){return hc(t.b,rl,t.a)}function ol(t){this.a=t,this.b=sc(),this.c=null,this.f=function(t){var e=ul("local"),n=ul("session"),r=ul("none");return function(t,e,n){var r=cc(e,n),i=uc(t,e.F);return t.get(e,n).then((function(o){var a=null;try{a=Br(u.localStorage.getItem(r))}catch(s){}if(a&&!o)return u.localStorage.removeItem(r),t.set(e,a,n);a&&o&&"localStorage"!=i.type&&u.localStorage.removeItem(r)}))}(t.b,e,t.a).then((function(){return t.b.get(n,t.a)})).then((function(i){return i?n:t.b.get(r,t.a).then((function(n){return n?r:t.b.get(e,t.a).then((function(n){return n?e:t.b.get(sl,t.a).then((function(t){return t?ul(t):e}))}))}))})).then((function(e){return t.c=e,al(t,e.F)})).o((function(){t.c||(t.c=e)}))}(this),this.b.addListener(ul("local"),this.a,I(this.g,this))}function al(t,e){var n,r=[];for(n in oc)oc[n]!==e&&r.push(hc(t.b,ul(oc[n]),t.a));return r.push(hc(t.b,sl,t.a)),function(t){return new Te((function(e,n){var r=t.length,i=[];if(r)for(var o=function(t,n){r--,i[t]=n,0==r&&e(i)},a=function(t){n(t)},s=0;s<t.length;s++)Re(t[s],T(o,s),a);else e(i)}))}(r)}ol.prototype.g=function(){var t=this,e=ul("local");fl(this,(function(){return Oe().then((function(){return t.c&&"local"!=t.c.F?t.b.get(e,t.a):null})).then((function(n){if(n)return al(t,"local").then((function(){t.c=e}))}))}))};var sl={name:"persistence",F:"session"};function ul(t){return{name:"authUser",F:t}}function cl(t,e){return fl(t,(function(){return t.b.set(t.c,e.w(),t.a)}))}function hl(t){return fl(t,(function(){return hc(t.b,t.c,t.a)}))}function ll(t,e,n){return fl(t,(function(){return t.b.get(t.c,t.a).then((function(t){return t&&e&&(t.authDomain=e),t&&n&&(t.emulatorConfig=n),el(t||{})}))}))}function fl(t,e){return t.f=t.f.then(e,e),t.f}function pl(t){if(this.l=!1,Zr(this,"settings",new rh),Zr(this,"app",t),!Il(this).options||!Il(this).options.apiKey)throw new k("invalid-api-key");t=r.default.SDK_VERSION?Dr(r.default.SDK_VERSION):null,this.a=new ns(Il(this).options&&Il(this).options.apiKey,P(C),t),this.P=[],this.s=[],this.N=[],this.Pa=r.default.INTERNAL.createSubscribe(I(this.zc,this)),this.W=void 0,this.ib=r.default.INTERNAL.createSubscribe(I(this.Ac,this)),wl(this,null),this.i=new ol(Il(this).options.apiKey+":"+Il(this).name),this.D=new nl(Il(this).options.apiKey+":"+Il(this).name),this.$=Al(this,function(t){var e=Il(t).options.authDomain,n=function(t){var e=function(t,e){return t.b.get(rl,t.a).then((function(t){return t&&e&&(t.authDomain=e),el(t||{})}))}(t.D,Il(t).options.authDomain).then((function(e){return(t.m=e)&&(e.ha=t.D),il(t.D)}));return Al(t,e)}(t).then((function(){return ll(t.i,e,t.R)})).then((function(e){return e?(e.ha=t.D,t.m&&(t.m.ga||null)==(e.ga||null)?e:e.reload().then((function(){return cl(t.i,e).then((function(){return e}))})).o((function(n){return"auth/network-request-failed"==n.code?e:hl(t.i)}))):null})).then((function(e){wl(t,e||null)}));return Al(t,n)}(this)),this.h=Al(this,function(t){return t.$.then((function(){return yl(t)})).o((function(){})).then((function(){if(!t.l)return t.ja()})).o((function(){})).then((function(){if(!t.l){t.ba=!0;var e=t.i;e.b.addListener(ul("local"),e.a,t.ja)}}))}(this)),this.ba=!1,this.ja=I(this.Zc,this),this.Ba=I(this.da,this),this.qa=I(this.mc,this),this.za=I(this.wc,this),this.Aa=I(this.xc,this),this.b=null,function(t){var e=Il(t).options.authDomain,n=Il(t).options.apiKey;e&&Lr()&&(t.Oa=t.$.then((function(){if(!t.l){if(t.b=Yc(e,n,Il(t).name,t.R),Vc(t.b,t),Tl(t)&&Fh(Tl(t)),t.m){Fh(t.m);var r=t.m;r.xa(t.la()),Nh(r,t),Oh(r=t.m,t.J),Dh(r,t),kh(r=t.m,t.R),Ch(r,t),t.m=null}return t.b}})))}(this),this.INTERNAL={},this.INTERNAL.delete=I(this.delete,this),this.INTERNAL.logFramework=I(this.Gc,this),this.u=0,En.call(this),function(t){Object.defineProperty(t,"lc",{get:function(){return this.la()},set:function(t){this.xa(t)},enumerable:!1}),t.aa=null,Object.defineProperty(t,"ti",{get:function(){return this.T()},set:function(t){this.zb(t)},enumerable:!1}),t.S=null,Object.defineProperty(t,"emulatorConfig",{get:function(){if(this.R){var t=qn(this.R.url);t=ei({protocol:t.c,host:t.a,port:t.g,options:ei({disableWarnings:this.R.ec})})}else t=null;return t},enumerable:!1})}(this),this.J=[],this.R=null}function dl(t){Ze.call(this,"languageCodeChanged"),this.h=t}function vl(t){Ze.call(this,"emulatorConfigChanged"),this.c=t}function gl(t){Ze.call(this,"frameworkChanged"),this.f=t}function ml(t){return t.Oa||De(new k("auth-domain-config-required"))}function yl(t){if(!Lr())return De(new k("operation-not-supported-in-this-environment"));var e=ml(t).then((function(){return t.b.ra()})).then((function(t){return t?ei(t):null}));return Al(t,e)}function bl(t,e){var n={};return n.apiKey=Il(t).options.apiKey,n.authDomain=Il(t).options.authDomain,n.appName=Il(t).name,t.R&&(n.emulatorConfig=t.R),t.$.then((function(){return function(t,e,n,r){var i=new Ah(t,e);return n&&(i.ha=n),r&&Oh(i,r),i.reload().then((function(){return i}))}(n,e,t.D,t.Ga())})).then((function(e){return Tl(t)&&e.uid==Tl(t).uid?(Hh(Tl(t),e),t.da(e)):(wl(t,e),Fh(e),t.da(e))})).then((function(){Sl(t)}))}function wl(t,e){Tl(t)&&(function(t,e){J(t.W,(function(t){return t==e}))}(Tl(t),t.Ba),vn(Tl(t),"tokenChanged",t.qa),vn(Tl(t),"userDeleted",t.za),vn(Tl(t),"userInvalidated",t.Aa),xh(Tl(t))),e&&(e.W.push(t.Ba),fn(e,"tokenChanged",t.qa),fn(e,"userDeleted",t.za),fn(e,"userInvalidated",t.Aa),0<t.u&&Ph(e)),Zr(t,"currentUser",e),e&&(e.xa(t.la()),Nh(e,t),Oh(e,t.J),Dh(e,t),kh(e,t.R),Ch(e,t))}function _l(t,e){var n=null,r=null;return Al(t,e.then((function(e){return n=Ko(e),r=to(e),bl(t,e)}),(function(e){var n=null;throw e&&"auth/multi-factor-auth-required"===e.code&&(n=lh(e.w(),t,I(t.kc,t))),n||e})).then((function(){return ei({user:Tl(t),credential:n,additionalUserInfo:r,operationType:"signIn"})})))}function Il(t){return t.app}function Tl(t){return t.currentUser}function El(t){return Tl(t)&&Tl(t)._lat||null}function Sl(t){if(t.ba){for(var e=0;e<t.s.length;e++)t.s[e]&&t.s[e](El(t));if(t.W!==t.getUid()&&t.N.length)for(t.W=t.getUid(),e=0;e<t.N.length;e++)t.N[e]&&t.N[e](El(t))}}function Al(t,e){return t.P.push(e),e.oa((function(){Y(t.P,e)})),e}function kl(){}function Nl(){this.a={},this.b=1e12}ol.prototype.yb=function(t){var e=null,n=this;return function(t){var e=new k("invalid-persistence-type"),n=new k("unsupported-persistence-type");t:{for(r in oc)if(oc[r]==t){var r=!0;break t}r=!1}if(!r||"string"!==typeof t)throw e;switch(Sr()){case"ReactNative":if("session"===t)throw n;break;case"Node":if("none"!==t)throw n;break;case"Worker":if("session"===t||!Uu()&&"none"!==t)throw n;break;default:if(!xr()&&"none"!==t)throw n}}(t),fl(this,(function(){return t!=n.c.F?n.b.get(n.c,n.a).then((function(r){return e=r,al(n,t)})).then((function(){if(n.c=ul(t),e)return n.b.set(n.c,e,n.a)})):Oe()}))},S(pl,En),S(dl,Ze),S(vl,Ze),S(gl,Ze),(t=pl.prototype).yb=function(t){return Al(this,t=this.i.yb(t))},t.xa=function(t){this.aa===t||this.l||(this.aa=t,cs(this.a,this.aa),this.dispatchEvent(new dl(this.la())))},t.la=function(){return this.aa},t.fd=function(){var t=u.navigator;this.xa(t&&(t.languages&&t.languages[0]||t.language||t.userLanguage)||null)},t.gd=function(t,e){if(!this.R){if(!/^https?:\/\//.test(t))throw new k("argument-error","Emulator URL must start with a valid scheme (http:// or https://).");(function(t){"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),u.document&&!t&&_r().then((function(){var t=u.document.createElement("div");t.innerText="Running in emulator mode. Do not use with production credentials.",t.style.position="fixed",t.style.width="100%",t.style.backgroundColor="#ffffff",t.style.border=".1em solid #000000",t.style.color="#b50000",t.style.bottom="0px",t.style.left="0px",t.style.margin="0px",t.style.zIndex=1e4,t.style.textAlign="center",t.classList.add("firebase-emulator-warning"),u.document.body.appendChild(t)}))})(e=!!e&&!!e.disableWarnings),this.R={url:t,ec:e},this.settings.jb=!0,hs(this.a,this.R),this.dispatchEvent(new vl(this.R))}},t.Gc=function(t){this.J.push(t),fs(this.a,r.default.SDK_VERSION?Dr(r.default.SDK_VERSION,this.J):null),this.dispatchEvent(new gl(this.J))},t.Ga=function(){return Z(this.J)},t.zb=function(t){this.S===t||this.l||(this.S=t,this.a.b=this.S)},t.T=function(){return this.S},t.toJSON=function(){return{apiKey:Il(this).options.apiKey,authDomain:Il(this).options.authDomain,appName:Il(this).name,currentUser:Tl(this)&&Tl(this).w()}},t.Gb=function(t,e){switch(t){case"unknown":case"signInViaRedirect":return!0;case"signInViaPopup":return this.g==e&&!!this.f;default:return!1}},t.na=function(t,e,n,r){"signInViaPopup"==t&&this.g==r&&(n&&this.C?this.C(n):e&&!n&&this.f&&this.f(e),this.c&&(this.c.cancel(),this.c=null),delete this.f,delete this.C)},t.Fa=function(t,e){return"signInViaRedirect"==t||"signInViaPopup"==t&&this.g==e&&this.f?I(this.ic,this):null},t.ic=function(t,e,n,r){var i=this,o={requestUri:t,postBody:r,sessionId:e,tenantId:n};return this.c&&(this.c.cancel(),this.c=null),i.$.then((function(){return _l(i,As(i.a,o))}))},t.Xc=function(t){if(!Lr())return De(new k("operation-not-supported-in-this-environment"));var e=this,n=Zi(t.providerId),i=qr(),o=null;(!Ur()||Tr())&&Il(this).options.authDomain&&t.isOAuthProvider&&(o=Eu(Il(this).options.authDomain,Il(this).options.apiKey,Il(this).name,"signInViaPopup",t,null,i,r.default.SDK_VERSION||null,null,null,this.T(),this.R));var a=yr(o,n&&n.va,n&&n.ua);return Al(this,n=ml(this).then((function(n){return Gc(n,a,"signInViaPopup",t,i,!!o,e.T())})).then((function(){return new Te((function(t,n){e.na("signInViaPopup",null,new k("cancelled-popup-request"),e.g),e.f=t,e.C=n,e.g=i,e.c=Wc(e.b,e,"signInViaPopup",a,i)}))})).then((function(t){return a&&mr(a),t?ei(t):null})).o((function(t){throw a&&mr(a),t})))},t.Yc=function(t){if(!Lr())return De(new k("operation-not-supported-in-this-environment"));var e=this,n=ml(this).then((function(){return function(t){return fl(t,(function(){return t.b.set(sl,t.c.F,t.a)}))}(e.i)})).then((function(){return zc(e.b,"signInViaRedirect",t,void 0,e.T())}));return Al(this,n)},t.ra=function(){var t=this;return yl(this).then((function(e){return t.b&&Zc(t.b.b),e})).o((function(e){throw t.b&&Zc(t.b.b),e}))},t.dd=function(t){if(!t)return De(new k("null-user"));if(this.S!=t.tenantId)return De(new k("tenant-id-mismatch"));var e=this,n={};n.apiKey=Il(this).options.apiKey,n.authDomain=Il(this).options.authDomain,n.appName=Il(this).name;var r=function(t,e,n,r){var i=t.h,o={};return o[is]=i.b&&i.b.toString(),o.refreshToken=i.a,e=new Ah(e||{apiKey:t.l,authDomain:t.s,appName:t.m},o),n&&(e.ha=n),r&&Oh(e,r),Hh(e,t),e}(t,n,e.D,e.Ga());return Al(this,this.h.then((function(){if(Il(e).options.apiKey!=t.l)return r.reload()})).then((function(){return Tl(e)&&t.uid==Tl(e).uid?(Hh(Tl(e),t),e.da(t)):(wl(e,r),Fh(r),e.da(r))})).then((function(){Sl(e)})))},t.Bb=function(){var t=this;return Al(this,this.h.then((function(){return t.b&&Zc(t.b.b),Tl(t)?(wl(t,null),hl(t.i).then((function(){Sl(t)}))):Oe()})))},t.Zc=function(){var t=this;return ll(this.i,Il(this).options.authDomain).then((function(e){if(!t.l){var n;if(n=Tl(t)&&e){n=Tl(t).uid;var r=e.uid;n=void 0!==n&&null!==n&&""!==n&&void 0!==r&&null!==r&&""!==r&&n==r}if(n)return Hh(Tl(t),e),Tl(t).I();(Tl(t)||e)&&(wl(t,e),e&&(Fh(e),e.ha=t.D),t.b&&Vc(t.b,t),Sl(t))}}))},t.da=function(t){return cl(this.i,t)},t.mc=function(){Sl(this),this.da(Tl(this))},t.wc=function(){this.Bb()},t.xc=function(){this.Bb()},t.kc=function(t){var e=this;return this.h.then((function(){return _l(e,Oe(t))}))},t.zc=function(t){var e=this;this.addAuthTokenListener((function(){t.next(Tl(e))}))},t.Ac=function(t){var e=this;!function(t,e){t.N.push(e),Al(t,t.h.then((function(){!t.l&&Q(t.N,e)&&t.W!==t.getUid()&&(t.W=t.getUid(),e(El(t)))})))}(this,(function(){t.next(Tl(e))}))},t.Ic=function(t,e,n){var r=this;return this.ba&&Promise.resolve().then((function(){"function"===typeof t?t(Tl(r)):"function"===typeof t.next&&t.next(Tl(r))})),this.Pa(t,e,n)},t.Hc=function(t,e,n){var r=this;return this.ba&&Promise.resolve().then((function(){r.W=r.getUid(),"function"===typeof t?t(Tl(r)):"function"===typeof t.next&&t.next(Tl(r))})),this.ib(t,e,n)},t.nc=function(t){var e=this;return Al(this,this.h.then((function(){return Tl(e)?Tl(e).I(t).then((function(t){return{accessToken:t}})):null})))},t.Tc=function(t){var e=this;return this.h.then((function(){return _l(e,cu(e.a,ru,{token:t}))})).then((function(t){var n=t.user;return Gh(n,"isAnonymous",!1),e.da(n),t}))},t.Uc=function(t,e){var n=this;return this.h.then((function(){return _l(n,cu(n.a,iu,{email:t,password:e}))}))},t.dc=function(t,e){var n=this;return this.h.then((function(){return _l(n,cu(n.a,Rs,{email:t,password:e}))}))},t.ab=function(t){var e=this;return this.h.then((function(){return _l(e,t.ka(e.a))}))},t.Sc=function(t){return Jr("firebase.auth.Auth.prototype.signInAndRetrieveDataWithCredential is deprecated. Please use firebase.auth.Auth.prototype.signInWithCredential instead."),this.ab(t)},t.Ab=function(){var t=this;return this.h.then((function(){var e=Tl(t);if(e&&e.isAnonymous){var n=ei({providerId:null,isNewUser:!1});return ei({user:e,credential:null,additionalUserInfo:n,operationType:"signIn"})}return _l(t,t.a.Ab()).then((function(e){var n=e.user;return Gh(n,"isAnonymous",!0),t.da(n),e}))}))},t.getUid=function(){return Tl(this)&&Tl(this).uid||null},t.cc=function(t){this.addAuthTokenListener(t),this.u++,0<this.u&&Tl(this)&&Ph(Tl(this))},t.Pc=function(t){var e=this;H(this.s,(function(n){n==t&&e.u--})),0>this.u&&(this.u=0),0==this.u&&Tl(this)&&xh(Tl(this)),this.removeAuthTokenListener(t)},t.addAuthTokenListener=function(t){var e=this;this.s.push(t),Al(this,this.h.then((function(){e.l||Q(e.s,t)&&t(El(e))})))},t.removeAuthTokenListener=function(t){J(this.s,(function(e){return e==t}))},t.delete=function(){this.l=!0;for(var t=0;t<this.P.length;t++)this.P[t].cancel("app-deleted");return this.P=[],this.i&&(t=this.i).b.removeListener(ul("local"),t.a,this.ja),this.b&&(Bc(this.b,this),Zc(this.b.b)),Promise.resolve()},t.hc=function(t){return Al(this,function(t,e){return cu(t,Ps,{identifier:e,continueUri:Mr()?pr():"http://localhost"}).then((function(t){return t.signinMethods||[]}))}(this.a,t))},t.Bc=function(t){return!!Fo(t)},t.xb=function(t,e){var n=this;return Al(this,Oe().then((function(){var t=new xi(e);if(!t.c)throw new k("argument-error",Fi+" must be true when sending sign in link to email");return Gi(t)})).then((function(e){return n.a.xb(t,e)})).then((function(){})))},t.jd=function(t){return this.Sa(t).then((function(t){return t.data.email}))},t.ob=function(t,e){return Al(this,this.a.ob(t,e).then((function(){})))},t.Sa=function(t){return Al(this,this.a.Sa(t).then((function(t){return new hi(t)})))},t.kb=function(t){return Al(this,this.a.kb(t).then((function(){})))},t.wb=function(t,e){var n=this;return Al(this,Oe().then((function(){return"undefined"===typeof e||vt(e)?{}:Gi(new xi(e))})).then((function(e){return n.a.wb(t,e)})).then((function(){})))},t.Wc=function(t,e){return Al(this,oh(this,t,e,I(this.ab,this)))},t.Vc=function(t,e){var n=this;return Al(this,Oe().then((function(){var r=e||pr(),i=Mo(t,r);if(!(r=Fo(r)))throw new k("argument-error","Invalid email link!");if(r.tenantId!==n.T())throw new k("tenant-id-mismatch");return n.ab(i)})))},kl.prototype.render=function(){},kl.prototype.reset=function(){},kl.prototype.getResponse=function(){},kl.prototype.execute=function(){};var Cl=null;function Ol(t,e){return(e=Dl(e))&&t.a[e]||null}function Dl(t){return(t="undefined"===typeof t?1e12:t)?t.toString():null}function Rl(t,e){this.g=!1,this.c=e,this.a=this.b=null,this.h="invisible"!==this.c.size,this.f=le(t);var n=this;this.i=function(){n.execute()},this.h?this.execute():fn(this.f,"click",this.i)}function Pl(t){if(t.g)throw Error("reCAPTCHA mock was already deleted!")}function xl(){}function Ll(){}Nl.prototype.render=function(t,e){return this.a[this.b.toString()]=new Rl(t,e),this.b++},Nl.prototype.reset=function(t){var e=Ol(this,t);t=Dl(t),e&&t&&(e.delete(),delete this.a[t])},Nl.prototype.getResponse=function(t){return(t=Ol(this,t))?t.getResponse():null},Nl.prototype.execute=function(t){(t=Ol(this,t))&&t.execute()},Rl.prototype.getResponse=function(){return Pl(this),this.b},Rl.prototype.execute=function(){Pl(this);var t=this;this.a||(this.a=setTimeout((function(){t.b=function(){for(var t=50,e=[];0<t;)e.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),t--;return e.join("")}();var e=t.c.callback,n=t.c["expired-callback"];if(e)try{e(t.b)}catch(r){}t.a=setTimeout((function(){if(t.a=null,t.b=null,n)try{n()}catch(r){}t.h&&t.execute()}),6e4)}),500))},Rl.prototype.delete=function(){Pl(this),this.g=!0,clearTimeout(this.a),this.a=null,vn(this.f,"click",this.i)},Zr(xl,"FACTOR_ID","phone"),Ll.prototype.g=function(){return Cl||(Cl=new Nl),Oe(Cl)},Ll.prototype.c=function(){};var Ml=null;function Fl(){this.b=u.grecaptcha?1/0:0,this.f=null,this.a="__rcb"+Math.floor(1e6*Math.random()).toString()}var Ul=new wt(Et,"https://www.google.com/recaptcha/api.js?onload=%{onload}&render=explicit&hl=%{hl}"),jl=new Hr(3e4,6e4);Fl.prototype.g=function(t){var e=this;return new Te((function(n,r){var i=setTimeout((function(){r(new k("network-request-failed"))}),jl.get());!u.grecaptcha||t!==e.f&&!e.b?(u[e.a]=function(){if(u.grecaptcha){e.f=t;var o=u.grecaptcha.render;u.grecaptcha.render=function(t,n){return t=o(t,n),e.b++,t},clearTimeout(i),n(u.grecaptcha)}else clearTimeout(i),r(new k("internal-error"));delete u[e.a]},Oe(Qa(Nt(Ul,{onload:e.a,hl:t||""}))).o((function(){clearTimeout(i),r(new k("internal-error","Unable to load external reCAPTCHA dependencies!"))}))):(clearTimeout(i),n(u.grecaptcha))}))},Fl.prototype.c=function(){this.b--};var Vl=null;function Bl(t,e,n,r,i,o,a){if(Zr(this,"type","recaptcha"),this.c=this.f=null,this.J=!1,this.v=e,this.g=null,a?(Ml||(Ml=new Ll),a=Ml):(Vl||(Vl=new Fl),a=Vl),this.m=a,this.a=n||{theme:"light",type:"image"},this.h=[],this.a[Gl])throw new k("argument-error","sitekey should not be provided for reCAPTCHA as one is automatically provisioned for the current project.");if(this.i="invisible"===this.a[Hl],!u.document)throw new k("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment with DOM support.");if(!le(e)||!this.i&&le(e).hasChildNodes())throw new k("argument-error","reCAPTCHA container is either not found or already contains inner elements!");this.s=new ns(t,o||null,i||null),this.u=r||function(){return null};var s=this;this.l=[];var c=this.a[ql];this.a[ql]=function(t){if(zl(s,t),"function"===typeof c)c(t);else if("string"===typeof c){var e=Pr(c,u);"function"===typeof e&&e(t)}};var h=this.a[Kl];this.a[Kl]=function(){if(zl(s,null),"function"===typeof h)h();else if("string"===typeof h){var t=Pr(h,u);"function"===typeof t&&t()}}}var ql="callback",Kl="expired-callback",Gl="sitekey",Hl="size";function zl(t,e){for(var n=0;n<t.l.length;n++)try{t.l[n](e)}catch(r){}}function Wl(t,e){return t.h.push(e),e.oa((function(){Y(t.h,e)})),e}function Xl(t){if(t.J)throw new k("internal-error","RecaptchaVerifier instance has been destroyed.")}function Ql(t,e,n){var i=!1;try{this.b=n||r.default.app()}catch(s){throw new k("argument-error","No firebase.app.App instance is currently initialized.")}if(!this.b.options||!this.b.options.apiKey)throw new k("invalid-api-key");n=this.b.options.apiKey;var o=this,a=null;try{a=this.b.auth().Ga()}catch(s){}try{i=this.b.auth().settings.appVerificationDisabledForTesting}catch(s){}a=r.default.SDK_VERSION?Dr(r.default.SDK_VERSION,a):null,Bl.call(this,n,t,e,(function(){try{var t=o.b.auth().la()}catch(e){t=null}return t}),a,P(C),i)}function Yl(t,e,n,r){t:{n=Array.prototype.slice.call(n);for(var i=0,o=!1,a=0;a<e.length;a++)if(e[a].optional)o=!0;else{if(o)throw new k("internal-error","Argument validator encountered a required argument after an optional argument.");i++}if(o=e.length,n.length<i||o<n.length)r="Expected "+(i==o?1==i?"1 argument":i+" arguments":i+"-"+o+" arguments")+" but got "+n.length+".";else{for(i=0;i<n.length;i++)if(o=e[i].optional&&void 0===n[i],!e[i].M(n[i])&&!o){if(e=e[i],0>i||i>=Jl.length)throw new k("internal-error","Argument validator received an unsupported number of arguments.");n=Jl[i],r=(r?"":n+" argument ")+(e.name?'"'+e.name+'" ':"")+"must be "+e.K+".";break t}r=null}}if(r)throw new k("argument-error",t+" failed: "+r)}(t=Bl.prototype).Ia=function(){var t=this;return this.f?this.f:this.f=Wl(this,Oe().then((function(){if(Mr()&&!Er())return _r();throw new k("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment.")})).then((function(){return t.m.g(t.u())})).then((function(e){return t.g=e,cu(t.s,zs,{})})).then((function(e){t.a[Gl]=e.recaptchaSiteKey})).o((function(e){throw t.f=null,e})))},t.render=function(){Xl(this);var t=this;return Wl(this,this.Ia().then((function(){if(null===t.c){var e=t.v;if(!t.i){var n=le(e);e=function(t,e,n){var r=arguments,i=document,o=String(r[0]),a=r[1];if(!he&&a&&(a.name||a.type)){if(o=["<",o],a.name&&o.push(' name="',Ht(a.name),'"'),a.type){o.push(' type="',Ht(a.type),'"');var s={};yt(s,a),delete s.type,a=s}o.push(">"),o=o.join("")}return o=me(i,o),a&&("string"===typeof a?o.className=a:Array.isArray(a)?o.className=a.join(" "):fe(o,a)),2<r.length&&ge(i,o,r),o}("DIV"),n.appendChild(e)}t.c=t.g.render(e,t.a)}return t.c})))},t.verify=function(){Xl(this);var t=this;return Wl(this,this.render().then((function(e){return new Te((function(n){var r=t.g.getResponse(e);if(r)n(r);else{var i=function(e){e&&(function(t,e){J(t.l,(function(t){return t==e}))}(t,i),n(e))};t.l.push(i),t.i&&t.g.execute(t.c)}}))})))},t.reset=function(){Xl(this),null!==this.c&&this.g.reset(this.c)},t.clear=function(){Xl(this),this.J=!0,this.m.c();for(var t=0;t<this.h.length;t++)this.h[t].cancel("RecaptchaVerifier instance has been destroyed.");if(!this.i){t=le(this.v);for(var e;e=t.firstChild;)t.removeChild(e)}},S(Ql,Bl);var Jl="First Second Third Fourth Fifth Sixth Seventh Eighth Ninth".split(" ");function $l(t,e){return{name:t||"",K:"a valid string",optional:!!e,M:function(t){return"string"===typeof t}}}function Zl(t,e){return{name:t||"",K:"a boolean",optional:!!e,M:function(t){return"boolean"===typeof t}}}function tf(t,e){return{name:t||"",K:"a valid object",optional:!!e,M:g}}function ef(t,e){return{name:t||"",K:"a function",optional:!!e,M:function(t){return"function"===typeof t}}}function nf(t,e){return{name:t||"",K:"null",optional:!!e,M:function(t){return null===t}}}function rf(t){return{name:t?t+"Credential":"credential",K:t?"a valid "+t+" credential":"a valid credential",optional:!1,M:function(e){if(!e)return!1;var n=!t||e.providerId===t;return!(!e.ka||!n)}}}function of(t,e){return g(t)&&"string"===typeof t.type&&t.type===e&&"function"===typeof t.Ha}function af(t){return g(t)&&"string"===typeof t.uid}function sf(t,e,n,r){return{name:n||"",K:t.K+" or "+e.K,optional:!!r,M:function(n){return t.M(n)||e.M(n)}}}function uf(t,e){for(var n in e){var r=e[n].name;t[r]=lf(r,t[n],e[n].j)}}function cf(t,e){for(var n in e){var r=e[n].name;r!==n&&Object.defineProperty(t,r,{get:T((function(t){return this[t]}),n),set:T((function(t,e,n,r){Yl(t,[n],[r],!0),this[e]=r}),r,n,e[n].lb),enumerable:!0})}}function hf(t,e,n,r){t[e]=lf(e,n,r)}function lf(t,e,n){function r(){var t=Array.prototype.slice.call(arguments);return Yl(o,n,t),e.apply(this,t)}if(!n)return e;var i,o=function(t){return(t=t.split("."))[t.length-1]}(t);for(i in e)r[i]=e[i];for(i in e.prototype)r.prototype[i]=e.prototype[i];return r}uf(pl.prototype,{kb:{name:"applyActionCode",j:[$l("code")]},Sa:{name:"checkActionCode",j:[$l("code")]},ob:{name:"confirmPasswordReset",j:[$l("code"),$l("newPassword")]},dc:{name:"createUserWithEmailAndPassword",j:[$l("email"),$l("password")]},hc:{name:"fetchSignInMethodsForEmail",j:[$l("email")]},ra:{name:"getRedirectResult",j:[]},Bc:{name:"isSignInWithEmailLink",j:[$l("emailLink")]},Hc:{name:"onAuthStateChanged",j:[sf(tf(),ef(),"nextOrObserver"),ef("opt_error",!0),ef("opt_completed",!0)]},Ic:{name:"onIdTokenChanged",j:[sf(tf(),ef(),"nextOrObserver"),ef("opt_error",!0),ef("opt_completed",!0)]},wb:{name:"sendPasswordResetEmail",j:[$l("email"),sf(tf("opt_actionCodeSettings",!0),nf(null,!0),"opt_actionCodeSettings",!0)]},xb:{name:"sendSignInLinkToEmail",j:[$l("email"),tf("actionCodeSettings")]},yb:{name:"setPersistence",j:[$l("persistence")]},Sc:{name:"signInAndRetrieveDataWithCredential",j:[rf()]},Ab:{name:"signInAnonymously",j:[]},ab:{name:"signInWithCredential",j:[rf()]},Tc:{name:"signInWithCustomToken",j:[$l("token")]},Uc:{name:"signInWithEmailAndPassword",j:[$l("email"),$l("password")]},Vc:{name:"signInWithEmailLink",j:[$l("email"),$l("emailLink",!0)]},Wc:{name:"signInWithPhoneNumber",j:[$l("phoneNumber"),{name:"applicationVerifier",K:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,M:function(t){return!(!t||"string"!==typeof t.type||"function"!==typeof t.verify)}}]},Xc:{name:"signInWithPopup",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},Yc:{name:"signInWithRedirect",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},dd:{name:"updateCurrentUser",j:[sf({name:"user",K:"an instance of Firebase User",optional:!1,M:function(t){return!!(t&&t instanceof Ah)}},nf(),"user")]},Bb:{name:"signOut",j:[]},toJSON:{name:"toJSON",j:[$l(null,!0)]},fd:{name:"useDeviceLanguage",j:[]},gd:{name:"useEmulator",j:[$l("url"),tf("options",!0)]},jd:{name:"verifyPasswordResetCode",j:[$l("code")]}}),cf(pl.prototype,{lc:{name:"languageCode",lb:sf($l(),nf(),"languageCode")},ti:{name:"tenantId",lb:sf($l(),nf(),"tenantId")}}),pl.Persistence=oc,pl.Persistence.LOCAL="local",pl.Persistence.SESSION="session",pl.Persistence.NONE="none",uf(Ah.prototype,{delete:{name:"delete",j:[]},oc:{name:"getIdTokenResult",j:[Zl("opt_forceRefresh",!0)]},I:{name:"getIdToken",j:[Zl("opt_forceRefresh",!0)]},Cc:{name:"linkAndRetrieveDataWithCredential",j:[rf()]},rb:{name:"linkWithCredential",j:[rf()]},Dc:{name:"linkWithPhoneNumber",j:[$l("phoneNumber"),{name:"applicationVerifier",K:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,M:function(t){return!(!t||"string"!==typeof t.type||"function"!==typeof t.verify)}}]},Ec:{name:"linkWithPopup",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},Fc:{name:"linkWithRedirect",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},Lc:{name:"reauthenticateAndRetrieveDataWithCredential",j:[rf()]},ub:{name:"reauthenticateWithCredential",j:[rf()]},Mc:{name:"reauthenticateWithPhoneNumber",j:[$l("phoneNumber"),{name:"applicationVerifier",K:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,M:function(t){return!(!t||"string"!==typeof t.type||"function"!==typeof t.verify)}}]},Nc:{name:"reauthenticateWithPopup",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},Oc:{name:"reauthenticateWithRedirect",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},reload:{name:"reload",j:[]},vb:{name:"sendEmailVerification",j:[sf(tf("opt_actionCodeSettings",!0),nf(null,!0),"opt_actionCodeSettings",!0)]},toJSON:{name:"toJSON",j:[$l(null,!0)]},cd:{name:"unlink",j:[$l("provider")]},Cb:{name:"updateEmail",j:[$l("email")]},Db:{name:"updatePassword",j:[$l("password")]},ed:{name:"updatePhoneNumber",j:[rf("phone")]},Eb:{name:"updateProfile",j:[tf("profile")]},Fb:{name:"verifyBeforeUpdateEmail",j:[$l("email"),sf(tf("opt_actionCodeSettings",!0),nf(null,!0),"opt_actionCodeSettings",!0)]}}),uf(Nl.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),uf(kl.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),uf(Te.prototype,{oa:{name:"finally"},o:{name:"catch"},then:{name:"then"}}),cf(rh.prototype,{appVerificationDisabled:{name:"appVerificationDisabledForTesting",lb:Zl("appVerificationDisabledForTesting")}}),uf(ih.prototype,{confirm:{name:"confirm",j:[$l("verificationCode")]}}),hf(po,"fromJSON",(function(t){t="string"===typeof t?JSON.parse(t):t;for(var e,n=[_o,xo,jo,yo],r=0;r<n.length;r++)if(e=n[r](t))return e;return null}),[sf($l(),tf(),"json")]),hf(Lo,"credential",(function(t,e){return new Po(t,e)}),[$l("email"),$l("password")]),uf(Po.prototype,{w:{name:"toJSON",j:[$l(null,!0)]}}),uf(So.prototype,{Ca:{name:"addScope",j:[$l("scope")]},Ka:{name:"setCustomParameters",j:[tf("customOAuthParameters")]}}),hf(So,"credential",Ao,[sf($l(),tf(),"token")]),hf(Lo,"credentialWithLink",Mo,[$l("email"),$l("emailLink")]),uf(ko.prototype,{Ca:{name:"addScope",j:[$l("scope")]},Ka:{name:"setCustomParameters",j:[tf("customOAuthParameters")]}}),hf(ko,"credential",No,[sf($l(),tf(),"token")]),uf(Co.prototype,{Ca:{name:"addScope",j:[$l("scope")]},Ka:{name:"setCustomParameters",j:[tf("customOAuthParameters")]}}),hf(Co,"credential",Oo,[sf($l(),sf(tf(),nf()),"idToken"),sf($l(),nf(),"accessToken",!0)]),uf(Do.prototype,{Ka:{name:"setCustomParameters",j:[tf("customOAuthParameters")]}}),hf(Do,"credential",Ro,[sf($l(),tf(),"token"),$l("secret",!0)]),uf(Eo.prototype,{Ca:{name:"addScope",j:[$l("scope")]},credential:{name:"credential",j:[sf($l(),sf(tf(),nf()),"optionsOrIdToken"),sf($l(),nf(),"accessToken",!0)]},Ka:{name:"setCustomParameters",j:[tf("customOAuthParameters")]}}),uf(bo.prototype,{w:{name:"toJSON",j:[$l(null,!0)]}}),uf(go.prototype,{w:{name:"toJSON",j:[$l(null,!0)]}}),hf(Bo,"credential",qo,[$l("verificationId"),$l("verificationCode")]),uf(Bo.prototype,{gb:{name:"verifyPhoneNumber",j:[sf($l(),{name:"phoneInfoOptions",K:"valid phone info options",optional:!1,M:function(t){return!!t&&(t.session&&t.phoneNumber?of(t.session,lo)&&"string"===typeof t.phoneNumber:t.session&&t.multiFactorHint?of(t.session,fo)&&af(t.multiFactorHint):t.session&&t.multiFactorUid?of(t.session,fo)&&"string"===typeof t.multiFactorUid:!!t.phoneNumber&&"string"===typeof t.phoneNumber)}},"phoneInfoOptions"),{name:"applicationVerifier",K:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,M:function(t){return!(!t||"string"!==typeof t.type||"function"!==typeof t.verify)}}]}}),uf(Uo.prototype,{w:{name:"toJSON",j:[$l(null,!0)]}}),uf(k.prototype,{toJSON:{name:"toJSON",j:[$l(null,!0)]}}),uf(Jo.prototype,{toJSON:{name:"toJSON",j:[$l(null,!0)]}}),uf(Yo.prototype,{toJSON:{name:"toJSON",j:[$l(null,!0)]}}),uf(hh.prototype,{toJSON:{name:"toJSON",j:[$l(null,!0)]}}),uf(sh.prototype,{Rc:{name:"resolveSignIn",j:[{name:"multiFactorAssertion",K:"a valid multiFactorAssertion",optional:!1,M:function(t){return!!t&&!!t.tb}}]}}),uf(gh.prototype,{Sb:{name:"getSession",j:[]},fc:{name:"enroll",j:[{name:"multiFactorAssertion",K:"a valid multiFactorAssertion",optional:!1,M:function(t){return!!t&&!!t.tb}},$l("displayName",!0)]},bd:{name:"unenroll",j:[sf({name:"multiFactorInfo",K:"a valid multiFactorInfo",optional:!1,M:af},$l(),"multiFactorInfoIdentifier")]}}),uf(Ql.prototype,{clear:{name:"clear",j:[]},render:{name:"render",j:[]},verify:{name:"verify",j:[]}}),hf(Si,"parseLink",Pi,[$l("link")]),hf(xl,"assertion",(function(t){return new dh(t)}),[rf("phone")]),function(){if("undefined"===typeof r.default||!r.default.INTERNAL||!r.default.INTERNAL.registerComponent)throw Error("Cannot find the firebase namespace; be sure to include firebase-app.js before this library.");var t={ActionCodeInfo:{Operation:{EMAIL_SIGNIN:fi,PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:li,VERIFY_AND_CHANGE_EMAIL:pi,VERIFY_EMAIL:"VERIFY_EMAIL"}},Auth:pl,AuthCredential:po,Error:k};hf(t,"EmailAuthProvider",Lo,[]),hf(t,"FacebookAuthProvider",So,[]),hf(t,"GithubAuthProvider",ko,[]),hf(t,"GoogleAuthProvider",Co,[]),hf(t,"TwitterAuthProvider",Do,[]),hf(t,"OAuthProvider",Eo,[$l("providerId")]),hf(t,"SAMLAuthProvider",To,[$l("providerId")]),hf(t,"PhoneAuthProvider",Bo,[{name:"auth",K:"an instance of Firebase Auth",optional:!0,M:function(t){return!!(t&&t instanceof pl)}}]),hf(t,"RecaptchaVerifier",Ql,[sf($l(),{name:"",K:"an HTML element",optional:!1,M:function(t){return!!(t&&t instanceof Element)}},"recaptchaContainer"),tf("recaptchaParameters",!0),{name:"app",K:"an instance of Firebase App",optional:!0,M:function(t){return!!(t&&t instanceof r.default.app.App)}}]),hf(t,"ActionCodeURL",Si,[]),hf(t,"PhoneMultiFactorGenerator",xl,[]),r.default.INTERNAL.registerComponent({name:"auth",instanceFactory:function(t){return new pl(t=t.getProvider("app").getImmediate())},multipleInstances:!1,serviceProps:t,instantiationMode:"LAZY",type:"PUBLIC",onInstanceCreated:function(t){t.getProvider("auth-internal").initialize()}}),r.default.INTERNAL.registerComponent({name:"auth-internal",instanceFactory:function(t){return{getUid:I((t=t.getProvider("auth").getImmediate()).getUid,t),getToken:I(t.nc,t),addAuthTokenListener:I(t.cc,t),removeAuthTokenListener:I(t.Pc,t)}},multipleInstances:!1,instantiationMode:"LAZY",type:"PRIVATE"}),r.default.registerVersion("@firebase/auth","0.16.8"),r.default.INTERNAL.extendNamespace({User:Ah})}()}.apply("undefined"!==typeof n.g?n.g:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{});var o=n(7582),a=n(4589),s=n(909),u="firebasestorage.googleapis.com",c=function(t){function e(n,r){var i=t.call(this,h(n),"Firebase Storage: "+r+" ("+h(n)+")")||this;return i.customData={serverResponse:null},i._baseMessage=i.message,Object.setPrototypeOf(i,e.prototype),i}return(0,o.__extends)(e,t),e.prototype._codeEquals=function(t){return h(t)===this.code},Object.defineProperty(e.prototype,"serverResponse",{get:function(){return this.customData.serverResponse},set:function(t){this.customData.serverResponse=t,this.customData.serverResponse?this.message=this._baseMessage+"\n"+this.customData.serverResponse:this.message=this._baseMessage},enumerable:!1,configurable:!0}),e}(a.FirebaseError);function h(t){return"storage/"+t}function l(){return new c("unknown","An unknown error occurred, please check the error payload for server response.")}function f(){return new c("canceled","User canceled the upload/download.")}function p(){return new c("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function d(t){return new c("invalid-argument",t)}function v(){return new c("app-deleted","The Firebase app was deleted.")}function g(t){return new c("invalid-root-operation","The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function m(t,e){return new c("invalid-format","String does not match format '"+t+"': "+e)}function y(t){throw new c("internal-error","Internal error: "+t)}var b={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"},w=function(t,e){this.data=t,this.contentType=e||null};function _(t,e){switch(t){case b.RAW:return new w(I(e));case b.BASE64:case b.BASE64URL:return new w(T(t,e));case b.DATA_URL:return new w(function(t){var e=new E(t);return e.base64?T(b.BASE64,e.rest):function(t){var e;try{e=decodeURIComponent(t)}catch(dv){throw m(b.DATA_URL,"Malformed data URL.")}return I(e)}(e.rest)}(e),new E(e).contentType)}throw l()}function I(t){for(var e=[],n=0;n<t.length;n++){var r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|63&r);else if(55296===(64512&r))if(n<t.length-1&&56320===(64512&t.charCodeAt(n+1)))r=65536|(1023&r)<<10|1023&t.charCodeAt(++n),e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r);else e.push(239,191,189);else 56320===(64512&r)?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(e)}function T(t,e){switch(t){case b.BASE64:var n=-1!==e.indexOf("-"),r=-1!==e.indexOf("_");if(n||r)throw m(t,"Invalid character '"+(n?"-":"_")+"' found: is it base64url encoded?");break;case b.BASE64URL:var i=-1!==e.indexOf("+"),o=-1!==e.indexOf("/");if(i||o)throw m(t,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/")}var a;try{a=atob(e)}catch(dv){throw m(t,"Invalid character found")}for(var s=new Uint8Array(a.length),u=0;u<a.length;u++)s[u]=a.charCodeAt(u);return s}var E=function(t){this.base64=!1,this.contentType=null;var e=t.match(/^data:([^,]+)?,/);if(null===e)throw m(b.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");var n=e[1]||null;null!=n&&(this.base64=(r=n,i=";base64",r.length>=i.length&&r.substring(r.length-i.length)===i),this.contentType=this.base64?n.substring(0,n.length-";base64".length):n),this.rest=t.substring(t.indexOf(",")+1);var r,i};var S,A={STATE_CHANGED:"state_changed"},k={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function N(t){switch(t){case"running":case"pausing":case"canceling":return k.RUNNING;case"paused":return k.PAUSED;case"success":return k.SUCCESS;case"canceled":return k.CANCELED;default:return k.ERROR}}!function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"}(S||(S={}));var C=function(){function t(){var t=this;this.sent_=!1,this.xhr_=new XMLHttpRequest,this.errorCode_=S.NO_ERROR,this.sendPromise_=new Promise((function(e){t.xhr_.addEventListener("abort",(function(){t.errorCode_=S.ABORT,e()})),t.xhr_.addEventListener("error",(function(){t.errorCode_=S.NETWORK_ERROR,e()})),t.xhr_.addEventListener("load",(function(){e()}))}))}return t.prototype.send=function(t,e,n,r){if(this.sent_)throw y("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(e,t,!0),void 0!==r)for(var i in r)r.hasOwnProperty(i)&&this.xhr_.setRequestHeader(i,r[i].toString());return void 0!==n?this.xhr_.send(n):this.xhr_.send(),this.sendPromise_},t.prototype.getErrorCode=function(){if(!this.sent_)throw y("cannot .getErrorCode() before sending");return this.errorCode_},t.prototype.getStatus=function(){if(!this.sent_)throw y("cannot .getStatus() before sending");try{return this.xhr_.status}catch(dv){return-1}},t.prototype.getResponseText=function(){if(!this.sent_)throw y("cannot .getResponseText() before sending");return this.xhr_.responseText},t.prototype.abort=function(){this.xhr_.abort()},t.prototype.getResponseHeader=function(t){return this.xhr_.getResponseHeader(t)},t.prototype.addUploadProgressListener=function(t){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",t)},t.prototype.removeUploadProgressListener=function(t){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",t)},t}();var O=function(){function t(){}return t.prototype.createConnection=function(){return new C},t}(),D=function(){function t(t,e){this.bucket=t,this.path_=e}return Object.defineProperty(t.prototype,"path",{get:function(){return this.path_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isRoot",{get:function(){return 0===this.path.length},enumerable:!1,configurable:!0}),t.prototype.fullServerUrl=function(){var t=encodeURIComponent;return"/b/"+t(this.bucket)+"/o/"+t(this.path)},t.prototype.bucketOnlyServerUrl=function(){return"/b/"+encodeURIComponent(this.bucket)+"/o"},t.makeFromBucketSpec=function(e,n){var r;try{r=t.makeFromUrl(e,n)}catch(dv){return new t(e,"")}if(""===r.path)return r;throw new c("invalid-default-bucket","Invalid default bucket '"+e+"'.")},t.makeFromUrl=function(e,n){var r=null,i="([A-Za-z0-9.\\-_]+)";var o=new RegExp("^gs://"+i+"(/(.*))?$","i");function a(t){t.path_=decodeURIComponent(t.path)}for(var s=n.replace(/[.]/g,"\\."),h=[{regex:o,indices:{bucket:1,path:3},postModify:function(t){"/"===t.path.charAt(t.path.length-1)&&(t.path_=t.path_.slice(0,-1))}},{regex:new RegExp("^https?://"+s+"/v[A-Za-z0-9_]+/b/"+i+"/o(/([^?#]*).*)?$","i"),indices:{bucket:1,path:3},postModify:a},{regex:new RegExp("^https?://"+(n===u?"(?:storage.googleapis.com|storage.cloud.google.com)":n)+"/"+i+"/([^?#]*)","i"),indices:{bucket:1,path:2},postModify:a}],l=0;l<h.length;l++){var f=h[l],p=f.regex.exec(e);if(p){var d=p[f.indices.bucket],v=p[f.indices.path];v||(v=""),r=new t(d,v),f.postModify(r);break}}if(null==r)throw function(t){return new c("invalid-url","Invalid URL '"+t+"'.")}(e);return r},t}(),R=function(){function t(t){this.promise_=Promise.reject(t)}return t.prototype.getPromise=function(){return this.promise_},t.prototype.cancel=function(t){},t}();function P(t){return"string"===typeof t||t instanceof String}function x(t){return L()&&t instanceof Blob}function L(){return"undefined"!==typeof Blob}function M(t,e,n,r){if(r<e)throw d("Invalid value for '"+t+"'. Expected "+e+" or greater.");if(r>n)throw d("Invalid value for '"+t+"'. Expected "+n+" or less.")}function F(t,e){var n=e.match(/^(\w+):\/\/.+/),r=e;return null==(null===n||void 0===n?void 0:n[1])&&(r="https://"+e),r+"/v0"+t}function U(t){var e=encodeURIComponent,n="?";for(var r in t){if(t.hasOwnProperty(r))n=n+(e(r)+"="+e(t[r]))+"&"}return n=n.slice(0,-1)}var j=function(){function t(t,e,n,r,i,o,a,s,u,c,h){var l=this;this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.url_=t,this.method_=e,this.headers_=n,this.body_=r,this.successCodes_=i.slice(),this.additionalRetryCodes_=o.slice(),this.callback_=a,this.errorCallback_=s,this.progressCallback_=c,this.timeout_=u,this.pool_=h,this.promise_=new Promise((function(t,e){l.resolve_=t,l.reject_=e,l.start_()}))}return t.prototype.start_=function(){var t=this;function e(e,n){var r,i=t.resolve_,o=t.reject_,a=n.connection;if(n.wasSuccessCode)try{var s=t.callback_(a,a.getResponseText());!function(t){return void 0!==t}(s)?i():i(s)}catch(dv){o(dv)}else null!==a?((r=l()).serverResponse=a.getResponseText(),t.errorCallback_?o(t.errorCallback_(a,r)):o(r)):n.canceled?o(r=t.appDelete_?v():f()):o(r=new c("retry-limit-exceeded","Max retry time for operation exceeded, please try again."))}this.canceled_?e(0,new V(!1,null,!0)):this.backoffId_=function(t,e,n){var r=1,i=null,a=!1,s=0;function u(){return 2===s}var c=!1;function h(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];c||(c=!0,e.apply(null,t))}function l(e){i=setTimeout((function(){i=null,t(f,u())}),e)}function f(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(!c)if(t)h.call.apply(h,(0,o.__spreadArray)([null,t],e));else{var i;u()||a?h.call.apply(h,(0,o.__spreadArray)([null,t],e)):(r<64&&(r*=2),1===s?(s=2,i=0):i=1e3*(r+Math.random()),l(i))}}var p=!1;function d(t){p||(p=!0,c||(null!==i?(t||(s=2),clearTimeout(i),l(0)):t||(s=1)))}return l(0),setTimeout((function(){a=!0,d(!0)}),n),d}((function(e,n){if(n)e(!1,new V(!1,null,!0));else{var r=t.pool_.createConnection();t.pendingConnection_=r,null!==t.progressCallback_&&r.addUploadProgressListener(i),r.send(t.url_,t.method_,t.body_,t.headers_).then((function(){null!==t.progressCallback_&&r.removeUploadProgressListener(i),t.pendingConnection_=null;var n=r.getErrorCode()===S.NO_ERROR,o=r.getStatus();if(n&&!t.isRetryStatusCode_(o)){var a=-1!==t.successCodes_.indexOf(o);e(!0,new V(a,r))}else{var s=r.getErrorCode()===S.ABORT;e(!1,new V(!1,null,s))}}))}function i(e){var n=e.loaded,r=e.lengthComputable?e.total:-1;null!==t.progressCallback_&&t.progressCallback_(n,r)}}),e,this.timeout_)},t.prototype.getPromise=function(){return this.promise_},t.prototype.cancel=function(t){this.canceled_=!0,this.appDelete_=t||!1,null!==this.backoffId_&&function(t){t(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()},t.prototype.isRetryStatusCode_=function(t){var e=t>=500&&t<600,n=-1!==[408,429].indexOf(t),r=-1!==this.additionalRetryCodes_.indexOf(t);return e||n||r},t}(),V=function(t,e,n){this.wasSuccessCode=t,this.connection=e,this.canceled=!!n};function B(){return"undefined"!==typeof BlobBuilder?BlobBuilder:"undefined"!==typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}function q(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=B();if(void 0!==n){for(var r=new n,i=0;i<t.length;i++)r.append(t[i]);return r.getBlob()}if(L())return new Blob(t);throw new c("unsupported-environment","This browser doesn't seem to support creating Blobs")}var K=function(){function t(t,e){var n=0,r="";x(t)?(this.data_=t,n=t.size,r=t.type):t instanceof ArrayBuffer?(e?this.data_=new Uint8Array(t):(this.data_=new Uint8Array(t.byteLength),this.data_.set(new Uint8Array(t))),n=this.data_.length):t instanceof Uint8Array&&(e?this.data_=t:(this.data_=new Uint8Array(t.length),this.data_.set(t)),n=t.length),this.size_=n,this.type_=r}return t.prototype.size=function(){return this.size_},t.prototype.type=function(){return this.type_},t.prototype.slice=function(e,n){if(x(this.data_)){var r=function(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}(this.data_,e,n);return null===r?null:new t(r)}return new t(new Uint8Array(this.data_.buffer,e,n-e),!0)},t.getBlob=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];if(L()){var r=e.map((function(e){return e instanceof t?e.data_:e}));return new t(q.apply(null,r))}var i=e.map((function(t){return P(t)?_(b.RAW,t).data:t.data_})),o=0;i.forEach((function(t){o+=t.byteLength}));var a=new Uint8Array(o),s=0;return i.forEach((function(t){for(var e=0;e<t.length;e++)a[s++]=t[e]})),new t(a,!0)},t.prototype.uploadData=function(){return this.data_},t}();function G(t){var e;try{e=JSON.parse(t)}catch(dv){return null}return function(t){return"object"===typeof t&&!Array.isArray(t)}(e)?e:null}function H(t){var e=t.lastIndexOf("/",t.length-2);return-1===e?t:t.slice(e+1)}function z(t,e){return e}var W=function(t,e,n,r){this.server=t,this.local=e||t,this.writable=!!n,this.xform=r||z},X=null;function Q(){if(X)return X;var t=[];t.push(new W("bucket")),t.push(new W("generation")),t.push(new W("metageneration")),t.push(new W("name","fullPath",!0));var e=new W("name");e.xform=function(t,e){return function(t){return!P(t)||t.length<2?t:H(t)}(e)},t.push(e);var n=new W("size");return n.xform=function(t,e){return void 0!==e?Number(e):e},t.push(n),t.push(new W("timeCreated")),t.push(new W("updated")),t.push(new W("md5Hash",null,!0)),t.push(new W("cacheControl",null,!0)),t.push(new W("contentDisposition",null,!0)),t.push(new W("contentEncoding",null,!0)),t.push(new W("contentLanguage",null,!0)),t.push(new W("contentType",null,!0)),t.push(new W("metadata","customMetadata",!0)),X=t}function Y(t,e,n){for(var r={type:"file"},i=n.length,o=0;o<i;o++){var a=n[o];r[a.local]=a.xform(r,e[a.server])}return function(t,e){Object.defineProperty(t,"ref",{get:function(){var n=t.bucket,r=t.fullPath,i=new D(n,r);return e._makeStorageReference(i)}})}(r,t),r}function J(t,e,n){var r=G(e);return null===r?null:Y(t,r,n)}function $(t,e){for(var n={},r=e.length,i=0;i<r;i++){var o=e[i];o.writable&&(n[o.server]=t[o.local])}return JSON.stringify(n)}function Z(t,e,n){var r=G(n);return null===r?null:function(t,e,n){var r={prefixes:[],items:[],nextPageToken:n.nextPageToken};if(n.prefixes)for(var i=0,o=n.prefixes;i<o.length;i++){var a=o[i].replace(/\/$/,""),s=t._makeStorageReference(new D(e,a));r.prefixes.push(s)}if(n.items)for(var u=0,c=n.items;u<c.length;u++){var h=c[u];s=t._makeStorageReference(new D(e,h.name)),r.items.push(s)}return r}(t,e,r)}var tt=function(t,e,n,r){this.url=t,this.method=e,this.handler=n,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]};function et(t){if(!t)throw l()}function nt(t,e){return function(n,r){var i=J(t,r,e);return et(null!==i),i}}function rt(t,e){return function(n,r){var i=J(t,r,e);return et(null!==i),function(t,e,n){var r=G(e);if(null===r)return null;if(!P(r.downloadTokens))return null;var i=r.downloadTokens;if(0===i.length)return null;var o=encodeURIComponent;return i.split(",").map((function(e){var r=t.bucket,i=t.fullPath;return F("/b/"+o(r)+"/o/"+o(i),n)+U({alt:"media",token:e})}))[0]}(i,r,t.host)}}function it(t){return function(e,n){var r,i,o;return 401===e.getStatus()?r=e.getResponseText().includes("Firebase App Check token is invalid")?new c("unauthorized-app","This app does not have permission to access Firebase Storage on this project."):new c("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again."):402===e.getStatus()?(o=t.bucket,r=new c("quota-exceeded","Quota for bucket '"+o+"' exceeded, please view quota on https://firebase.google.com/pricing/.")):403===e.getStatus()?(i=t.path,r=new c("unauthorized","User does not have permission to access '"+i+"'.")):r=n,r.serverResponse=n.serverResponse,r}}function ot(t){var e=it(t);return function(n,r){var i,o=e(n,r);return 404===n.getStatus()&&(i=t.path,o=new c("object-not-found","Object '"+i+"' does not exist.")),o.serverResponse=r.serverResponse,o}}function at(t,e,n){var r=F(e.fullServerUrl(),t.host),i=t.maxOperationRetryTime,o=new tt(r,"GET",nt(t,n),i);return o.errorHandler=ot(e),o}function st(t,e,n,r,i){var o={};e.isRoot?o.prefix="":o.prefix=e.path+"/",n&&n.length>0&&(o.delimiter=n),r&&(o.pageToken=r),i&&(o.maxResults=i);var a=F(e.bucketOnlyServerUrl(),t.host),s=t.maxOperationRetryTime,u=new tt(a,"GET",function(t,e){return function(n,r){var i=Z(t,e,r);return et(null!==i),i}}(t,e.bucket),s);return u.urlParams=o,u.errorHandler=it(e),u}function ut(t,e,n){var r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=function(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}(null,e)),r}var ct=function(t,e,n,r){this.current=t,this.total=e,this.finalized=!!n,this.metadata=r||null};function ht(t,e){var n=null;try{n=t.getResponseHeader("X-Goog-Upload-Status")}catch(dv){et(!1)}return et(!!n&&-1!==(e||["active"]).indexOf(n)),n}var lt=262144;function ft(t,e,n,r,i,o,a,s){var u=new ct(0,0);if(a?(u.current=a.current,u.total=a.total):(u.current=0,u.total=r.size()),r.size()!==u.total)throw new c("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.");var h=u.total-u.current,l=h;i>0&&(l=Math.min(l,i));var f=u.current,d=f+l,v={"X-Goog-Upload-Command":l===h?"upload, finalize":"upload","X-Goog-Upload-Offset":""+u.current},g=r.slice(f,d);if(null===g)throw p();var m=e.maxUploadRetryTime,y=new tt(n,"POST",(function(t,n){var i,a=ht(t,["active","final"]),s=u.current+l,c=r.size();return i="final"===a?nt(e,o)(t,n):null,new ct(s,c,"final"===a,i)}),m);return y.headers=v,y.body=g.uploadData(),y.progressCallback=s||null,y.errorHandler=it(t),y}var pt=function(t,e,n){var r=function(t){return"function"===typeof t}(t)||null!=e||null!=n;if(r)this.next=t,this.error=e,this.complete=n;else{var i=t;this.next=i.next,this.error=i.error,this.complete=i.complete}};function dt(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];Promise.resolve().then((function(){return t.apply(void 0,e)}))}}var vt=function(){function t(t,e,n){var r=this;void 0===n&&(n=null),this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=t,this._blob=e,this._metadata=n,this._mappings=Q(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=function(t){r._request=void 0,r._chunkMultiplier=1,t._codeEquals("canceled")?(r._needToFetchStatus=!0,r.completeTransitions_()):(r._error=t,r._transition("error"))},this._metadataErrorHandler=function(t){r._request=void 0,t._codeEquals("canceled")?r.completeTransitions_():(r._error=t,r._transition("error"))},this._promise=new Promise((function(t,e){r._resolve=t,r._reject=e,r._start()})),this._promise.then(null,(function(){}))}return t.prototype._makeProgressCallback=function(){var t=this,e=this._transferred;return function(n){return t._updateProgress(e+n)}},t.prototype._shouldDoResumable=function(t){return t.size()>262144},t.prototype._start=function(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this._continueUpload():this._oneShotUpload())},t.prototype._resolveToken=function(t){var e=this;Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then((function(n){var r=n[0],i=n[1];switch(e._state){case"running":t(r,i);break;case"canceling":e._transition("canceled");break;case"pausing":e._transition("paused")}}))},t.prototype._createResumable=function(){var t=this;this._resolveToken((function(e,n){var r=function(t,e,n,r,i){var o=e.bucketOnlyServerUrl(),a=ut(e,r,i),s={name:a.fullPath},u=F(o,t.host),c={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":""+r.size(),"X-Goog-Upload-Header-Content-Type":a.contentType,"Content-Type":"application/json; charset=utf-8"},h=$(a,n),l=t.maxUploadRetryTime,f=new tt(u,"POST",(function(t){var e;ht(t);try{e=t.getResponseHeader("X-Goog-Upload-URL")}catch(dv){et(!1)}return et(P(e)),e}),l);return f.urlParams=s,f.headers=c,f.body=h,f.errorHandler=it(e),f}(t._ref.storage,t._ref._location,t._mappings,t._blob,t._metadata),i=t._ref.storage._makeRequest(r,e,n);t._request=i,i.getPromise().then((function(e){t._request=void 0,t._uploadUrl=e,t._needToFetchStatus=!1,t.completeTransitions_()}),t._errorHandler)}))},t.prototype._fetchStatus=function(){var t=this,e=this._uploadUrl;this._resolveToken((function(n,r){var i=function(t,e,n,r){var i=t.maxUploadRetryTime,o=new tt(n,"POST",(function(t){var e=ht(t,["active","final"]),n=null;try{n=t.getResponseHeader("X-Goog-Upload-Size-Received")}catch(dv){et(!1)}n||et(!1);var i=Number(n);return et(!isNaN(i)),new ct(i,r.size(),"final"===e)}),i);return o.headers={"X-Goog-Upload-Command":"query"},o.errorHandler=it(e),o}(t._ref.storage,t._ref._location,e,t._blob),o=t._ref.storage._makeRequest(i,n,r);t._request=o,o.getPromise().then((function(e){e=e,t._request=void 0,t._updateProgress(e.current),t._needToFetchStatus=!1,e.finalized&&(t._needToFetchMetadata=!0),t.completeTransitions_()}),t._errorHandler)}))},t.prototype._continueUpload=function(){var t=this,e=lt*this._chunkMultiplier,n=new ct(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((function(i,o){var a;try{a=ft(t._ref._location,t._ref.storage,r,t._blob,e,t._mappings,n,t._makeProgressCallback())}catch(dv){return t._error=dv,void t._transition("error")}var s=t._ref.storage._makeRequest(a,i,o);t._request=s,s.getPromise().then((function(e){t._increaseMultiplier(),t._request=void 0,t._updateProgress(e.current),e.finalized?(t._metadata=e.metadata,t._transition("success")):t.completeTransitions_()}),t._errorHandler)}))},t.prototype._increaseMultiplier=function(){lt*this._chunkMultiplier<33554432&&(this._chunkMultiplier*=2)},t.prototype._fetchMetadata=function(){var t=this;this._resolveToken((function(e,n){var r=at(t._ref.storage,t._ref._location,t._mappings),i=t._ref.storage._makeRequest(r,e,n);t._request=i,i.getPromise().then((function(e){t._request=void 0,t._metadata=e,t._transition("success")}),t._metadataErrorHandler)}))},t.prototype._oneShotUpload=function(){var t=this;this._resolveToken((function(e,n){var r=function(t,e,n,r,i){var o=e.bucketOnlyServerUrl(),a={"X-Goog-Upload-Protocol":"multipart"},s=function(){for(var t="",e=0;e<2;e++)t+=Math.random().toString().slice(2);return t}();a["Content-Type"]="multipart/related; boundary="+s;var u=ut(e,r,i),c="--"+s+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+$(u,n)+"\r\n--"+s+"\r\nContent-Type: "+u.contentType+"\r\n\r\n",h="\r\n--"+s+"--",l=K.getBlob(c,r,h);if(null===l)throw p();var f={name:u.fullPath},d=F(o,t.host),v=t.maxUploadRetryTime,g=new tt(d,"POST",nt(t,n),v);return g.urlParams=f,g.headers=a,g.body=l.uploadData(),g.errorHandler=it(e),g}(t._ref.storage,t._ref._location,t._mappings,t._blob,t._metadata),i=t._ref.storage._makeRequest(r,e,n);t._request=i,i.getPromise().then((function(e){t._request=void 0,t._metadata=e,t._updateProgress(t._blob.size()),t._transition("success")}),t._errorHandler)}))},t.prototype._updateProgress=function(t){var e=this._transferred;this._transferred=t,this._transferred!==e&&this._notifyObservers()},t.prototype._transition=function(t){if(this._state!==t)switch(t){case"canceling":case"pausing":this._state=t,void 0!==this._request&&this._request.cancel();break;case"running":var e="paused"===this._state;this._state=t,e&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=t,this._notifyObservers();break;case"canceled":this._error=f(),this._state=t,this._notifyObservers()}},t.prototype.completeTransitions_=function(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}},Object.defineProperty(t.prototype,"snapshot",{get:function(){var t=N(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:t,metadata:this._metadata,task:this,ref:this._ref}},enumerable:!1,configurable:!0}),t.prototype.on=function(t,e,n,r){var i=this,o=new pt(e,n,r);return this._addObserver(o),function(){i._removeObserver(o)}},t.prototype.then=function(t,e){return this._promise.then(t,e)},t.prototype.catch=function(t){return this.then(null,t)},t.prototype._addObserver=function(t){this._observers.push(t),this._notifyObserver(t)},t.prototype._removeObserver=function(t){var e=this._observers.indexOf(t);-1!==e&&this._observers.splice(e,1)},t.prototype._notifyObservers=function(){var t=this;this._finishPromise(),this._observers.slice().forEach((function(e){t._notifyObserver(e)}))},t.prototype._finishPromise=function(){if(void 0!==this._resolve){var t=!0;switch(N(this._state)){case k.SUCCESS:dt(this._resolve.bind(null,this.snapshot))();break;case k.CANCELED:case k.ERROR:dt(this._reject.bind(null,this._error))();break;default:t=!1}t&&(this._resolve=void 0,this._reject=void 0)}},t.prototype._notifyObserver=function(t){switch(N(this._state)){case k.RUNNING:case k.PAUSED:t.next&&dt(t.next.bind(t,this.snapshot))();break;case k.SUCCESS:t.complete&&dt(t.complete.bind(t))();break;default:t.error&&dt(t.error.bind(t,this._error))()}},t.prototype.resume=function(){var t="paused"===this._state||"pausing"===this._state;return t&&this._transition("running"),t},t.prototype.pause=function(){var t="running"===this._state;return t&&this._transition("pausing"),t},t.prototype.cancel=function(){var t="running"===this._state||"pausing"===this._state;return t&&this._transition("canceling"),t},t}(),gt=function(){function t(t,e){this._service=t,this._location=e instanceof D?e:D.makeFromUrl(e,t.host)}return t.prototype.toString=function(){return"gs://"+this._location.bucket+"/"+this._location.path},t.prototype._newRef=function(e,n){return new t(e,n)},Object.defineProperty(t.prototype,"root",{get:function(){var t=new D(this._location.bucket,"");return this._newRef(this._service,t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bucket",{get:function(){return this._location.bucket},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fullPath",{get:function(){return this._location.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return H(this._location.path)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"storage",{get:function(){return this._service},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){var e=function(t){if(0===t.length)return null;var e=t.lastIndexOf("/");return-1===e?"":t.slice(0,e)}(this._location.path);if(null===e)return null;var n=new D(this._location.bucket,e);return new t(this._service,n)},enumerable:!1,configurable:!0}),t.prototype._throwIfRoot=function(t){if(""===this._location.path)throw g(t)},t}();function mt(t){var e={prefixes:[],items:[]};return yt(t,e).then((function(){return e}))}function yt(t,e,n){return(0,o.__awaiter)(this,void 0,void 0,(function(){var r,i,a;return(0,o.__generator)(this,(function(o){switch(o.label){case 0:return[4,bt(t,{pageToken:n})];case 1:return r=o.sent(),(i=e.prefixes).push.apply(i,r.prefixes),(a=e.items).push.apply(a,r.items),null==r.nextPageToken?[3,3]:[4,yt(t,e,r.nextPageToken)];case 2:o.sent(),o.label=3;case 3:return[2]}}))}))}function bt(t,e){return(0,o.__awaiter)(this,void 0,void 0,(function(){var n,r;return(0,o.__generator)(this,(function(i){switch(i.label){case 0:return null!=e&&"number"===typeof e.maxResults&&M("options.maxResults",1,1e3,e.maxResults),n=e||{},r=st(t.storage,t._location,"/",n.pageToken,n.maxResults),[4,t.storage.makeRequestWithTokens(r)];case 1:return[2,i.sent().getPromise()]}}))}))}function wt(t,e){return(0,o.__awaiter)(this,void 0,void 0,(function(){var n;return(0,o.__generator)(this,(function(r){switch(r.label){case 0:return t._throwIfRoot("updateMetadata"),n=function(t,e,n,r){var i=F(e.fullServerUrl(),t.host),o=$(n,r),a=t.maxOperationRetryTime,s=new tt(i,"PATCH",nt(t,r),a);return s.headers={"Content-Type":"application/json; charset=utf-8"},s.body=o,s.errorHandler=ot(e),s}(t.storage,t._location,e,Q()),[4,t.storage.makeRequestWithTokens(n)];case 1:return[2,r.sent().getPromise()]}}))}))}function _t(t){return(0,o.__awaiter)(this,void 0,void 0,(function(){var e;return(0,o.__generator)(this,(function(n){switch(n.label){case 0:return t._throwIfRoot("getDownloadURL"),e=function(t,e,n){var r=F(e.fullServerUrl(),t.host),i=t.maxOperationRetryTime,o=new tt(r,"GET",rt(t,n),i);return o.errorHandler=ot(e),o}(t.storage,t._location,Q()),[4,t.storage.makeRequestWithTokens(e)];case 1:return[2,n.sent().getPromise().then((function(t){if(null===t)throw new c("no-download-url","The given file does not have any download URLs.");return t}))]}}))}))}function It(t){return(0,o.__awaiter)(this,void 0,void 0,(function(){var e;return(0,o.__generator)(this,(function(n){switch(n.label){case 0:return t._throwIfRoot("deleteObject"),e=function(t,e){var n=F(e.fullServerUrl(),t.host),r=t.maxOperationRetryTime,i=new tt(n,"DELETE",(function(t,e){}),r);return i.successCodes=[200,204],i.errorHandler=ot(e),i}(t.storage,t._location),[4,t.storage.makeRequestWithTokens(e)];case 1:return[2,n.sent().getPromise()]}}))}))}function Tt(t,e){var n=function(t,e){var n=e.split("/").filter((function(t){return t.length>0})).join("/");return 0===t.length?n:t+"/"+n}(t._location.path,e),r=new D(t._location.bucket,n);return new gt(t.storage,r)}function Et(t){return/^[A-Za-z]+:\/\//.test(t)}function St(t,e){if(t instanceof Nt){var n=t;if(null==n._bucket)throw new c("no-default-bucket","No default bucket found. Did you set the 'storageBucket' property when initializing the app?");var r=new gt(n,n._bucket);return null!=e?St(r,e):r}return void 0!==e?Tt(t,e):t}function At(t,e){if(e&&Et(e)){if(t instanceof Nt)return new gt(t,e);throw d("To use ref(service, url), the first argument must be a Storage instance.")}return St(t,e)}function kt(t,e){var n=null===e||void 0===e?void 0:e.storageBucket;return null==n?null:D.makeFromBucketSpec(n,t)}var Nt=function(){function t(t,e,n,r,i,o){this.app=t,this._authProvider=e,this._appCheckProvider=n,this._pool=r,this._url=i,this._firebaseVersion=o,this._bucket=null,this._host=u,this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=i?D.makeFromBucketSpec(i,this._host):kt(this._host,this.app.options)}return Object.defineProperty(t.prototype,"host",{get:function(){return this._host},set:function(t){this._host=t,null!=this._url?this._bucket=D.makeFromBucketSpec(this._url,t):this._bucket=kt(t,this.app.options)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxUploadRetryTime",{get:function(){return this._maxUploadRetryTime},set:function(t){M("time",0,Number.POSITIVE_INFINITY,t),this._maxUploadRetryTime=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxOperationRetryTime",{get:function(){return this._maxOperationRetryTime},set:function(t){M("time",0,Number.POSITIVE_INFINITY,t),this._maxOperationRetryTime=t},enumerable:!1,configurable:!0}),t.prototype._getAuthToken=function(){return(0,o.__awaiter)(this,void 0,void 0,(function(){var t,e;return(0,o.__generator)(this,(function(n){switch(n.label){case 0:return this._overrideAuthToken?[2,this._overrideAuthToken]:(t=this._authProvider.getImmediate({optional:!0}))?[4,t.getToken()]:[3,2];case 1:if(null!==(e=n.sent()))return[2,e.accessToken];n.label=2;case 2:return[2,null]}}))}))},t.prototype._getAppCheckToken=function(){return(0,o.__awaiter)(this,void 0,void 0,(function(){var t;return(0,o.__generator)(this,(function(e){switch(e.label){case 0:return(t=this._appCheckProvider.getImmediate({optional:!0}))?[4,t.getToken()]:[3,2];case 1:return[2,e.sent().token];case 2:return[2,null]}}))}))},t.prototype._delete=function(){return this._deleted||(this._deleted=!0,this._requests.forEach((function(t){return t.cancel()})),this._requests.clear()),Promise.resolve()},t.prototype._makeStorageReference=function(t){return new gt(this,t)},t.prototype._makeRequest=function(t,e,n){var r=this;if(this._deleted)return new R(v());var i=function(t,e,n,r,i,o){var a=U(t.urlParams),s=t.url+a,u=Object.assign({},t.headers);return function(t,e){e&&(t["X-Firebase-GMPID"]=e)}(u,e),function(t,e){null!==e&&e.length>0&&(t.Authorization="Firebase "+e)}(u,n),function(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(null!==e&&void 0!==e?e:"AppManager")}(u,o),function(t,e){null!==e&&(t["X-Firebase-AppCheck"]=e)}(u,r),new j(s,t.method,u,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,i)}(t,this._appId,e,n,this._pool,this._firebaseVersion);return this._requests.add(i),i.getPromise().then((function(){return r._requests.delete(i)}),(function(){return r._requests.delete(i)})),i},t.prototype.makeRequestWithTokens=function(t){return(0,o.__awaiter)(this,void 0,void 0,(function(){var e,n,r;return(0,o.__generator)(this,(function(i){switch(i.label){case 0:return[4,Promise.all([this._getAuthToken(),this._getAppCheckToken()])];case 1:return e=i.sent(),n=e[0],r=e[1],[2,this._makeRequest(t,n,r)]}}))}))},t}();function Ct(t,e,n){return function(t,e,n){return t._throwIfRoot("uploadBytesResumable"),new vt(t,new K(e),n)}(t=(0,a.getModularInstance)(t),e,n)}function Ot(t){return function(t){return(0,o.__awaiter)(this,void 0,void 0,(function(){var e;return(0,o.__generator)(this,(function(n){switch(n.label){case 0:return t._throwIfRoot("getMetadata"),e=at(t.storage,t._location,Q()),[4,t.storage.makeRequestWithTokens(e)];case 1:return[2,n.sent().getPromise()]}}))}))}(t=(0,a.getModularInstance)(t))}function Dt(t,e){return At(t=(0,a.getModularInstance)(t),e)}function Rt(t,e,n,r){void 0===r&&(r={}),function(t,e,n,r){void 0===r&&(r={}),t.host="http://"+e+":"+n;var i=r.mockUserToken;i&&(t._overrideAuthToken="string"===typeof i?i:(0,a.createMockUserToken)(i,t.app.options.projectId))}(t,e,n,r)}var Pt=function(){function t(t,e,n){this._delegate=t,this.task=e,this.ref=n}return Object.defineProperty(t.prototype,"bytesTransferred",{get:function(){return this._delegate.bytesTransferred},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"state",{get:function(){return this._delegate.state},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"totalBytes",{get:function(){return this._delegate.totalBytes},enumerable:!1,configurable:!0}),t}(),xt=function(){function t(t,e){this._delegate=t,this._ref=e,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}return Object.defineProperty(t.prototype,"snapshot",{get:function(){return new Pt(this._delegate.snapshot,this,this._ref)},enumerable:!1,configurable:!0}),t.prototype.then=function(t,e){var n=this;return this._delegate.then((function(e){if(t)return t(new Pt(e,n,n._ref))}),e)},t.prototype.on=function(t,e,n,r){var i=this,o=void 0;return e&&(o="function"===typeof e?function(t){return e(new Pt(t,i,i._ref))}:{next:e.next?function(t){return e.next(new Pt(t,i,i._ref))}:void 0,complete:e.complete||void 0,error:e.error||void 0}),this._delegate.on(t,o,n||void 0,r||void 0)},t}(),Lt=function(){function t(t,e){this._delegate=t,this._service=e}return Object.defineProperty(t.prototype,"prefixes",{get:function(){var t=this;return this._delegate.prefixes.map((function(e){return new Mt(e,t._service)}))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"items",{get:function(){var t=this;return this._delegate.items.map((function(e){return new Mt(e,t._service)}))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"nextPageToken",{get:function(){return this._delegate.nextPageToken||null},enumerable:!1,configurable:!0}),t}(),Mt=function(){function t(t,e){this._delegate=t,this.storage=e}return Object.defineProperty(t.prototype,"name",{get:function(){return this._delegate.name},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bucket",{get:function(){return this._delegate.bucket},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fullPath",{get:function(){return this._delegate.fullPath},enumerable:!1,configurable:!0}),t.prototype.toString=function(){return this._delegate.toString()},t.prototype.child=function(e){var n=function(t,e){return Tt(t,e)}(this._delegate,e);return new t(n,this.storage)},Object.defineProperty(t.prototype,"root",{get:function(){return new t(this._delegate.root,this.storage)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){var e=this._delegate.parent;return null==e?null:new t(e,this.storage)},enumerable:!1,configurable:!0}),t.prototype.put=function(t,e){return this._throwIfRoot("put"),new xt(Ct(this._delegate,t,e),this)},t.prototype.putString=function(t,e,n){void 0===e&&(e=b.RAW),this._throwIfRoot("putString");var r=_(e,t),i=(0,o.__assign)({},n);return null==i.contentType&&null!=r.contentType&&(i.contentType=r.contentType),new xt(new vt(this._delegate,new K(r.data,!0),i),this)},t.prototype.listAll=function(){var t=this;return function(t){return mt(t=(0,a.getModularInstance)(t))}(this._delegate).then((function(e){return new Lt(e,t.storage)}))},t.prototype.list=function(t){var e=this;return function(t,e){return bt(t=(0,a.getModularInstance)(t),e)}(this._delegate,t||void 0).then((function(t){return new Lt(t,e.storage)}))},t.prototype.getMetadata=function(){return Ot(this._delegate)},t.prototype.updateMetadata=function(t){return function(t,e){return wt(t=(0,a.getModularInstance)(t),e)}(this._delegate,t)},t.prototype.getDownloadURL=function(){return function(t){return _t(t=(0,a.getModularInstance)(t))}(this._delegate)},t.prototype.delete=function(){return this._throwIfRoot("delete"),function(t){return It(t=(0,a.getModularInstance)(t))}(this._delegate)},t.prototype._throwIfRoot=function(t){if(""===this._delegate._location.path)throw g(t)},t}(),Ft=function(){function t(t,e){this.app=t,this._delegate=e}return Object.defineProperty(t.prototype,"maxOperationRetryTime",{get:function(){return this._delegate.maxOperationRetryTime},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxUploadRetryTime",{get:function(){return this._delegate.maxUploadRetryTime},enumerable:!1,configurable:!0}),t.prototype.ref=function(t){if(Et(t))throw d("ref() expected a child path but got a URL, use refFromURL instead.");return new Mt(Dt(this._delegate,t),this)},t.prototype.refFromURL=function(t){if(!Et(t))throw d("refFromURL() expected a full URL but got a child path, use ref() instead.");try{D.makeFromUrl(t,this._delegate.host)}catch(dv){throw d("refFromUrl() expected a valid full URL but got an invalid one.")}return new Mt(Dt(this._delegate,t),this)},t.prototype.setMaxUploadRetryTime=function(t){this._delegate.maxUploadRetryTime=t},t.prototype.setMaxOperationRetryTime=function(t){this._delegate.maxOperationRetryTime=t},t.prototype.useEmulator=function(t,e,n){void 0===n&&(n={}),Rt(this._delegate,t,e,n)},t}();function Ut(t,e){var n=e.instanceIdentifier,i=t.getProvider("app").getImmediate(),o=t.getProvider("auth-internal"),a=t.getProvider("app-check-internal");return new Ft(i,new Nt(i,o,a,new O,n,r.default.SDK_VERSION))}!function(t){var e={TaskState:k,TaskEvent:A,StringFormat:b,Storage:Nt,Reference:Mt};t.INTERNAL.registerComponent(new s.Component("storage",Ut,"PUBLIC").setServiceProps(e).setMultipleInstances(!0)),t.registerVersion("@firebase/storage","0.7.1")}(r.default);var jt=n(4594),Vt=function(t,e){return Vt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},Vt(t,e)};function Bt(t){var e="function"===typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"===typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}var qt,Kt="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof n.g?n.g:"undefined"!==typeof self?self:{},Gt=Gt||{},Ht=Kt||self;function zt(){}function Wt(t){var e=typeof t;return"array"==(e="object"!=e?e:t?Array.isArray(t)?"array":e:"null")||"object"==e&&"number"==typeof t.length}function Xt(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var Qt="closure_uid_"+(1e9*Math.random()>>>0),Yt=0;function Jt(t,e,n){return t.call.apply(t.bind,arguments)}function $t(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function Zt(t,e,n){return(Zt=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Jt:$t).apply(null,arguments)}function te(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}function ee(t,e){function n(){}n.prototype=e.prototype,t.Z=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.Vb=function(t,n,r){for(var i=Array(arguments.length-2),o=2;o<arguments.length;o++)i[o-2]=arguments[o];return e.prototype[n].apply(t,i)}}function ne(){this.s=this.s,this.o=this.o}var re={};ne.prototype.s=!1,ne.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var t=function(t){return Object.prototype.hasOwnProperty.call(t,Qt)&&t[Qt]||(t[Qt]=++Yt)}(this);delete re[t]}},ne.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var ie=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"===typeof t)return"string"!==typeof e||1!=e.length?-1:t.indexOf(e,0);for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},oe=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i="string"===typeof t?t.split(""):t,o=0;o<r;o++)o in i&&e.call(n,i[o],o,t)};function ae(t){return Array.prototype.concat.apply([],arguments)}function se(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}function ue(t){return/^[\s\xa0]*$/.test(t)}var ce,he=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function le(t,e){return-1!=t.indexOf(e)}function fe(t,e){return t<e?-1:t>e?1:0}t:{var pe=Ht.navigator;if(pe){var de=pe.userAgent;if(de){ce=de;break t}}ce=""}function ve(t,e,n){for(var r in t)e.call(n,t[r],r,t)}function ge(t){var e={};for(var n in t)e[n]=t[n];return e}var me="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ye(t,e){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])t[n]=r[n];for(var o=0;o<me.length;o++)n=me[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function be(t){return be[" "](t),t}be[" "]=zt;var we,_e=le(ce,"Opera"),Ie=le(ce,"Trident")||le(ce,"MSIE"),Te=le(ce,"Edge"),Ee=Te||Ie,Se=le(ce,"Gecko")&&!(le(ce.toLowerCase(),"webkit")&&!le(ce,"Edge"))&&!(le(ce,"Trident")||le(ce,"MSIE"))&&!le(ce,"Edge"),Ae=le(ce.toLowerCase(),"webkit")&&!le(ce,"Edge");function ke(){var t=Ht.document;return t?t.documentMode:void 0}t:{var Ne="",Ce=function(){var t=ce;return Se?/rv:([^\);]+)(\)|;)/.exec(t):Te?/Edge\/([\d\.]+)/.exec(t):Ie?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t):Ae?/WebKit\/(\S+)/.exec(t):_e?/(?:Version)[ \/]?(\S+)/.exec(t):void 0}();if(Ce&&(Ne=Ce?Ce[1]:""),Ie){var Oe=ke();if(null!=Oe&&Oe>parseFloat(Ne)){we=String(Oe);break t}}we=Ne}var De,Re={};function Pe(){return function(t){var e=Re;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=t(9)}((function(){for(var t=0,e=he(String(we)).split("."),n=he("9").split("."),r=Math.max(e.length,n.length),i=0;0==t&&i<r;i++){var o=e[i]||"",a=n[i]||"";do{if(o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],0==o[0].length&&0==a[0].length)break;t=fe(0==o[1].length?0:parseInt(o[1],10),0==a[1].length?0:parseInt(a[1],10))||fe(0==o[2].length,0==a[2].length)||fe(o[2],a[2]),o=o[3],a=a[3]}while(0==t)}return 0<=t}))}if(Ht.document&&Ie){var xe=ke();De=xe||(parseInt(we,10)||void 0)}else De=void 0;var Le=De,Me=function(){if(!Ht.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{Ht.addEventListener("test",zt,e),Ht.removeEventListener("test",zt,e)}catch(n){}return t}();function Fe(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}function Ue(t,e){if(Fe.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(Se){t:{try{be(e.nodeName);var i=!0;break t}catch(o){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"===typeof t.pointerType?t.pointerType:je[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&Ue.Z.h.call(this)}}Fe.prototype.h=function(){this.defaultPrevented=!0},ee(Ue,Fe);var je={2:"touch",3:"pen",4:"mouse"};Ue.prototype.h=function(){Ue.Z.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var Ve="closure_listenable_"+(1e6*Math.random()|0),Be=0;function qe(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.ia=i,this.key=++Be,this.ca=this.fa=!1}function Ke(t){t.ca=!0,t.listener=null,t.proxy=null,t.src=null,t.ia=null}function Ge(t){this.src=t,this.g={},this.h=0}function He(t,e){var n=e.type;if(n in t.g){var r,i=t.g[n],o=ie(i,e);(r=0<=o)&&Array.prototype.splice.call(i,o,1),r&&(Ke(e),0==t.g[n].length&&(delete t.g[n],t.h--))}}function ze(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.ca&&o.listener==e&&o.capture==!!n&&o.ia==r)return i}return-1}Ge.prototype.add=function(t,e,n,r,i){var o=t.toString();(t=this.g[o])||(t=this.g[o]=[],this.h++);var a=ze(t,e,r,i);return-1<a?(e=t[a],n||(e.fa=!1)):((e=new qe(e,this.src,o,!!r,i)).fa=n,t.push(e)),e};var We="closure_lm_"+(1e6*Math.random()|0),Xe={};function Qe(t,e,n,r,i){if(r&&r.once)return Je(t,e,n,r,i);if(Array.isArray(e)){for(var o=0;o<e.length;o++)Qe(t,e[o],n,r,i);return null}return n=on(n),t&&t[Ve]?t.N(e,n,Xt(r)?!!r.capture:!!r,i):Ye(t,e,n,!1,r,i)}function Ye(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var a=Xt(i)?!!i.capture:!!i,s=nn(t);if(s||(t[We]=s=new Ge(t)),(n=s.add(e,n,r,a,o)).proxy)return n;if(r=function(){function t(n){return e.call(t.src,t.listener,n)}var e=en;return t}(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)Me||(i=a),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(tn(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}return n}function Je(t,e,n,r,i){if(Array.isArray(e)){for(var o=0;o<e.length;o++)Je(t,e[o],n,r,i);return null}return n=on(n),t&&t[Ve]?t.O(e,n,Xt(r)?!!r.capture:!!r,i):Ye(t,e,n,!0,r,i)}function $e(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)$e(t,e[o],n,r,i);else r=Xt(r)?!!r.capture:!!r,n=on(n),t&&t[Ve]?(t=t.i,(e=String(e).toString())in t.g&&(-1<(n=ze(o=t.g[e],n,r,i))&&(Ke(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete t.g[e],t.h--)))):t&&(t=nn(t))&&(e=t.g[e.toString()],t=-1,e&&(t=ze(e,n,r,i)),(n=-1<t?e[t]:null)&&Ze(n))}function Ze(t){if("number"!==typeof t&&t&&!t.ca){var e=t.src;if(e&&e[Ve])He(e.i,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(tn(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=nn(e))?(He(n,t),0==n.h&&(n.src=null,e[We]=null)):Ke(t)}}}function tn(t){return t in Xe?Xe[t]:Xe[t]="on"+t}function en(t,e){if(t.ca)t=!0;else{e=new Ue(e,this);var n=t.listener,r=t.ia||t.src;t.fa&&Ze(t),t=n.call(r,e)}return t}function nn(t){return(t=t[We])instanceof Ge?t:null}var rn="__closure_events_fn_"+(1e9*Math.random()>>>0);function on(t){return"function"===typeof t?t:(t[rn]||(t[rn]=function(e){return t.handleEvent(e)}),t[rn])}function an(){ne.call(this),this.i=new Ge(this),this.P=this,this.I=null}function sn(t,e){var n,r=t.I;if(r)for(n=[];r;r=r.I)n.push(r);if(t=t.P,r=e.type||e,"string"===typeof e)e=new Fe(e,t);else if(e instanceof Fe)e.target=e.target||t;else{var i=e;ye(e=new Fe(r,t),i)}if(i=!0,n)for(var o=n.length-1;0<=o;o--){var a=e.g=n[o];i=un(a,r,!0,e)&&i}if(i=un(a=e.g=t,r,!0,e)&&i,i=un(a,r,!1,e)&&i,n)for(o=0;o<n.length;o++)i=un(a=e.g=n[o],r,!1,e)&&i}function un(t,e,n,r){if(!(e=t.i.g[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var a=e[o];if(a&&!a.ca&&a.capture==n){var s=a.listener,u=a.ia||a.src;a.fa&&He(t.i,a),i=!1!==s.call(u,r)&&i}}return i&&!r.defaultPrevented}ee(an,ne),an.prototype[Ve]=!0,an.prototype.removeEventListener=function(t,e,n,r){$e(this,t,e,n,r)},an.prototype.M=function(){if(an.Z.M.call(this),this.i){var t,e=this.i;for(t in e.g){for(var n=e.g[t],r=0;r<n.length;r++)Ke(n[r]);delete e.g[t],e.h--}}this.I=null},an.prototype.N=function(t,e,n,r){return this.i.add(String(t),e,!1,n,r)},an.prototype.O=function(t,e,n,r){return this.i.add(String(t),e,!0,n,r)};var cn=Ht.JSON.stringify;function hn(){var t=yn,e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}var ln,fn=function(){function t(){this.h=this.g=null}return t.prototype.add=function(t,e){var n=pn.get();n.set(t,e),this.h?this.h.next=n:this.g=n,this.h=n},t}(),pn=new(function(){function t(t,e){this.i=t,this.j=e,this.h=0,this.g=null}return t.prototype.get=function(){var t;return 0<this.h?(this.h--,t=this.g,this.g=t.next,t.next=null):t=this.i(),t},t}())((function(){return new dn}),(function(t){return t.reset()})),dn=function(){function t(){this.next=this.g=this.h=null}return t.prototype.set=function(t,e){this.h=t,this.g=e,this.next=null},t.prototype.reset=function(){this.next=this.g=this.h=null},t}();function vn(t){Ht.setTimeout((function(){throw t}),0)}function gn(t,e){ln||function(){var t=Ht.Promise.resolve(void 0);ln=function(){t.then(bn)}}(),mn||(ln(),mn=!0),yn.add(t,e)}var mn=!1,yn=new fn;function bn(){for(var t;t=hn();){try{t.h.call(t.g)}catch(n){vn(n)}var e=pn;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}mn=!1}function wn(t,e){an.call(this),this.h=t||1,this.g=e||Ht,this.j=Zt(this.kb,this),this.l=Date.now()}function _n(t){t.da=!1,t.S&&(t.g.clearTimeout(t.S),t.S=null)}function In(t,e,n){if("function"===typeof t)n&&(t=Zt(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=Zt(t.handleEvent,t)}return 2147483647<Number(e)?-1:Ht.setTimeout(t,e||0)}function Tn(t){t.g=In((function(){t.g=null,t.i&&(t.i=!1,Tn(t))}),t.j);var e=t.h;t.h=null,t.m.apply(null,e)}ee(wn,an),(qt=wn.prototype).da=!1,qt.S=null,qt.kb=function(){if(this.da){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-t):(this.S&&(this.g.clearTimeout(this.S),this.S=null),sn(this,"tick"),this.da&&(_n(this),this.start()))}},qt.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},qt.M=function(){wn.Z.M.call(this),_n(this),delete this.g};var En=function(t){function e(e,n){var r=t.call(this)||this;return r.m=e,r.j=n,r.h=null,r.i=!1,r.g=null,r}return function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}Vt(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(e,t),e.prototype.l=function(t){this.h=arguments,this.g?this.i=!0:Tn(this)},e.prototype.M=function(){t.prototype.M.call(this),this.g&&(Ht.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)},e}(ne);function Sn(t){ne.call(this),this.h=t,this.g={}}ee(Sn,ne);var An=[];function kn(t,e,n,r){Array.isArray(n)||(n&&(An[0]=n.toString()),n=An);for(var i=0;i<n.length;i++){var o=Qe(e,n[i],r||t.handleEvent,!1,t.h||t);if(!o)break;t.g[o.key]=o}}function Nn(t){ve(t.g,(function(t,e){this.g.hasOwnProperty(e)&&Ze(t)}),t),t.g={}}function Cn(){this.g=!0}function On(t,e,n,r){t.info((function(){return"XMLHTTP TEXT ("+e+"): "+function(t,e){if(!t.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n)for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var o=i[0];if("noop"!=o&&"stop"!=o&&"close"!=o)for(var a=1;a<i.length;a++)i[a]=""}}}return cn(n)}catch(s){return e}}(t,n)+(r?" "+r:"")}))}Sn.prototype.M=function(){Sn.Z.M.call(this),Nn(this)},Sn.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Cn.prototype.Aa=function(){this.g=!1},Cn.prototype.info=function(){};var Dn={},Rn=null;function Pn(){return Rn=Rn||new an}function xn(t){Fe.call(this,Dn.Ma,t)}function Ln(t){var e=Pn();sn(e,new xn(e,t))}function Mn(t,e){Fe.call(this,Dn.STAT_EVENT,t),this.stat=e}function Fn(t){var e=Pn();sn(e,new Mn(e,t))}function Un(t,e){Fe.call(this,Dn.Na,t),this.size=e}function jn(t,e){if("function"!==typeof t)throw Error("Fn must not be null and must be a function");return Ht.setTimeout((function(){t()}),e)}Dn.Ma="serverreachability",ee(xn,Fe),Dn.STAT_EVENT="statevent",ee(Mn,Fe),Dn.Na="timingevent",ee(Un,Fe);var Vn={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},Bn={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function qn(){}function Kn(t){return t.h||(t.h=t.i())}function Gn(){}qn.prototype.h=null;var Hn,zn={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function Wn(){Fe.call(this,"d")}function Xn(){Fe.call(this,"c")}function Qn(){}function Yn(t,e,n,r){this.l=t,this.j=e,this.m=n,this.X=r||1,this.V=new Sn(this),this.P=$n,t=Ee?125:void 0,this.W=new wn(t),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new Jn}function Jn(){this.i=null,this.g="",this.h=!1}ee(Wn,Fe),ee(Xn,Fe),ee(Qn,qn),Qn.prototype.g=function(){return new XMLHttpRequest},Qn.prototype.i=function(){return{}},Hn=new Qn;var $n=45e3,Zn={},tr={};function er(t,e,n){t.K=1,t.v=Er(yr(e)),t.s=n,t.U=!0,nr(t,null)}function nr(t,e){t.F=Date.now(),ar(t),t.A=yr(t.v);var n=t.A,r=t.X;Array.isArray(r)||(r=[String(r)]),Fr(n.h,"t",r),t.C=0,n=t.l.H,t.h=new Jn,t.g=ji(t.l,n?e:null,!t.s),0<t.O&&(t.L=new En(Zt(t.Ia,t,t.g),t.O)),kn(t.V,t.g,"readystatechange",t.gb),e=t.H?ge(t.H):{},t.s?(t.u||(t.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.ea(t.A,t.u,t.s,e)):(t.u="GET",t.g.ea(t.A,t.u,null,e)),Ln(1),function(t,e,n,r,i,o){t.info((function(){if(t.g)if(o)for(var a="",s=o.split("&"),u=0;u<s.length;u++){var c=s[u].split("=");if(1<c.length){var h=c[0];c=c[1];var l=h.split("_");a=2<=l.length&&"type"==l[1]?a+(h+"=")+c+"&":a+(h+"=redacted&")}}else a=null;else a=o;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+n+"\n"+a}))}(t.j,t.u,t.A,t.m,t.X,t.s)}function rr(t){return!!t.g&&("GET"==t.u&&2!=t.K&&t.l.Ba)}function ir(t,e,n){for(var r,i=!0;!t.I&&t.C<n.length;){if((r=or(t,n))==tr){4==e&&(t.o=4,Fn(14),i=!1),On(t.j,t.m,null,"[Incomplete Response]");break}if(r==Zn){t.o=4,Fn(15),On(t.j,t.m,n,"[Invalid Chunk]"),i=!1;break}On(t.j,t.m,r,null),lr(t,r)}rr(t)&&r!=tr&&r!=Zn&&(t.h.g="",t.C=0),4!=e||0!=n.length||t.h.h||(t.o=1,Fn(16),i=!1),t.i=t.i&&i,i?0<n.length&&!t.aa&&(t.aa=!0,(e=t.l).g==t&&e.$&&!e.L&&(e.h.info("Great, no buffering proxy detected. Bytes received: "+n.length),Di(e),e.L=!0,Fn(11))):(On(t.j,t.m,n,"[Invalid Chunked Response]"),hr(t),cr(t))}function or(t,e){var n=t.C,r=e.indexOf("\n",n);return-1==r?tr:(n=Number(e.substring(n,r)),isNaN(n)?Zn:(r+=1)+n>e.length?tr:(e=e.substr(r,n),t.C=r+n,e))}function ar(t){t.Y=Date.now()+t.P,sr(t,t.P)}function sr(t,e){if(null!=t.B)throw Error("WatchDog timer not null");t.B=jn(Zt(t.eb,t),e)}function ur(t){t.B&&(Ht.clearTimeout(t.B),t.B=null)}function cr(t){0==t.l.G||t.I||xi(t.l,t)}function hr(t){ur(t);var e=t.L;e&&"function"==typeof e.na&&e.na(),t.L=null,_n(t.W),Nn(t.V),t.g&&(e=t.g,t.g=null,e.abort(),e.na())}function lr(t,e){try{var n=t.l;if(0!=n.G&&(n.g==t||Hr(n.i,t)))if(n.I=t.N,!t.J&&Hr(n.i,t)&&3==n.G){try{var r=n.Ca.g.parse(e)}catch(o){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){t:if(!n.u){if(n.g){if(!(n.g.F+3e3<t.F))break t;Pi(n),Ii(n)}Oi(n),Fn(18)}}else n.ta=i[1],0<n.ta-n.U&&37500>i[2]&&n.N&&0==n.A&&!n.v&&(n.v=jn(Zt(n.ab,n),6e3));if(1>=Gr(n.i)&&n.ka){try{n.ka()}catch(o){}n.ka=void 0}}else Mi(n,11)}else if((t.J||n.g==t)&&Pi(n),!ue(e))for(i=n.Ca.g.parse(e),e=0;e<i.length;e++){var o=i[e];if(n.U=o[0],o=o[1],2==n.G)if("c"==o[0]){n.J=o[1],n.la=o[2];var a=o[3];null!=a&&(n.ma=a,n.h.info("VER="+n.ma));var s=o[4];null!=s&&(n.za=s,n.h.info("SVER="+n.za));var u=o[5];null!=u&&"number"===typeof u&&0<u&&(r=1.5*u,n.K=r,n.h.info("backChannelRequestTimeoutMs_="+r)),r=n;var c=t.g;if(c){var h=c.g?c.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(h){var l=r.i;!l.g&&(le(h,"spdy")||le(h,"quic")||le(h,"h2"))&&(l.j=l.l,l.g=new Set,l.h&&(zr(l,l.h),l.h=null))}if(r.D){var f=c.g?c.g.getResponseHeader("X-HTTP-Session-Id"):null;f&&(r.sa=f,Tr(r.F,r.D,f))}}n.G=3,n.j&&n.j.xa(),n.$&&(n.O=Date.now()-t.F,n.h.info("Handshake RTT: "+n.O+"ms"));var p=t;if((r=n).oa=Ui(r,r.H?r.la:null,r.W),p.J){Wr(r.i,p);var d=p,v=r.K;v&&d.setTimeout(v),d.B&&(ur(d),ar(d)),r.g=p}else Ci(r);0<n.l.length&&Si(n)}else"stop"!=o[0]&&"close"!=o[0]||Mi(n,7);else 3==n.G&&("stop"==o[0]||"close"==o[0]?"stop"==o[0]?Mi(n,7):_i(n):"noop"!=o[0]&&n.j&&n.j.wa(o),n.A=0)}Ln(4)}catch(o){}}function fr(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(Wt(t)||"string"===typeof t)oe(t,e,void 0);else{if(t.T&&"function"==typeof t.T)var n=t.T();else if(t.R&&"function"==typeof t.R)n=void 0;else if(Wt(t)||"string"===typeof t){n=[];for(var r=t.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,t)n[r++]=i;r=function(t){if(t.R&&"function"==typeof t.R)return t.R();if("string"===typeof t)return t.split("");if(Wt(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}(t),i=r.length;for(var o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}}function pr(t,e){this.h={},this.g=[],this.i=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof pr)for(n=t.T(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function dr(t){if(t.i!=t.g.length){for(var e=0,n=0;e<t.g.length;){var r=t.g[e];vr(t.h,r)&&(t.g[n++]=r),e++}t.g.length=n}if(t.i!=t.g.length){var i={};for(n=e=0;e<t.g.length;)vr(i,r=t.g[e])||(t.g[n++]=r,i[r]=1),e++;t.g.length=n}}function vr(t,e){return Object.prototype.hasOwnProperty.call(t,e)}(qt=Yn.prototype).setTimeout=function(t){this.P=t},qt.gb=function(t){t=t.target;var e=this.L;e&&3==gi(t)?e.l():this.Ia(t)},qt.Ia=function(t){try{if(t==this.g)t:{var e=gi(this.g),n=this.g.Da(),r=this.g.ba();if(!(3>e)&&(3!=e||Ee||this.g&&(this.h.h||this.g.ga()||mi(this.g)))){this.I||4!=e||7==n||Ln(8==n||0>=r?3:2),ur(this);var i=this.g.ba();this.N=i;e:if(rr(this)){var o=mi(this.g);t="";var a=o.length,s=4==gi(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){hr(this),cr(this);var u="";break e}this.h.i=new Ht.TextDecoder}for(n=0;n<a;n++)this.h.h=!0,t+=this.h.i.decode(o[n],{stream:s&&n==a-1});o.splice(0,a),this.h.g+=t,this.C=0,u=this.h.g}else u=this.g.ga();if(this.i=200==i,function(t,e,n,r,i,o,a){t.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+n+"\n"+o+" "+a}))}(this.j,this.u,this.A,this.m,this.X,e,i),this.i){if(this.$&&!this.J){e:{if(this.g){var c,h=this.g;if((c=h.g?h.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!ue(c)){var l=c;break e}}l=null}if(!(i=l)){this.i=!1,this.o=3,Fn(12),hr(this),cr(this);break t}On(this.j,this.m,i,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,lr(this,i)}this.U?(ir(this,e,u),Ee&&this.i&&3==e&&(kn(this.V,this.W,"tick",this.fb),this.W.start())):(On(this.j,this.m,u,null),lr(this,u)),4==e&&hr(this),this.i&&!this.I&&(4==e?xi(this.l,this):(this.i=!1,ar(this)))}else 400==i&&0<u.indexOf("Unknown SID")?(this.o=3,Fn(12)):(this.o=0,Fn(13)),hr(this),cr(this)}}}catch(e){}},qt.fb=function(){if(this.g){var t=gi(this.g),e=this.g.ga();this.C<e.length&&(ur(this),ir(this,t,e),this.i&&4!=t&&ar(this))}},qt.cancel=function(){this.I=!0,hr(this)},qt.eb=function(){this.B=null;var t=Date.now();0<=t-this.Y?(function(t,e){t.info((function(){return"TIMEOUT: "+e}))}(this.j,this.A),2!=this.K&&(Ln(3),Fn(17)),hr(this),this.o=2,cr(this)):sr(this,this.Y-t)},(qt=pr.prototype).R=function(){dr(this);for(var t=[],e=0;e<this.g.length;e++)t.push(this.h[this.g[e]]);return t},qt.T=function(){return dr(this),this.g.concat()},qt.get=function(t,e){return vr(this.h,t)?this.h[t]:e},qt.set=function(t,e){vr(this.h,t)||(this.i++,this.g.push(t)),this.h[t]=e},qt.forEach=function(t,e){for(var n=this.T(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}};var gr=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function mr(t,e){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,t instanceof mr){this.g=void 0!==e?e:t.g,br(this,t.j),this.s=t.s,wr(this,t.i),_r(this,t.m),this.l=t.l,e=t.h;var n=new Pr;n.i=e.i,e.g&&(n.g=new pr(e.g),n.h=e.h),Ir(this,n),this.o=t.o}else t&&(n=String(t).match(gr))?(this.g=!!e,br(this,n[1]||"",!0),this.s=Sr(n[2]||""),wr(this,n[3]||"",!0),_r(this,n[4]),this.l=Sr(n[5]||"",!0),Ir(this,n[6]||"",!0),this.o=Sr(n[7]||"")):(this.g=!!e,this.h=new Pr(null,this.g))}function yr(t){return new mr(t)}function br(t,e,n){t.j=n?Sr(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function wr(t,e,n){t.i=n?Sr(e,!0):e}function _r(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function Ir(t,e,n){e instanceof Pr?(t.h=e,function(t,e){e&&!t.j&&(xr(t),t.i=null,t.g.forEach((function(t,e){var n=e.toLowerCase();e!=n&&(Lr(this,e),Fr(this,n,t))}),t)),t.j=e}(t.h,t.g)):(n||(e=Ar(e,Dr)),t.h=new Pr(e,t.g))}function Tr(t,e,n){t.h.set(e,n)}function Er(t){return Tr(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function Sr(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function Ar(t,e,n){return"string"===typeof t?(t=encodeURI(t).replace(e,kr),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function kr(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}mr.prototype.toString=function(){var t=[],e=this.j;e&&t.push(Ar(e,Nr,!0),":");var n=this.i;return(n||"file"==e)&&(t.push("//"),(e=this.s)&&t.push(Ar(e,Nr,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&t.push(":",String(n))),(n=this.l)&&(this.i&&"/"!=n.charAt(0)&&t.push("/"),t.push(Ar(n,"/"==n.charAt(0)?Or:Cr,!0))),(n=this.h.toString())&&t.push("?",n),(n=this.o)&&t.push("#",Ar(n,Rr)),t.join("")};var Nr=/[#\/\?@]/g,Cr=/[#\?:]/g,Or=/[#\?]/g,Dr=/[#\?@]/g,Rr=/#/g;function Pr(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function xr(t){t.g||(t.g=new pr,t.h=0,t.i&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var o=t[n].substring(0,r);i=t[n].substring(r+1)}else o=t[n];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(t.i,(function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)})))}function Lr(t,e){xr(t),e=Ur(t,e),vr(t.g.h,e)&&(t.i=null,t.h-=t.g.get(e).length,vr((t=t.g).h,e)&&(delete t.h[e],t.i--,t.g.length>2*t.i&&dr(t)))}function Mr(t,e){return xr(t),e=Ur(t,e),vr(t.g.h,e)}function Fr(t,e,n){Lr(t,e),0<n.length&&(t.i=null,t.g.set(Ur(t,e),se(n)),t.h+=n.length)}function Ur(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}(qt=Pr.prototype).add=function(t,e){xr(this),this.i=null,t=Ur(this,t);var n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this},qt.forEach=function(t,e){xr(this),this.g.forEach((function(n,r){oe(n,(function(n){t.call(e,n,r,this)}),this)}),this)},qt.T=function(){xr(this);for(var t=this.g.R(),e=this.g.T(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},qt.R=function(t){xr(this);var e=[];if("string"===typeof t)Mr(this,t)&&(e=ae(e,this.g.get(Ur(this,t))));else{t=this.g.R();for(var n=0;n<t.length;n++)e=ae(e,t[n])}return e},qt.set=function(t,e){return xr(this),this.i=null,Mr(this,t=Ur(this,t))&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this},qt.get=function(t,e){return t&&0<(t=this.R(t)).length?String(t[0]):e},qt.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var t=[],e=this.g.T(),n=0;n<e.length;n++){var r=e[n],i=encodeURIComponent(String(r));r=this.R(r);for(var o=0;o<r.length;o++){var a=i;""!==r[o]&&(a+="="+encodeURIComponent(String(r[o]))),t.push(a)}}return this.i=t.join("&")};var jr=function(t,e){this.h=t,this.g=e};function Vr(t){this.l=t||qr,Ht.PerformanceNavigationTiming?t=0<(t=Ht.performance.getEntriesByType("navigation")).length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol):t=!!(Ht.g&&Ht.g.Ea&&Ht.g.Ea()&&Ht.g.Ea().Zb),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var Br,qr=10;function Kr(t){return!!t.h||!!t.g&&t.g.size>=t.j}function Gr(t){return t.h?1:t.g?t.g.size:0}function Hr(t,e){return t.h?t.h==e:!!t.g&&t.g.has(e)}function zr(t,e){t.g?t.g.add(e):t.h=e}function Wr(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}function Xr(t){var e,n;if(null!=t.h)return t.i.concat(t.h.D);if(null!=t.g&&0!==t.g.size){var r=t.i;try{for(var i=Bt(t.g.values()),o=i.next();!o.done;o=i.next()){var a=o.value;r=r.concat(a.D)}}catch(s){e={error:s}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}return se(t.i)}function Qr(){}function Yr(){this.g=new Qr}function Jr(t,e,n){var r=n||"";try{fr(t,(function(t,n){var i=t;Xt(t)&&(i=cn(t)),e.push(r+n+"="+encodeURIComponent(i))}))}catch(dv){throw e.push(r+"type="+encodeURIComponent("_badmap")),dv}}function $r(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch(o){}}function Zr(t){this.l=t.$b||null,this.j=t.ib||!1}function ti(t,e){an.call(this),this.D=t,this.u=e,this.m=void 0,this.readyState=ei,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Vr.prototype.cancel=function(){var t,e;if(this.i=Xr(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){try{for(var n=Bt(this.g.values()),r=n.next();!r.done;r=n.next()){r.value.cancel()}}catch(i){t={error:i}}finally{try{r&&!r.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}this.g.clear()}},Qr.prototype.stringify=function(t){return Ht.JSON.stringify(t,void 0)},Qr.prototype.parse=function(t){return Ht.JSON.parse(t,void 0)},ee(Zr,qn),Zr.prototype.g=function(){return new ti(this.l,this.j)},Zr.prototype.i=(Br={},function(){return Br}),ee(ti,an);var ei=0;function ni(t){t.j.read().then(t.Sa.bind(t)).catch(t.ha.bind(t))}function ri(t){t.readyState=4,t.l=null,t.j=null,t.A=null,ii(t)}function ii(t){t.onreadystatechange&&t.onreadystatechange.call(t)}(qt=ti.prototype).open=function(t,e){if(this.readyState!=ei)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,ii(this)},qt.send=function(t){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;var e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.D||Ht).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ha.bind(this))},qt.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,ri(this)),this.readyState=ei},qt.Va=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,ii(this)),this.g&&(this.readyState=3,ii(this),this.g)))if("arraybuffer"===this.responseType)t.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if("undefined"!==typeof Ht.ReadableStream&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;ni(this)}else t.text().then(this.Ua.bind(this),this.ha.bind(this))},qt.Sa=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?ri(this):ii(this),3==this.readyState&&ni(this)}},qt.Ua=function(t){this.g&&(this.response=this.responseText=t,ri(this))},qt.Ta=function(t){this.g&&(this.response=t,ri(this))},qt.ha=function(){this.g&&ri(this)},qt.setRequestHeader=function(t,e){this.v.append(t,e)},qt.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""},qt.getAllResponseHeaders=function(){if(!this.h)return"";for(var t=[],e=this.h.entries(),n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join("\r\n")},Object.defineProperty(ti.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(t){this.m=t?"include":"same-origin"}});var oi=Ht.JSON.parse;function ai(t){an.call(this),this.headers=new pr,this.u=t||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=si,this.K=this.L=!1}ee(ai,an);var si="",ui=/^https?$/i,ci=["POST","PUT"];function hi(t){return"content-type"==t.toLowerCase()}function li(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,fi(t),di(t)}function fi(t){t.D||(t.D=!0,sn(t,"complete"),sn(t,"error"))}function pi(t){if(t.h&&"undefined"!=typeof Gt&&(!t.C[1]||4!=gi(t)||2!=t.ba()))if(t.v&&4==gi(t))In(t.Fa,0,t);else if(sn(t,"readystatechange"),4==gi(t)){t.h=!1;try{var e,n=t.ba();t:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break t;default:r=!1}if(!(e=r)){var i;if(i=0===n){var o=String(t.H).match(gr)[1]||null;if(!o&&Ht.self&&Ht.self.location){var a=Ht.self.location.protocol;o=a.substr(0,a.length-1)}i=!ui.test(o?o.toLowerCase():"")}e=i}if(e)sn(t,"complete"),sn(t,"success");else{t.m=6;try{var s=2<gi(t)?t.g.statusText:""}catch(u){s=""}t.j=s+" ["+t.ba()+"]",fi(t)}}finally{di(t)}}}function di(t,e){if(t.g){vi(t);var n=t.g,r=t.C[0]?zt:null;t.g=null,t.C=null,e||sn(t,"ready");try{n.onreadystatechange=r}catch(dv){}}}function vi(t){t.g&&t.K&&(t.g.ontimeout=null),t.A&&(Ht.clearTimeout(t.A),t.A=null)}function gi(t){return t.g?t.g.readyState:0}function mi(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.J){case si:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch(e){return null}}function yi(t,e,n){t:{for(r in n){var r=!1;break t}r=!0}r||(n=function(t){var e="";return ve(t,(function(t,n){e+=n,e+=":",e+=t,e+="\r\n"})),e}(n),"string"===typeof t?null!=n&&encodeURIComponent(String(n)):Tr(t,e,n))}function bi(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function wi(t){this.za=0,this.l=[],this.h=new Cn,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=bi("failFast",!1,t),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=bi("baseRetryDelayMs",5e3,t),this.$a=bi("retryDelaySeedMs",1e4,t),this.Ya=bi("forwardChannelMaxRetries",2,t),this.ra=bi("forwardChannelRequestTimeoutMs",2e4,t),this.qa=t&&t.xmlHttpFactory||void 0,this.Ba=t&&t.Yb||!1,this.K=void 0,this.H=t&&t.supportsCrossDomainXhr||!1,this.J="",this.i=new Vr(t&&t.concurrentRequestLimit),this.Ca=new Yr,this.ja=t&&t.fastHandshake||!1,this.Ra=t&&t.Wb||!1,t&&t.Aa&&this.h.Aa(),t&&t.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&t&&t.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!t||!1!==t.Xb}function _i(t){if(Ti(t),3==t.G){var e=t.V++,n=yr(t.F);Tr(n,"SID",t.J),Tr(n,"RID",e),Tr(n,"TYPE","terminate"),ki(t,n),(e=new Yn(t,t.h,e,void 0)).K=2,e.v=Er(yr(n)),n=!1,Ht.navigator&&Ht.navigator.sendBeacon&&(n=Ht.navigator.sendBeacon(e.v.toString(),"")),!n&&Ht.Image&&((new Image).src=e.v,n=!0),n||(e.g=ji(e.l,null),e.g.ea(e.v)),e.F=Date.now(),ar(e)}Fi(t)}function Ii(t){t.g&&(Di(t),t.g.cancel(),t.g=null)}function Ti(t){Ii(t),t.u&&(Ht.clearTimeout(t.u),t.u=null),Pi(t),t.i.cancel(),t.m&&("number"===typeof t.m&&Ht.clearTimeout(t.m),t.m=null)}function Ei(t,e){t.l.push(new jr(t.Za++,e)),3==t.G&&Si(t)}function Si(t){Kr(t.i)||t.m||(t.m=!0,gn(t.Ha,t),t.C=0)}function Ai(t,e){var n;n=e?e.m:t.V++;var r=yr(t.F);Tr(r,"SID",t.J),Tr(r,"RID",n),Tr(r,"AID",t.U),ki(t,r),t.o&&t.s&&yi(r,t.o,t.s),n=new Yn(t,t.h,n,t.C+1),null===t.o&&(n.H=t.s),e&&(t.l=e.D.concat(t.l)),e=Ni(t,n,1e3),n.setTimeout(Math.round(.5*t.ra)+Math.round(.5*t.ra*Math.random())),zr(t.i,n),er(n,r,e)}function ki(t,e){t.j&&fr({},(function(t,n){Tr(e,n,t)}))}function Ni(t,e,n){n=Math.min(t.l.length,n);var r=t.j?Zt(t.j.Oa,t.j,t):null;t:for(var i=t.l,o=-1;;){var a=["count="+n];-1==o?0<n?(o=i[0].h,a.push("ofs="+o)):o=0:a.push("ofs="+o);for(var s=!0,u=0;u<n;u++){var c=i[u].h,h=i[u].g;if(0>(c-=o))o=Math.max(0,i[u].h-100),s=!1;else try{Jr(h,a,"req"+c+"_")}catch(Io){r&&r(h)}}if(s){r=a.join("&");break t}}return t=t.l.splice(0,n),e.D=t,r}function Ci(t){t.g||t.u||(t.Y=1,gn(t.Ga,t),t.A=0)}function Oi(t){return!(t.g||t.u||3<=t.A)&&(t.Y++,t.u=jn(Zt(t.Ga,t),Li(t,t.A)),t.A++,!0)}function Di(t){null!=t.B&&(Ht.clearTimeout(t.B),t.B=null)}function Ri(t){t.g=new Yn(t,t.h,"rpc",t.Y),null===t.o&&(t.g.H=t.s),t.g.O=0;var e=yr(t.oa);Tr(e,"RID","rpc"),Tr(e,"SID",t.J),Tr(e,"CI",t.N?"0":"1"),Tr(e,"AID",t.U),ki(t,e),Tr(e,"TYPE","xmlhttp"),t.o&&t.s&&yi(e,t.o,t.s),t.K&&t.g.setTimeout(t.K);var n=t.g;t=t.la,n.K=1,n.v=Er(yr(e)),n.s=null,n.U=!0,nr(n,t)}function Pi(t){null!=t.v&&(Ht.clearTimeout(t.v),t.v=null)}function xi(t,e){var n=null;if(t.g==e){Pi(t),Di(t),t.g=null;var r=2}else{if(!Hr(t.i,e))return;n=e.D,Wr(t.i,e),r=1}if(t.I=e.N,0!=t.G)if(e.i)if(1==r){n=e.s?e.s.length:0,e=Date.now()-e.F;var i=t.C;sn(r=Pn(),new Un(r,n,e,i)),Si(t)}else Ci(t);else if(3==(i=e.o)||0==i&&0<t.I||!(1==r&&function(t,e){return!(Gr(t.i)>=t.i.j-(t.m?1:0))&&(t.m?(t.l=e.D.concat(t.l),!0):!(1==t.G||2==t.G||t.C>=(t.Xa?0:t.Ya))&&(t.m=jn(Zt(t.Ha,t,e),Li(t,t.C)),t.C++,!0))}(t,e)||2==r&&Oi(t)))switch(n&&0<n.length&&(e=t.i,e.i=e.i.concat(n)),i){case 1:Mi(t,5);break;case 4:Mi(t,10);break;case 3:Mi(t,6);break;default:Mi(t,2)}}function Li(t,e){var n=t.Pa+Math.floor(Math.random()*t.$a);return t.j||(n*=2),n*e}function Mi(t,e){if(t.h.info("Error code "+e),2==e){var n=null;t.j&&(n=null);var r=Zt(t.jb,t);n||(n=new mr("//www.google.com/images/cleardot.gif"),Ht.location&&"http"==Ht.location.protocol||br(n,"https"),Er(n)),function(t,e){var n=new Cn;if(Ht.Image){var r=new Image;r.onload=te($r,n,r,"TestLoadImage: loaded",!0,e),r.onerror=te($r,n,r,"TestLoadImage: error",!1,e),r.onabort=te($r,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=te($r,n,r,"TestLoadImage: timeout",!1,e),Ht.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=t}else e(!1)}(n.toString(),r)}else Fn(2);t.G=0,t.j&&t.j.va(e),Fi(t),Ti(t)}function Fi(t){t.G=0,t.I=-1,t.j&&(0==Xr(t.i).length&&0==t.l.length||(t.i.i.length=0,se(t.l),t.l.length=0),t.j.ua())}function Ui(t,e,n){var r=function(t){return t instanceof mr?yr(t):new mr(t,void 0)}(n);if(""!=r.i)e&&wr(r,e+"."+r.i),_r(r,r.m);else{var i=Ht.location;r=function(t,e,n,r){var i=new mr(null,void 0);return t&&br(i,t),e&&wr(i,e),n&&_r(i,n),r&&(i.l=r),i}(i.protocol,e?e+"."+i.hostname:i.hostname,+i.port,n)}return t.aa&&ve(t.aa,(function(t,e){Tr(r,e,t)})),e=t.D,n=t.sa,e&&n&&Tr(r,e,n),Tr(r,"VER",t.ma),ki(t,r),r}function ji(t,e,n){if(e&&!t.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=n&&t.Ba&&!t.qa?new ai(new Zr({ib:!0})):new ai(t.qa)).L=t.H,e}function Vi(){}function Bi(){if(Ie&&!(10<=Number(Le)))throw Error("Environmental error: no available transport.")}function qi(t,e){an.call(this),this.g=new wi(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(t?t["X-WebChannel-Client-Profile"]=e.ya:t={"X-WebChannel-Client-Profile":e.ya}),this.g.P=t,(t=e&&e.httpHeadersOverwriteParam)&&!ue(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!ue(e)&&(this.g.D=e,null!==(t=this.h)&&e in t&&(e in(t=this.h)&&delete t[e])),this.j=new Hi(this)}function Ki(t){Wn.call(this);var e=t.__sm__;if(e){t:{for(var n in e){t=n;break t}t=void 0}(this.i=t)&&(t=this.i,e=null!==e&&t in e?e[t]:void 0),this.data=e}else this.data=t}function Gi(){Xn.call(this),this.status=1}function Hi(t){this.g=t}(qt=ai.prototype).ea=function(t,e,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+t);e=e?e.toUpperCase():"GET",this.H=t,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():Hn.g(),this.C=this.u?Kn(this.u):Kn(Hn),this.g.onreadystatechange=Zt(this.Fa,this);try{this.F=!0,this.g.open(e,String(t),!0),this.F=!1}catch(o){return void li(this,o)}t=n||"";var i=new pr(this.headers);r&&fr(r,(function(t,e){i.set(e,t)})),r=function(t){t:{for(var e=hi,n=t.length,r="string"===typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return 0>e?null:"string"===typeof t?t.charAt(e):t[e]}(i.T()),n=Ht.FormData&&t instanceof Ht.FormData,!(0<=ie(ci,e))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach((function(t,e){this.g.setRequestHeader(e,t)}),this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{vi(this),0<this.B&&((this.K=function(t){return Ie&&Pe()&&"number"===typeof t.timeout&&void 0!==t.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Zt(this.pa,this)):this.A=In(this.pa,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(o){li(this,o)}},qt.pa=function(){"undefined"!=typeof Gt&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,sn(this,"timeout"),this.abort(8))},qt.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,sn(this,"complete"),sn(this,"abort"),di(this))},qt.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),di(this,!0)),ai.Z.M.call(this)},qt.Fa=function(){this.s||(this.F||this.v||this.l?pi(this):this.cb())},qt.cb=function(){pi(this)},qt.ba=function(){try{return 2<gi(this)?this.g.status:-1}catch(Br){return-1}},qt.ga=function(){try{return this.g?this.g.responseText:""}catch(Br){return""}},qt.Qa=function(t){if(this.g){var e=this.g.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),oi(e)}},qt.Da=function(){return this.m},qt.La=function(){return"string"===typeof this.j?this.j:String(this.j)},(qt=wi.prototype).ma=8,qt.G=1,qt.hb=function(t){try{this.h.info("Origin Trials invoked: "+t)}catch(e){}},qt.Ha=function(t){if(this.m)if(this.m=null,1==this.G){if(!t){this.V=Math.floor(1e5*Math.random()),t=this.V++;var e=new Yn(this,this.h,t,void 0),n=this.s;if(this.P&&(n?ye(n=ge(n),this.P):n=this.P),null===this.o&&(e.H=n),this.ja)t:{for(var r=0,i=0;i<this.l.length;i++){var o=this.l[i];if(void 0===(o="__data__"in o.g&&"string"===typeof(o=o.g.__data__)?o.length:void 0))break;if(4096<(r+=o)){r=i;break t}if(4096===r||i===this.l.length-1){r=i+1;break t}}r=1e3}else r=1e3;r=Ni(this,e,r),Tr(i=yr(this.F),"RID",t),Tr(i,"CVER",22),this.D&&Tr(i,"X-HTTP-Session-Id",this.D),ki(this,i),this.o&&n&&yi(i,this.o,n),zr(this.i,e),this.Ra&&Tr(i,"TYPE","init"),this.ja?(Tr(i,"$req",r),Tr(i,"SID","null"),e.$=!0,er(e,i,null)):er(e,i,r),this.G=2}}else 3==this.G&&(t?Ai(this,t):0==this.l.length||Kr(this.i)||Ai(this))},qt.Ga=function(){if(this.u=null,Ri(this),this.$&&!(this.L||null==this.g||0>=this.O)){var t=2*this.O;this.h.info("BP detection timer enabled: "+t),this.B=jn(Zt(this.bb,this),t)}},qt.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,Fn(10),Ii(this),Ri(this))},qt.ab=function(){null!=this.v&&(this.v=null,Ii(this),Oi(this),Fn(19))},qt.jb=function(t){t?(this.h.info("Successfully pinged google.com"),Fn(2)):(this.h.info("Failed to ping google.com"),Fn(1))},(qt=Vi.prototype).xa=function(){},qt.wa=function(){},qt.va=function(){},qt.ua=function(){},qt.Oa=function(){},Bi.prototype.g=function(t,e){return new qi(t,e)},ee(qi,an),qi.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var t=this.g,e=this.l,n=this.h||void 0;t.Wa&&(t.h.info("Origin Trials enabled."),gn(Zt(t.hb,t,e))),Fn(0),t.W=e,t.aa=n||{},t.N=t.X,t.F=Ui(t,null,t.W),Si(t)},qi.prototype.close=function(){_i(this.g)},qi.prototype.u=function(t){if("string"===typeof t){var e={};e.__data__=t,Ei(this.g,e)}else this.v?((e={}).__data__=cn(t),Ei(this.g,e)):Ei(this.g,t)},qi.prototype.M=function(){this.g.j=null,delete this.j,_i(this.g),delete this.g,qi.Z.M.call(this)},ee(Ki,Wn),ee(Gi,Xn),ee(Hi,Vi),Hi.prototype.xa=function(){sn(this.g,"a")},Hi.prototype.wa=function(t){sn(this.g,new Ki(t))},Hi.prototype.va=function(t){sn(this.g,new Gi(t))},Hi.prototype.ua=function(){sn(this.g,"b")},Bi.prototype.createWebChannel=Bi.prototype.g,qi.prototype.send=qi.prototype.u,qi.prototype.open=qi.prototype.m,qi.prototype.close=qi.prototype.close,Vn.NO_ERROR=0,Vn.TIMEOUT=8,Vn.HTTP_ERROR=6,Bn.COMPLETE="complete",Gn.EventType=zn,zn.OPEN="a",zn.CLOSE="b",zn.ERROR="c",zn.MESSAGE="d",an.prototype.listen=an.prototype.N,ai.prototype.listenOnce=ai.prototype.O,ai.prototype.getLastError=ai.prototype.La,ai.prototype.getLastErrorCode=ai.prototype.Da,ai.prototype.getStatus=ai.prototype.ba,ai.prototype.getResponseJson=ai.prototype.Qa,ai.prototype.getResponseText=ai.prototype.ga,ai.prototype.send=ai.prototype.ea;var zi=function(){return new Bi},Wi=function(){return Pn()},Xi=Vn,Qi=Bn,Yi=Dn,Ji={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},$i=Zr,Zi=Gn,to=ai,eo=n(3454),no=function(){function t(t,e){var n=this;this.previousValue=t,e&&(e.sequenceNumberHandler=function(t){return n.t(t)},this.i=function(t){return e.writeSequenceNumber(t)})}return t.prototype.t=function(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue},t.prototype.next=function(){var t=++this.previousValue;return this.i&&this.i(t),t},t}();no.o=-1;var ro={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},io=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).code=e,r.message=n,r.name="FirebaseError",r.toString=function(){return r.name+": [code="+r.code+"]: "+r.message},r}return(0,o.__extends)(e,t),e}(Error),oo=new jt.Logger("@firebase/firestore");function ao(){return oo.logLevel}function so(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(oo.logLevel<=jt.LogLevel.DEBUG){var r=e.map(ho);oo.debug.apply(oo,(0,o.__spreadArray)(["Firestore (8.10.1): "+t],r))}}function uo(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(oo.logLevel<=jt.LogLevel.ERROR){var r=e.map(ho);oo.error.apply(oo,(0,o.__spreadArray)(["Firestore (8.10.1): "+t],r))}}function co(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(oo.logLevel<=jt.LogLevel.WARN){var r=e.map(ho);oo.warn.apply(oo,(0,o.__spreadArray)(["Firestore (8.10.1): "+t],r))}}function ho(t){if("string"==typeof t)return t;try{return e=t,JSON.stringify(e)}catch(e){return t}var e}function lo(t){void 0===t&&(t="Unexpected state");var e="FIRESTORE (8.10.1) INTERNAL ASSERTION FAILED: "+t;throw uo(e),new Error(e)}function fo(t,e){t||lo()}function po(t,e){return t}function vo(t){var e="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(n);else for(var r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}var go=function(){function t(){}return t.u=function(){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=Math.floor(256/t.length)*t.length,n="";n.length<20;)for(var r=vo(40),i=0;i<r.length;++i)n.length<20&&r[i]<e&&(n+=t.charAt(r[i]%t.length));return n},t}();function mo(t,e){return t<e?-1:t>e?1:0}function yo(t,e,n){return t.length===e.length&&t.every((function(t,r){return n(t,e[r])}))}function bo(t){return t+"\0"}var wo=function(){function t(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new io(ro.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new io(ro.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new io(ro.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new io(ro.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return t.now=function(){return t.fromMillis(Date.now())},t.fromDate=function(e){return t.fromMillis(e.getTime())},t.fromMillis=function(e){var n=Math.floor(e/1e3);return new t(n,Math.floor(1e6*(e-1e3*n)))},t.prototype.toDate=function(){return new Date(this.toMillis())},t.prototype.toMillis=function(){return 1e3*this.seconds+this.nanoseconds/1e6},t.prototype._compareTo=function(t){return this.seconds===t.seconds?mo(this.nanoseconds,t.nanoseconds):mo(this.seconds,t.seconds)},t.prototype.isEqual=function(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds},t.prototype.toString=function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"},t.prototype.toJSON=function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}},t.prototype.valueOf=function(){var t=this.seconds- -62135596800;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")},t}(),_o=function(){function t(t){this.timestamp=t}return t.fromTimestamp=function(e){return new t(e)},t.min=function(){return new t(new wo(0,0))},t.prototype.compareTo=function(t){return this.timestamp._compareTo(t.timestamp)},t.prototype.isEqual=function(t){return this.timestamp.isEqual(t.timestamp)},t.prototype.toMicroseconds=function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3},t.prototype.toString=function(){return"SnapshotVersion("+this.timestamp.toString()+")"},t.prototype.toTimestamp=function(){return this.timestamp},t}();function Io(t){var e=0;for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function To(t,e){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function Eo(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}var So=function(){function t(t,e,n){void 0===e?e=0:e>t.length&&lo(),void 0===n?n=t.length-e:n>t.length-e&&lo(),this.segments=t,this.offset=e,this.len=n}return Object.defineProperty(t.prototype,"length",{get:function(){return this.len},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return 0===t.comparator(this,e)},t.prototype.child=function(e){var n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach((function(t){n.push(t)})):n.push(e),this.construct(n)},t.prototype.limit=function(){return this.offset+this.length},t.prototype.popFirst=function(t){return t=void 0===t?1:t,this.construct(this.segments,this.offset+t,this.length-t)},t.prototype.popLast=function(){return this.construct(this.segments,this.offset,this.length-1)},t.prototype.firstSegment=function(){return this.segments[this.offset]},t.prototype.lastSegment=function(){return this.get(this.length-1)},t.prototype.get=function(t){return this.segments[this.offset+t]},t.prototype.isEmpty=function(){return 0===this.length},t.prototype.isPrefixOf=function(t){if(t.length<this.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.isImmediateParentOf=function(t){if(this.length+1!==t.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.forEach=function(t){for(var e=this.offset,n=this.limit();e<n;e++)t(this.segments[e])},t.prototype.toArray=function(){return this.segments.slice(this.offset,this.limit())},t.comparator=function(t,e){for(var n=Math.min(t.length,e.length),r=0;r<n;r++){var i=t.get(r),o=e.get(r);if(i<o)return-1;if(i>o)return 1}return t.length<e.length?-1:t.length>e.length?1:0},t}(),Ao=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,o.__extends)(e,t),e.prototype.construct=function(t,n,r){return new e(t,n,r)},e.prototype.canonicalString=function(){return this.toArray().join("/")},e.prototype.toString=function(){return this.canonicalString()},e.fromString=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];for(var r=[],i=0,o=t;i<o.length;i++){var a=o[i];if(a.indexOf("//")>=0)throw new io(ro.INVALID_ARGUMENT,"Invalid segment ("+a+"). Paths must not contain // in them.");r.push.apply(r,a.split("/").filter((function(t){return t.length>0})))}return new e(r)},e.emptyPath=function(){return new e([])},e}(So),ko=/^[_a-zA-Z][_a-zA-Z0-9]*$/,No=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,o.__extends)(e,t),e.prototype.construct=function(t,n,r){return new e(t,n,r)},e.isValidIdentifier=function(t){return ko.test(t)},e.prototype.canonicalString=function(){return this.toArray().map((function(t){return t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),e.isValidIdentifier(t)||(t="`"+t+"`"),t})).join(".")},e.prototype.toString=function(){return this.canonicalString()},e.prototype.isKeyField=function(){return 1===this.length&&"__name__"===this.get(0)},e.keyField=function(){return new e(["__name__"])},e.fromServerFormat=function(t){for(var n=[],r="",i=0,o=function(){if(0===r.length)throw new io(ro.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'");n.push(r),r=""},a=!1;i<t.length;){var s=t[i];if("\\"===s){if(i+1===t.length)throw new io(ro.INVALID_ARGUMENT,"Path has trailing escape character: "+t);var u=t[i+1];if("\\"!==u&&"."!==u&&"`"!==u)throw new io(ro.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=u,i+=2}else"`"===s?(a=!a,i++):"."!==s||a?(r+=s,i++):(o(),i++)}if(o(),a)throw new io(ro.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new e(n)},e.emptyPath=function(){return new e([])},e}(So),Co=function(){function t(t){this.fields=t,t.sort(No.comparator)}return t.prototype.covers=function(t){for(var e=0,n=this.fields;e<n.length;e++)if(n[e].isPrefixOf(t))return!0;return!1},t.prototype.isEqual=function(t){return yo(this.fields,t.fields,(function(t,e){return t.isEqual(e)}))},t}(),Oo=function(){function t(t){this.binaryString=t}return t.fromBase64String=function(e){return new t(atob(e))},t.fromUint8Array=function(e){return new t(function(t){for(var e="",n=0;n<t.length;++n)e+=String.fromCharCode(t[n]);return e}(e))},t.prototype.toBase64=function(){return t=this.binaryString,btoa(t);var t},t.prototype.toUint8Array=function(){return function(t){for(var e=new Uint8Array(t.length),n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}(this.binaryString)},t.prototype.approximateByteSize=function(){return 2*this.binaryString.length},t.prototype.compareTo=function(t){return mo(this.binaryString,t.binaryString)},t.prototype.isEqual=function(t){return this.binaryString===t.binaryString},t}();Oo.EMPTY_BYTE_STRING=new Oo("");var Do=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ro(t){if(fo(!!t),"string"==typeof t){var e=0,n=Do.exec(t);if(fo(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}var i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:Po(t.seconds),nanos:Po(t.nanos)}}function Po(t){return"number"==typeof t?t:"string"==typeof t?Number(t):0}function xo(t){return"string"==typeof t?Oo.fromBase64String(t):Oo.fromUint8Array(t)}function Lo(t){var e,n;return"server_timestamp"===(null===(n=((null===(e=null==t?void 0:t.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function Mo(t){var e=t.mapValue.fields.__previous_value__;return Lo(e)?Mo(e):e}function Fo(t){var e=Ro(t.mapValue.fields.__local_write_time__.timestampValue);return new wo(e.seconds,e.nanos)}function Uo(t){return null==t}function jo(t){return 0===t&&1/t==-1/0}function Vo(t){return"number"==typeof t&&Number.isInteger(t)&&!jo(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}var Bo=function(){function t(t){this.path=t}return t.fromPath=function(e){return new t(Ao.fromString(e))},t.fromName=function(e){return new t(Ao.fromString(e).popFirst(5))},t.prototype.hasCollectionId=function(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t},t.prototype.isEqual=function(t){return null!==t&&0===Ao.comparator(this.path,t.path)},t.prototype.toString=function(){return this.path.toString()},t.comparator=function(t,e){return Ao.comparator(t.path,e.path)},t.isDocumentKey=function(t){return t.length%2==0},t.fromSegments=function(e){return new t(new Ao(e.slice()))},t}();function qo(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Lo(t)?4:10:lo()}function Ko(t,e){var n=qo(t);if(n!==qo(e))return!1;switch(n){case 0:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Fo(t).isEqual(Fo(e));case 3:return function(t,e){if("string"==typeof t.timestampValue&&"string"==typeof e.timestampValue&&t.timestampValue.length===e.timestampValue.length)return t.timestampValue===e.timestampValue;var n=Ro(t.timestampValue),r=Ro(e.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(t,e){return xo(t.bytesValue).isEqual(xo(e.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(t,e){return Po(t.geoPointValue.latitude)===Po(e.geoPointValue.latitude)&&Po(t.geoPointValue.longitude)===Po(e.geoPointValue.longitude)}(t,e);case 2:return function(t,e){if("integerValue"in t&&"integerValue"in e)return Po(t.integerValue)===Po(e.integerValue);if("doubleValue"in t&&"doubleValue"in e){var n=Po(t.doubleValue),r=Po(e.doubleValue);return n===r?jo(n)===jo(r):isNaN(n)&&isNaN(r)}return!1}(t,e);case 9:return yo(t.arrayValue.values||[],e.arrayValue.values||[],Ko);case 10:return function(t,e){var n=t.mapValue.fields||{},r=e.mapValue.fields||{};if(Io(n)!==Io(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!Ko(n[i],r[i])))return!1;return!0}(t,e);default:return lo()}}function Go(t,e){return void 0!==(t.values||[]).find((function(t){return Ko(t,e)}))}function Ho(t,e){var n=qo(t),r=qo(e);if(n!==r)return mo(n,r);switch(n){case 0:return 0;case 1:return mo(t.booleanValue,e.booleanValue);case 2:return function(t,e){var n=Po(t.integerValue||t.doubleValue),r=Po(e.integerValue||e.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(t,e);case 3:return zo(t.timestampValue,e.timestampValue);case 4:return zo(Fo(t),Fo(e));case 5:return mo(t.stringValue,e.stringValue);case 6:return function(t,e){var n=xo(t),r=xo(e);return n.compareTo(r)}(t.bytesValue,e.bytesValue);case 7:return function(t,e){for(var n=t.split("/"),r=e.split("/"),i=0;i<n.length&&i<r.length;i++){var o=mo(n[i],r[i]);if(0!==o)return o}return mo(n.length,r.length)}(t.referenceValue,e.referenceValue);case 8:return function(t,e){var n=mo(Po(t.latitude),Po(e.latitude));return 0!==n?n:mo(Po(t.longitude),Po(e.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(t,e){for(var n=t.values||[],r=e.values||[],i=0;i<n.length&&i<r.length;++i){var o=Ho(n[i],r[i]);if(o)return o}return mo(n.length,r.length)}(t.arrayValue,e.arrayValue);case 10:return function(t,e){var n=t.fields||{},r=Object.keys(n),i=e.fields||{},o=Object.keys(i);r.sort(),o.sort();for(var a=0;a<r.length&&a<o.length;++a){var s=mo(r[a],o[a]);if(0!==s)return s;var u=Ho(n[r[a]],i[o[a]]);if(0!==u)return u}return mo(r.length,o.length)}(t.mapValue,e.mapValue);default:throw lo()}}function zo(t,e){if("string"==typeof t&&"string"==typeof e&&t.length===e.length)return mo(t,e);var n=Ro(t),r=Ro(e),i=mo(n.seconds,r.seconds);return 0!==i?i:mo(n.nanos,r.nanos)}function Wo(t){return Xo(t)}function Xo(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(t){var e=Ro(t);return"time("+e.seconds+","+e.nanos+")"}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?xo(t.bytesValue).toBase64():"referenceValue"in t?(n=t.referenceValue,Bo.fromName(n).toString()):"geoPointValue"in t?"geo("+(e=t.geoPointValue).latitude+","+e.longitude+")":"arrayValue"in t?function(t){for(var e="[",n=!0,r=0,i=t.values||[];r<i.length;r++)n?n=!1:e+=",",e+=Xo(i[r]);return e+"]"}(t.arrayValue):"mapValue"in t?function(t){for(var e="{",n=!0,r=0,i=Object.keys(t.fields||{}).sort();r<i.length;r++){var o=i[r];n?n=!1:e+=",",e+=o+":"+Xo(t.fields[o])}return e+"}"}(t.mapValue):lo();var e,n}function Qo(t,e){return{referenceValue:"projects/"+t.projectId+"/databases/"+t.database+"/documents/"+e.path.canonicalString()}}function Yo(t){return!!t&&"integerValue"in t}function Jo(t){return!!t&&"arrayValue"in t}function $o(t){return!!t&&"nullValue"in t}function Zo(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function ta(t){return!!t&&"mapValue"in t}function ea(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&"object"==typeof t.timestampValue)return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){var e={mapValue:{fields:{}}};return To(t.mapValue.fields,(function(t,n){return e.mapValue.fields[t]=ea(n)})),e}if(t.arrayValue){for(var n={arrayValue:{values:[]}},r=0;r<(t.arrayValue.values||[]).length;++r)n.arrayValue.values[r]=ea(t.arrayValue.values[r]);return n}return Object.assign({},t)}var na=function(){function t(t){this.value=t}return t.empty=function(){return new t({mapValue:{}})},t.prototype.field=function(t){if(t.isEmpty())return this.value;for(var e=this.value,n=0;n<t.length-1;++n)if(!ta(e=(e.mapValue.fields||{})[t.get(n)]))return null;return(e=(e.mapValue.fields||{})[t.lastSegment()])||null},t.prototype.set=function(t,e){this.getFieldsMap(t.popLast())[t.lastSegment()]=ea(e)},t.prototype.setAll=function(t){var e=this,n=No.emptyPath(),r={},i=[];t.forEach((function(t,o){if(!n.isImmediateParentOf(o)){var a=e.getFieldsMap(n);e.applyChanges(a,r,i),r={},i=[],n=o.popLast()}t?r[o.lastSegment()]=ea(t):i.push(o.lastSegment())}));var o=this.getFieldsMap(n);this.applyChanges(o,r,i)},t.prototype.delete=function(t){var e=this.field(t.popLast());ta(e)&&e.mapValue.fields&&delete e.mapValue.fields[t.lastSegment()]},t.prototype.isEqual=function(t){return Ko(this.value,t.value)},t.prototype.getFieldsMap=function(t){var e=this.value;e.mapValue.fields||(e.mapValue={fields:{}});for(var n=0;n<t.length;++n){var r=e.mapValue.fields[t.get(n)];ta(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},e.mapValue.fields[t.get(n)]=r),e=r}return e.mapValue.fields},t.prototype.applyChanges=function(t,e,n){To(e,(function(e,n){return t[e]=n}));for(var r=0,i=n;r<i.length;r++){var o=i[r];delete t[o]}},t.prototype.clone=function(){return new t(ea(this.value))},t}();function ra(t){var e=[];return To(t.fields,(function(t,n){var r=new No([t]);if(ta(n)){var i=ra(n.mapValue).fields;if(0===i.length)e.push(r);else for(var o=0,a=i;o<a.length;o++){var s=a[o];e.push(r.child(s))}}else e.push(r)})),new Co(e)}var ia=function(){function t(t,e,n,r,i){this.key=t,this.documentType=e,this.version=n,this.data=r,this.documentState=i}return t.newInvalidDocument=function(e){return new t(e,0,_o.min(),na.empty(),0)},t.newFoundDocument=function(e,n,r){return new t(e,1,n,r,0)},t.newNoDocument=function(e,n){return new t(e,2,n,na.empty(),0)},t.newUnknownDocument=function(e,n){return new t(e,3,n,na.empty(),2)},t.prototype.convertToFoundDocument=function(t,e){return this.version=t,this.documentType=1,this.data=e,this.documentState=0,this},t.prototype.convertToNoDocument=function(t){return this.version=t,this.documentType=2,this.data=na.empty(),this.documentState=0,this},t.prototype.convertToUnknownDocument=function(t){return this.version=t,this.documentType=3,this.data=na.empty(),this.documentState=2,this},t.prototype.setHasCommittedMutations=function(){return this.documentState=2,this},t.prototype.setHasLocalMutations=function(){return this.documentState=1,this},Object.defineProperty(t.prototype,"hasLocalMutations",{get:function(){return 1===this.documentState},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasCommittedMutations",{get:function(){return 2===this.documentState},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return this.hasLocalMutations||this.hasCommittedMutations},enumerable:!1,configurable:!0}),t.prototype.isValidDocument=function(){return 0!==this.documentType},t.prototype.isFoundDocument=function(){return 1===this.documentType},t.prototype.isNoDocument=function(){return 2===this.documentType},t.prototype.isUnknownDocument=function(){return 3===this.documentType},t.prototype.isEqual=function(e){return e instanceof t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)},t.prototype.clone=function(){return new t(this.key,this.documentType,this.version,this.data.clone(),this.documentState)},t.prototype.toString=function(){return"Document("+this.key+", "+this.version+", "+JSON.stringify(this.data.value)+", {documentType: "+this.documentType+"}), {documentState: "+this.documentState+"})"},t}(),oa=function(t,e,n,r,i,o,a){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===a&&(a=null),this.path=t,this.collectionGroup=e,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=o,this.endAt=a,this.h=null};function aa(t,e,n,r,i,o,a){return void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===a&&(a=null),new oa(t,e,n,r,i,o,a)}function sa(t){var e=po(t);if(null===e.h){var n=e.path.canonicalString();null!==e.collectionGroup&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((function(t){return function(t){return t.field.canonicalString()+t.op.toString()+Wo(t.value)}(t)})).join(","),n+="|ob:",n+=e.orderBy.map((function(t){return function(t){return t.field.canonicalString()+t.dir}(t)})).join(","),Uo(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=wa(e.startAt)),e.endAt&&(n+="|ub:",n+=wa(e.endAt)),e.h=n}return e.h}function ua(t,e){if(t.limit!==e.limit)return!1;if(t.orderBy.length!==e.orderBy.length)return!1;for(var n=0;n<t.orderBy.length;n++)if(!Ia(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(var r=0;r<t.filters.length;r++)if(i=t.filters[r],o=e.filters[r],i.op!==o.op||!i.field.isEqual(o.field)||!Ko(i.value,o.value))return!1;var i,o;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Ea(t.startAt,e.startAt)&&Ea(t.endAt,e.endAt)}function ca(t){return Bo.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}var ha=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).field=e,i.op=n,i.value=r,i}return(0,o.__extends)(e,t),e.create=function(t,n,r){return t.isKeyField()?"in"===n||"not-in"===n?this.l(t,n,r):new la(t,n,r):"array-contains"===n?new va(t,r):"in"===n?new ga(t,r):"not-in"===n?new ma(t,r):"array-contains-any"===n?new ya(t,r):new e(t,n,r)},e.l=function(t,e,n){return"in"===e?new fa(t,n):new pa(t,n)},e.prototype.matches=function(t){var e=t.data.field(this.field);return"!="===this.op?null!==e&&this.m(Ho(e,this.value)):null!==e&&qo(this.value)===qo(e)&&this.m(Ho(e,this.value))},e.prototype.m=function(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return 0===t;case"!=":return 0!==t;case">":return t>0;case">=":return t>=0;default:return lo()}},e.prototype.g=function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0},e}((function(){})),la=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,r)||this).key=Bo.fromName(r.referenceValue),i}return(0,o.__extends)(e,t),e.prototype.matches=function(t){var e=Bo.comparator(t.key,this.key);return this.m(e)},e}(ha),fa=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"in",n)||this).keys=da("in",n),r}return(0,o.__extends)(e,t),e.prototype.matches=function(t){return this.keys.some((function(e){return e.isEqual(t.key)}))},e}(ha),pa=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"not-in",n)||this).keys=da("not-in",n),r}return(0,o.__extends)(e,t),e.prototype.matches=function(t){return!this.keys.some((function(e){return e.isEqual(t.key)}))},e}(ha);function da(t,e){var n;return((null===(n=e.arrayValue)||void 0===n?void 0:n.values)||[]).map((function(t){return Bo.fromName(t.referenceValue)}))}var va=function(t){function e(e,n){return t.call(this,e,"array-contains",n)||this}return(0,o.__extends)(e,t),e.prototype.matches=function(t){var e=t.data.field(this.field);return Jo(e)&&Go(e.arrayValue,this.value)},e}(ha),ga=function(t){function e(e,n){return t.call(this,e,"in",n)||this}return(0,o.__extends)(e,t),e.prototype.matches=function(t){var e=t.data.field(this.field);return null!==e&&Go(this.value.arrayValue,e)},e}(ha),ma=function(t){function e(e,n){return t.call(this,e,"not-in",n)||this}return(0,o.__extends)(e,t),e.prototype.matches=function(t){if(Go(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var e=t.data.field(this.field);return null!==e&&!Go(this.value.arrayValue,e)},e}(ha),ya=function(t){function e(e,n){return t.call(this,e,"array-contains-any",n)||this}return(0,o.__extends)(e,t),e.prototype.matches=function(t){var e=this,n=t.data.field(this.field);return!(!Jo(n)||!n.arrayValue.values)&&n.arrayValue.values.some((function(t){return Go(e.value.arrayValue,t)}))},e}(ha),ba=function(t,e){this.position=t,this.before=e};function wa(t){return(t.before?"b":"a")+":"+t.position.map((function(t){return Wo(t)})).join(",")}var _a=function(t,e){void 0===e&&(e="asc"),this.field=t,this.dir=e};function Ia(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}function Ta(t,e,n){for(var r=0,i=0;i<t.position.length;i++){var o=e[i],a=t.position[i];if(r=o.field.isKeyField()?Bo.comparator(Bo.fromName(a.referenceValue),n.key):Ho(a,n.data.field(o.field)),"desc"===o.dir&&(r*=-1),0!==r)break}return t.before?r<=0:r<0}function Ea(t,e){if(null===t)return null===e;if(null===e)return!1;if(t.before!==e.before||t.position.length!==e.position.length)return!1;for(var n=0;n<t.position.length;n++)if(!Ko(t.position[n],e.position[n]))return!1;return!0}var Sa=function(t,e,n,r,i,o,a,s){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o="F"),void 0===a&&(a=null),void 0===s&&(s=null),this.path=t,this.collectionGroup=e,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=o,this.startAt=a,this.endAt=s,this.p=null,this.T=null,this.startAt,this.endAt};function Aa(t,e,n,r,i,o,a,s){return new Sa(t,e,n,r,i,o,a,s)}function ka(t){return new Sa(t)}function Na(t){return!Uo(t.limit)&&"F"===t.limitType}function Ca(t){return!Uo(t.limit)&&"L"===t.limitType}function Oa(t){return t.explicitOrderBy.length>0?t.explicitOrderBy[0].field:null}function Da(t){for(var e=0,n=t.filters;e<n.length;e++){var r=n[e];if(r.g())return r.field}return null}function Ra(t){return null!==t.collectionGroup}function Pa(t){var e=po(t);if(null===e.p){e.p=[];var n=Da(e),r=Oa(e);if(null!==n&&null===r)n.isKeyField()||e.p.push(new _a(n)),e.p.push(new _a(No.keyField(),"asc"));else{for(var i=!1,o=0,a=e.explicitOrderBy;o<a.length;o++){var s=a[o];e.p.push(s),s.field.isKeyField()&&(i=!0)}if(!i){var u=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.p.push(new _a(No.keyField(),u))}}}return e.p}function xa(t){var e=po(t);if(!e.T)if("F"===e.limitType)e.T=aa(e.path,e.collectionGroup,Pa(e),e.filters,e.limit,e.startAt,e.endAt);else{for(var n=[],r=0,i=Pa(e);r<i.length;r++){var o=i[r],a="desc"===o.dir?"asc":"desc";n.push(new _a(o.field,a))}var s=e.endAt?new ba(e.endAt.position,!e.endAt.before):null,u=e.startAt?new ba(e.startAt.position,!e.startAt.before):null;e.T=aa(e.path,e.collectionGroup,n,e.filters,e.limit,s,u)}return e.T}function La(t,e,n){return new Sa(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Ma(t,e){return ua(xa(t),xa(e))&&t.limitType===e.limitType}function Fa(t){return sa(xa(t))+"|lt:"+t.limitType}function Ua(t){return"Query(target="+function(t){var e=t.path.canonicalString();return null!==t.collectionGroup&&(e+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(e+=", filters: ["+t.filters.map((function(t){return(e=t).field.canonicalString()+" "+e.op+" "+Wo(e.value);var e})).join(", ")+"]"),Uo(t.limit)||(e+=", limit: "+t.limit),t.orderBy.length>0&&(e+=", orderBy: ["+t.orderBy.map((function(t){return function(t){return t.field.canonicalString()+" ("+t.dir+")"}(t)})).join(", ")+"]"),t.startAt&&(e+=", startAt: "+wa(t.startAt)),t.endAt&&(e+=", endAt: "+wa(t.endAt)),"Target("+e+")"}(xa(t))+"; limitType="+t.limitType+")"}function ja(t,e){return e.isFoundDocument()&&function(t,e){var n=e.key.path;return null!==t.collectionGroup?e.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(n):Bo.isDocumentKey(t.path)?t.path.isEqual(n):t.path.isImmediateParentOf(n)}(t,e)&&function(t,e){for(var n=0,r=t.explicitOrderBy;n<r.length;n++){var i=r[n];if(!i.field.isKeyField()&&null===e.data.field(i.field))return!1}return!0}(t,e)&&function(t,e){for(var n=0,r=t.filters;n<r.length;n++)if(!r[n].matches(e))return!1;return!0}(t,e)&&function(t,e){return!(t.startAt&&!Ta(t.startAt,Pa(t),e))&&(!t.endAt||!Ta(t.endAt,Pa(t),e))}(t,e)}function Va(t){return function(e,n){for(var r=!1,i=0,o=Pa(t);i<o.length;i++){var a=o[i],s=Ba(a,e,n);if(0!==s)return s;r=r||a.field.isKeyField()}return 0}}function Ba(t,e,n){var r=t.field.isKeyField()?Bo.comparator(e.key,n.key):function(t,e,n){var r=e.data.field(t),i=n.data.field(t);return null!==r&&null!==i?Ho(r,i):lo()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return lo()}}function qa(t,e){if(t.I){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:jo(e)?"-0":e}}function Ka(t){return{integerValue:""+t}}function Ga(t,e){return Vo(e)?Ka(e):qa(t,e)}var Ha=function(){this._=void 0};function za(t,e,n){return t instanceof Qa?function(t,e){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:t.seconds,nanos:t.nanoseconds}}}};return e&&(n.fields.__previous_value__=e),{mapValue:n}}(n,e):t instanceof Ya?Ja(t,e):t instanceof $a?Za(t,e):function(t,e){var n=Xa(t,e),r=es(n)+es(t.A);return Yo(n)&&Yo(t.A)?Ka(r):qa(t.R,r)}(t,e)}function Wa(t,e,n){return t instanceof Ya?Ja(t,e):t instanceof $a?Za(t,e):n}function Xa(t,e){return t instanceof ts?Yo(n=e)||function(t){return!!t&&"doubleValue"in t}(n)?e:{integerValue:0}:null;var n}var Qa=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,o.__extends)(e,t),e}(Ha),Ya=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return(0,o.__extends)(e,t),e}(Ha);function Ja(t,e){for(var n=ns(e),r=function(t){n.some((function(e){return Ko(e,t)}))||n.push(t)},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var $a=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return(0,o.__extends)(e,t),e}(Ha);function Za(t,e){for(var n=ns(e),r=function(t){n=n.filter((function(e){return!Ko(e,t)}))},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var ts=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).R=e,r.A=n,r}return(0,o.__extends)(e,t),e}(Ha);function es(t){return Po(t.integerValue||t.doubleValue)}function ns(t){return Jo(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}var rs=function(t,e){this.field=t,this.transform=e},is=function(t,e){this.version=t,this.transformResults=e},os=function(){function t(t,e){this.updateTime=t,this.exists=e}return t.none=function(){return new t},t.exists=function(e){return new t(void 0,e)},t.updateTime=function(e){return new t(e)},Object.defineProperty(t.prototype,"isNone",{get:function(){return void 0===this.updateTime&&void 0===this.exists},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)},t}();function as(t,e){return void 0!==t.updateTime?e.isFoundDocument()&&e.version.isEqual(t.updateTime):void 0===t.exists||t.exists===e.isFoundDocument()}var ss=function(){};function us(t,e,n){t instanceof ps?function(t,e,n){var r=t.value.clone(),i=gs(t.fieldTransforms,e,n.transformResults);r.setAll(i),e.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(t,e,n):t instanceof ds?function(t,e,n){if(as(t.precondition,e)){var r=gs(t.fieldTransforms,e,n.transformResults),i=e.data;i.setAll(vs(t)),i.setAll(r),e.convertToFoundDocument(n.version,i).setHasCommittedMutations()}else e.convertToUnknownDocument(n.version)}(t,e,n):function(t,e,n){e.convertToNoDocument(n.version).setHasCommittedMutations()}(0,e,n)}function cs(t,e,n){t instanceof ps?function(t,e,n){if(as(t.precondition,e)){var r=t.value.clone(),i=ms(t.fieldTransforms,n,e);r.setAll(i),e.convertToFoundDocument(fs(e),r).setHasLocalMutations()}}(t,e,n):t instanceof ds?function(t,e,n){if(as(t.precondition,e)){var r=ms(t.fieldTransforms,n,e),i=e.data;i.setAll(vs(t)),i.setAll(r),e.convertToFoundDocument(fs(e),i).setHasLocalMutations()}}(t,e,n):function(t,e){as(t.precondition,e)&&e.convertToNoDocument(_o.min())}(t,e)}function hs(t,e){for(var n=null,r=0,i=t.fieldTransforms;r<i.length;r++){var o=i[r],a=e.data.field(o.field),s=Xa(o.transform,a||null);null!=s&&(null==n&&(n=na.empty()),n.set(o.field,s))}return n||null}function ls(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(t,e){return void 0===t&&void 0===e||!(!t||!e)&&yo(t,e,(function(t,e){return function(t,e){return t.field.isEqual(e.field)&&function(t,e){return t instanceof Ya&&e instanceof Ya||t instanceof $a&&e instanceof $a?yo(t.elements,e.elements,Ko):t instanceof ts&&e instanceof ts?Ko(t.A,e.A):t instanceof Qa&&e instanceof Qa}(t.transform,e.transform)}(t,e)}))}(t.fieldTransforms,e.fieldTransforms)&&(0===t.type?t.value.isEqual(e.value):1!==t.type||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}function fs(t){return t.isFoundDocument()?t.version:_o.min()}var ps=function(t){function e(e,n,r,i){void 0===i&&(i=[]);var o=this;return(o=t.call(this)||this).key=e,o.value=n,o.precondition=r,o.fieldTransforms=i,o.type=0,o}return(0,o.__extends)(e,t),e}(ss),ds=function(t){function e(e,n,r,i,o){void 0===o&&(o=[]);var a=this;return(a=t.call(this)||this).key=e,a.data=n,a.fieldMask=r,a.precondition=i,a.fieldTransforms=o,a.type=1,a}return(0,o.__extends)(e,t),e}(ss);function vs(t){var e=new Map;return t.fieldMask.fields.forEach((function(n){if(!n.isEmpty()){var r=t.data.field(n);e.set(n,r)}})),e}function gs(t,e,n){var r=new Map;fo(t.length===n.length);for(var i=0;i<n.length;i++){var o=t[i],a=o.transform,s=e.data.field(o.field);r.set(o.field,Wa(a,s,n[i]))}return r}function ms(t,e,n){for(var r=new Map,i=0,o=t;i<o.length;i++){var a=o[i],s=a.transform,u=n.data.field(a.field);r.set(a.field,za(s,u,e))}return r}var ys,bs,ws=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.precondition=n,r.type=2,r.fieldTransforms=[],r}return(0,o.__extends)(e,t),e}(ss),_s=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.precondition=n,r.type=3,r.fieldTransforms=[],r}return(0,o.__extends)(e,t),e}(ss),Is=function(t){this.count=t};function Ts(t){switch(t){case ro.OK:return lo();case ro.CANCELLED:case ro.UNKNOWN:case ro.DEADLINE_EXCEEDED:case ro.RESOURCE_EXHAUSTED:case ro.INTERNAL:case ro.UNAVAILABLE:case ro.UNAUTHENTICATED:return!1;case ro.INVALID_ARGUMENT:case ro.NOT_FOUND:case ro.ALREADY_EXISTS:case ro.PERMISSION_DENIED:case ro.FAILED_PRECONDITION:case ro.ABORTED:case ro.OUT_OF_RANGE:case ro.UNIMPLEMENTED:case ro.DATA_LOSS:return!0;default:return lo()}}function Es(t){if(void 0===t)return uo("GRPC error has no .code"),ro.UNKNOWN;switch(t){case ys.OK:return ro.OK;case ys.CANCELLED:return ro.CANCELLED;case ys.UNKNOWN:return ro.UNKNOWN;case ys.DEADLINE_EXCEEDED:return ro.DEADLINE_EXCEEDED;case ys.RESOURCE_EXHAUSTED:return ro.RESOURCE_EXHAUSTED;case ys.INTERNAL:return ro.INTERNAL;case ys.UNAVAILABLE:return ro.UNAVAILABLE;case ys.UNAUTHENTICATED:return ro.UNAUTHENTICATED;case ys.INVALID_ARGUMENT:return ro.INVALID_ARGUMENT;case ys.NOT_FOUND:return ro.NOT_FOUND;case ys.ALREADY_EXISTS:return ro.ALREADY_EXISTS;case ys.PERMISSION_DENIED:return ro.PERMISSION_DENIED;case ys.FAILED_PRECONDITION:return ro.FAILED_PRECONDITION;case ys.ABORTED:return ro.ABORTED;case ys.OUT_OF_RANGE:return ro.OUT_OF_RANGE;case ys.UNIMPLEMENTED:return ro.UNIMPLEMENTED;case ys.DATA_LOSS:return ro.DATA_LOSS;default:return lo()}}(bs=ys||(ys={}))[bs.OK=0]="OK",bs[bs.CANCELLED=1]="CANCELLED",bs[bs.UNKNOWN=2]="UNKNOWN",bs[bs.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",bs[bs.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",bs[bs.NOT_FOUND=5]="NOT_FOUND",bs[bs.ALREADY_EXISTS=6]="ALREADY_EXISTS",bs[bs.PERMISSION_DENIED=7]="PERMISSION_DENIED",bs[bs.UNAUTHENTICATED=16]="UNAUTHENTICATED",bs[bs.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",bs[bs.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",bs[bs.ABORTED=10]="ABORTED",bs[bs.OUT_OF_RANGE=11]="OUT_OF_RANGE",bs[bs.UNIMPLEMENTED=12]="UNIMPLEMENTED",bs[bs.INTERNAL=13]="INTERNAL",bs[bs.UNAVAILABLE=14]="UNAVAILABLE",bs[bs.DATA_LOSS=15]="DATA_LOSS";var Ss=function(){function t(t,e){this.comparator=t,this.root=e||ks.EMPTY}return t.prototype.insert=function(e,n){return new t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,ks.BLACK,null,null))},t.prototype.remove=function(e){return new t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ks.BLACK,null,null))},t.prototype.get=function(t){for(var e=this.root;!e.isEmpty();){var n=this.comparator(t,e.key);if(0===n)return e.value;n<0?e=e.left:n>0&&(e=e.right)}return null},t.prototype.indexOf=function(t){for(var e=0,n=this.root;!n.isEmpty();){var r=this.comparator(t,n.key);if(0===r)return e+n.left.size;r<0?n=n.left:(e+=n.left.size+1,n=n.right)}return-1},t.prototype.isEmpty=function(){return this.root.isEmpty()},Object.defineProperty(t.prototype,"size",{get:function(){return this.root.size},enumerable:!1,configurable:!0}),t.prototype.minKey=function(){return this.root.minKey()},t.prototype.maxKey=function(){return this.root.maxKey()},t.prototype.inorderTraversal=function(t){return this.root.inorderTraversal(t)},t.prototype.forEach=function(t){this.inorderTraversal((function(e,n){return t(e,n),!1}))},t.prototype.toString=function(){var t=[];return this.inorderTraversal((function(e,n){return t.push(e+":"+n),!1})),"{"+t.join(", ")+"}"},t.prototype.reverseTraversal=function(t){return this.root.reverseTraversal(t)},t.prototype.getIterator=function(){return new As(this.root,null,this.comparator,!1)},t.prototype.getIteratorFrom=function(t){return new As(this.root,t,this.comparator,!1)},t.prototype.getReverseIterator=function(){return new As(this.root,null,this.comparator,!0)},t.prototype.getReverseIteratorFrom=function(t){return new As(this.root,t,this.comparator,!0)},t}(),As=function(){function t(t,e,n,r){this.isReverse=r,this.nodeStack=[];for(var i=1;!t.isEmpty();)if(i=e?n(t.key,e):1,r&&(i*=-1),i<0)t=this.isReverse?t.left:t.right;else{if(0===i){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}return t.prototype.getNext=function(){var t=this.nodeStack.pop(),e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e},t.prototype.hasNext=function(){return this.nodeStack.length>0},t.prototype.peek=function(){if(0===this.nodeStack.length)return null;var t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}},t}(),ks=function(){function t(e,n,r,i,o){this.key=e,this.value=n,this.color=null!=r?r:t.RED,this.left=null!=i?i:t.EMPTY,this.right=null!=o?o:t.EMPTY,this.size=this.left.size+1+this.right.size}return t.prototype.copy=function(e,n,r,i,o){return new t(null!=e?e:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},t.prototype.isEmpty=function(){return!1},t.prototype.inorderTraversal=function(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)},t.prototype.reverseTraversal=function(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)},t.prototype.min=function(){return this.left.isEmpty()?this:this.left.min()},t.prototype.minKey=function(){return this.min().key},t.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},t.prototype.insert=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,n))).fixUp()},t.prototype.removeMin=function(){if(this.left.isEmpty())return t.EMPTY;var e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),(e=e.copy(null,null,null,e.left.removeMin(),null)).fixUp()},t.prototype.remove=function(e,n){var r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(e,i.key)){if(i.right.isEmpty())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()},t.prototype.isRed=function(){return this.color},t.prototype.fixUp=function(){var t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t},t.prototype.moveRedLeft=function(){var t=this.colorFlip();return t.right.left.isRed()&&(t=(t=(t=t.copy(null,null,null,null,t.right.rotateRight())).rotateLeft()).colorFlip()),t},t.prototype.moveRedRight=function(){var t=this.colorFlip();return t.left.left.isRed()&&(t=(t=t.rotateRight()).colorFlip()),t},t.prototype.rotateLeft=function(){var e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)},t.prototype.rotateRight=function(){var e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)},t.prototype.colorFlip=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},t.prototype.checkMaxDepth=function(){var t=this.check();return Math.pow(2,t)<=this.size+1},t.prototype.check=function(){if(this.isRed()&&this.left.isRed())throw lo();if(this.right.isRed())throw lo();var t=this.left.check();if(t!==this.right.check())throw lo();return t+(this.isRed()?0:1)},t}();ks.EMPTY=null,ks.RED=!0,ks.BLACK=!1,ks.EMPTY=new(function(){function t(){this.size=0}return Object.defineProperty(t.prototype,"key",{get:function(){throw lo()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){throw lo()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"color",{get:function(){throw lo()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"left",{get:function(){throw lo()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"right",{get:function(){throw lo()},enumerable:!1,configurable:!0}),t.prototype.copy=function(t,e,n,r,i){return this},t.prototype.insert=function(t,e,n){return new ks(t,e)},t.prototype.remove=function(t,e){return this},t.prototype.isEmpty=function(){return!0},t.prototype.inorderTraversal=function(t){return!1},t.prototype.reverseTraversal=function(t){return!1},t.prototype.minKey=function(){return null},t.prototype.maxKey=function(){return null},t.prototype.isRed=function(){return!1},t.prototype.checkMaxDepth=function(){return!0},t.prototype.check=function(){return 0},t}());var Ns=function(){function t(t){this.comparator=t,this.data=new Ss(this.comparator)}return t.prototype.has=function(t){return null!==this.data.get(t)},t.prototype.first=function(){return this.data.minKey()},t.prototype.last=function(){return this.data.maxKey()},Object.defineProperty(t.prototype,"size",{get:function(){return this.data.size},enumerable:!1,configurable:!0}),t.prototype.indexOf=function(t){return this.data.indexOf(t)},t.prototype.forEach=function(t){this.data.inorderTraversal((function(e,n){return t(e),!1}))},t.prototype.forEachInRange=function(t,e){for(var n=this.data.getIteratorFrom(t[0]);n.hasNext();){var r=n.getNext();if(this.comparator(r.key,t[1])>=0)return;e(r.key)}},t.prototype.forEachWhile=function(t,e){var n;for(n=void 0!==e?this.data.getIteratorFrom(e):this.data.getIterator();n.hasNext();)if(!t(n.getNext().key))return},t.prototype.firstAfterOrEqual=function(t){var e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null},t.prototype.getIterator=function(){return new Cs(this.data.getIterator())},t.prototype.getIteratorFrom=function(t){return new Cs(this.data.getIteratorFrom(t))},t.prototype.add=function(t){return this.copy(this.data.remove(t).insert(t,!0))},t.prototype.delete=function(t){return this.has(t)?this.copy(this.data.remove(t)):this},t.prototype.isEmpty=function(){return this.data.isEmpty()},t.prototype.unionWith=function(t){var e=this;return e.size<t.size&&(e=t,t=this),t.forEach((function(t){e=e.add(t)})),e},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.data.getIterator(),r=e.data.getIterator();n.hasNext();){var i=n.getNext().key,o=r.getNext().key;if(0!==this.comparator(i,o))return!1}return!0},t.prototype.toArray=function(){var t=[];return this.forEach((function(e){t.push(e)})),t},t.prototype.toString=function(){var t=[];return this.forEach((function(e){return t.push(e)})),"SortedSet("+t.toString()+")"},t.prototype.copy=function(e){var n=new t(this.comparator);return n.data=e,n},t}(),Cs=function(){function t(t){this.iter=t}return t.prototype.getNext=function(){return this.iter.getNext().key},t.prototype.hasNext=function(){return this.iter.hasNext()},t}(),Os=new Ss(Bo.comparator);function Ds(){return Os}var Rs=new Ss(Bo.comparator);function Ps(){return Rs}var xs=new Ss(Bo.comparator);function Ls(){return xs}var Ms=new Ns(Bo.comparator);function Fs(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=Ms,r=0,i=t;r<i.length;r++){var o=i[r];n=n.add(o)}return n}var Us=new Ns(mo);function js(){return Us}var Vs=function(){function t(t,e,n,r,i){this.snapshotVersion=t,this.targetChanges=e,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}return t.createSynthesizedRemoteEventForCurrentChange=function(e,n){var r=new Map;return r.set(e,Bs.createSynthesizedTargetChangeForCurrentChange(e,n)),new t(_o.min(),r,js(),Ds(),Fs())},t}(),Bs=function(){function t(t,e,n,r,i){this.resumeToken=t,this.current=e,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}return t.createSynthesizedTargetChangeForCurrentChange=function(e,n){return new t(Oo.EMPTY_BYTE_STRING,n,Fs(),Fs(),Fs())},t}(),qs=function(t,e,n,r){this.v=t,this.removedTargetIds=e,this.key=n,this.P=r},Ks=function(t,e){this.targetId=t,this.V=e},Gs=function(t,e,n,r){void 0===n&&(n=Oo.EMPTY_BYTE_STRING),void 0===r&&(r=null),this.state=t,this.targetIds=e,this.resumeToken=n,this.cause=r},Hs=function(){function t(){this.S=0,this.D=Xs(),this.C=Oo.EMPTY_BYTE_STRING,this.N=!1,this.k=!0}return Object.defineProperty(t.prototype,"current",{get:function(){return this.N},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"resumeToken",{get:function(){return this.C},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"F",{get:function(){return 0!==this.S},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"$",{get:function(){return this.k},enumerable:!1,configurable:!0}),t.prototype.O=function(t){t.approximateByteSize()>0&&(this.k=!0,this.C=t)},t.prototype.M=function(){var t=Fs(),e=Fs(),n=Fs();return this.D.forEach((function(r,i){switch(i){case 0:t=t.add(r);break;case 2:e=e.add(r);break;case 1:n=n.add(r);break;default:lo()}})),new Bs(this.C,this.N,t,e,n)},t.prototype.L=function(){this.k=!1,this.D=Xs()},t.prototype.B=function(t,e){this.k=!0,this.D=this.D.insert(t,e)},t.prototype.q=function(t){this.k=!0,this.D=this.D.remove(t)},t.prototype.U=function(){this.S+=1},t.prototype.K=function(){this.S-=1},t.prototype.j=function(){this.k=!0,this.N=!0},t}(),zs=function(){function t(t){this.W=t,this.G=new Map,this.H=Ds(),this.J=Ws(),this.Y=new Ns(mo)}return t.prototype.X=function(t){for(var e=0,n=t.v;e<n.length;e++){var r=n[e];t.P&&t.P.isFoundDocument()?this.Z(r,t.P):this.tt(r,t.key,t.P)}for(var i=0,o=t.removedTargetIds;i<o.length;i++)r=o[i],this.tt(r,t.key,t.P)},t.prototype.et=function(t){var e=this;this.forEachTarget(t,(function(n){var r=e.nt(n);switch(t.state){case 0:e.st(n)&&r.O(t.resumeToken);break;case 1:r.K(),r.F||r.L(),r.O(t.resumeToken);break;case 2:r.K(),r.F||e.removeTarget(n);break;case 3:e.st(n)&&(r.j(),r.O(t.resumeToken));break;case 4:e.st(n)&&(e.it(n),r.O(t.resumeToken));break;default:lo()}}))},t.prototype.forEachTarget=function(t,e){var n=this;t.targetIds.length>0?t.targetIds.forEach(e):this.G.forEach((function(t,r){n.st(r)&&e(r)}))},t.prototype.rt=function(t){var e=t.targetId,n=t.V.count,r=this.ot(e);if(r){var i=r.target;if(ca(i))if(0===n){var o=new Bo(i.path);this.tt(e,o,ia.newNoDocument(o,_o.min()))}else fo(1===n);else this.ct(e)!==n&&(this.it(e),this.Y=this.Y.add(e))}},t.prototype.ut=function(t){var e=this,n=new Map;this.G.forEach((function(r,i){var o=e.ot(i);if(o){if(r.current&&ca(o.target)){var a=new Bo(o.target.path);null!==e.H.get(a)||e.at(i,a)||e.tt(i,a,ia.newNoDocument(a,t))}r.$&&(n.set(i,r.M()),r.L())}}));var r=Fs();this.J.forEach((function(t,n){var i=!0;n.forEachWhile((function(t){var n=e.ot(t);return!n||2===n.purpose||(i=!1,!1)})),i&&(r=r.add(t))}));var i=new Vs(t,n,this.Y,this.H,r);return this.H=Ds(),this.J=Ws(),this.Y=new Ns(mo),i},t.prototype.Z=function(t,e){if(this.st(t)){var n=this.at(t,e.key)?2:0;this.nt(t).B(e.key,n),this.H=this.H.insert(e.key,e),this.J=this.J.insert(e.key,this.ht(e.key).add(t))}},t.prototype.tt=function(t,e,n){if(this.st(t)){var r=this.nt(t);this.at(t,e)?r.B(e,1):r.q(e),this.J=this.J.insert(e,this.ht(e).delete(t)),n&&(this.H=this.H.insert(e,n))}},t.prototype.removeTarget=function(t){this.G.delete(t)},t.prototype.ct=function(t){var e=this.nt(t).M();return this.W.getRemoteKeysForTarget(t).size+e.addedDocuments.size-e.removedDocuments.size},t.prototype.U=function(t){this.nt(t).U()},t.prototype.nt=function(t){var e=this.G.get(t);return e||(e=new Hs,this.G.set(t,e)),e},t.prototype.ht=function(t){var e=this.J.get(t);return e||(e=new Ns(mo),this.J=this.J.insert(t,e)),e},t.prototype.st=function(t){var e=null!==this.ot(t);return e||so("WatchChangeAggregator","Detected inactive target",t),e},t.prototype.ot=function(t){var e=this.G.get(t);return e&&e.F?null:this.W.lt(t)},t.prototype.it=function(t){var e=this;this.G.set(t,new Hs),this.W.getRemoteKeysForTarget(t).forEach((function(n){e.tt(t,n,null)}))},t.prototype.at=function(t,e){return this.W.getRemoteKeysForTarget(t).has(e)},t}();function Ws(){return new Ss(Bo.comparator)}function Xs(){return new Ss(Bo.comparator)}var Qs={asc:"ASCENDING",desc:"DESCENDING"},Ys={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Js=function(t,e){this.databaseId=t,this.I=e};function $s(t,e){return t.I?new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")+"."+("000000000"+e.nanoseconds).slice(-9)+"Z":{seconds:""+e.seconds,nanos:e.nanoseconds}}function Zs(t,e){return t.I?e.toBase64():e.toUint8Array()}function tu(t,e){return $s(t,e.toTimestamp())}function eu(t){return fo(!!t),_o.fromTimestamp(function(t){var e=Ro(t);return new wo(e.seconds,e.nanos)}(t))}function nu(t,e){return function(t){return new Ao(["projects",t.projectId,"databases",t.database])}(t).child("documents").child(e).canonicalString()}function ru(t){var e=Ao.fromString(t);return fo(ku(e)),e}function iu(t,e){return nu(t.databaseId,e.path)}function ou(t,e){var n=ru(e);if(n.get(1)!==t.databaseId.projectId)throw new io(ro.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new io(ro.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new Bo(cu(n))}function au(t,e){return nu(t.databaseId,e)}function su(t){var e=ru(t);return 4===e.length?Ao.emptyPath():cu(e)}function uu(t){return new Ao(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function cu(t){return fo(t.length>4&&"documents"===t.get(4)),t.popFirst(5)}function hu(t,e,n){return{name:iu(t,e),fields:n.value.mapValue.fields}}function lu(t,e,n){var r=ou(t,e.name),i=eu(e.updateTime),o=new na({mapValue:{fields:e.fields}}),a=ia.newFoundDocument(r,i,o);return n&&a.setHasCommittedMutations(),n?a.setHasCommittedMutations():a}function fu(t,e){var n;if(e instanceof ps)n={update:hu(t,e.key,e.value)};else if(e instanceof ws)n={delete:iu(t,e.key)};else if(e instanceof ds)n={update:hu(t,e.key,e.data),updateMask:Au(e.fieldMask)};else{if(!(e instanceof _s))return lo();n={verify:iu(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((function(t){return function(t,e){var n=e.transform;if(n instanceof Qa)return{fieldPath:e.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof Ya)return{fieldPath:e.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof $a)return{fieldPath:e.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof ts)return{fieldPath:e.field.canonicalString(),increment:n.A};throw lo()}(0,t)}))),e.precondition.isNone||(n.currentDocument=function(t,e){return void 0!==e.updateTime?{updateTime:tu(t,e.updateTime)}:void 0!==e.exists?{exists:e.exists}:lo()}(t,e.precondition)),n}function pu(t,e){var n=e.currentDocument?function(t){return void 0!==t.updateTime?os.updateTime(eu(t.updateTime)):void 0!==t.exists?os.exists(t.exists):os.none()}(e.currentDocument):os.none(),r=e.updateTransforms?e.updateTransforms.map((function(e){return function(t,e){var n=null;if("setToServerValue"in e)fo("REQUEST_TIME"===e.setToServerValue),n=new Qa;else if("appendMissingElements"in e){var r=e.appendMissingElements.values||[];n=new Ya(r)}else if("removeAllFromArray"in e){var i=e.removeAllFromArray.values||[];n=new $a(i)}else"increment"in e?n=new ts(t,e.increment):lo();var o=No.fromServerFormat(e.fieldPath);return new rs(o,n)}(t,e)})):[];if(e.update){e.update.name;var i=ou(t,e.update.name),o=new na({mapValue:{fields:e.update.fields}});if(e.updateMask){var a=function(t){var e=t.fieldPaths||[];return new Co(e.map((function(t){return No.fromServerFormat(t)})))}(e.updateMask);return new ds(i,o,a,n,r)}return new ps(i,o,n,r)}if(e.delete){var s=ou(t,e.delete);return new ws(s,n)}if(e.verify){var u=ou(t,e.verify);return new _s(u,n)}return lo()}function du(t,e){return{documents:[au(t,e.path)]}}function vu(t,e){var n={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(n.parent=au(t,r),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=au(t,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);var i=function(t){if(0!==t.length){var e=t.map((function(t){return function(t){if("=="===t.op){if(Zo(t.value))return{unaryFilter:{field:Iu(t.field),op:"IS_NAN"}};if($o(t.value))return{unaryFilter:{field:Iu(t.field),op:"IS_NULL"}}}else if("!="===t.op){if(Zo(t.value))return{unaryFilter:{field:Iu(t.field),op:"IS_NOT_NAN"}};if($o(t.value))return{unaryFilter:{field:Iu(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Iu(t.field),op:_u(t.op),value:t.value}}}(t)}));return 1===e.length?e[0]:{compositeFilter:{op:"AND",filters:e}}}}(e.filters);i&&(n.structuredQuery.where=i);var o=function(t){if(0!==t.length)return t.map((function(t){return function(t){return{field:Iu(t.field),direction:wu(t.dir)}}(t)}))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);var a=function(t,e){return t.I||Uo(e)?e:{value:e}}(t,e.limit);return null!==a&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=yu(e.startAt)),e.endAt&&(n.structuredQuery.endAt=yu(e.endAt)),n}function gu(t){var e=su(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){fo(1===r);var o=n.from[0];o.allDescendants?i=o.collectionId:e=e.child(o.collectionId)}var a=[];n.where&&(a=mu(n.where));var s=[];n.orderBy&&(s=n.orderBy.map((function(t){return function(t){return new _a(Tu(t.field),function(t){switch(t){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(t.direction))}(t)})));var u=null;n.limit&&(u=function(t){var e;return Uo(e="object"==typeof t?t.value:t)?null:e}(n.limit));var c=null;n.startAt&&(c=bu(n.startAt));var h=null;return n.endAt&&(h=bu(n.endAt)),Aa(e,i,s,a,u,"F",c,h)}function mu(t){return t?void 0!==t.unaryFilter?[Su(t)]:void 0!==t.fieldFilter?[Eu(t)]:void 0!==t.compositeFilter?t.compositeFilter.filters.map((function(t){return mu(t)})).reduce((function(t,e){return t.concat(e)})):lo():[]}function yu(t){return{before:t.before,values:t.position}}function bu(t){var e=!!t.before,n=t.values||[];return new ba(n,e)}function wu(t){return Qs[t]}function _u(t){return Ys[t]}function Iu(t){return{fieldPath:t.canonicalString()}}function Tu(t){return No.fromServerFormat(t.fieldPath)}function Eu(t){return ha.create(Tu(t.fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return lo()}}(t.fieldFilter.op),t.fieldFilter.value)}function Su(t){switch(t.unaryFilter.op){case"IS_NAN":var e=Tu(t.unaryFilter.field);return ha.create(e,"==",{doubleValue:NaN});case"IS_NULL":var n=Tu(t.unaryFilter.field);return ha.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=Tu(t.unaryFilter.field);return ha.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=Tu(t.unaryFilter.field);return ha.create(i,"!=",{nullValue:"NULL_VALUE"});default:return lo()}}function Au(t){var e=[];return t.fields.forEach((function(t){return e.push(t.canonicalString())})),{fieldPaths:e}}function ku(t){return t.length>=4&&"projects"===t.get(0)&&"databases"===t.get(2)}function Nu(t){for(var e="",n=0;n<t.length;n++)e.length>0&&(e=Ou(e)),e=Cu(t.get(n),e);return Ou(e)}function Cu(t,e){for(var n=e,r=t.length,i=0;i<r;i++){var o=t.charAt(i);switch(o){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=o}}return n}function Ou(t){return t+"\x01\x01"}function Du(t){var e=t.length;if(fo(e>=2),2===e)return fo("\x01"===t.charAt(0)&&"\x01"===t.charAt(1)),Ao.emptyPath();for(var n=e-2,r=[],i="",o=0;o<e;){var a=t.indexOf("\x01",o);switch((a<0||a>n)&&lo(),t.charAt(a+1)){case"\x01":var s=t.substring(o,a),u=void 0;0===i.length?u=s:(u=i+=s,i=""),r.push(u);break;case"\x10":i+=t.substring(o,a),i+="\0";break;case"\x11":i+=t.substring(o,a+1);break;default:lo()}o=a+2}return new Ao(r)}var Ru=function(t,e){this.seconds=t,this.nanoseconds=e},Pu=function(t,e,n){this.ownerId=t,this.allowTabSynchronization=e,this.leaseTimestampMs=n};Pu.store="owner",Pu.key="owner";var xu=function(t,e,n){this.userId=t,this.lastAcknowledgedBatchId=e,this.lastStreamToken=n};xu.store="mutationQueues",xu.keyPath="userId";var Lu=function(t,e,n,r,i){this.userId=t,this.batchId=e,this.localWriteTimeMs=n,this.baseMutations=r,this.mutations=i};Lu.store="mutations",Lu.keyPath="batchId",Lu.userMutationsIndex="userMutationsIndex",Lu.userMutationsKeyPath=["userId","batchId"];var Mu=function(){function t(){}return t.prefixForUser=function(t){return[t]},t.prefixForPath=function(t,e){return[t,Nu(e)]},t.key=function(t,e,n){return[t,Nu(e),n]},t}();Mu.store="documentMutations",Mu.PLACEHOLDER=new Mu;var Fu=function(t,e){this.path=t,this.readTime=e},Uu=function(t,e){this.path=t,this.version=e},ju=function(t,e,n,r,i,o){this.unknownDocument=t,this.noDocument=e,this.document=n,this.hasCommittedMutations=r,this.readTime=i,this.parentPath=o};ju.store="remoteDocuments",ju.readTimeIndex="readTimeIndex",ju.readTimeIndexPath="readTime",ju.collectionReadTimeIndex="collectionReadTimeIndex",ju.collectionReadTimeIndexPath=["parentPath","readTime"];var Vu=function(t){this.byteSize=t};Vu.store="remoteDocumentGlobal",Vu.key="remoteDocumentGlobalKey";var Bu=function(t,e,n,r,i,o,a){this.targetId=t,this.canonicalId=e,this.readTime=n,this.resumeToken=r,this.lastListenSequenceNumber=i,this.lastLimboFreeSnapshotVersion=o,this.query=a};Bu.store="targets",Bu.keyPath="targetId",Bu.queryTargetsIndexName="queryTargetsIndex",Bu.queryTargetsKeyPath=["canonicalId","targetId"];var qu=function(t,e,n){this.targetId=t,this.path=e,this.sequenceNumber=n};qu.store="targetDocuments",qu.keyPath=["targetId","path"],qu.documentTargetsIndex="documentTargetsIndex",qu.documentTargetsKeyPath=["path","targetId"];var Ku=function(t,e,n,r){this.highestTargetId=t,this.highestListenSequenceNumber=e,this.lastRemoteSnapshotVersion=n,this.targetCount=r};Ku.key="targetGlobalKey",Ku.store="targetGlobal";var Gu=function(t,e){this.collectionId=t,this.parent=e};Gu.store="collectionParents",Gu.keyPath=["collectionId","parent"];var Hu=function(t,e,n,r){this.clientId=t,this.updateTimeMs=e,this.networkEnabled=n,this.inForeground=r};Hu.store="clientMetadata",Hu.keyPath="clientId";var zu=function(t,e,n){this.bundleId=t,this.createTime=e,this.version=n};zu.store="bundles",zu.keyPath="bundleId";var Wu=function(t,e,n){this.name=t,this.readTime=e,this.bundledQuery=n};Wu.store="namedQueries",Wu.keyPath="name";var Xu=(0,o.__spreadArray)((0,o.__spreadArray)([],(0,o.__spreadArray)((0,o.__spreadArray)([],(0,o.__spreadArray)((0,o.__spreadArray)([],(0,o.__spreadArray)((0,o.__spreadArray)([],[xu.store,Lu.store,Mu.store,ju.store,Bu.store,Pu.store,Ku.store,qu.store]),[Hu.store])),[Vu.store])),[Gu.store])),[zu.store,Wu.store]),Qu="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Yu=function(){function t(){this.onCommittedListeners=[]}return t.prototype.addOnCommittedListener=function(t){this.onCommittedListeners.push(t)},t.prototype.raiseOnCommittedEvent=function(){this.onCommittedListeners.forEach((function(t){return t()}))},t}(),Ju=function(){var t=this;this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))},$u=function(){function t(t){var e=this;this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((function(t){e.isDone=!0,e.result=t,e.nextCallback&&e.nextCallback(t)}),(function(t){e.isDone=!0,e.error=t,e.catchCallback&&e.catchCallback(t)}))}return t.prototype.catch=function(t){return this.next(void 0,t)},t.prototype.next=function(e,n){var r=this;return this.callbackAttached&&lo(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new t((function(t,i){r.nextCallback=function(n){r.wrapSuccess(e,n).next(t,i)},r.catchCallback=function(e){r.wrapFailure(n,e).next(t,i)}}))},t.prototype.toPromise=function(){var t=this;return new Promise((function(e,n){t.next(e,n)}))},t.prototype.wrapUserFunction=function(e){try{var n=e();return n instanceof t?n:t.resolve(n)}catch(e){return t.reject(e)}},t.prototype.wrapSuccess=function(e,n){return e?this.wrapUserFunction((function(){return e(n)})):t.resolve(n)},t.prototype.wrapFailure=function(e,n){return e?this.wrapUserFunction((function(){return e(n)})):t.reject(n)},t.resolve=function(e){return new t((function(t,n){t(e)}))},t.reject=function(e){return new t((function(t,n){n(e)}))},t.waitFor=function(e){return new t((function(t,n){var r=0,i=0,o=!1;e.forEach((function(e){++r,e.next((function(){++i,o&&i===r&&t()}),(function(t){return n(t)}))})),o=!0,i===r&&t()}))},t.or=function(e){for(var n=t.resolve(!1),r=function(e){n=n.next((function(n){return n?t.resolve(n):e()}))},i=0,o=e;i<o.length;i++)r(o[i]);return n},t.forEach=function(t,e){var n=this,r=[];return t.forEach((function(t,i){r.push(e.call(n,t,i))})),this.waitFor(r)},t}(),Zu=function(){function t(t,e){var n=this;this.action=t,this.transaction=e,this.aborted=!1,this.ft=new Ju,this.transaction.oncomplete=function(){n.ft.resolve()},this.transaction.onabort=function(){e.error?n.ft.reject(new nc(t,e.error)):n.ft.resolve()},this.transaction.onerror=function(e){var r=sc(e.target.error);n.ft.reject(new nc(t,r))}}return t.open=function(e,n,r,i){try{return new t(n,e.transaction(i,r))}catch(e){throw new nc(n,e)}},Object.defineProperty(t.prototype,"dt",{get:function(){return this.ft.promise},enumerable:!1,configurable:!0}),t.prototype.abort=function(t){t&&this.ft.reject(t),this.aborted||(so("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())},t.prototype.store=function(t){var e=this.transaction.objectStore(t);return new ic(e)},t}(),tc=function(){function t(e,n,r){this.name=e,this.version=n,this.wt=r,12.2===t._t((0,a.getUA)())&&uo("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return t.delete=function(t){return so("SimpleDb","Removing database:",t),oc(window.indexedDB.deleteDatabase(t)).toPromise()},t.yt=function(){if("undefined"==typeof indexedDB)return!1;if(t.gt())return!0;var e=(0,a.getUA)(),n=t._t(e),r=0<n&&n<10,i=t.Et(e),o=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||o)},t.gt=function(){var t;return"undefined"!=typeof eo&&"YES"===(null===(t=eo.env)||void 0===t?void 0:t.Tt)},t.It=function(t,e){return t.store(e)},t._t=function(t){var e=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=e?e[1].split("_").slice(0,2).join("."):"-1";return Number(n)},t.Et=function(t){var e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)},t.prototype.At=function(t){return(0,o.__awaiter)(this,void 0,void 0,(function(){var e,n=this;return(0,o.__generator)(this,(function(r){switch(r.label){case 0:return this.db?[3,2]:(so("SimpleDb","Opening database:",this.name),e=this,[4,new Promise((function(e,r){var i=indexedDB.open(n.name,n.version);i.onsuccess=function(t){var n=t.target.result;e(n)},i.onblocked=function(){r(new nc(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(e){var n=e.target.error;"VersionError"===n.name?r(new io(ro.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):r(new nc(t,n))},i.onupgradeneeded=function(t){so("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',t.oldVersion);var e=t.target.result;n.wt.Rt(e,i.transaction,t.oldVersion,n.version).next((function(){so("SimpleDb","Database upgrade to version "+n.version+" complete")}))}}))]);case 1:e.db=r.sent(),r.label=2;case 2:return[2,(this.bt&&(this.db.onversionchange=function(t){return n.bt(t)}),this.db)]}}))}))},t.prototype.vt=function(t){this.bt=t,this.db&&(this.db.onversionchange=function(e){return t(e)})},t.prototype.runTransaction=function(t,e,n,r){return(0,o.__awaiter)(this,void 0,void 0,(function(){var i,a,s,u,c;return(0,o.__generator)(this,(function(h){switch(h.label){case 0:i="readonly"===e,a=0,s=function(){var e,s,c,h,l;return(0,o.__generator)(this,(function(o){switch(o.label){case 0:++a,o.label=1;case 1:return o.trys.push([1,4,,5]),[4,u.At(t)];case 2:return u.db=o.sent(),e=Zu.open(u.db,t,i?"readonly":"readwrite",n),s=r(e).catch((function(t){return e.abort(t),$u.reject(t)})).toPromise(),c={},s.catch((function(){})),[4,e.dt];case 3:return[2,(c.value=(o.sent(),s),c)];case 4:return h=o.sent(),l="FirebaseError"!==h.name&&a<3,so("SimpleDb","Transaction failed with error:",h.message,"Retrying:",l),u.close(),l?[3,5]:[2,{value:Promise.reject(h)}];case 5:return[2]}}))},u=this,h.label=1;case 1:return[5,s()];case 2:if("object"==typeof(c=h.sent()))return[2,c.value];h.label=3;case 3:return[3,1];case 4:return[2]}}))}))},t.prototype.close=function(){this.db&&this.db.close(),this.db=void 0},t}(),ec=function(){function t(t){this.Pt=t,this.Vt=!1,this.St=null}return Object.defineProperty(t.prototype,"isDone",{get:function(){return this.Vt},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Dt",{get:function(){return this.St},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cursor",{set:function(t){this.Pt=t},enumerable:!1,configurable:!0}),t.prototype.done=function(){this.Vt=!0},t.prototype.Ct=function(t){this.St=t},t.prototype.delete=function(){return oc(this.Pt.delete())},t}(),nc=function(t){function e(e,n){var r=this;return(r=t.call(this,ro.UNAVAILABLE,"IndexedDB transaction '"+e+"' failed: "+n)||this).name="IndexedDbTransactionError",r}return(0,o.__extends)(e,t),e}(io);function rc(t){return"IndexedDbTransactionError"===t.name}var ic=function(){function t(t){this.store=t}return t.prototype.put=function(t,e){var n;return void 0!==e?(so("SimpleDb","PUT",this.store.name,t,e),n=this.store.put(e,t)):(so("SimpleDb","PUT",this.store.name,"<auto-key>",t),n=this.store.put(t)),oc(n)},t.prototype.add=function(t){return so("SimpleDb","ADD",this.store.name,t,t),oc(this.store.add(t))},t.prototype.get=function(t){var e=this;return oc(this.store.get(t)).next((function(n){return void 0===n&&(n=null),so("SimpleDb","GET",e.store.name,t,n),n}))},t.prototype.delete=function(t){return so("SimpleDb","DELETE",this.store.name,t),oc(this.store.delete(t))},t.prototype.count=function(){return so("SimpleDb","COUNT",this.store.name),oc(this.store.count())},t.prototype.Nt=function(t,e){var n=this.cursor(this.options(t,e)),r=[];return this.xt(n,(function(t,e){r.push(e)})).next((function(){return r}))},t.prototype.kt=function(t,e){so("SimpleDb","DELETE ALL",this.store.name);var n=this.options(t,e);n.Ft=!1;var r=this.cursor(n);return this.xt(r,(function(t,e,n){return n.delete()}))},t.prototype.$t=function(t,e){var n;e?n=t:(n={},e=t);var r=this.cursor(n);return this.xt(r,e)},t.prototype.Ot=function(t){var e=this.cursor({});return new $u((function(n,r){e.onerror=function(t){var e=sc(t.target.error);r(e)},e.onsuccess=function(e){var r=e.target.result;r?t(r.primaryKey,r.value).next((function(t){t?r.continue():n()})):n()}}))},t.prototype.xt=function(t,e){var n=[];return new $u((function(r,i){t.onerror=function(t){i(t.target.error)},t.onsuccess=function(t){var i=t.target.result;if(i){var o=new ec(i),a=e(i.primaryKey,i.value,o);if(a instanceof $u){var s=a.catch((function(t){return o.done(),$u.reject(t)}));n.push(s)}o.isDone?r():null===o.Dt?i.continue():i.continue(o.Dt)}else r()}})).next((function(){return $u.waitFor(n)}))},t.prototype.options=function(t,e){var n;return void 0!==t&&("string"==typeof t?n=t:e=t),{index:n,range:e}},t.prototype.cursor=function(t){var e="next";if(t.reverse&&(e="prev"),t.index){var n=this.store.index(t.index);return t.Ft?n.openKeyCursor(t.range,e):n.openCursor(t.range,e)}return this.store.openCursor(t.range,e)},t}();function oc(t){return new $u((function(e,n){t.onsuccess=function(t){var n=t.target.result;e(n)},t.onerror=function(t){var e=sc(t.target.error);n(e)}}))}var ac=!1;function sc(t){var e=tc._t((0,a.getUA)());if(e>=12.2&&e<13){var n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){var r=new io("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '"+n+"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.");return ac||(ac=!0,setTimeout((function(){throw r}),0)),r}}return t}var uc=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Mt=e,r.currentSequenceNumber=n,r}return(0,o.__extends)(e,t),e}(Yu);function cc(t,e){var n=po(t);return tc.It(n.Mt,e)}var hc=function(){function t(t,e,n,r){this.batchId=t,this.localWriteTime=e,this.baseMutations=n,this.mutations=r}return t.prototype.applyToRemoteDocument=function(t,e){for(var n=e.mutationResults,r=0;r<this.mutations.length;r++){var i=this.mutations[r];i.key.isEqual(t.key)&&us(i,t,n[r])}},t.prototype.applyToLocalView=function(t){for(var e=0,n=this.baseMutations;e<n.length;e++)(o=n[e]).key.isEqual(t.key)&&cs(o,t,this.localWriteTime);for(var r=0,i=this.mutations;r<i.length;r++){var o;(o=i[r]).key.isEqual(t.key)&&cs(o,t,this.localWriteTime)}},t.prototype.applyToLocalDocumentSet=function(t){var e=this;this.mutations.forEach((function(n){var r=t.get(n.key),i=r;e.applyToLocalView(i),r.isValidDocument()||i.convertToNoDocument(_o.min())}))},t.prototype.keys=function(){return this.mutations.reduce((function(t,e){return t.add(e.key)}),Fs())},t.prototype.isEqual=function(t){return this.batchId===t.batchId&&yo(this.mutations,t.mutations,(function(t,e){return ls(t,e)}))&&yo(this.baseMutations,t.baseMutations,(function(t,e){return ls(t,e)}))},t}(),lc=function(){function t(t,e,n,r){this.batch=t,this.commitVersion=e,this.mutationResults=n,this.docVersions=r}return t.from=function(e,n,r){fo(e.mutations.length===r.length);for(var i=Ls(),o=e.mutations,a=0;a<o.length;a++)i=i.insert(o[a].key,r[a].version);return new t(e,n,r,i)},t}(),fc=function(){function t(t,e,n,r,i,o,a){void 0===i&&(i=_o.min()),void 0===o&&(o=_o.min()),void 0===a&&(a=Oo.EMPTY_BYTE_STRING),this.target=t,this.targetId=e,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a}return t.prototype.withSequenceNumber=function(e){return new t(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)},t.prototype.withResumeToken=function(e,n){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e)},t.prototype.withLastLimboFreeSnapshotVersion=function(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)},t}(),pc=function(t){this.Lt=t};function dc(t,e){if(e.document)return lu(t.Lt,e.document,!!e.hasCommittedMutations);if(e.noDocument){var n=Bo.fromSegments(e.noDocument.path),r=bc(e.noDocument.readTime),i=ia.newNoDocument(n,r);return e.hasCommittedMutations?i.setHasCommittedMutations():i}if(e.unknownDocument){var o=Bo.fromSegments(e.unknownDocument.path);return r=bc(e.unknownDocument.version),ia.newUnknownDocument(o,r)}return lo()}function vc(t,e,n){var r=gc(n),i=e.key.path.popLast().toArray();if(e.isFoundDocument()){var o=function(t,e){return{name:iu(t,e.key),fields:e.data.value.mapValue.fields,updateTime:$s(t,e.version.toTimestamp())}}(t.Lt,e),a=e.hasCommittedMutations;return new ju(null,null,o,a,r,i)}if(e.isNoDocument()){var s=e.key.path.toArray(),u=yc(e.version);return a=e.hasCommittedMutations,new ju(null,new Fu(s,u),null,a,r,i)}if(e.isUnknownDocument()){var c=e.key.path.toArray(),h=yc(e.version);return new ju(new Uu(c,h),null,null,!0,r,i)}return lo()}function gc(t){var e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function mc(t){var e=new wo(t[0],t[1]);return _o.fromTimestamp(e)}function yc(t){var e=t.toTimestamp();return new Ru(e.seconds,e.nanoseconds)}function bc(t){var e=new wo(t.seconds,t.nanoseconds);return _o.fromTimestamp(e)}function wc(t,e){for(var n=(e.baseMutations||[]).map((function(e){return pu(t.Lt,e)})),r=0;r<e.mutations.length-1;++r){var i=e.mutations[r];if(r+1<e.mutations.length&&void 0!==e.mutations[r+1].transform){var o=e.mutations[r+1];i.updateTransforms=o.transform.fieldTransforms,e.mutations.splice(r+1,1),++r}}var a=e.mutations.map((function(e){return pu(t.Lt,e)})),s=wo.fromMillis(e.localWriteTimeMs);return new hc(e.batchId,s,n,a)}function _c(t){var e,n,r=bc(t.readTime),i=void 0!==t.lastLimboFreeSnapshotVersion?bc(t.lastLimboFreeSnapshotVersion):_o.min();return void 0!==t.query.documents?(fo(1===(n=t.query).documents.length),e=xa(ka(su(n.documents[0])))):e=function(t){return xa(gu(t))}(t.query),new fc(e,t.targetId,0,t.lastListenSequenceNumber,r,i,Oo.fromBase64String(t.resumeToken))}function Ic(t,e){var n,r=yc(e.snapshotVersion),i=yc(e.lastLimboFreeSnapshotVersion);n=ca(e.target)?du(t.Lt,e.target):vu(t.Lt,e.target);var o=e.resumeToken.toBase64();return new Bu(e.targetId,sa(e.target),r,o,e.sequenceNumber,i,n)}function Tc(t){var e=gu({parent:t.parent,structuredQuery:t.structuredQuery});return"LAST"===t.limitType?La(e,e.limit,"L"):e}var Ec=function(){function t(){}return t.prototype.getBundleMetadata=function(t,e){return Sc(t).get(e).next((function(t){if(t)return{id:(e=t).bundleId,createTime:bc(e.createTime),version:e.version};var e}))},t.prototype.saveBundleMetadata=function(t,e){return Sc(t).put({bundleId:(n=e).id,createTime:yc(eu(n.createTime)),version:n.version});var n},t.prototype.getNamedQuery=function(t,e){return Ac(t).get(e).next((function(t){if(t)return{name:(e=t).name,query:Tc(e.bundledQuery),readTime:bc(e.readTime)};var e}))},t.prototype.saveNamedQuery=function(t,e){return Ac(t).put(function(t){return{name:t.name,readTime:yc(eu(t.readTime)),bundledQuery:t.bundledQuery}}(e))},t}();function Sc(t){return cc(t,zu.store)}function Ac(t){return cc(t,Wu.store)}var kc=function(){function t(){this.Bt=new Nc}return t.prototype.addToCollectionParentIndex=function(t,e){return this.Bt.add(e),$u.resolve()},t.prototype.getCollectionParents=function(t,e){return $u.resolve(this.Bt.getEntries(e))},t}(),Nc=function(){function t(){this.index={}}return t.prototype.add=function(t){var e=t.lastSegment(),n=t.popLast(),r=this.index[e]||new Ns(Ao.comparator),i=!r.has(n);return this.index[e]=r.add(n),i},t.prototype.has=function(t){var e=t.lastSegment(),n=t.popLast(),r=this.index[e];return r&&r.has(n)},t.prototype.getEntries=function(t){return(this.index[t]||new Ns(Ao.comparator)).toArray()},t}(),Cc=function(){function t(){this.qt=new Nc}return t.prototype.addToCollectionParentIndex=function(t,e){var n=this;if(!this.qt.has(e)){var r=e.lastSegment(),i=e.popLast();t.addOnCommittedListener((function(){n.qt.add(e)}));var o={collectionId:r,parent:Nu(i)};return Oc(t).put(o)}return $u.resolve()},t.prototype.getCollectionParents=function(t,e){var n=[],r=IDBKeyRange.bound([e,""],[bo(e),""],!1,!0);return Oc(t).Nt(r).next((function(t){for(var r=0,i=t;r<i.length;r++){var o=i[r];if(o.collectionId!==e)break;n.push(Du(o.parent))}return n}))},t}();function Oc(t){return cc(t,Gu.store)}var Dc={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Rc=function(){function t(t,e,n){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=n}return t.withCacheSize=function(e){return new t(e,t.DEFAULT_COLLECTION_PERCENTILE,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)},t}();function Pc(t,e,n){var r=t.store(Lu.store),i=t.store(Mu.store),o=[],a=IDBKeyRange.only(n.batchId),s=0,u=r.$t({range:a},(function(t,e,n){return s++,n.delete()}));o.push(u.next((function(){fo(1===s)})));for(var c=[],h=0,l=n.mutations;h<l.length;h++){var f=l[h],p=Mu.key(e,f.key.path,n.batchId);o.push(i.delete(p)),c.push(f.key)}return $u.waitFor(o).next((function(){return c}))}function xc(t){if(!t)return 0;var e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw lo();e=t.noDocument}return JSON.stringify(e).length}Rc.DEFAULT_COLLECTION_PERCENTILE=10,Rc.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Rc.DEFAULT=new Rc(41943040,Rc.DEFAULT_COLLECTION_PERCENTILE,Rc.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Rc.DISABLED=new Rc(-1,0,0);var Lc=function(){function t(t,e,n,r){this.userId=t,this.R=e,this.Ut=n,this.referenceDelegate=r,this.Kt={}}return t.Qt=function(e,n,r,i){return fo(""!==e.uid),new t(e.isAuthenticated()?e.uid:"",n,r,i)},t.prototype.checkEmpty=function(t){var e=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Fc(t).$t({index:Lu.userMutationsIndex,range:n},(function(t,n,r){e=!1,r.done()})).next((function(){return e}))},t.prototype.addMutationBatch=function(t,e,n,r){var i=this,o=Uc(t),a=Fc(t);return a.add({}).next((function(s){fo("number"==typeof s);for(var u=new hc(s,e,n,r),c=function(t,e,n){var r=n.baseMutations.map((function(e){return fu(t.Lt,e)})),i=n.mutations.map((function(e){return fu(t.Lt,e)}));return new Lu(e,n.batchId,n.localWriteTime.toMillis(),r,i)}(i.R,i.userId,u),h=[],l=new Ns((function(t,e){return mo(t.canonicalString(),e.canonicalString())})),f=0,p=r;f<p.length;f++){var d=p[f],v=Mu.key(i.userId,d.key.path,s);l=l.add(d.key.path.popLast()),h.push(a.put(c)),h.push(o.put(v,Mu.PLACEHOLDER))}return l.forEach((function(e){h.push(i.Ut.addToCollectionParentIndex(t,e))})),t.addOnCommittedListener((function(){i.Kt[s]=u.keys()})),$u.waitFor(h).next((function(){return u}))}))},t.prototype.lookupMutationBatch=function(t,e){var n=this;return Fc(t).get(e).next((function(t){return t?(fo(t.userId===n.userId),wc(n.R,t)):null}))},t.prototype.jt=function(t,e){var n=this;return this.Kt[e]?$u.resolve(this.Kt[e]):this.lookupMutationBatch(t,e).next((function(t){if(t){var r=t.keys();return n.Kt[e]=r,r}return null}))},t.prototype.getNextMutationBatchAfterBatchId=function(t,e){var n=this,r=e+1,i=IDBKeyRange.lowerBound([this.userId,r]),o=null;return Fc(t).$t({index:Lu.userMutationsIndex,range:i},(function(t,e,i){e.userId===n.userId&&(fo(e.batchId>=r),o=wc(n.R,e)),i.done()})).next((function(){return o}))},t.prototype.getHighestUnacknowledgedBatchId=function(t){var e=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return Fc(t).$t({index:Lu.userMutationsIndex,range:e,reverse:!0},(function(t,e,r){n=e.batchId,r.done()})).next((function(){return n}))},t.prototype.getAllMutationBatches=function(t){var e=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Fc(t).Nt(Lu.userMutationsIndex,n).next((function(t){return t.map((function(t){return wc(e.R,t)}))}))},t.prototype.getAllMutationBatchesAffectingDocumentKey=function(t,e){var n=this,r=Mu.prefixForPath(this.userId,e.path),i=IDBKeyRange.lowerBound(r),o=[];return Uc(t).$t({range:i},(function(r,i,a){var s=r[0],u=r[1],c=r[2],h=Du(u);if(s===n.userId&&e.path.isEqual(h))return Fc(t).get(c).next((function(t){if(!t)throw lo();fo(t.userId===n.userId),o.push(wc(n.R,t))}));a.done()})).next((function(){return o}))},t.prototype.getAllMutationBatchesAffectingDocumentKeys=function(t,e){var n=this,r=new Ns(mo),i=[];return e.forEach((function(e){var o=Mu.prefixForPath(n.userId,e.path),a=IDBKeyRange.lowerBound(o),s=Uc(t).$t({range:a},(function(t,i,o){var a=t[0],s=t[1],u=t[2],c=Du(s);a===n.userId&&e.path.isEqual(c)?r=r.add(u):o.done()}));i.push(s)})),$u.waitFor(i).next((function(){return n.Wt(t,r)}))},t.prototype.getAllMutationBatchesAffectingQuery=function(t,e){var n=this,r=e.path,i=r.length+1,o=Mu.prefixForPath(this.userId,r),a=IDBKeyRange.lowerBound(o),s=new Ns(mo);return Uc(t).$t({range:a},(function(t,e,o){var a=t[0],u=t[1],c=t[2],h=Du(u);a===n.userId&&r.isPrefixOf(h)?h.length===i&&(s=s.add(c)):o.done()})).next((function(){return n.Wt(t,s)}))},t.prototype.Wt=function(t,e){var n=this,r=[],i=[];return e.forEach((function(e){i.push(Fc(t).get(e).next((function(t){if(null===t)throw lo();fo(t.userId===n.userId),r.push(wc(n.R,t))})))})),$u.waitFor(i).next((function(){return r}))},t.prototype.removeMutationBatch=function(t,e){var n=this;return Pc(t.Mt,this.userId,e).next((function(r){return t.addOnCommittedListener((function(){n.Gt(e.batchId)})),$u.forEach(r,(function(e){return n.referenceDelegate.markPotentiallyOrphaned(t,e)}))}))},t.prototype.Gt=function(t){delete this.Kt[t]},t.prototype.performConsistencyCheck=function(t){var e=this;return this.checkEmpty(t).next((function(n){if(!n)return $u.resolve();var r=IDBKeyRange.lowerBound(Mu.prefixForUser(e.userId)),i=[];return Uc(t).$t({range:r},(function(t,n,r){if(t[0]===e.userId){var o=Du(t[1]);i.push(o)}else r.done()})).next((function(){fo(0===i.length)}))}))},t.prototype.containsKey=function(t,e){return Mc(t,this.userId,e)},t.prototype.zt=function(t){var e=this;return jc(t).get(this.userId).next((function(t){return t||new xu(e.userId,-1,"")}))},t}();function Mc(t,e,n){var r=Mu.prefixForPath(e,n.path),i=r[1],o=IDBKeyRange.lowerBound(r),a=!1;return Uc(t).$t({range:o,Ft:!0},(function(t,n,r){var o=t[0],s=t[1];t[2],o===e&&s===i&&(a=!0),r.done()})).next((function(){return a}))}function Fc(t){return cc(t,Lu.store)}function Uc(t){return cc(t,Mu.store)}function jc(t){return cc(t,xu.store)}var Vc=function(){function t(t){this.Ht=t}return t.prototype.next=function(){return this.Ht+=2,this.Ht},t.Jt=function(){return new t(0)},t.Yt=function(){return new t(-1)},t}(),Bc=function(){function t(t,e){this.referenceDelegate=t,this.R=e}return t.prototype.allocateTargetId=function(t){var e=this;return this.Xt(t).next((function(n){var r=new Vc(n.highestTargetId);return n.highestTargetId=r.next(),e.Zt(t,n).next((function(){return n.highestTargetId}))}))},t.prototype.getLastRemoteSnapshotVersion=function(t){return this.Xt(t).next((function(t){return _o.fromTimestamp(new wo(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))}))},t.prototype.getHighestSequenceNumber=function(t){return this.Xt(t).next((function(t){return t.highestListenSequenceNumber}))},t.prototype.setTargetsMetadata=function(t,e,n){var r=this;return this.Xt(t).next((function(i){return i.highestListenSequenceNumber=e,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),e>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=e),r.Zt(t,i)}))},t.prototype.addTargetData=function(t,e){var n=this;return this.te(t,e).next((function(){return n.Xt(t).next((function(r){return r.targetCount+=1,n.ee(e,r),n.Zt(t,r)}))}))},t.prototype.updateTargetData=function(t,e){return this.te(t,e)},t.prototype.removeTargetData=function(t,e){var n=this;return this.removeMatchingKeysForTargetId(t,e.targetId).next((function(){return qc(t).delete(e.targetId)})).next((function(){return n.Xt(t)})).next((function(e){return fo(e.targetCount>0),e.targetCount-=1,n.Zt(t,e)}))},t.prototype.removeTargets=function(t,e,n){var r=this,i=0,o=[];return qc(t).$t((function(a,s){var u=_c(s);u.sequenceNumber<=e&&null===n.get(u.targetId)&&(i++,o.push(r.removeTargetData(t,u)))})).next((function(){return $u.waitFor(o)})).next((function(){return i}))},t.prototype.forEachTarget=function(t,e){return qc(t).$t((function(t,n){var r=_c(n);e(r)}))},t.prototype.Xt=function(t){return Kc(t).get(Ku.key).next((function(t){return fo(null!==t),t}))},t.prototype.Zt=function(t,e){return Kc(t).put(Ku.key,e)},t.prototype.te=function(t,e){return qc(t).put(Ic(this.R,e))},t.prototype.ee=function(t,e){var n=!1;return t.targetId>e.highestTargetId&&(e.highestTargetId=t.targetId,n=!0),t.sequenceNumber>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=t.sequenceNumber,n=!0),n},t.prototype.getTargetCount=function(t){return this.Xt(t).next((function(t){return t.targetCount}))},t.prototype.getTargetData=function(t,e){var n=sa(e),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return qc(t).$t({range:r,index:Bu.queryTargetsIndexName},(function(t,n,r){var o=_c(n);ua(e,o.target)&&(i=o,r.done())})).next((function(){return i}))},t.prototype.addMatchingKeys=function(t,e,n){var r=this,i=[],o=Gc(t);return e.forEach((function(e){var a=Nu(e.path);i.push(o.put(new qu(n,a))),i.push(r.referenceDelegate.addReference(t,n,e))})),$u.waitFor(i)},t.prototype.removeMatchingKeys=function(t,e,n){var r=this,i=Gc(t);return $u.forEach(e,(function(e){var o=Nu(e.path);return $u.waitFor([i.delete([n,o]),r.referenceDelegate.removeReference(t,n,e)])}))},t.prototype.removeMatchingKeysForTargetId=function(t,e){var n=Gc(t),r=IDBKeyRange.bound([e],[e+1],!1,!0);return n.delete(r)},t.prototype.getMatchingKeysForTargetId=function(t,e){var n=IDBKeyRange.bound([e],[e+1],!1,!0),r=Gc(t),i=Fs();return r.$t({range:n,Ft:!0},(function(t,e,n){var r=Du(t[1]),o=new Bo(r);i=i.add(o)})).next((function(){return i}))},t.prototype.containsKey=function(t,e){var n=Nu(e.path),r=IDBKeyRange.bound([n],[bo(n)],!1,!0),i=0;return Gc(t).$t({index:qu.documentTargetsIndex,Ft:!0,range:r},(function(t,e,n){var r=t[0];t[1],0!==r&&(i++,n.done())})).next((function(){return i>0}))},t.prototype.lt=function(t,e){return qc(t).get(e).next((function(t){return t?_c(t):null}))},t}();function qc(t){return cc(t,Bu.store)}function Kc(t){return cc(t,Ku.store)}function Gc(t){return cc(t,qu.store)}function Hc(t){return(0,o.__awaiter)(this,void 0,void 0,(function(){return(0,o.__generator)(this,(function(e){if(t.code!==ro.FAILED_PRECONDITION||t.message!==Qu)throw t;return so("LocalStore","Unexpectedly lost primary lease"),[2]}))}))}function zc(t,e){var n=t[0],r=t[1],i=e[0],o=e[1],a=mo(n,i);return 0===a?mo(r,o):a}var Wc=function(){function t(t){this.ne=t,this.buffer=new Ns(zc),this.se=0}return t.prototype.ie=function(){return++this.se},t.prototype.re=function(t){var e=[t,this.ie()];if(this.buffer.size<this.ne)this.buffer=this.buffer.add(e);else{var n=this.buffer.last();zc(e,n)<0&&(this.buffer=this.buffer.delete(n).add(e))}},Object.defineProperty(t.prototype,"maxValue",{get:function(){return this.buffer.last()[0]},enumerable:!1,configurable:!0}),t}(),Xc=function(){function t(t,e){this.garbageCollector=t,this.asyncQueue=e,this.oe=!1,this.ce=null}return t.prototype.start=function(t){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.ue(t)},t.prototype.stop=function(){this.ce&&(this.ce.cancel(),this.ce=null)},Object.defineProperty(t.prototype,"started",{get:function(){return null!==this.ce},enumerable:!1,configurable:!0}),t.prototype.ue=function(t){var e=this,n=this.oe?3e5:6e4;so("LruGarbageCollector","Garbage collection scheduled in "+n+"ms"),this.ce=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",n,(function(){return(0,o.__awaiter)(e,void 0,void 0,(function(){var e;return(0,o.__generator)(this,(function(n){switch(n.label){case 0:this.ce=null,this.oe=!0,n.label=1;case 1:return n.trys.push([1,3,,7]),[4,t.collectGarbage(this.garbageCollector)];case 2:return n.sent(),[3,7];case 3:return rc(e=n.sent())?(so("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e),[3,6]):[3,4];case 4:return[4,Hc(e)];case 5:n.sent(),n.label=6;case 6:return[3,7];case 7:return[4,this.ue(t)];case 8:return n.sent(),[2]}}))}))}))},t}(),Qc=function(){function t(t,e){this.ae=t,this.params=e}return t.prototype.calculateTargetCount=function(t,e){return this.ae.he(t).next((function(t){return Math.floor(e/100*t)}))},t.prototype.nthSequenceNumber=function(t,e){var n=this;if(0===e)return $u.resolve(no.o);var r=new Wc(e);return this.ae.forEachTarget(t,(function(t){return r.re(t.sequenceNumber)})).next((function(){return n.ae.le(t,(function(t){return r.re(t)}))})).next((function(){return r.maxValue}))},t.prototype.removeTargets=function(t,e,n){return this.ae.removeTargets(t,e,n)},t.prototype.removeOrphanedDocuments=function(t,e){return this.ae.removeOrphanedDocuments(t,e)},t.prototype.collect=function(t,e){var n=this;return-1===this.params.cacheSizeCollectionThreshold?(so("LruGarbageCollector","Garbage collection skipped; disabled"),$u.resolve(Dc)):this.getCacheSize(t).next((function(r){return r<n.params.cacheSizeCollectionThreshold?(so("LruGarbageCollector","Garbage collection skipped; Cache size "+r+" is lower than threshold "+n.params.cacheSizeCollectionThreshold),Dc):n.fe(t,e)}))},t.prototype.getCacheSize=function(t){return this.ae.getCacheSize(t)},t.prototype.fe=function(t,e){var n,r,i,o,a,s,u,c=this,h=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next((function(e){return e>c.params.maximumSequenceNumbersToCollect?(so("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of "+c.params.maximumSequenceNumbersToCollect+" from "+e),r=c.params.maximumSequenceNumbersToCollect):r=e,o=Date.now(),c.nthSequenceNumber(t,r)})).next((function(r){return n=r,a=Date.now(),c.removeTargets(t,n,e)})).next((function(e){return i=e,s=Date.now(),c.removeOrphanedDocuments(t,n)})).next((function(t){return u=Date.now(),ao()<=jt.LogLevel.DEBUG&&so("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in "+(o-h)+"ms\n\tDetermined least recently used "+r+" in "+(a-o)+"ms\n\tRemoved "+i+" targets in "+(s-a)+"ms\n\tRemoved "+t+" documents in "+(u-s)+"ms\nTotal Duration: "+(u-h)+"ms"),$u.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:t})}))},t}(),Yc=function(){function t(t,e){this.db=t,this.garbageCollector=function(t,e){return new Qc(t,e)}(this,e)}return t.prototype.he=function(t){var e=this.de(t);return this.db.getTargetCache().getTargetCount(t).next((function(t){return e.next((function(e){return t+e}))}))},t.prototype.de=function(t){var e=0;return this.le(t,(function(t){e++})).next((function(){return e}))},t.prototype.forEachTarget=function(t,e){return this.db.getTargetCache().forEachTarget(t,e)},t.prototype.le=function(t,e){return this.we(t,(function(t,n){return e(n)}))},t.prototype.addReference=function(t,e,n){return Jc(t,n)},t.prototype.removeReference=function(t,e,n){return Jc(t,n)},t.prototype.removeTargets=function(t,e,n){return this.db.getTargetCache().removeTargets(t,e,n)},t.prototype.markPotentiallyOrphaned=function(t,e){return Jc(t,e)},t.prototype._e=function(t,e){return function(t,e){var n=!1;return jc(t).Ot((function(r){return Mc(t,r,e).next((function(t){return t&&(n=!0),$u.resolve(!t)}))})).next((function(){return n}))}(t,e)},t.prototype.removeOrphanedDocuments=function(t,e){var n=this,r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],o=0;return this.we(t,(function(a,s){if(s<=e){var u=n._e(t,a).next((function(e){if(!e)return o++,r.getEntry(t,a).next((function(){return r.removeEntry(a),Gc(t).delete([0,Nu(a.path)])}))}));i.push(u)}})).next((function(){return $u.waitFor(i)})).next((function(){return r.apply(t)})).next((function(){return o}))},t.prototype.removeTarget=function(t,e){var n=e.withSequenceNumber(t.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(t,n)},t.prototype.updateLimboDocument=function(t,e){return Jc(t,e)},t.prototype.we=function(t,e){var n,r=Gc(t),i=no.o;return r.$t({index:qu.documentTargetsIndex},(function(t,r){var o=t[0];t[1];var a=r.path,s=r.sequenceNumber;0===o?(i!==no.o&&e(new Bo(Du(n)),i),i=s,n=a):i=no.o})).next((function(){i!==no.o&&e(new Bo(Du(n)),i)}))},t.prototype.getCacheSize=function(t){return this.db.getRemoteDocumentCache().getSize(t)},t}();function Jc(t,e){return Gc(t).put(function(t,e){return new qu(0,Nu(t.path),e)}(e,t.currentSequenceNumber))}var $c=function(){function t(t,e){this.mapKeyFn=t,this.equalsFn=e,this.inner={}}return t.prototype.get=function(t){var e=this.mapKeyFn(t),n=this.inner[e];if(void 0!==n)for(var r=0,i=n;r<i.length;r++){var o=i[r],a=o[0],s=o[1];if(this.equalsFn(a,t))return s}},t.prototype.has=function(t){return void 0!==this.get(t)},t.prototype.set=function(t,e){var n=this.mapKeyFn(t),r=this.inner[n];if(void 0!==r){for(var i=0;i<r.length;i++)if(this.equalsFn(r[i][0],t))return void(r[i]=[t,e]);r.push([t,e])}else this.inner[n]=[[t,e]]},t.prototype.delete=function(t){var e=this.mapKeyFn(t),n=this.inner[e];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.equalsFn(n[r][0],t))return 1===n.length?delete this.inner[e]:n.splice(r,1),!0;return!1},t.prototype.forEach=function(t){To(this.inner,(function(e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r],a=o[0],s=o[1];t(a,s)}}))},t.prototype.isEmpty=function(){return Eo(this.inner)},t}(),Zc=function(){function t(){this.changes=new $c((function(t){return t.toString()}),(function(t,e){return t.isEqual(e)})),this.changesApplied=!1}return t.prototype.getReadTime=function(t){var e=this.changes.get(t);return e?e.readTime:_o.min()},t.prototype.addEntry=function(t,e){this.assertNotApplied(),this.changes.set(t.key,{document:t,readTime:e})},t.prototype.removeEntry=function(t,e){void 0===e&&(e=null),this.assertNotApplied(),this.changes.set(t,{document:ia.newInvalidDocument(t),readTime:e})},t.prototype.getEntry=function(t,e){this.assertNotApplied();var n=this.changes.get(e);return void 0!==n?$u.resolve(n.document):this.getFromCache(t,e)},t.prototype.getEntries=function(t,e){return this.getAllFromCache(t,e)},t.prototype.apply=function(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)},t.prototype.assertNotApplied=function(){},t}(),th=function(){function t(t,e){this.R=t,this.Ut=e}return t.prototype.addEntry=function(t,e,n){return rh(t).put(ih(e),n)},t.prototype.removeEntry=function(t,e){var n=rh(t),r=ih(e);return n.delete(r)},t.prototype.updateMetadata=function(t,e){var n=this;return this.getMetadata(t).next((function(r){return r.byteSize+=e,n.me(t,r)}))},t.prototype.getEntry=function(t,e){var n=this;return rh(t).get(ih(e)).next((function(t){return n.ye(e,t)}))},t.prototype.ge=function(t,e){var n=this;return rh(t).get(ih(e)).next((function(t){return{document:n.ye(e,t),size:xc(t)}}))},t.prototype.getEntries=function(t,e){var n=this,r=Ds();return this.pe(t,e,(function(t,e){var i=n.ye(t,e);r=r.insert(t,i)})).next((function(){return r}))},t.prototype.Ee=function(t,e){var n=this,r=Ds(),i=new Ss(Bo.comparator);return this.pe(t,e,(function(t,e){var o=n.ye(t,e);r=r.insert(t,o),i=i.insert(t,xc(e))})).next((function(){return{documents:r,Te:i}}))},t.prototype.pe=function(t,e,n){if(e.isEmpty())return $u.resolve();var r=IDBKeyRange.bound(e.first().path.toArray(),e.last().path.toArray()),i=e.getIterator(),o=i.getNext();return rh(t).$t({range:r},(function(t,e,r){for(var a=Bo.fromSegments(t);o&&Bo.comparator(o,a)<0;)n(o,null),o=i.getNext();o&&o.isEqual(a)&&(n(o,e),o=i.hasNext()?i.getNext():null),o?r.Ct(o.path.toArray()):r.done()})).next((function(){for(;o;)n(o,null),o=i.hasNext()?i.getNext():null}))},t.prototype.getDocumentsMatchingQuery=function(t,e,n){var r=this,i=Ds(),o=e.path.length+1,a={};if(n.isEqual(_o.min())){var s=e.path.toArray();a.range=IDBKeyRange.lowerBound(s)}else{var u=e.path.toArray(),c=gc(n);a.range=IDBKeyRange.lowerBound([u,c],!0),a.index=ju.collectionReadTimeIndex}return rh(t).$t(a,(function(t,n,a){if(t.length===o){var s=dc(r.R,n);e.path.isPrefixOf(s.key.path)?ja(e,s)&&(i=i.insert(s.key,s)):a.done()}})).next((function(){return i}))},t.prototype.newChangeBuffer=function(t){return new eh(this,!!t&&t.trackRemovals)},t.prototype.getSize=function(t){return this.getMetadata(t).next((function(t){return t.byteSize}))},t.prototype.getMetadata=function(t){return nh(t).get(Vu.key).next((function(t){return fo(!!t),t}))},t.prototype.me=function(t,e){return nh(t).put(Vu.key,e)},t.prototype.ye=function(t,e){if(e){var n=dc(this.R,e);if(!n.isNoDocument()||!n.version.isEqual(_o.min()))return n}return ia.newInvalidDocument(t)},t}(),eh=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Ie=e,r.trackRemovals=n,r.Ae=new $c((function(t){return t.toString()}),(function(t,e){return t.isEqual(e)})),r}return(0,o.__extends)(e,t),e.prototype.applyChanges=function(t){var e=this,n=[],r=0,i=new Ns((function(t,e){return mo(t.canonicalString(),e.canonicalString())}));return this.changes.forEach((function(o,a){var s=e.Ae.get(o);if(a.document.isValidDocument()){var u=vc(e.Ie.R,a.document,e.getReadTime(o));i=i.add(o.path.popLast());var c=xc(u);r+=c-s,n.push(e.Ie.addEntry(t,o,u))}else if(r-=s,e.trackRemovals){var h=vc(e.Ie.R,ia.newNoDocument(o,_o.min()),e.getReadTime(o));n.push(e.Ie.addEntry(t,o,h))}else n.push(e.Ie.removeEntry(t,o))})),i.forEach((function(r){n.push(e.Ie.Ut.addToCollectionParentIndex(t,r))})),n.push(this.Ie.updateMetadata(t,r)),$u.waitFor(n)},e.prototype.getFromCache=function(t,e){var n=this;return this.Ie.ge(t,e).next((function(t){return n.Ae.set(e,t.size),t.document}))},e.prototype.getAllFromCache=function(t,e){var n=this;return this.Ie.Ee(t,e).next((function(t){var e=t.documents;return t.Te.forEach((function(t,e){n.Ae.set(t,e)})),e}))},e}(Zc);function nh(t){return cc(t,Vu.store)}function rh(t){return cc(t,ju.store)}function ih(t){return t.path.toArray()}var oh=function(){function t(t){this.R=t}return t.prototype.Rt=function(t,e,n,r){var i=this;fo(n<r&&n>=0&&r<=11);var o=new Zu("createOrUpgrade",e);n<1&&r>=1&&(function(t){t.createObjectStore(Pu.store)}(t),function(t){t.createObjectStore(xu.store,{keyPath:xu.keyPath}),t.createObjectStore(Lu.store,{keyPath:Lu.keyPath,autoIncrement:!0}).createIndex(Lu.userMutationsIndex,Lu.userMutationsKeyPath,{unique:!0}),t.createObjectStore(Mu.store)}(t),ah(t),function(t){t.createObjectStore(ju.store)}(t));var a=$u.resolve();return n<3&&r>=3&&(0!==n&&(function(t){t.deleteObjectStore(qu.store),t.deleteObjectStore(Bu.store),t.deleteObjectStore(Ku.store)}(t),ah(t)),a=a.next((function(){return function(t){var e=t.store(Ku.store),n=new Ku(0,0,_o.min().toTimestamp(),0);return e.put(Ku.key,n)}(o)}))),n<4&&r>=4&&(0!==n&&(a=a.next((function(){return function(t,e){return e.store(Lu.store).Nt().next((function(n){t.deleteObjectStore(Lu.store),t.createObjectStore(Lu.store,{keyPath:Lu.keyPath,autoIncrement:!0}).createIndex(Lu.userMutationsIndex,Lu.userMutationsKeyPath,{unique:!0});var r=e.store(Lu.store),i=n.map((function(t){return r.put(t)}));return $u.waitFor(i)}))}(t,o)}))),a=a.next((function(){!function(t){t.createObjectStore(Hu.store,{keyPath:Hu.keyPath})}(t)}))),n<5&&r>=5&&(a=a.next((function(){return i.Re(o)}))),n<6&&r>=6&&(a=a.next((function(){return function(t){t.createObjectStore(Vu.store)}(t),i.be(o)}))),n<7&&r>=7&&(a=a.next((function(){return i.ve(o)}))),n<8&&r>=8&&(a=a.next((function(){return i.Pe(t,o)}))),n<9&&r>=9&&(a=a.next((function(){!function(t){t.objectStoreNames.contains("remoteDocumentChanges")&&t.deleteObjectStore("remoteDocumentChanges")}(t),function(t){var e=t.objectStore(ju.store);e.createIndex(ju.readTimeIndex,ju.readTimeIndexPath,{unique:!1}),e.createIndex(ju.collectionReadTimeIndex,ju.collectionReadTimeIndexPath,{unique:!1})}(e)}))),n<10&&r>=10&&(a=a.next((function(){return i.Ve(o)}))),n<11&&r>=11&&(a=a.next((function(){!function(t){t.createObjectStore(zu.store,{keyPath:zu.keyPath})}(t),function(t){t.createObjectStore(Wu.store,{keyPath:Wu.keyPath})}(t)}))),a},t.prototype.be=function(t){var e=0;return t.store(ju.store).$t((function(t,n){e+=xc(n)})).next((function(){var n=new Vu(e);return t.store(Vu.store).put(Vu.key,n)}))},t.prototype.Re=function(t){var e=this,n=t.store(xu.store),r=t.store(Lu.store);return n.Nt().next((function(n){return $u.forEach(n,(function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.Nt(Lu.userMutationsIndex,i).next((function(r){return $u.forEach(r,(function(r){fo(r.userId===n.userId);var i=wc(e.R,r);return Pc(t,n.userId,i).next((function(){}))}))}))}))}))},t.prototype.ve=function(t){var e=t.store(qu.store),n=t.store(ju.store);return t.store(Ku.store).get(Ku.key).next((function(t){var r=[];return n.$t((function(n,i){var o=new Ao(n),a=function(t){return[0,Nu(t)]}(o);r.push(e.get(a).next((function(n){return n?$u.resolve():function(n){return e.put(new qu(0,Nu(n),t.highestListenSequenceNumber))}(o)})))})).next((function(){return $u.waitFor(r)}))}))},t.prototype.Pe=function(t,e){t.createObjectStore(Gu.store,{keyPath:Gu.keyPath});var n=e.store(Gu.store),r=new Nc,i=function(t){if(r.add(t)){var e=t.lastSegment(),i=t.popLast();return n.put({collectionId:e,parent:Nu(i)})}};return e.store(ju.store).$t({Ft:!0},(function(t,e){var n=new Ao(t);return i(n.popLast())})).next((function(){return e.store(Mu.store).$t({Ft:!0},(function(t,e){t[0];var n=t[1];t[2];var r=Du(n);return i(r.popLast())}))}))},t.prototype.Ve=function(t){var e=this,n=t.store(Bu.store);return n.$t((function(t,r){var i=_c(r),o=Ic(e.R,i);return n.put(o)}))},t}();function ah(t){t.createObjectStore(qu.store,{keyPath:qu.keyPath}).createIndex(qu.documentTargetsIndex,qu.documentTargetsKeyPath,{unique:!0}),t.createObjectStore(Bu.store,{keyPath:Bu.keyPath}).createIndex(Bu.queryTargetsIndexName,Bu.queryTargetsKeyPath,{unique:!0}),t.createObjectStore(Ku.store)}var sh="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",uh=function(){function t(e,n,r,i,o,a,s,u,c,h){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.Se=o,this.window=a,this.document=s,this.De=c,this.Ce=h,this.Ne=null,this.xe=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ke=null,this.inForeground=!1,this.Fe=null,this.$e=null,this.Oe=Number.NEGATIVE_INFINITY,this.Me=function(t){return Promise.resolve()},!t.yt())throw new io(ro.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Yc(this,i),this.Le=n+"main",this.R=new pc(u),this.Be=new tc(this.Le,11,new oh(this.R)),this.qe=new Bc(this.referenceDelegate,this.R),this.Ut=new Cc,this.Ue=function(t,e){return new th(t,e)}(this.R,this.Ut),this.Ke=new Ec,this.window&&this.window.localStorage?this.Qe=this.window.localStorage:(this.Qe=null,!1===h&&uo("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return t.prototype.start=function(){var t=this;return this.je().then((function(){if(!t.isPrimary&&!t.allowTabSynchronization)throw new io(ro.FAILED_PRECONDITION,sh);return t.We(),t.Ge(),t.ze(),t.runTransaction("getHighestListenSequenceNumber","readonly",(function(e){return t.qe.getHighestSequenceNumber(e)}))})).then((function(e){t.Ne=new no(e,t.De)})).then((function(){t.xe=!0})).catch((function(e){return t.Be&&t.Be.close(),Promise.reject(e)}))},t.prototype.He=function(t){var e=this;return this.Me=function(n){return(0,o.__awaiter)(e,void 0,void 0,(function(){return(0,o.__generator)(this,(function(e){return this.started?[2,t(n)]:[2]}))}))},t(this.isPrimary)},t.prototype.setDatabaseDeletedListener=function(t){var e=this;this.Be.vt((function(n){return(0,o.__awaiter)(e,void 0,void 0,(function(){return(0,o.__generator)(this,(function(e){switch(e.label){case 0:return null===n.newVersion?[4,t()]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))}))}))},t.prototype.setNetworkEnabled=function(t){var e=this;this.networkEnabled!==t&&(this.networkEnabled=t,this.Se.enqueueAndForget((function(){return(0,o.__awaiter)(e,void 0,void 0,(function(){return(0,o.__generator)(this,(function(t){switch(t.label){case 0:return this.started?[4,this.je()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))})))},t.prototype.je=function(){var t=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(function(e){return hh(e).put(new Hu(t.clientId,Date.now(),t.networkEnabled,t.inForeground)).next((function(){if(t.isPrimary)return t.Je(e).next((function(e){e||(t.isPrimary=!1,t.Se.enqueueRetryable((function(){return t.Me(!1)})))}))})).next((function(){return t.Ye(e)})).next((function(n){return t.isPrimary&&!n?t.Xe(e).next((function(){return!1})):!!n&&t.Ze(e).next((function(){return!0}))}))})).catch((function(e){if(rc(e))return so("IndexedDbPersistence","Failed to extend owner lease: ",e),t.isPrimary;if(!t.allowTabSynchronization)throw e;return so("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1})).then((function(e){t.isPrimary!==e&&t.Se.enqueueRetryable((function(){return t.Me(e)})),t.isPrimary=e}))},t.prototype.Je=function(t){var e=this;return ch(t).get(Pu.key).next((function(t){return $u.resolve(e.tn(t))}))},t.prototype.en=function(t){return hh(t).delete(this.clientId)},t.prototype.nn=function(){return(0,o.__awaiter)(this,void 0,void 0,(function(){var t,e,n,r,i=this;return(0,o.__generator)(this,(function(o){switch(o.label){case 0:return!this.isPrimary||this.sn(this.Oe,18e5)?[3,2]:(this.Oe=Date.now(),[4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(function(t){var e=cc(t,Hu.store);return e.Nt().next((function(t){var n=i.rn(t,18e5),r=t.filter((function(t){return-1===n.indexOf(t)}));return $u.forEach(r,(function(t){return e.delete(t.clientId)})).next((function(){return r}))}))})).catch((function(){return[]}))]);case 1:if(t=o.sent(),this.Qe)for(e=0,n=t;e<n.length;e++)r=n[e],this.Qe.removeItem(this.on(r.clientId));o.label=2;case 2:return[2]}}))}))},t.prototype.ze=function(){var t=this;this.$e=this.Se.enqueueAfterDelay("client_metadata_refresh",4e3,(function(){return t.je().then((function(){return t.nn()})).then((function(){return t.ze()}))}))},t.prototype.tn=function(t){return!!t&&t.ownerId===this.clientId},t.prototype.Ye=function(t){var e=this;return this.Ce?$u.resolve(!0):ch(t).get(Pu.key).next((function(n){if(null!==n&&e.sn(n.leaseTimestampMs,5e3)&&!e.cn(n.ownerId)){if(e.tn(n)&&e.networkEnabled)return!0;if(!e.tn(n)){if(!n.allowTabSynchronization)throw new io(ro.FAILED_PRECONDITION,sh);return!1}}return!(!e.networkEnabled||!e.inForeground)||hh(t).Nt().next((function(t){return void 0===e.rn(t,5e3).find((function(t){if(e.clientId!==t.clientId){var n=!e.networkEnabled&&t.networkEnabled,r=!e.inForeground&&t.inForeground,i=e.networkEnabled===t.networkEnabled;if(n||r&&i)return!0}return!1}))}))})).next((function(t){return e.isPrimary!==t&&so("IndexedDbPersistence","Client "+(t?"is":"is not")+" eligible for a primary lease."),t}))},t.prototype.shutdown=function(){return(0,o.__awaiter)(this,void 0,void 0,(function(){var t=this;return(0,o.__generator)(this,(function(e){switch(e.label){case 0:return this.xe=!1,this.un(),this.$e&&(this.$e.cancel(),this.$e=null),this.an(),this.hn(),[4,this.Be.runTransaction("shutdown","readwrite",[Pu.store,Hu.store],(function(e){var n=new uc(e,no.o);return t.Xe(n).next((function(){return t.en(n)}))}))];case 1:return e.sent(),this.Be.close(),this.ln(),[2]}}))}))},t.prototype.rn=function(t,e){var n=this;return t.filter((function(t){return n.sn(t.updateTimeMs,e)&&!n.cn(t.clientId)}))},t.prototype.fn=function(){var t=this;return this.runTransaction("getActiveClients","readonly",(function(e){return hh(e).Nt().next((function(e){return t.rn(e,18e5).map((function(t){return t.clientId}))}))}))},Object.defineProperty(t.prototype,"started",{get:function(){return this.xe},enumerable:!1,configurable:!0}),t.prototype.getMutationQueue=function(t){return Lc.Qt(t,this.R,this.Ut,this.referenceDelegate)},t.prototype.getTargetCache=function(){return this.qe},t.prototype.getRemoteDocumentCache=function(){return this.Ue},t.prototype.getIndexManager=function(){return this.Ut},t.prototype.getBundleCache=function(){return this.Ke},t.prototype.runTransaction=function(t,e,n){var r=this;so("IndexedDbPersistence","Starting transaction:",t);var i,o="readonly"===e?"readonly":"readwrite";return this.Be.runTransaction(t,o,Xu,(function(o){return i=new uc(o,r.Ne?r.Ne.next():no.o),"readwrite-primary"===e?r.Je(i).next((function(t){return!!t||r.Ye(i)})).next((function(e){if(!e)throw uo("Failed to obtain primary lease for action '"+t+"'."),r.isPrimary=!1,r.Se.enqueueRetryable((function(){return r.Me(!1)})),new io(ro.FAILED_PRECONDITION,Qu);return n(i)})).next((function(t){return r.Ze(i).next((function(){return t}))})):r.dn(i).next((function(){return n(i)}))})).then((function(t){return i.raiseOnCommittedEvent(),t}))},t.prototype.dn=function(t){var e=this;return ch(t).get(Pu.key).next((function(t){if(null!==t&&e.sn(t.leaseTimestampMs,5e3)&&!e.cn(t.ownerId)&&!e.tn(t)&&!(e.Ce||e.allowTabSynchronization&&t.allowTabSynchronization))throw new io(ro.FAILED_PRECONDITION,sh)}))},t.prototype.Ze=function(t){var e=new Pu(this.clientId,this.allowTabSynchronization,Date.now());return ch(t).put(Pu.key,e)},t.yt=function(){return tc.yt()},t.prototype.Xe=function(t){var e=this,n=ch(t);return n.get(Pu.key).next((function(t){return e.tn(t)?(so("IndexedDbPersistence","Releasing primary lease."),n.delete(Pu.key)):$u.resolve()}))},t.prototype.sn=function(t,e){var n=Date.now();return!(t<n-e||t>n&&(uo("Detected an update time that is in the future: "+t+" > "+n),1))},t.prototype.We=function(){var t=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.Fe=function(){t.Se.enqueueAndForget((function(){return t.inForeground="visible"===t.document.visibilityState,t.je()}))},this.document.addEventListener("visibilitychange",this.Fe),this.inForeground="visible"===this.document.visibilityState)},t.prototype.an=function(){this.Fe&&(this.document.removeEventListener("visibilitychange",this.Fe),this.Fe=null)},t.prototype.Ge=function(){var t,e=this;"function"==typeof(null===(t=this.window)||void 0===t?void 0:t.addEventListener)&&(this.ke=function(){e.un(),(0,a.isSafari)()&&navigator.appVersion.match("Version/14")&&e.Se.enterRestrictedMode(!0),e.Se.enqueueAndForget((function(){return e.shutdown()}))},this.window.addEventListener("pagehide",this.ke))},t.prototype.hn=function(){this.ke&&(this.window.removeEventListener("pagehide",this.ke),this.ke=null)},t.prototype.cn=function(t){var e;try{var n=null!==(null===(e=this.Qe)||void 0===e?void 0:e.getItem(this.on(t)));return so("IndexedDbPersistence","Client '"+t+"' "+(n?"is":"is not")+" zombied in LocalStorage"),n}catch(t){return uo("IndexedDbPersistence","Failed to get zombied client id.",t),!1}},t.prototype.un=function(){if(this.Qe)try{this.Qe.setItem(this.on(this.clientId),String(Date.now()))}catch(t){uo("Failed to set zombie client id.",t)}},t.prototype.ln=function(){if(this.Qe)try{this.Qe.removeItem(this.on(this.clientId))}catch(t){}},t.prototype.on=function(t){return"firestore_zombie_"+this.persistenceKey+"_"+t},t}();function ch(t){return cc(t,Pu.store)}function hh(t){return cc(t,Hu.store)}function lh(t,e){var n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}var fh=function(t,e){this.progress=t,this.wn=e},ph=function(){function t(t,e,n){this.Ue=t,this._n=e,this.Ut=n}return t.prototype.mn=function(t,e){var n=this;return this._n.getAllMutationBatchesAffectingDocumentKey(t,e).next((function(r){return n.yn(t,e,r)}))},t.prototype.yn=function(t,e,n){return this.Ue.getEntry(t,e).next((function(t){for(var e=0,r=n;e<r.length;e++)r[e].applyToLocalView(t);return t}))},t.prototype.gn=function(t,e){t.forEach((function(t,n){for(var r=0,i=e;r<i.length;r++)i[r].applyToLocalView(n)}))},t.prototype.pn=function(t,e){var n=this;return this.Ue.getEntries(t,e).next((function(e){return n.En(t,e).next((function(){return e}))}))},t.prototype.En=function(t,e){var n=this;return this._n.getAllMutationBatchesAffectingDocumentKeys(t,e).next((function(t){return n.gn(e,t)}))},t.prototype.getDocumentsMatchingQuery=function(t,e,n){return function(t){return Bo.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}(e)?this.Tn(t,e.path):Ra(e)?this.In(t,e,n):this.An(t,e,n)},t.prototype.Tn=function(t,e){return this.mn(t,new Bo(e)).next((function(t){var e=Ps();return t.isFoundDocument()&&(e=e.insert(t.key,t)),e}))},t.prototype.In=function(t,e,n){var r=this,i=e.collectionGroup,o=Ps();return this.Ut.getCollectionParents(t,i).next((function(a){return $u.forEach(a,(function(a){var s=function(t,e){return new Sa(e,null,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(e,a.child(i));return r.An(t,s,n).next((function(t){t.forEach((function(t,e){o=o.insert(t,e)}))}))})).next((function(){return o}))}))},t.prototype.An=function(t,e,n){var r,i,o=this;return this.Ue.getDocumentsMatchingQuery(t,e,n).next((function(n){return r=n,o._n.getAllMutationBatchesAffectingQuery(t,e)})).next((function(e){return i=e,o.Rn(t,i,r).next((function(t){r=t;for(var e=0,n=i;e<n.length;e++)for(var o=n[e],a=0,s=o.mutations;a<s.length;a++){var u=s[a],c=u.key,h=r.get(c);null==h&&(h=ia.newInvalidDocument(c),r=r.insert(c,h)),cs(u,h,o.localWriteTime),h.isFoundDocument()||(r=r.remove(c))}}))})).next((function(){return r.forEach((function(t,n){ja(e,n)||(r=r.remove(t))})),r}))},t.prototype.Rn=function(t,e,n){for(var r=Fs(),i=0,o=e;i<o.length;i++)for(var a=0,s=o[i].mutations;a<s.length;a++){var u=s[a];u instanceof ds&&null===n.get(u.key)&&(r=r.add(u.key))}var c=n;return this.Ue.getEntries(t,r).next((function(t){return t.forEach((function(t,e){e.isFoundDocument()&&(c=c.insert(t,e))})),c}))},t}(),dh=function(){function t(t,e,n,r){this.targetId=t,this.fromCache=e,this.bn=n,this.vn=r}return t.Pn=function(e,n){for(var r=Fs(),i=Fs(),o=0,a=n.docChanges;o<a.length;o++){var s=a[o];switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}}return new t(e,n.fromCache,r,i)},t}(),vh=function(){function t(){}return t.prototype.Vn=function(t){this.Sn=t},t.prototype.getDocumentsMatchingQuery=function(t,e,n,r){var i=this;return function(t){return 0===t.filters.length&&null===t.limit&&null==t.startAt&&null==t.endAt&&(0===t.explicitOrderBy.length||1===t.explicitOrderBy.length&&t.explicitOrderBy[0].field.isKeyField())}(e)||n.isEqual(_o.min())?this.Dn(t,e):this.Sn.pn(t,r).next((function(o){var a=i.Cn(e,o);return(Na(e)||Ca(e))&&i.Nn(e.limitType,a,r,n)?i.Dn(t,e):(ao()<=jt.LogLevel.DEBUG&&so("QueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),Ua(e)),i.Sn.getDocumentsMatchingQuery(t,e,n).next((function(t){return a.forEach((function(e){t=t.insert(e.key,e)})),t})))}))},t.prototype.Cn=function(t,e){var n=new Ns(Va(t));return e.forEach((function(e,r){ja(t,r)&&(n=n.add(r))})),n},t.prototype.Nn=function(t,e,n,r){if(n.size!==e.size)return!0;var i="F"===t?e.last():e.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)},t.prototype.Dn=function(t,e){return ao()<=jt.LogLevel.DEBUG&&so("QueryEngine","Using full collection scan to execute query:",Ua(e)),this.Sn.getDocumentsMatchingQuery(t,e,_o.min())},t}(),gh=function(){function t(t,e,n,r){this.persistence=t,this.xn=e,this.R=r,this.kn=new Ss(mo),this.Fn=new $c((function(t){return sa(t)}),ua),this.$n=_o.min(),this._n=t.getMutationQueue(n),this.On=t.getRemoteDocumentCache(),this.qe=t.getTargetCache(),this.Mn=new ph(this.On,this._n,this.persistence.getIndexManager()),this.Ke=t.getBundleCache(),this.xn.Vn(this.Mn)}return t.prototype.collectGarbage=function(t){var e=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",(function(n){return t.collect(n,e.kn)}))},t}();function mh(t,e,n,r){return new gh(t,e,n,r)}function yh(t,e){return(0,o.__awaiter)(this,void 0,void 0,(function(){var n,r,i,a;return(0,o.__generator)(this,(function(o){switch(o.label){case 0:return n=po(t),r=n._n,i=n.Mn,[4,n.persistence.runTransaction("Handle user change","readonly",(function(t){var o;return n._n.getAllMutationBatches(t).next((function(a){return o=a,r=n.persistence.getMutationQueue(e),i=new ph(n.On,r,n.persistence.getIndexManager()),r.getAllMutationBatches(t)})).next((function(e){for(var n=[],r=[],a=Fs(),s=0,u=o;s<u.length;s++){var c=u[s];n.push(c.batchId);for(var h=0,l=c.mutations;h<l.length;h++){var f=l[h];a=a.add(f.key)}}for(var p=0,d=e;p<d.length;p++){var v=d[p];r.push(v.batchId);for(var g=0,m=v.mutations;g<m.length;g++){var y=m[g];a=a.add(y.key)}}return i.pn(t,a).next((function(t){return{Ln:t,removedBatchIds:n,addedBatchIds:r}}))}))}))];case 1:return a=o.sent(),[2,(n._n=r,n.Mn=i,n.xn.Vn(n.Mn),a)]}}))}))}function bh(t,e){var n=po(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(function(t){var r=e.batch.keys(),i=n.On.newChangeBuffer({trackRemovals:!0});return function(t,e,n,r){var i=n.batch,o=i.keys(),a=$u.resolve();return o.forEach((function(t){a=a.next((function(){return r.getEntry(e,t)})).next((function(e){var o=n.docVersions.get(t);fo(null!==o),e.version.compareTo(o)<0&&(i.applyToRemoteDocument(e,n),e.isValidDocument()&&r.addEntry(e,n.commitVersion))}))})),a.next((function(){return t._n.removeMutationBatch(e,i)}))}(n,t,e,i).next((function(){return i.apply(t)})).next((function(){return n._n.performConsistencyCheck(t)})).next((function(){return n.Mn.pn(t,r)}))}))}function wh(t){var e=po(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(function(t){return e.qe.getLastRemoteSnapshotVersion(t)}))}function _h(t,e){var n=po(t),r=e.snapshotVersion,i=n.kn;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(function(t){var o=n.On.newChangeBuffer({trackRemovals:!0});i=n.kn;var a=[];e.targetChanges.forEach((function(e,o){var s=i.get(o);if(s){a.push(n.qe.removeMatchingKeys(t,e.removedDocuments,o).next((function(){return n.qe.addMatchingKeys(t,e.addedDocuments,o)})));var u=e.resumeToken;if(u.approximateByteSize()>0){var c=s.withResumeToken(u,r).withSequenceNumber(t.currentSequenceNumber);i=i.insert(o,c),function(t,e,n){return fo(e.resumeToken.approximateByteSize()>0),0===t.resumeToken.approximateByteSize()||e.snapshotVersion.toMicroseconds()-t.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0}(s,c,e)&&a.push(n.qe.updateTargetData(t,c))}}}));var s=Ds();if(e.documentUpdates.forEach((function(r,i){e.resolvedLimboDocuments.has(r)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(t,r))})),a.push(Ih(t,o,e.documentUpdates,r,void 0).next((function(t){s=t}))),!r.isEqual(_o.min())){var u=n.qe.getLastRemoteSnapshotVersion(t).next((function(e){return n.qe.setTargetsMetadata(t,t.currentSequenceNumber,r)}));a.push(u)}return $u.waitFor(a).next((function(){return o.apply(t)})).next((function(){return n.Mn.En(t,s)})).next((function(){return s}))})).then((function(t){return n.kn=i,t}))}function Ih(t,e,n,r,i){var o=Fs();return n.forEach((function(t){return o=o.add(t)})),e.getEntries(t,o).next((function(t){var o=Ds();return n.forEach((function(n,a){var s=t.get(n),u=(null==i?void 0:i.get(n))||r;a.isNoDocument()&&a.version.isEqual(_o.min())?(e.removeEntry(n,u),o=o.insert(n,a)):!s.isValidDocument()||a.version.compareTo(s.version)>0||0===a.version.compareTo(s.version)&&s.hasPendingWrites?(e.addEntry(a,u),o=o.insert(n,a)):so("LocalStore","Ignoring outdated watch update for ",n,". Current version:",s.version," Watch version:",a.version)})),o}))}function Th(t,e){var n=po(t);return n.persistence.runTransaction("Get next mutation batch","readonly",(function(t){return void 0===e&&(e=-1),n._n.getNextMutationBatchAfterBatchId(t,e)}))}function Eh(t,e){var n=po(t);return n.persistence.runTransaction("Allocate target","readwrite",(function(t){var r;return n.qe.getTargetData(t,e).next((function(i){return i?(r=i,$u.resolve(r)):n.qe.allocateTargetId(t).next((function(i){return r=new fc(e,i,0,t.currentSequenceNumber),n.qe.addTargetData(t,r).next((function(){return r}))}))}))})).then((function(t){var r=n.kn.get(t.targetId);return(null===r||t.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.kn=n.kn.insert(t.targetId,t),n.Fn.set(e,t.targetId)),t}))}function Sh(t,e,n){return(0,o.__awaiter)(this,void 0,void 0,(function(){var r,i,a,s;return(0,o.__generator)(this,(function(o){switch(o.label){case 0:r=po(t),i=r.kn.get(e),a=n?"readwrite":"readwrite-primary",o.label=1;case 1:return o.trys.push([1,4,,5]),n?[3,3]:[4,r.persistence.runTransaction("Release target",a,(function(t){return r.persistence.referenceDelegate.removeTarget(t,i)}))];case 2:o.sent(),o.label=3;case 3:return[3,5];case 4:if(!rc(s=o.sent()))throw s;return so("LocalStore","Failed to update sequence numbers for target "+e+": "+s),[3,5];case 5:return r.kn=r.kn.remove(e),r.Fn.delete(i.target),[2]}}))}))}function Ah(t,e,n){var r=po(t),i=_o.min(),o=Fs();return r.persistence.runTransaction("Execute query","readonly",(function(t){return function(t,e,n){var r=po(t),i=r.Fn.get(n);return void 0!==i?$u.resolve(r.kn.get(i)):r.qe.getTargetData(e,n)}(r,t,xa(e)).next((function(e){if(e)return i=e.lastLimboFreeSnapshotVersion,r.qe.getMatchingKeysForTargetId(t,e.targetId).next((function(t){o=t}))})).next((function(){return r.xn.getDocumentsMatchingQuery(t,e,n?i:_o.min(),n?o:Fs())})).next((function(t){return{documents:t,Bn:o}}))}))}function kh(t,e){var n=po(t),r=po(n.qe),i=n.kn.get(e);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",(function(t){return r.lt(t,e).next((function(t){return t?t.target:null}))}))}function Nh(t){var e=po(t);return e.persistence.runTransaction("Get new document changes","readonly",(function(t){return function(t,e,n){var r=po(t),i=Ds(),o=gc(n),a=rh(e),s=IDBKeyRange.lowerBound(o,!0);return a.$t({index:ju.readTimeIndex,range:s},(function(t,e){var n=dc(r.R,e);i=i.insert(n.key,n),o=e.readTime})).next((function(){return{wn:i,readTime:mc(o)}}))}(e.On,t,e.$n)})).then((function(t){var n=t.wn,r=t.readTime;return e.$n=r,n}))}function Ch(t){return(0,o.__awaiter)(this,void 0,void 0,(function(){var e;return(0,o.__generator)(this,(function(n){return[2,(e=po(t)).persistence.runTransaction("Synchronize last document change read time","readonly",(function(t){return function(t){var e=rh(t),n=_o.min();return e.$t({index:ju.readTimeIndex,reverse:!0},(function(t,e,r){e.readTime&&(n=mc(e.readTime)),r.done()})).next((function(){return n}))}(t)})).then((function(t){e.$n=t}))]}))}))}function Oh(t,e,n,r){return(0,o.__awaiter)(this,void 0,void 0,(function(){var i,a,s,u,c,h,l,f,p,d;return(0,o.__generator)(this,(function(o){switch(o.label){case 0:for(i=po(t),a=Fs(),s=Ds(),u=Ls(),c=0,h=n;c<h.length;c++)l=h[c],f=e.qn(l.metadata.name),l.document&&(a=a.add(f)),s=s.insert(f,e.Un(l)),u=u.insert(f,e.Kn(l.metadata.readTime));return p=i.On.newChangeBuffer({trackRemovals:!0}),[4,Eh(i,function(t){return xa(ka(Ao.fromString("__bundle__/docs/"+t)))}(r))];case 1:return d=o.sent(),[2,i.persistence.runTransaction("Apply bundle documents","readwrite",(function(t){return Ih(t,p,s,_o.min(),u).next((function(e){return p.apply(t),e})).next((function(e){return i.qe.removeMatchingKeysForTargetId(t,d.targetId).next((function(){return i.qe.addMatchingKeys(t,a,d.targetId)})).next((function(){return i.Mn.En(t,e)})).next((function(){return e}))}))}))]}}))}))}function Dh(t,e,n){return void 0===n&&(n=Fs()),(0,o.__awaiter)(this,void 0,void 0,(function(){var r,i;return(0,o.__generator)(this,(function(o){switch(o.label){case 0:return[4,Eh(t,xa(Tc(e.bundledQuery)))];case 1:return r=o.sent(),[2,(i=po(t)).persistence.runTransaction("Save named query","readwrite",(function(t){var o=eu(e.readTime);if(r.snapshotVersion.compareTo(o)>=0)return i.Ke.saveNamedQuery(t,e);var a=r.withResumeToken(Oo.EMPTY_BYTE_STRING,o);return i.kn=i.kn.insert(a.targetId,a),i.qe.updateTargetData(t,a).next((function(){return i.qe.removeMatchingKeysForTargetId(t,r.targetId)})).next((function(){return i.qe.addMatchingKeys(t,n,r.targetId)})).next((function(){return i.Ke.saveNamedQuery(t,e)}))}))]}}))}))}var Rh=function(){function t(t){this.R=t,this.Qn=new Map,this.jn=new Map}return t.prototype.getBundleMetadata=function(t,e){return $u.resolve(this.Qn.get(e))},t.prototype.saveBundleMetadata=function(t,e){var n;return this.Qn.set(e.id,{id:(n=e).id,version:n.version,createTime:eu(n.createTime)}),$u.resolve()},t.prototype.getNamedQuery=function(t,e){return $u.resolve(this.jn.get(e))},t.prototype.saveNamedQuery=function(t,e){return this.jn.set(e.name,function(t){return{name:t.name,query:Tc(t.bundledQuery),readTime:eu(t.readTime)}}(e)),$u.resolve()},t}(),Ph=function(){function t(){this.Wn=new Ns(xh.Gn),this.zn=new Ns(xh.Hn)}return t.prototype.isEmpty=function(){return this.Wn.isEmpty()},t.prototype.addReference=function(t,e){var n=new xh(t,e);this.Wn=this.Wn.add(n),this.zn=this.zn.add(n)},t.prototype.Jn=function(t,e){var n=this;t.forEach((function(t){return n.addReference(t,e)}))},t.prototype.removeReference=function(t,e){this.Yn(new xh(t,e))},t.prototype.Xn=function(t,e){var n=this;t.forEach((function(t){return n.removeReference(t,e)}))},t.prototype.Zn=function(t){var e=this,n=new Bo(new Ao([])),r=new xh(n,t),i=new xh(n,t+1),o=[];return this.zn.forEachInRange([r,i],(function(t){e.Yn(t),o.push(t.key)})),o},t.prototype.ts=function(){var t=this;this.Wn.forEach((function(e){return t.Yn(e)}))},t.prototype.Yn=function(t){this.Wn=this.Wn.delete(t),this.zn=this.zn.delete(t)},t.prototype.es=function(t){var e=new Bo(new Ao([])),n=new xh(e,t),r=new xh(e,t+1),i=Fs();return this.zn.forEachInRange([n,r],(function(t){i=i.add(t.key)})),i},t.prototype.containsKey=function(t){var e=new xh(t,0),n=this.Wn.firstAfterOrEqual(e);return null!==n&&t.isEqual(n.key)},t}(),xh=function(){function t(t,e){this.key=t,this.ns=e}return t.Gn=function(t,e){return Bo.comparator(t.key,e.key)||mo(t.ns,e.ns)},t.Hn=function(t,e){return mo(t.ns,e.ns)||Bo.comparator(t.key,e.key)},t}(),Lh=function(){function t(t,e){this.Ut=t,this.referenceDelegate=e,this._n=[],this.ss=1,this.rs=new Ns(xh.Gn)}return t.prototype.checkEmpty=function(t){return $u.resolve(0===this._n.length)},t.prototype.addMutationBatch=function(t,e,n,r){var i=this.ss;this.ss++,this._n.length>0&&this._n[this._n.length-1];var o=new hc(i,e,n,r);this._n.push(o);for(var a=0,s=r;a<s.length;a++){var u=s[a];this.rs=this.rs.add(new xh(u.key,i)),this.Ut.addToCollectionParentIndex(t,u.key.path.popLast())}return $u.resolve(o)},t.prototype.lookupMutationBatch=function(t,e){return $u.resolve(this.os(e))},t.prototype.getNextMutationBatchAfterBatchId=function(t,e){var n=e+1,r=this.cs(n),i=r<0?0:r;return $u.resolve(this._n.length>i?this._n[i]:null)},t.prototype.getHighestUnacknowledgedBatchId=function(){return $u.resolve(0===this._n.length?-1:this.ss-1)},t.prototype.getAllMutationBatches=function(t){return $u.resolve(this._n.slice())},t.prototype.getAllMutationBatchesAffectingDocumentKey=function(t,e){var n=this,r=new xh(e,0),i=new xh(e,Number.POSITIVE_INFINITY),o=[];return this.rs.forEachInRange([r,i],(function(t){var e=n.os(t.ns);o.push(e)})),$u.resolve(o)},t.prototype.getAllMutationBatchesAffectingDocumentKeys=function(t,e){var n=this,r=new Ns(mo);return e.forEach((function(t){var e=new xh(t,0),i=new xh(t,Number.POSITIVE_INFINITY);n.rs.forEachInRange([e,i],(function(t){r=r.add(t.ns)}))})),$u.resolve(this.us(r))},t.prototype.getAllMutationBatchesAffectingQuery=function(t,e){var n=e.path,r=n.length+1,i=n;Bo.isDocumentKey(i)||(i=i.child(""));var o=new xh(new Bo(i),0),a=new Ns(mo);return this.rs.forEachWhile((function(t){var e=t.key.path;return!!n.isPrefixOf(e)&&(e.length===r&&(a=a.add(t.ns)),!0)}),o),$u.resolve(this.us(a))},t.prototype.us=function(t){var e=this,n=[];return t.forEach((function(t){var r=e.os(t);null!==r&&n.push(r)})),n},t.prototype.removeMutationBatch=function(t,e){var n=this;fo(0===this.hs(e.batchId,"removed")),this._n.shift();var r=this.rs;return $u.forEach(e.mutations,(function(i){var o=new xh(i.key,e.batchId);return r=r.delete(o),n.referenceDelegate.markPotentiallyOrphaned(t,i.key)})).next((function(){n.rs=r}))},t.prototype.Gt=function(t){},t.prototype.containsKey=function(t,e){var n=new xh(e,0),r=this.rs.firstAfterOrEqual(n);return $u.resolve(e.isEqual(r&&r.key))},t.prototype.performConsistencyCheck=function(t){return this._n.length,$u.resolve()},t.prototype.hs=function(t,e){return this.cs(t)},t.prototype.cs=function(t){return 0===this._n.length?0:t-this._n[0].batchId},t.prototype.os=function(t){var e=this.cs(t);return e<0||e>=this._n.length?null:this._n[e]},t}(),Mh=function(){function t(t,e){this.Ut=t,this.ls=e,this.docs=new Ss(Bo.comparator),this.size=0}return t.prototype.addEntry=function(t,e,n){var r=e.key,i=this.docs.get(r),o=i?i.size:0,a=this.ls(e);return this.docs=this.docs.insert(r,{document:e.clone(),size:a,readTime:n}),this.size+=a-o,this.Ut.addToCollectionParentIndex(t,r.path.popLast())},t.prototype.removeEntry=function(t){var e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)},t.prototype.getEntry=function(t,e){var n=this.docs.get(e);return $u.resolve(n?n.document.clone():ia.newInvalidDocument(e))},t.prototype.getEntries=function(t,e){var n=this,r=Ds();return e.forEach((function(t){var e=n.docs.get(t);r=r.insert(t,e?e.document.clone():ia.newInvalidDocument(t))})),$u.resolve(r)},t.prototype.getDocumentsMatchingQuery=function(t,e,n){for(var r=Ds(),i=new Bo(e.path.child("")),o=this.docs.getIteratorFrom(i);o.hasNext();){var a=o.getNext(),s=a.key,u=a.value,c=u.document,h=u.readTime;if(!e.path.isPrefixOf(s.path))break;h.compareTo(n)<=0||ja(e,c)&&(r=r.insert(c.key,c.clone()))}return $u.resolve(r)},t.prototype.fs=function(t,e){return $u.forEach(this.docs,(function(t){return e(t)}))},t.prototype.newChangeBuffer=function(t){return new Fh(this)},t.prototype.getSize=function(t){return $u.resolve(this.size)},t}(),Fh=function(t){function e(e){var n=this;return(n=t.call(this)||this).Ie=e,n}return(0,o.__extends)(e,t),e.prototype.applyChanges=function(t){var e=this,n=[];return this.changes.forEach((function(r,i){i.document.isValidDocument()?n.push(e.Ie.addEntry(t,i.document,e.getReadTime(r))):e.Ie.removeEntry(r)})),$u.waitFor(n)},e.prototype.getFromCache=function(t,e){return this.Ie.getEntry(t,e)},e.prototype.getAllFromCache=function(t,e){return this.Ie.getEntries(t,e)},e}(Zc),Uh=function(){function t(t){this.persistence=t,this.ds=new $c((function(t){return sa(t)}),ua),this.lastRemoteSnapshotVersion=_o.min(),this.highestTargetId=0,this.ws=0,this._s=new Ph,this.targetCount=0,this.ys=Vc.Jt()}return t.prototype.forEachTarget=function(t,e){return this.ds.forEach((function(t,n){return e(n)})),$u.resolve()},t.prototype.getLastRemoteSnapshotVersion=function(t){return $u.resolve(this.lastRemoteSnapshotVersion)},t.prototype.getHighestSequenceNumber=function(t){return $u.resolve(this.ws)},t.prototype.allocateTargetId=function(t){return this.highestTargetId=this.ys.next(),$u.resolve(this.highestTargetId)},t.prototype.setTargetsMetadata=function(t,e,n){return n&&(this.lastRemoteSnapshotVersion=n),e>this.ws&&(this.ws=e),$u.resolve()},t.prototype.te=function(t){this.ds.set(t.target,t);var e=t.targetId;e>this.highestTargetId&&(this.ys=new Vc(e),this.highestTargetId=e),t.sequenceNumber>this.ws&&(this.ws=t.sequenceNumber)},t.prototype.addTargetData=function(t,e){return this.te(e),this.targetCount+=1,$u.resolve()},t.prototype.updateTargetData=function(t,e){return this.te(e),$u.resolve()},t.prototype.removeTargetData=function(t,e){return this.ds.delete(e.target),this._s.Zn(e.targetId),this.targetCount-=1,$u.resolve()},t.prototype.removeTargets=function(t,e,n){var r=this,i=0,o=[];return this.ds.forEach((function(a,s){s.sequenceNumber<=e&&null===n.get(s.targetId)&&(r.ds.delete(a),o.push(r.removeMatchingKeysForTargetId(t,s.targetId)),i++)})),$u.waitFor(o).next((function(){return i}))},t.prototype.getTargetCount=function(t){return $u.resolve(this.targetCount)},t.prototype.getTargetData=function(t,e){var n=this.ds.get(e)||null;return $u.resolve(n)},t.prototype.addMatchingKeys=function(t,e,n){return this._s.Jn(e,n),$u.resolve()},t.prototype.removeMatchingKeys=function(t,e,n){this._s.Xn(e,n);var r=this.persistence.referenceDelegate,i=[];return r&&e.forEach((function(e){i.push(r.markPotentiallyOrphaned(t,e))})),$u.waitFor(i)},t.prototype.removeMatchingKeysForTargetId=function(t,e){return this._s.Zn(e),$u.resolve()},t.prototype.getMatchingKeysForTargetId=function(t,e){var n=this._s.es(e);return $u.resolve(n)},t.prototype.containsKey=function(t,e){return $u.resolve(this._s.containsKey(e))},t}(),jh=function(){function t(t,e){var n=this;this.gs={},this.Ne=new no(0),this.xe=!1,this.xe=!0,this.referenceDelegate=t(this),this.qe=new Uh(this),this.Ut=new kc,this.Ue=function(t,e){return new Mh(t,(function(t){return n.referenceDelegate.ps(t)}))}(this.Ut),this.R=new pc(e),this.Ke=new Rh(this.R)}return t.prototype.start=function(){return Promise.resolve()},t.prototype.shutdown=function(){return this.xe=!1,Promise.resolve()},Object.defineProperty(t.prototype,"started",{get:function(){return this.xe},enumerable:!1,configurable:!0}),t.prototype.setDatabaseDeletedListener=function(){},t.prototype.setNetworkEnabled=function(){},t.prototype.getIndexManager=function(){return this.Ut},t.prototype.getMutationQueue=function(t){var e=this.gs[t.toKey()];return e||(e=new Lh(this.Ut,this.referenceDelegate),this.gs[t.toKey()]=e),e},t.prototype.getTargetCache=function(){return this.qe},t.prototype.getRemoteDocumentCache=function(){return this.Ue},t.prototype.getBundleCache=function(){return this.Ke},t.prototype.runTransaction=function(t,e,n){var r=this;so("MemoryPersistence","Starting transaction:",t);var i=new Vh(this.Ne.next());return this.referenceDelegate.Es(),n(i).next((function(t){return r.referenceDelegate.Ts(i).next((function(){return t}))})).toPromise().then((function(t){return i.raiseOnCommittedEvent(),t}))},t.prototype.Is=function(t,e){return $u.or(Object.values(this.gs).map((function(n){return function(){return n.containsKey(t,e)}})))},t}(),Vh=function(t){function e(e){var n=this;return(n=t.call(this)||this).currentSequenceNumber=e,n}return(0,o.__extends)(e,t),e}(Yu),Bh=function(){function t(t){this.persistence=t,this.As=new Ph,this.Rs=null}return t.bs=function(e){return new t(e)},Object.defineProperty(t.prototype,"vs",{get:function(){if(this.Rs)return this.Rs;throw lo()},enumerable:!1,configurable:!0}),t.prototype.addReference=function(t,e,n){return this.As.addReference(n,e),this.vs.delete(n.toString()),$u.resolve()},t.prototype.removeReference=function(t,e,n){return this.As.removeReference(n,e),this.vs.add(n.toString()),$u.resolve()},t.prototype.markPotentiallyOrphaned=function(t,e){return this.vs.add(e.toString()),$u.resolve()},t.prototype.removeTarget=function(t,e){var n=this;this.As.Zn(e.targetId).forEach((function(t){return n.vs.add(t.toString())}));var r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(t,e.targetId).next((function(t){t.forEach((function(t){return n.vs.add(t.toString())}))})).next((function(){return r.removeTargetData(t,e)}))},t.prototype.Es=function(){this.Rs=new Set},t.prototype.Ts=function(t){var e=this,n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return $u.forEach(this.vs,(function(r){var i=Bo.fromPath(r);return e.Ps(t,i).next((function(t){t||n.removeEntry(i)}))})).next((function(){return e.Rs=null,n.apply(t)}))},t.prototype.updateLimboDocument=function(t,e){var n=this;return this.Ps(t,e).next((function(t){t?n.vs.delete(e.toString()):n.vs.add(e.toString())}))},t.prototype.ps=function(t){return 0},t.prototype.Ps=function(t,e){var n=this;return $u.or([function(){return $u.resolve(n.As.containsKey(e))},function(){return n.persistence.getTargetCache().containsKey(t,e)},function(){return n.persistence.Is(t,e)}])},t}(),qh=function(){function t(t){this.uid=t}return t.prototype.isAuthenticated=function(){return null!=this.uid},t.prototype.toKey=function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"},t.prototype.isEqual=function(t){return t.uid===this.uid},t}();function Kh(t,e){return"firestore_clients_"+t+"_"+e}function Gh(t,e,n){var r="firestore_mutations_"+t+"_"+n;return e.isAuthenticated()&&(r+="_"+e.uid),r}function Hh(t,e){return"firestore_targets_"+t+"_"+e}qh.UNAUTHENTICATED=new qh(null),qh.GOOGLE_CREDENTIALS=new qh("google-credentials-uid"),qh.FIRST_PARTY=new qh("first-party-uid"),qh.MOCK_USER=new qh("mock-user");var zh=function(){function t(t,e,n,r){this.user=t,this.batchId=e,this.state=n,this.error=r}return t.Vs=function(e,n,r){var i,o=JSON.parse(r),a="object"==typeof o&&-1!==["pending","acknowledged","rejected"].indexOf(o.state)&&(void 0===o.error||"object"==typeof o.error);return a&&o.error&&(a="string"==typeof o.error.message&&"string"==typeof o.error.code)&&(i=new io(o.error.code,o.error.message)),a?new t(e,n,o.state,i):(uo("SharedClientState","Failed to parse mutation state for ID '"+n+"': "+r),null)},t.prototype.Ss=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),Wh=function(){function t(t,e,n){this.targetId=t,this.state=e,this.error=n}return t.Vs=function(e,n){var r,i=JSON.parse(n),o="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return o&&i.error&&(o="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(r=new io(i.error.code,i.error.message)),o?new t(e,i.state,r):(uo("SharedClientState","Failed to parse target state for ID '"+e+"': "+n),null)},t.prototype.Ss=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),Xh=function(){function t(t,e){this.clientId=t,this.activeTargetIds=e}return t.Vs=function(e,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,o=js(),a=0;i&&a<r.activeTargetIds.length;++a)i=Vo(r.activeTargetIds[a]),o=o.add(r.activeTargetIds[a]);return i?new t(e,o):(uo("SharedClientState","Failed to parse client data for instance '"+e+"': "+n),null)},t}(),Qh=function(){function t(t,e){this.clientId=t,this.onlineState=e}return t.Vs=function(e){var n=JSON.parse(e);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new t(n.clientId,n.onlineState):(uo("SharedClientState","Failed to parse online state: "+e),null)},t}(),Yh=function(){function t(){this.activeTargetIds=js()}return t.prototype.Ds=function(t){this.activeTargetIds=this.activeTargetIds.add(t)},t.prototype.Cs=function(t){this.activeTargetIds=this.activeTargetIds.delete(t)},t.prototype.Ss=function(){var t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)},t}(),Jh=function(){function t(t,e,n,r,i){this.window=t,this.Se=e,this.persistenceKey=n,this.Ns=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.xs=this.ks.bind(this),this.Fs=new Ss(mo),this.started=!1,this.$s=[];var o=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.Os=Kh(this.persistenceKey,this.Ns),this.Ms=function(t){return"firestore_sequence_number_"+t}(this.persistenceKey),this.Fs=this.Fs.insert(this.Ns,new Yh),this.Ls=new RegExp("^firestore_clients_"+o+"_([^_]*)$"),this.Bs=new RegExp("^firestore_mutations_"+o+"_(\\d+)(?:_(.*))?$"),this.qs=new RegExp("^firestore_targets_"+o+"_(\\d+)$"),this.Us=function(t){return"firestore_online_state_"+t}(this.persistenceKey),this.Ks=function(t){return"firestore_bundle_loaded_"+t}(this.persistenceKey),this.window.addEventListener("storage",this.xs)}return t.yt=function(t){return!(!t||!t.localStorage)},t.prototype.start=function(){return(0,o.__awaiter)(this,void 0,void 0,(function(){var t,e,n,r,i,a,s,u,c,h,l,f=this;return(0,o.__generator)(this,(function(o){switch(o.label){case 0:return[4,this.syncEngine.fn()];case 1:for(t=o.sent(),e=0,n=t;e<n.length;e++)(r=n[e])!==this.Ns&&(i=this.getItem(Kh(this.persistenceKey,r)))&&(a=Xh.Vs(r,i))&&(this.Fs=this.Fs.insert(a.clientId,a));for(this.Qs(),(s=this.storage.getItem(this.Us))&&(u=this.js(s))&&this.Ws(u),c=0,h=this.$s;c<h.length;c++)l=h[c],this.ks(l);return this.$s=[],this.window.addEventListener("pagehide",(function(){return f.shutdown()})),this.started=!0,[2]}}))}))},t.prototype.writeSequenceNumber=function(t){this.setItem(this.Ms,JSON.stringify(t))},t.prototype.getAllActiveQueryTargets=function(){return this.Gs(this.Fs)},t.prototype.isActiveQueryTarget=function(t){var e=!1;return this.Fs.forEach((function(n,r){r.activeTargetIds.has(t)&&(e=!0)})),e},t.prototype.addPendingMutation=function(t){this.zs(t,"pending")},t.prototype.updateMutationState=function(t,e,n){this.zs(t,e,n),this.Hs(t)},t.prototype.addLocalQueryTarget=function(t){var e="not-current";if(this.isActiveQueryTarget(t)){var n=this.storage.getItem(Hh(this.persistenceKey,t));if(n){var r=Wh.Vs(t,n);r&&(e=r.state)}}return this.Js.Ds(t),this.Qs(),e},t.prototype.removeLocalQueryTarget=function(t){this.Js.Cs(t),this.Qs()},t.prototype.isLocalQueryTarget=function(t){return this.Js.activeTargetIds.has(t)},t.prototype.clearQueryState=function(t){this.removeItem(Hh(this.persistenceKey,t))},t.prototype.updateQueryState=function(t,e,n){this.Ys(t,e,n)},t.prototype.handleUserChange=function(t,e,n){var r=this;e.forEach((function(t){r.Hs(t)})),this.currentUser=t,n.forEach((function(t){r.addPendingMutation(t)}))},t.prototype.setOnlineState=function(t){this.Xs(t)},t.prototype.notifyBundleLoaded=function(){this.Zs()},t.prototype.shutdown=function(){this.started&&(this.window.removeEventListener("storage",this.xs),this.removeItem(this.Os),this.started=!1)},t.prototype.getItem=function(t){var e=this.storage.getItem(t);return so("SharedClientState","READ",t,e),e},t.prototype.setItem=function(t,e){so("SharedClientState","SET",t,e),this.storage.setItem(t,e)},t.prototype.removeItem=function(t){so("SharedClientState","REMOVE",t),this.storage.removeItem(t)},t.prototype.ks=function(t){var e=this,n=t;if(n.storageArea===this.storage){if(so("SharedClientState","EVENT",n.key,n.newValue),n.key===this.Os)return void uo("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Se.enqueueRetryable((function(){return(0,o.__awaiter)(e,void 0,void 0,(function(){var t,e,r,i,a,s;return(0,o.__generator)(this,(function(o){if(this.started){if(null!==n.key)if(this.Ls.test(n.key)){if(null==n.newValue)return t=this.ti(n.key),[2,this.ei(t,null)];if(e=this.ni(n.key,n.newValue))return[2,this.ei(e.clientId,e)]}else if(this.Bs.test(n.key)){if(null!==n.newValue&&(r=this.si(n.key,n.newValue)))return[2,this.ii(r)]}else if(this.qs.test(n.key)){if(null!==n.newValue&&(i=this.ri(n.key,n.newValue)))return[2,this.oi(i)]}else if(n.key===this.Us){if(null!==n.newValue&&(a=this.js(n.newValue)))return[2,this.Ws(a)]}else if(n.key===this.Ms)(s=function(t){var e=no.o;if(null!=t)try{var n=JSON.parse(t);fo("number"==typeof n),e=n}catch(t){uo("SharedClientState","Failed to read sequence number from WebStorage",t)}return e}(n.newValue))!==no.o&&this.sequenceNumberHandler(s);else if(n.key===this.Ks)return[2,this.syncEngine.ci()]}else this.$s.push(n);return[2]}))}))}))}},Object.defineProperty(t.prototype,"Js",{get:function(){return this.Fs.get(this.Ns)},enumerable:!1,configurable:!0}),t.prototype.Qs=function(){this.setItem(this.Os,this.Js.Ss())},t.prototype.zs=function(t,e,n){var r=new zh(this.currentUser,t,e,n),i=Gh(this.persistenceKey,this.currentUser,t);this.setItem(i,r.Ss())},t.prototype.Hs=function(t){var e=Gh(this.persistenceKey,this.currentUser,t);this.removeItem(e)},t.prototype.Xs=function(t){var e={clientId:this.Ns,onlineState:t};this.storage.setItem(this.Us,JSON.stringify(e))},t.prototype.Ys=function(t,e,n){var r=Hh(this.persistenceKey,t),i=new Wh(t,e,n);this.setItem(r,i.Ss())},t.prototype.Zs=function(){this.setItem(this.Ks,"value-not-used")},t.prototype.ti=function(t){var e=this.Ls.exec(t);return e?e[1]:null},t.prototype.ni=function(t,e){var n=this.ti(t);return Xh.Vs(n,e)},t.prototype.si=function(t,e){var n=this.Bs.exec(t),r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return zh.Vs(new qh(i),r,e)},t.prototype.ri=function(t,e){var n=this.qs.exec(t),r=Number(n[1]);return Wh.Vs(r,e)},t.prototype.js=function(t){return Qh.Vs(t)},t.prototype.ii=function(t){return(0,o.__awaiter)(this,void 0,void 0,(function(){return(0,o.__generator)(this,(function(e){return t.user.uid===this.currentUser.uid?[2,this.syncEngine.ui(t.batchId,t.state,t.error)]:(so("SharedClientState","Ignoring mutation for non-active user "+t.user.uid),[2])}))}))},t.prototype.oi=function(t){return this.syncEngine.ai(t.targetId,t.state,t.error)},t.prototype.ei=function(t,e){var n=this,r=e?this.Fs.insert(t,e):this.Fs.remove(t),i=this.Gs(this.Fs),o=this.Gs(r),a=[],s=[];return o.forEach((function(t){i.has(t)||a.push(t)})),i.forEach((function(t){o.has(t)||s.push(t)})),this.syncEngine.hi(a,s).then((function(){n.Fs=r}))},t.prototype.Ws=function(t){this.Fs.get(t.clientId)&&this.onlineStateHandler(t.onlineState)},t.prototype.Gs=function(t){var e=js();return t.forEach((function(t,n){e=e.unionWith(n.activeTargetIds)})),e},t}(),$h=function(){function t(){this.li=new Yh,this.fi={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}return t.prototype.addPendingMutation=function(t){},t.prototype.updateMutationState=function(t,e,n){},t.prototype.addLocalQueryTarget=function(t){return this.li.Ds(t),this.fi[t]||"not-current"},t.prototype.updateQueryState=function(t,e,n){this.fi[t]=e},t.prototype.removeLocalQueryTarget=function(t){this.li.Cs(t)},t.prototype.isLocalQueryTarget=function(t){return this.li.activeTargetIds.has(t)},t.prototype.clearQueryState=function(t){delete this.fi[t]},t.prototype.getAllActiveQueryTargets=function(){return this.li.activeTargetIds},t.prototype.isActiveQueryTarget=function(t){return this.li.activeTargetIds.has(t)},t.prototype.start=function(){return this.li=new Yh,Promise.resolve()},t.prototype.handleUserChange=function(t,e,n){},t.prototype.setOnlineState=function(t){},t.prototype.shutdown=function(){},t.prototype.writeSequenceNumber=function(t){},t.prototype.notifyBundleLoaded=function(){},t}(),Zh=function(){function t(){}return t.prototype.di=function(t){},t.prototype.shutdown=function(){},t}(),tl=function(){function t(){var t=this;this.wi=function(){return t._i()},this.mi=function(){return t.yi()},this.gi=[],this.pi()}return t.prototype.di=function(t){this.gi.push(t)},t.prototype.shutdown=function(){window.removeEventListener("online",this.wi),window.removeEventListener("offline",this.mi)},t.prototype.pi=function(){window.addEventListener("online",this.wi),window.addEventListener("offline",this.mi)},t.prototype._i=function(){so("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(var t=0,e=this.gi;t<e.length;t++)(0,e[t])(0)},t.prototype.yi=function(){so("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(var t=0,e=this.gi;t<e.length;t++)(0,e[t])(1)},t.yt=function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener},t}(),el={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"},nl=function(){function t(t){this.Ei=t.Ei,this.Ti=t.Ti}return t.prototype.Ii=function(t){this.Ai=t},t.prototype.Ri=function(t){this.bi=t},t.prototype.onMessage=function(t){this.vi=t},t.prototype.close=function(){this.Ti()},t.prototype.send=function(t){this.Ei(t)},t.prototype.Pi=function(){this.Ai()},t.prototype.Vi=function(t){this.bi(t)},t.prototype.Si=function(t){this.vi(t)},t}(),rl=function(t){function e(e){var n=this;return(n=t.call(this,e)||this).forceLongPolling=e.forceLongPolling,n.autoDetectLongPolling=e.autoDetectLongPolling,n.useFetchStreams=e.useFetchStreams,n}return(0,o.__extends)(e,t),e.prototype.Fi=function(t,e,n,r){return new Promise((function(i,o){var a=new to;a.listenOnce(Qi.COMPLETE,(function(){try{switch(a.getLastErrorCode()){case Xi.NO_ERROR:var e=a.getResponseJson();so("Connection","XHR received:",JSON.stringify(e)),i(e);break;case Xi.TIMEOUT:so("Connection",'RPC "'+t+'" timed out'),o(new io(ro.DEADLINE_EXCEEDED,"Request time out"));break;case Xi.HTTP_ERROR:var n=a.getStatus();if(so("Connection",'RPC "'+t+'" failed with status:',n,"response text:",a.getResponseText()),n>0){var r=a.getResponseJson().error;if(r&&r.status&&r.message){var s=function(t){var e=t.toLowerCase().replace(/_/g,"-");return Object.values(ro).indexOf(e)>=0?e:ro.UNKNOWN}(r.status);o(new io(s,r.message))}else o(new io(ro.UNKNOWN,"Server responded with status "+a.getStatus()))}else o(new io(ro.UNAVAILABLE,"Connection failed."));break;default:lo()}}finally{so("Connection",'RPC "'+t+'" completed.')}}));var s=JSON.stringify(r);a.send(e,"POST",s,n,15)}))},e.prototype.Oi=function(t,e){var n=[this.Di,"/","google.firestore.v1.Firestore","/",t,"/channel"],r=zi(),i=Wi(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(o.xmlHttpFactory=new $i({})),this.ki(o.initMessageHeaders,e),(0,a.isMobileCordova)()||(0,a.isReactNative)()||(0,a.isElectron)()||(0,a.isIE)()||(0,a.isUWP)()||(0,a.isBrowserExtension)()||(o.httpHeadersOverwriteParam="$httpHeaders");var s=n.join("");so("Connection","Creating WebChannel: "+s,o);var u=r.createWebChannel(s,o),c=!1,h=!1,l=new nl({Ei:function(t){h?so("Connection","Not sending because WebChannel is closed:",t):(c||(so("Connection","Opening WebChannel transport."),u.open(),c=!0),so("Connection","WebChannel sending:",t),u.send(t))},Ti:function(){return u.close()}}),f=function(t,e,n){t.listen(e,(function(t){try{n(t)}catch(t){setTimeout((function(){throw t}),0)}}))};return f(u,Zi.EventType.OPEN,(function(){h||so("Connection","WebChannel transport opened.")})),f(u,Zi.EventType.CLOSE,(function(){h||(h=!0,so("Connection","WebChannel transport closed"),l.Vi())})),f(u,Zi.EventType.ERROR,(function(t){h||(h=!0,co("Connection","WebChannel transport errored:",t),l.Vi(new io(ro.UNAVAILABLE,"The operation could not be completed")))})),f(u,Zi.EventType.MESSAGE,(function(t){var e;if(!h){var n=t.data[0];fo(!!n);var r=n,i=r.error||(null===(e=r[0])||void 0===e?void 0:e.error);if(i){so("Connection","WebChannel received error:",i);var o=i.status,a=function(t){var e=ys[t];if(void 0!==e)return Es(e)}(o),s=i.message;void 0===a&&(a=ro.INTERNAL,s="Unknown error status: "+o+" with message "+i.message),h=!0,l.Vi(new io(a,s)),u.close()}else so("Connection","WebChannel received:",n),l.Si(n)}})),f(i,Yi.STAT_EVENT,(function(t){t.stat===Ji.PROXY?so("Connection","Detected buffering proxy"):t.stat===Ji.NOPROXY&&so("Connection","Detected no buffering proxy")})),setTimeout((function(){l.Pi()}),0),l},e}(function(){function t(t){this.databaseInfo=t,this.databaseId=t.databaseId;var e=t.ssl?"https":"http";this.Di=e+"://"+t.host,this.Ci="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}return t.prototype.Ni=function(t,e,n,r){var i=this.xi(t,e);so("RestConnection","Sending: ",i,n);var o={};return this.ki(o,r),this.Fi(t,i,o,n).then((function(t){return so("RestConnection","Received: ",t),t}),(function(e){throw co("RestConnection",t+" failed with error: ",e,"url: ",i,"request:",n),e}))},t.prototype.$i=function(t,e,n,r){return this.Ni(t,e,n,r)},t.prototype.ki=function(t,e){if(t["X-Goog-Api-Client"]="gl-js/ fire/8.10.1",t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),e)for(var n in e.authHeaders)e.authHeaders.hasOwnProperty(n)&&(t[n]=e.authHeaders[n])},t.prototype.xi=function(t,e){var n=el[t];return this.Di+"/v1/"+e+":"+n},t}());function il(){return"undefined"!=typeof window?window:null}function ol(){return"undefined"!=typeof document?document:null}function al(t){return new Js(t,!0)}var sl=function(){function t(t,e,n,r,i){void 0===n&&(n=1e3),void 0===r&&(r=1.5),void 0===i&&(i=6e4),this.Se=t,this.timerId=e,this.Mi=n,this.Li=r,this.Bi=i,this.qi=0,this.Ui=null,this.Ki=Date.now(),this.reset()}return t.prototype.reset=function(){this.qi=0},t.prototype.Qi=function(){this.qi=this.Bi},t.prototype.ji=function(t){var e=this;this.cancel();var n=Math.floor(this.qi+this.Wi()),r=Math.max(0,Date.now()-this.Ki),i=Math.max(0,n-r);i>0&&so("ExponentialBackoff","Backing off for "+i+" ms (base delay: "+this.qi+" ms, delay with jitter: "+n+" ms, last attempt: "+r+" ms ago)"),this.Ui=this.Se.enqueueAfterDelay(this.timerId,i,(function(){return e.Ki=Date.now(),t()})),this.qi*=this.Li,this.qi<this.Mi&&(this.qi=this.Mi),this.qi>this.Bi&&(this.qi=this.Bi)},t.prototype.Gi=function(){null!==this.Ui&&(this.Ui.skipDelay(),this.Ui=null)},t.prototype.cancel=function(){null!==this.Ui&&(this.Ui.cancel(),this.Ui=null)},t.prototype.Wi=function(){return(Math.random()-.5)*this.qi},t}(),ul=function(){function t(t,e,n,r,i,o){this.Se=t,this.zi=n,this.Hi=r,this.Ji=i,this.listener=o,this.state=0,this.Yi=0,this.Xi=null,this.stream=null,this.Zi=new sl(t,e)}return t.prototype.tr=function(){return 1===this.state||2===this.state||4===this.state},t.prototype.er=function(){return 2===this.state},t.prototype.start=function(){3!==this.state?this.auth():this.nr()},t.prototype.stop=function(){return(0,o.__awaiter)(this,void 0,void 0,(function(){return(0,o.__generator)(this,(function(t){switch(t.label){case 0:return this.tr()?[4,this.close(0)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))},t.prototype.sr=function(){this.state=0,this.Zi.reset()},t.prototype.ir=function(){var t=this;this.er()&&null===this.Xi&&(this.Xi=this.Se.enqueueAfterDelay(this.zi,6e4,(function(){return t.rr()})))},t.prototype.cr=function(t){this.ur(),this.stream.send(t)},t.prototype.rr=function(){return(0,o.__awaiter)(this,void 0,void 0,(function(){return(0,o.__generator)(this,(function(t){return this.er()?[2,this.close(0)]:[2]}))}))},t.prototype.ur=function(){this.Xi&&(this.Xi.cancel(),this.Xi=null)},t.prototype.close=function(t,e){return(0,o.__awaiter)(this,void 0,void 0,(function(){return(0,o.__generator)(this,(function(n){switch(n.label){case 0:return this.ur(),this.Zi.cancel(),this.Yi++,3!==t?this.Zi.reset():e&&e.code===ro.RESOURCE_EXHAUSTED?(uo(e.toString()),uo("Using maximum backoff delay to prevent overloading the backend."),this.Zi.Qi()):e&&e.code===ro.UNAUTHENTICATED&&this.Ji.invalidateToken(),null!==this.stream&&(this.ar(),this.stream.close(),this.stream=null),this.state=t,[4,this.listener.Ri(e)];case 1:return n.sent(),[2]}}))}))},t.prototype.ar=function(){},t.prototype.auth=function(){var t=this;this.state=1;var e=this.hr(this.Yi),n=this.Yi;this.Ji.getToken().then((function(e){t.Yi===n&&t.lr(e)}),(function(n){e((function(){var e=new io(ro.UNKNOWN,"Fetching auth token failed: "+n.message);return t.dr(e)}))}))},t.prototype.lr=function(t){var e=this,n=this.hr(this.Yi);this.stream=this.wr(t),this.stream.Ii((function(){n((function(){return e.state=2,e.listener.Ii()}))})),this.stream.Ri((function(t){n((function(){return e.dr(t)}))})),this.stream.onMessage((function(t){n((function(){return e.onMessage(t)}))}))},t.prototype.nr=function(){var t=this;this.state=4,this.Zi.ji((function(){return(0,o.__awaiter)(t,void 0,void 0,(function(){return(0,o.__generator)(this,(function(t){return this.state=0,this.start(),[2]}))}))}))},t.prototype.dr=function(t){return so("PersistentStream","close with error: "+t),this.stream=null,this.close(3,t)},t.prototype.hr=function(t){var e=this;return function(n){e.Se.enqueueAndForget((function(){return e.Yi===t?n():(so("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())}))}},t}(),cl=function(t){function e(e,n,r,i,o){var a=this;return(a=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle",n,r,o)||this).R=i,a}return(0,o.__extends)(e,t),e.prototype.wr=function(t){return this.Hi.Oi("Listen",t)},e.prototype.onMessage=function(t){this.Zi.reset();var e=function(t,e){var n;if("targetChange"in e){e.targetChange;var r=function(t){return"NO_CHANGE"===t?0:"ADD"===t?1:"REMOVE"===t?2:"CURRENT"===t?3:"RESET"===t?4:lo()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(t,e){return t.I?(fo(void 0===e||"string"==typeof e),Oo.fromBase64String(e||"")):(fo(void 0===e||e instanceof Uint8Array),Oo.fromUint8Array(e||new Uint8Array))}(t,e.targetChange.resumeToken),a=(s=e.targetChange.cause)&&function(t){var e=void 0===t.code?ro.UNKNOWN:Es(t.code);return new io(e,t.message||"")}(s);n=new Gs(r,i,o,a||null)}else if("documentChange"in e){e.documentChange,(r=e.documentChange).document,r.document.name,r.document.updateTime,i=ou(t,r.document.name),o=eu(r.document.updateTime);var s=new na({mapValue:{fields:r.document.fields}}),u=(a=ia.newFoundDocument(i,o,s),r.targetIds||[]),c=r.removedTargetIds||[];n=new qs(u,c,a.key,a)}else if("documentDelete"in e)e.documentDelete,(r=e.documentDelete).document,i=ou(t,r.document),o=r.readTime?eu(r.readTime):_o.min(),s=ia.newNoDocument(i,o),a=r.removedTargetIds||[],n=new qs([],a,s.key,s);else if("documentRemove"in e)e.documentRemove,(r=e.documentRemove).document,i=ou(t,r.document),o=r.removedTargetIds||[],n=new qs([],o,i,null);else{if(!("filter"in e))return lo();e.filter;var h=e.filter;h.targetId,r=h.count||0,i=new Is(r),o=h.targetId,n=new Ks(o,i)}return n}(this.R,t),n=function(t){if(!("targetChange"in t))return _o.min();var e=t.targetChange;return e.targetIds&&e.targetIds.length?_o.min():e.readTime?eu(e.readTime):_o.min()}(t);return this.listener._r(e,n)},e.prototype.mr=function(t){var e={};e.database=uu(this.R),e.addTarget=function(t,e){var n,r=e.target;return(n=ca(r)?{documents:du(t,r)}:{query:vu(t,r)}).targetId=e.targetId,e.resumeToken.approximateByteSize()>0?n.resumeToken=Zs(t,e.resumeToken):e.snapshotVersion.compareTo(_o.min())>0&&(n.readTime=$s(t,e.snapshotVersion.toTimestamp())),n}(this.R,t);var n=function(t,e){var n=function(t,e){switch(e){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return lo()}}(0,e.purpose);return null==n?null:{"goog-listen-tags":n}}(this.R,t);n&&(e.labels=n),this.cr(e)},e.prototype.yr=function(t){var e={};e.database=uu(this.R),e.removeTarget=t,this.cr(e)},e}(ul),hl=function(t){function e(e,n,r,i,o){var a=this;return(a=t.call(this,e,"write_stream_connection_backoff","write_stream_idle",n,r,o)||this).R=i,a.gr=!1,a}return(0,o.__extends)(e,t),Object.defineProperty(e.prototype,"pr",{get:function(){return this.gr},enumerable:!1,configurable:!0}),e.prototype.start=function(){this.gr=!1,this.lastStreamToken=void 0,t.prototype.start.call(this)},e.prototype.ar=function(){this.gr&&this.Er([])},e.prototype.wr=function(t){return this.Hi.Oi("Write",t)},e.prototype.onMessage=function(t){if(fo(!!t.streamToken),this.lastStreamToken=t.streamToken,this.gr){this.Zi.reset();var e=function(t,e){return t&&t.length>0?(fo(void 0!==e),t.map((function(t){return function(t,e){var n=t.updateTime?eu(t.updateTime):eu(e);return n.isEqual(_o.min())&&(n=eu(e)),new is(n,t.transformResults||[])}(t,e)}))):[]}(t.writeResults,t.commitTime),n=eu(t.commitTime);return this.listener.Tr(n,e)}return fo(!t.writeResults||0===t.writeResults.length),this.gr=!0,this.listener.Ir()},e.prototype.Ar=function(){var t={};t.database=uu(this.R),this.cr(t)},e.prototype.Er=function(t){var e=this,n={streamToken:this.lastStreamToken,writes:t.map((function(t){return fu(e.R,t)}))};this.cr(n)},e}(ul),ll=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).credentials=e,i.Hi=n,i.R=r,i.Rr=!1,i}return(0,o.__extends)(e,t),e.prototype.br=function(){if(this.Rr)throw new io(ro.FAILED_PRECONDITION,"The client has already been terminated.")},e.prototype.Ni=function(t,e,n){var r=this;return this.br(),this.credentials.getToken().then((function(i){return r.Hi.Ni(t,e,n,i)})).catch((function(t){throw"FirebaseError"===t.name?(t.code===ro.UNAUTHENTICATED&&r.credentials.invalidateToken(),t):new io(ro.UNKNOWN,t.toString())}))},e.prototype.$i=function(t,e,n){var r=this;return this.br(),this.credentials.getToken().then((function(i){return r.Hi.$i(t,e,n,i)})).catch((function(t){throw"FirebaseError"===t.name?(t.code===ro.UNAUTHENTICATED&&r.credentials.invalidateToken(),t):new io(ro.UNKNOWN,t.toString())}))},e.prototype.terminate=function(){this.Rr=!0},e}((function(){})),fl=function(){function t(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state="Unknown",this.vr=0,this.Pr=null,this.Vr=!0}return t.prototype.Sr=function(){var t=this;0===this.vr&&(this.Dr("Unknown"),this.Pr=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(function(){return t.Pr=null,t.Cr("Backend didn't respond within 10 seconds."),t.Dr("Offline"),Promise.resolve()})))},t.prototype.Nr=function(t){"Online"===this.state?this.Dr("Unknown"):(this.vr++,this.vr>=1&&(this.kr(),this.Cr("Connection failed 1 times. Most recent error: "+t.toString()),this.Dr("Offline")))},t.prototype.set=function(t){this.kr(),this.vr=0,"Online"===t&&(this.Vr=!1),this.Dr(t)},t.prototype.Dr=function(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))},t.prototype.Cr=function(t){var e="Could not reach Cloud Firestore backend. "+t+"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.";this.Vr?(uo(e),this.Vr=!1):so("OnlineStateTracker",e)},t.prototype.kr=function(){null!==this.Pr&&(this.Pr.cancel(),this.Pr=null)},t}(),pl=function(t,e,n,r,i){var a=this;this.localStore=t,this.datastore=e,this.asyncQueue=n,this.remoteSyncer={},this.Fr=[],this.$r=new Map,this.Or=new Set,this.Mr=[],this.Lr=i,this.Lr.di((function(t){n.enqueueAndForget((function(){return(0,o.__awaiter)(a,void 0,void 0,(function(){return(0,o.__generator)(this,(function(t){switch(t.label){case 0:return Il(this)?(so("RemoteStore","Restarting streams for network reachability change."),[4,function(t){return(0,o.__awaiter)(this,void 0,void 0,(function(){var e;return(0,o.__generator)(this,(function(n){switch(n.label){case 0:return(e=po(t)).Or.add(4),[4,vl(e)];case 1:return n.sent(),e.Br.set("Unknown"),e.Or.delete(4),[4,dl(e)];case 2:return n.sent(),[2]}}))}))}(this)]):[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))}))})),this.Br=new fl(n,r)};function dl(t){return(0,o.__awaiter)(this,void 0,void 0,(function(){var e,n;return(0,o.__generator)(this,(function(r){switch(r.label){case 0:if(!Il(t))return[3,4];e=0,n=t.Mr,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!0)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}}))}))}function vl(t){return(0,o.__awaiter)(this,void 0,void 0,(function(){var e,n;return(0,o.__generator)(this,(function(r){switch(r.label){case 0:e=0,n=t.Mr,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!1)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}}))}))}function gl(t,e){var n=po(t);n.$r.has(e.targetId)||(n.$r.set(e.targetId,e),_l(n)?wl(n):Fl(n).er()&&yl(n,e))}function ml(t,e){var n=po(t),r=Fl(n);n.$r.delete(e),r.er()&&bl(n,e),0===n.$r.size&&(r.er()?r.ir():Il(n)&&n.Br.set("Unknown"))}function yl(t,e){t.qr.U(e.targetId),Fl(t).mr(e)}function bl(t,e){t.qr.U(e),Fl(t).yr(e)}function wl(t){t.qr=new zs({getRemoteKeysForTarget:function(e){return t.remoteSyncer.getRemoteKeysForTarget(e)},lt:function(e){return t.$r.get(e)||null}}),Fl(t).start(),t.Br.Sr()}function _l(t){return Il(t)&&!Fl(t).tr()&&t.$r.size>0}function Il(t){return 0===po(t).Or.size}function Tl(t){t.qr=void 0}function El(t){return(0,o.__awaiter)(this,void 0,void 0,(function(){return(0,o.__generator)(this,(function(e){return t.$r.forEach((function(e,n){yl(t,e)})),[2]}))}))}function Sl(t,e){return(0,o.__awaiter)(this,void 0,void 0,(function(){return(0,o.__generator)(this,(function(n){return Tl(t),_l(t)?(t.Br.Nr(e),wl(t)):t.Br.set("Unknown"),[2]}))}))}function Al(t,e,n){return(0,o.__awaiter)(this,void 0,void 0,(function(){var r,i,a;return(0,o.__generator)(this,(function(s){switch(s.label){case 0:if(t.Br.set("Online"),!(e instanceof Gs&&2===e.state&&e.cause))return[3,6];s.label=1;case 1:return s.trys.push([1,3,,5]),[4,function(t,e){return(0,o.__awaiter)(this,void 0,void 0,(function(){var n,r,i,a;return(0,o.__generator)(this,(function(o){switch(o.label){case 0:n=e.cause,r=0,i=e.targetIds,o.label=1;case 1:return r<i.length?(a=i[r],t.$r.has(a)?[4,t.remoteSyncer.rejectListen(a,n)]:[3,3]):[3,5];case 2:o.sent(),t.$r.delete(a),t.qr.removeTarget(a),o.label=3;case 3:o.label=4;case 4:return r++,[3,1];case 5:return[2]}}))}))}(t,e)];case 2:return s.sent(),[3,5];case 3:return r=s.sent(),so("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),[4,kl(t,r)];case 4:return s.sent(),[3,5];case 5:return[3,13];case 6:if(e instanceof qs?t.qr.X(e):e instanceof Ks?t.qr.rt(e):t.qr.et(e),n.isEqual(_o.min()))return[3,13];s.label=7;case 7:return s.trys.push([7,11,,13]),[4,wh(t.localStore)];case 8:return i=s.sent(),n.compareTo(i)>=0?[4,function(t,e){var n=t.qr.ut(e);return n.targetChanges.forEach((function(n,r){if(n.resumeToken.approximateByteSize()>0){var i=t.$r.get(r);i&&t.$r.set(r,i.withResumeToken(n.resumeToken,e))}})),n.targetMismatches.forEach((function(e){var n=t.$r.get(e);if(n){t.$r.set(e,n.withResumeToken(Oo.EMPTY_BYTE_STRING,n.snapshotVersion)),bl(t,e);var r=new fc(n.target,e,1,n.sequenceNumber);yl(t,r)}})),t.remoteSyncer.applyRemoteEvent(n)}(t,n)]:[3,10];case 9:s.sent(),s.label=10;case 10:return[3,13];case 11:return so("RemoteStore","Failed to raise snapshot:",a=s.sent()),[4,kl(t,a)];case 12:return s.sent(),[3,13];case 13:return[2]}}))}))}function kl(t,e,n){return(0,o.__awaiter)(this,void 0,void 0,(function(){var r=this;return(0,o.__generator)(this,(function(i){switch(i.label){case 0:if(!rc(e))throw e;return t.Or.add(1),[4,vl(t)];case 1:return i.sent(),t.Br.set("Offline"),n||(n=function(){return wh(t.localStore)}),t.asyncQueue.enqueueRetryable((function(){return(0,o.__awaiter)(r,void 0,void 0,(function(){return(0,o.__generator)(this,(function(e){switch(e.label){case 0:return so("RemoteStore","Retrying IndexedDB access"),[4,n()];case 1:return e.sent(),t.Or.delete(1),[4,dl(t)];case 2:return e.sent(),[2]}}))}))})),[2]}}))}))}function Nl(t,e){return e().catch((function(n){return kl(t,n,e)}))}function Cl(t){return(0,o.__awaiter)(this,void 0,void 0,(function(){var e,n,r,i,a;return(0,o.__generator)(this,(function(o){switch(o.label){case 0:e=po(t),n=Ul(e),r=e.Fr.length>0?e.Fr[e.Fr.length-1].batchId:-1,o.label=1;case 1:if(!function(t){return Il(t)&&t.Fr.length<10}(e))return[3,7];o.label=2;case 2:return o.trys.push([2,4,,6]),[4,Th(e.localStore,r)];case 3:return null===(i=o.sent())?(0===e.Fr.length&&n.ir(),[3,7]):(r=i.batchId,function(t,e){t.Fr.push(e);var n=Ul(t);n.er()&&n.pr&&n.Er(e.mutations)}(e,i),[3,6]);case 4:return a=o.sent(),[4,kl(e,a)];case 5:return o.sent(),[3,6];case 6:return[3,1];case 7:return Ol(e)&&Dl(e),[2]}}))}))}function Ol(t){return Il(t)&&!Ul(t).tr()&&t.Fr.length>0}function Dl(t){Ul(t).start()}function Rl(t){return(0,o.__awaiter)(this,void 0,void 0,(function(){return(0,o.__generator)(this,(function(e){return Ul(t).Ar(),[2]}))}))}function Pl(t){return(0,o.__awaiter)(this,void 0,void 0,(function(){var e,n,r,i;return(0,o.__generator)(this,(function(o){for(e=Ul(t),n=0,r=t.Fr;n<r.length;n++)i=r[n],e.Er(i.mutations);return[2]}))}))}function xl(t,e,n){return(0,o.__awaiter)(this,void 0,void 0,(function(){var r,i;return(0,o.__generator)(this,(function(o){switch(o.label){case 0:return r=t.Fr.shift(),i=lc.from(r,e,n),[4,Nl(t,(function(){return t.remoteSyncer.applySuccessfulWrite(i)}))];case 1:return o.sent(),[4,Cl(t)];case 2:return o.sent(),[2]}}))}))}function Ll(t,e){return(0,o.__awaiter)(this,void 0,void 0,(function(){return(0,o.__generator)(this,(function(n){switch(n.label){case 0:return e&&Ul(t).pr?[4,function(t,e){return(0,o.__awaiter)(this,void 0,void 0,(function(){var n,r;return(0,o.__generator)(this,(function(i){switch(i.label){case 0:return Ts(r=e.code)&&r!==ro.ABORTED?(n=t.Fr.shift(),Ul(t).sr(),[4,Nl(t,(function(){return t.remoteSyncer.rejectFailedWrite(n.batchId,e)}))]):[3,3];case 1:return i.sent(),[4,Cl(t)];case 2:i.sent(),i.label=3;case 3:return[2]}}))}))}(t,e)]:[3,2];case 1:n.sent(),n.label=2;case 2:return Ol(t)&&Dl(t),[2]}}))}))}function Ml(t,e){return(0,o.__awaiter)(this,void 0,void 0,(function(){var n;return(0,o.__generator)(this,(function(r){switch(r.label){case 0:return n=po(t),e?(n.Or.delete(2),[4,dl(n)]):[3,2];case 1:return r.sent(),[3,5];case 2:return e?[3,4]:(n.Or.add(2),[4,vl(n)]);case 3:r.sent(),n.Br.set("Unknown"),r.label=4;case 4:r.label=5;case 5:return[2]}}))}))}function Fl(t){var e=this;return t.Ur||(t.Ur=function(t,e,n){var r=po(t);return r.br(),new cl(e,r.Hi,r.credentials,r.R,n)}(t.datastore,t.asyncQueue,{Ii:El.bind(null,t),Ri:Sl.bind(null,t),_r:Al.bind(null,t)}),t.Mr.push((function(n){return(0,o.__awaiter)(e,void 0,void 0,(function(){return(0,o.__generator)(this,(function(e){switch(e.label){case 0:return n?(t.Ur.sr(),_l(t)?wl(t):t.Br.set("Unknown"),[3,3]):[3,1];case 1:return[4,t.Ur.stop()];case 2:e.sent(),Tl(t),e.label=3;case 3:return[2]}}))}))}))),t.Ur}function Ul(t){var e=this;return t.Kr||(t.Kr=function(t,e,n){var r=po(t);return r.br(),new hl(e,r.Hi,r.credentials,r.R,n)}(t.datastore,t.asyncQueue,{Ii:Rl.bind(null,t),Ri:Ll.bind(null,t),Ir:Pl.bind(null,t),Tr:xl.bind(null,t)}),t.Mr.push((function(n){return(0,o.__awaiter)(e,void 0,void 0,(function(){return(0,o.__generator)(this,(function(e){switch(e.label){case 0:return n?(t.Kr.sr(),[4,Cl(t)]):[3,2];case 1:return e.sent(),[3,4];case 2:return[4,t.Kr.stop()];case 3:e.sent(),t.Fr.length>0&&(so("RemoteStore","Stopping write stream with "+t.Fr.length+" pending writes"),t.Fr=[]),e.label=4;case 4:return[2]}}))}))}))),t.Kr}var jl=function(){function t(t,e,n,r,i){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new Ju,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((function(t){}))}return t.createAndSchedule=function(e,n,r,i,o){var a=new t(e,n,Date.now()+r,i,o);return a.start(r),a},t.prototype.start=function(t){var e=this;this.timerHandle=setTimeout((function(){return e.handleDelayElapsed()}),t)},t.prototype.skipDelay=function(){return this.handleDelayElapsed()},t.prototype.cancel=function(t){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new io(ro.CANCELLED,"Operation cancelled"+(t?": "+t:""))))},t.prototype.handleDelayElapsed=function(){var t=this;this.asyncQueue.enqueueAndForget((function(){return null!==t.timerHandle?(t.clearTimeout(),t.op().then((function(e){return t.deferred.resolve(e)}))):Promise.resolve()}))},t.prototype.clearTimeout=function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)},t}();function Vl(t,e){if(uo("AsyncQueue",e+": "+t),rc(t))return new io(ro.UNAVAILABLE,e+": "+t);throw t}var Bl=function(){function t(t){this.comparator=t?function(e,n){return t(e,n)||Bo.comparator(e.key,n.key)}:function(t,e){return Bo.comparator(t.key,e.key)},this.keyedMap=Ps(),this.sortedSet=new Ss(this.comparator)}return t.emptySet=function(e){return new t(e.comparator)},t.prototype.has=function(t){return null!=this.keyedMap.get(t)},t.prototype.get=function(t){return this.keyedMap.get(t)},t.prototype.first=function(){return this.sortedSet.minKey()},t.prototype.last=function(){return this.sortedSet.maxKey()},t.prototype.isEmpty=function(){return this.sortedSet.isEmpty()},t.prototype.indexOf=function(t){var e=this.keyedMap.get(t);return e?this.sortedSet.indexOf(e):-1},Object.defineProperty(t.prototype,"size",{get:function(){return this.sortedSet.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t){this.sortedSet.inorderTraversal((function(e,n){return t(e),!1}))},t.prototype.add=function(t){var e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))},t.prototype.delete=function(t){var e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();n.hasNext();){var i=n.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0},t.prototype.toString=function(){var t=[];return this.forEach((function(e){t.push(e.toString())})),0===t.length?"DocumentSet ()":"DocumentSet (\n  "+t.join("  \n")+"\n)"},t.prototype.copy=function(e,n){var r=new t;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r},t}(),ql=function(){function t(){this.Qr=new Ss(Bo.comparator)}return t.prototype.track=function(t){var e=t.doc.key,n=this.Qr.get(e);n?0!==t.type&&3===n.type?this.Qr=this.Qr.insert(e,t):3===t.type&&1!==n.type?this.Qr=this.Qr.insert(e,{type:n.type,doc:t.doc}):2===t.type&&2===n.type?this.Qr=this.Qr.insert(e,{type:2,doc:t.doc}):2===t.type&&0===n.type?this.Qr=this.Qr.insert(e,{type:0,doc:t.doc}):1===t.type&&0===n.type?this.Qr=this.Qr.remove(e):1===t.type&&2===n.type?this.Qr=this.Qr.insert(e,{type:1,doc:n.doc}):0===t.type&&1===n.type?this.Qr=this.Qr.insert(e,{type:2,doc:t.doc}):lo():this.Qr=this.Qr.insert(e,t)},t.prototype.jr=function(){var t=[];return this.Qr.inorderTraversal((function(e,n){t.push(n)})),t},t}(),Kl=function(){function t(t,e,n,r,i,o,a,s){this.query=t,this.docs=e,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=s}return t.fromInitialDocuments=function(e,n,r,i){var o=[];return n.forEach((function(t){o.push({type:0,doc:t})})),new t(e,n,Bl.emptySet(n),o,r,i,!0,!1)},Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return!this.mutatedKeys.isEmpty()},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){if(!(this.fromCache===t.fromCache&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&Ma(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;var e=this.docChanges,n=t.docChanges;if(e.length!==n.length)return!1;for(var r=0;r<e.length;r++)if(e[r].type!==n[r].type||!e[r].doc.isEqual(n[r].doc))return!1;return!0},t}(),Gl=function(){this.Wr=void 0,this.listeners=[]},Hl=function(){this.queries=new $c((function(t){return Fa(t)}),Ma),this.onlineState="Unknown",this.Gr=new Set};function zl(t,e){return(0,o.__awaiter)(this,void 0,void 0,(function(){var n,r,i,a,s,u,c;return(0,o.__generator)(this,(function(o){switch(o.label){case 0:if(n=po(t),r=e.query,i=!1,(a=n.queries.get(r))||(i=!0,a=new Gl),!i)return[3,4];o.label=1;case 1:return o.trys.push([1,3,,4]),s=a,[4,n.onListen(r)];case 2:return s.Wr=o.sent(),[3,4];case 3:return u=o.sent(),c=Vl(u,"Initialization of query '"+Ua(e.query)+"' failed"),[2,void e.onError(c)];case 4:return n.queries.set(r,a),a.listeners.push(e),e.zr(n.onlineState),a.Wr&&e.Hr(a.Wr)&&Yl(n),[2]}}))}))}function Wl(t,e){return(0,o.__awaiter)(this,void 0,void 0,(function(){var n,r,i,a,s;return(0,o.__generator)(this,(function(o){return n=po(t),r=e.query,i=!1,(a=n.queries.get(r))&&(s=a.listeners.indexOf(e))>=0&&(a.listeners.splice(s,1),i=0===a.listeners.length),i?[2,(n.queries.delete(r),n.onUnlisten(r))]:[2]}))}))}function Xl(t,e){for(var n=po(t),r=!1,i=0,o=e;i<o.length;i++){var a=o[i],s=a.query,u=n.queries.get(s);if(u){for(var c=0,h=u.listeners;c<h.length;c++)h[c].Hr(a)&&(r=!0);u.Wr=a}}r&&Yl(n)}function Ql(t,e,n){var r=po(t),i=r.queries.get(e);if(i)for(var o=0,a=i.listeners;o<a.length;o++)a[o].onError(n);r.queries.delete(e)}function Yl(t){t.Gr.forEach((function(t){t.next()}))}var Jl=function(){function t(t,e,n){this.query=t,this.Jr=e,this.Yr=!1,this.Xr=null,this.onlineState="Unknown",this.options=n||{}}return t.prototype.Hr=function(t){if(!this.options.includeMetadataChanges){for(var e=[],n=0,r=t.docChanges;n<r.length;n++){var i=r[n];3!==i.type&&e.push(i)}t=new Kl(t.query,t.docs,t.oldDocs,e,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0)}var o=!1;return this.Yr?this.Zr(t)&&(this.Jr.next(t),o=!0):this.eo(t,this.onlineState)&&(this.no(t),o=!0),this.Xr=t,o},t.prototype.onError=function(t){this.Jr.error(t)},t.prototype.zr=function(t){this.onlineState=t;var e=!1;return this.Xr&&!this.Yr&&this.eo(this.Xr,t)&&(this.no(this.Xr),e=!0),e},t.prototype.eo=function(t,e){if(!t.fromCache)return!0;var n="Offline"!==e;return!(this.options.so&&n||t.docs.isEmpty()&&"Offline"!==e)},t.prototype.Zr=function(t){if(t.docChanges.length>0)return!0;var e=this.Xr&&this.Xr.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!e)&&!0===this.options.includeMetadataChanges},t.prototype.no=function(t){t=Kl.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache),this.Yr=!0,this.Jr.next(t)},t}(),$l=function(){function t(t,e){this.payload=t,this.byteLength=e}return t.prototype.io=function(){return"metadata"in this.payload},t}(),Zl=function(){function t(t){this.R=t}return t.prototype.qn=function(t){return ou(this.R,t)},t.prototype.Un=function(t){return t.metadata.exists?lu(this.R,t.document,!1):ia.newNoDocument(this.qn(t.metadata.name),this.Kn(t.metadata.readTime))},t.prototype.Kn=function(t){return eu(t)},t}();!function(){function t(t,e,n){this.ro=t,this.localStore=e,this.R=n,this.queries=[],this.documents=[],this.progress=tf(t)}t.prototype.oo=function(t){this.progress.bytesLoaded+=t.byteLength;var e=this.progress.documentsLoaded;return t.payload.namedQuery?this.queries.push(t.payload.namedQuery):t.payload.documentMetadata?(this.documents.push({metadata:t.payload.documentMetadata}),t.payload.documentMetadata.exists||++e):t.payload.document&&(this.documents[this.documents.length-1].document=t.payload.document,++e),e!==this.progress.documentsLoaded?(this.progress.documentsLoaded=e,Object.assign({},this.progress)):null},t.prototype.co=function(t){for(var e=new Map,n=new Zl(this.R),r=0,i=t;r<i.length;r++){var o=i[r];if(o.metadata.queries)for(var a=n.qn(o.metadata.name),s=0,u=o.metadata.queries;s<u.length;s++){var c=u[s],h=(e.get(c)||Fs()).add(a);e.set(c,h)}}return e},t.prototype.complete=function(){return(0,o.__awaiter)(this,void 0,void 0,(function(){var t,e,n,r,i;return(0,o.__generator)(this,(function(o){switch(o.label){case 0:return[4,Oh(this.localStore,new Zl(this.R),this.documents,this.ro.id)];case 1:t=o.sent(),e=this.co(this.documents),n=0,r=this.queries,o.label=2;case 2:return n<r.length?(i=r[n],[4,Dh(this.localStore,i,e.get(i.name))]):[3,5];case 3:o.sent(),o.label=4;case 4:return n++,[3,2];case 5:return[2,(this.progress.taskState="Success",new fh(Object.assign({},this.progress),t))]}}))}))}}();function tf(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}var ef=function(t){this.key=t},nf=function(t){this.key=t},rf=function(){function t(t,e){this.query=t,this.uo=e,this.ao=null,this.current=!1,this.ho=Fs(),this.mutatedKeys=Fs(),this.lo=Va(t),this.fo=new Bl(this.lo)}return Object.defineProperty(t.prototype,"wo",{get:function(){return this.uo},enumerable:!1,configurable:!0}),t.prototype._o=function(t,e){var n=this,r=e?e.mo:new ql,i=e?e.fo:this.fo,o=e?e.mutatedKeys:this.mutatedKeys,a=i,s=!1,u=Na(this.query)&&i.size===this.query.limit?i.last():null,c=Ca(this.query)&&i.size===this.query.limit?i.first():null;if(t.inorderTraversal((function(t,e){var h=i.get(t),l=ja(n.query,e)?e:null,f=!!h&&n.mutatedKeys.has(h.key),p=!!l&&(l.hasLocalMutations||n.mutatedKeys.has(l.key)&&l.hasCommittedMutations),d=!1;h&&l?h.data.isEqual(l.data)?f!==p&&(r.track({type:3,doc:l}),d=!0):n.yo(h,l)||(r.track({type:2,doc:l}),d=!0,(u&&n.lo(l,u)>0||c&&n.lo(l,c)<0)&&(s=!0)):!h&&l?(r.track({type:0,doc:l}),d=!0):h&&!l&&(r.track({type:1,doc:h}),d=!0,(u||c)&&(s=!0)),d&&(l?(a=a.add(l),o=p?o.add(t):o.delete(t)):(a=a.delete(t),o=o.delete(t)))})),Na(this.query)||Ca(this.query))for(;a.size>this.query.limit;){var h=Na(this.query)?a.last():a.first();a=a.delete(h.key),o=o.delete(h.key),r.track({type:1,doc:h})}return{fo:a,mo:r,Nn:s,mutatedKeys:o}},t.prototype.yo=function(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations},t.prototype.applyChanges=function(t,e,n){var r=this,i=this.fo;this.fo=t.fo,this.mutatedKeys=t.mutatedKeys;var o=t.mo.jr();o.sort((function(t,e){return function(t,e){var n=function(t){switch(t){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return lo()}};return n(t)-n(e)}(t.type,e.type)||r.lo(t.doc,e.doc)})),this.po(n);var a=e?this.Eo():[],s=0===this.ho.size&&this.current?1:0,u=s!==this.ao;return this.ao=s,0!==o.length||u?{snapshot:new Kl(this.query,t.fo,i,o,t.mutatedKeys,0===s,u,!1),To:a}:{To:a}},t.prototype.zr=function(t){return this.current&&"Offline"===t?(this.current=!1,this.applyChanges({fo:this.fo,mo:new ql,mutatedKeys:this.mutatedKeys,Nn:!1},!1)):{To:[]}},t.prototype.Io=function(t){return!this.uo.has(t)&&!!this.fo.has(t)&&!this.fo.get(t).hasLocalMutations},t.prototype.po=function(t){var e=this;t&&(t.addedDocuments.forEach((function(t){return e.uo=e.uo.add(t)})),t.modifiedDocuments.forEach((function(t){})),t.removedDocuments.forEach((function(t){return e.uo=e.uo.delete(t)})),this.current=t.current)},t.prototype.Eo=function(){var t=this;if(!this.current)return[];var e=this.ho;this.ho=Fs(),this.fo.forEach((function(e){t.Io(e.key)&&(t.ho=t.ho.add(e.key))}));var n=[];return e.forEach((function(e){t.ho.has(e)||n.push(new nf(e))})),this.ho.forEach((function(t){e.has(t)||n.push(new ef(t))})),n},t.prototype.Ao=function(t){this.uo=t.Bn,this.ho=Fs();var e=this._o(t.documents);return this.applyChanges(e,!0)},t.prototype.Ro=function(){return Kl.fromInitialDocuments(this.query,this.fo,this.mutatedKeys,0===this.ao)},t}(),of=function(t,e,n){this.query=t,this.targetId=e,this.view=n},af=function(t){this.key=t,this.bo=!1},sf=function(){function t(t,e,n,r,i,o){this.localStore=t,this.remoteStore=e,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.vo={},this.Po=new $c((function(t){return Fa(t)}),Ma),this.Vo=new Map,this.So=new Set,this.Do=new Ss(Bo.comparator),this.Co=new Map,this.No=new Ph,this.xo={},this.ko=new Map,this.Fo=Vc.Yt(),this.onlineState="Unknown",this.$o=void 0}return Object.defineProperty(t.prototype,"isPrimaryClient",{get:function(){return!0===this.$o},enumerable:!1,configurable:!0}),t}();function uf(t,e){return(0,o.__awaiter)(this,void 0,void 0,(function(){var n,r,i,a,s,u;return(0,o.__generator)(this,(function(o){switch(o.label){case 0:return n=Ff(t),(a=n.Po.get(e))?(r=a.targetId,n.sharedClientState.addLocalQueryTarget(r),i=a.view.Ro(),[3,4]):[3,1];case 1:return[4,Eh(n.localStore,xa(e))];case 2:return s=o.sent(),u=n.sharedClientState.addLocalQueryTarget(s.targetId),r=s.targetId,[4,cf(n,e,r,"current"===u)];case 3:i=o.sent(),n.isPrimaryClient&&gl(n.remoteStore,s),o.label=4;case 4:return[2,i]}}))}))}function cf(t,e,n,r){return(0,o.__awaiter)(this,void 0,void 0,(function(){var i,a,s,u,c,h;return(0,o.__generator)(this,(function(l){switch(l.label){case 0:return t.Oo=function(e,n,r){return function(t,e,n,r){return(0,o.__awaiter)(this,void 0,void 0,(function(){var i,a,s;return(0,o.__generator)(this,(function(o){switch(o.label){case 0:return(i=e.view._o(n)).Nn?[4,Ah(t.localStore,e.query,!1).then((function(t){var n=t.documents;return e.view._o(n,i)}))]:[3,2];case 1:i=o.sent(),o.label=2;case 2:return a=r&&r.targetChanges.get(e.targetId),s=e.view.applyChanges(i,t.isPrimaryClient,a),[2,(If(t,e.targetId,s.To),s.snapshot)]}}))}))}(t,e,n,r)},[4,Ah(t.localStore,e,!0)];case 1:return i=l.sent(),a=new rf(e,i.Bn),s=a._o(i.documents),u=Bs.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==t.onlineState),c=a.applyChanges(s,t.isPrimaryClient,u),If(t,n,c.To),h=new of(e,n,a),[2,(t.Po.set(e,h),t.Vo.has(n)?t.Vo.get(n).push(e):t.Vo.set(n,[e]),c.snapshot)]}}))}))}function hf(t,e){return(0,o.__awaiter)(this,void 0,void 0,(function(){var n,r,i;return(0,o.__generator)(this,(function(o){switch(o.label){case 0:return n=po(t),r=n.Po.get(e),(i=n.Vo.get(r.targetId)).length>1?[2,(n.Vo.set(r.targetId,i.filter((function(t){return!Ma(t,e)}))),void n.Po.delete(e))]:n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)?[3,2]:[4,Sh(n.localStore,r.targetId,!1).then((function(){n.sharedClientState.clearQueryState(r.targetId),ml(n.remoteStore,r.targetId),wf(n,r.targetId)})).catch(Hc)]):[3,3];case 1:o.sent(),o.label=2;case 2:return[3,5];case 3:return wf(n,r.targetId),[4,Sh(n.localStore,r.targetId,!0)];case 4:o.sent(),o.label=5;case 5:return[2]}}))}))}function lf(t,e,n){return(0,o.__awaiter)(this,void 0,void 0,(function(){var r,i,a,s;return(0,o.__generator)(this,(function(o){switch(o.label){case 0:r=Uf(t),o.label=1;case 1:return o.trys.push([1,5,,6]),[4,function(t,e){var n,r=po(t),i=wo.now(),o=e.reduce((function(t,e){return t.add(e.key)}),Fs());return r.persistence.runTransaction("Locally write mutations","readwrite",(function(t){return r.Mn.pn(t,o).next((function(o){n=o;for(var a=[],s=0,u=e;s<u.length;s++){var c=u[s],h=hs(c,n.get(c.key));null!=h&&a.push(new ds(c.key,h,ra(h.value.mapValue),os.exists(!0)))}return r._n.addMutationBatch(t,i,a,e)}))})).then((function(t){return t.applyToLocalDocumentSet(n),{batchId:t.batchId,changes:n}}))}(r.localStore,e)];case 2:return i=o.sent(),r.sharedClientState.addPendingMutation(i.batchId),function(t,e,n){var r=t.xo[t.currentUser.toKey()];r||(r=new Ss(mo)),r=r.insert(e,n),t.xo[t.currentUser.toKey()]=r}(r,i.batchId,n),[4,Sf(r,i.changes)];case 3:return o.sent(),[4,Cl(r.remoteStore)];case 4:return o.sent(),[3,6];case 5:return a=o.sent(),s=Vl(a,"Failed to persist write"),n.reject(s),[3,6];case 6:return[2]}}))}))}function ff(t,e){return(0,o.__awaiter)(this,void 0,void 0,(function(){var n,r;return(0,o.__generator)(this,(function(i){switch(i.label){case 0:n=po(t),i.label=1;case 1:return i.trys.push([1,4,,6]),[4,_h(n.localStore,e)];case 2:return r=i.sent(),e.targetChanges.forEach((function(t,e){var r=n.Co.get(e);r&&(fo(t.addedDocuments.size+t.modifiedDocuments.size+t.removedDocuments.size<=1),t.addedDocuments.size>0?r.bo=!0:t.modifiedDocuments.size>0?fo(r.bo):t.removedDocuments.size>0&&(fo(r.bo),r.bo=!1))})),[4,Sf(n,r,e)];case 3:return i.sent(),[3,6];case 4:return[4,Hc(i.sent())];case 5:return i.sent(),[3,6];case 6:return[2]}}))}))}function pf(t,e,n){var r=po(t);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){var i=[];r.Po.forEach((function(t,n){var r=n.view.zr(e);r.snapshot&&i.push(r.snapshot)})),function(t,e){var n=po(t);n.onlineState=e;var r=!1;n.queries.forEach((function(t,n){for(var i=0,o=n.listeners;i<o.length;i++)o[i].zr(e)&&(r=!0)})),r&&Yl(n)}(r.eventManager,e),i.length&&r.vo._r(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function df(t,e,n){return(0,o.__awaiter)(this,void 0,void 0,(function(){var r,i,a,s,u,c;return(0,o.__generator)(this,(function(o){switch(o.label){case 0:return(r=po(t)).sharedClientState.updateQueryState(e,"rejected",n),i=r.Co.get(e),(a=i&&i.key)?(s=(s=new Ss(Bo.comparator)).insert(a,ia.newNoDocument(a,_o.min())),u=Fs().add(a),c=new Vs(_o.min(),new Map,new Ns(mo),s,u),[4,ff(r,c)]):[3,2];case 1:return o.sent(),r.Do=r.Do.remove(a),r.Co.delete(e),Ef(r),[3,4];case 2:return[4,Sh(r.localStore,e,!1).then((function(){return wf(r,e,n)})).catch(Hc)];case 3:o.sent(),o.label=4;case 4:return[2]}}))}))}function vf(t,e){return(0,o.__awaiter)(this,void 0,void 0,(function(){var n,r,i;return(0,o.__generator)(this,(function(o){switch(o.label){case 0:n=po(t),r=e.batch.batchId,o.label=1;case 1:return o.trys.push([1,4,,6]),[4,bh(n.localStore,e)];case 2:return i=o.sent(),bf(n,r,null),yf(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),[4,Sf(n,i)];case 3:return o.sent(),[3,6];case 4:return[4,Hc(o.sent())];case 5:return o.sent(),[3,6];case 6:return[2]}}))}))}function gf(t,e,n){return(0,o.__awaiter)(this,void 0,void 0,(function(){var r,i;return(0,o.__generator)(this,(function(o){switch(o.label){case 0:r=po(t),o.label=1;case 1:return o.trys.push([1,4,,6]),[4,function(t,e){var n=po(t);return n.persistence.runTransaction("Reject batch","readwrite-primary",(function(t){var r;return n._n.lookupMutationBatch(t,e).next((function(e){return fo(null!==e),r=e.keys(),n._n.removeMutationBatch(t,e)})).next((function(){return n._n.performConsistencyCheck(t)})).next((function(){return n.Mn.pn(t,r)}))}))}(r.localStore,e)];case 2:return i=o.sent(),bf(r,e,n),yf(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),[4,Sf(r,i)];case 3:return o.sent(),[3,6];case 4:return[4,Hc(o.sent())];case 5:return o.sent(),[3,6];case 6:return[2]}}))}))}function mf(t,e){return(0,o.__awaiter)(this,void 0,void 0,(function(){var n,r,i,a,s;return(0,o.__generator)(this,(function(o){switch(o.label){case 0:Il((n=po(t)).remoteStore)||so("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),o.label=1;case 1:return o.trys.push([1,3,,4]),[4,function(t){var e=po(t);return e.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(function(t){return e._n.getHighestUnacknowledgedBatchId(t)}))}(n.localStore)];case 2:return-1===(r=o.sent())?[2,void e.resolve()]:((i=n.ko.get(r)||[]).push(e),n.ko.set(r,i),[3,4]);case 3:return a=o.sent(),s=Vl(a,"Initialization of waitForPendingWrites() operation failed"),e.reject(s),[3,4];case 4:return[2]}}))}))}function yf(t,e){(t.ko.get(e)||[]).forEach((function(t){t.resolve()})),t.ko.delete(e)}function bf(t,e,n){var r=po(t),i=r.xo[r.currentUser.toKey()];if(i){var o=i.get(e);o&&(n?o.reject(n):o.resolve(),i=i.remove(e)),r.xo[r.currentUser.toKey()]=i}}function wf(t,e,n){void 0===n&&(n=null),t.sharedClientState.removeLocalQueryTarget(e);for(var r=0,i=t.Vo.get(e);r<i.length;r++){var o=i[r];t.Po.delete(o),n&&t.vo.Mo(o,n)}t.Vo.delete(e),t.isPrimaryClient&&t.No.Zn(e).forEach((function(e){t.No.containsKey(e)||_f(t,e)}))}function _f(t,e){t.So.delete(e.path.canonicalString());var n=t.Do.get(e);null!==n&&(ml(t.remoteStore,n),t.Do=t.Do.remove(e),t.Co.delete(n),Ef(t))}function If(t,e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r];o instanceof ef?(t.No.addReference(o.key,e),Tf(t,o)):o instanceof nf?(so("SyncEngine","Document no longer in limbo: "+o.key),t.No.removeReference(o.key,e),t.No.containsKey(o.key)||_f(t,o.key)):lo()}}function Tf(t,e){var n=e.key,r=n.path.canonicalString();t.Do.get(n)||t.So.has(r)||(so("SyncEngine","New document in limbo: "+n),t.So.add(r),Ef(t))}function Ef(t){for(;t.So.size>0&&t.Do.size<t.maxConcurrentLimboResolutions;){var e=t.So.values().next().value;t.So.delete(e);var n=new Bo(Ao.fromString(e)),r=t.Fo.next();t.Co.set(r,new af(n)),t.Do=t.Do.insert(n,r),gl(t.remoteStore,new fc(xa(ka(n.path)),r,2,no.o))}}function Sf(t,e,n){return(0,o.__awaiter)(this,void 0,void 0,(function(){var r,i,a,s;return(0,o.__generator)(this,(function(u){switch(u.label){case 0:return r=po(t),i=[],a=[],s=[],r.Po.isEmpty()?[3,3]:(r.Po.forEach((function(t,o){s.push(r.Oo(o,e,n).then((function(t){if(t){r.isPrimaryClient&&r.sharedClientState.updateQueryState(o.targetId,t.fromCache?"not-current":"current"),i.push(t);var e=dh.Pn(o.targetId,t);a.push(e)}})))})),[4,Promise.all(s)]);case 1:return u.sent(),r.vo._r(i),[4,function(t,e){return(0,o.__awaiter)(this,void 0,void 0,(function(){var n,r,i,a,s,u,c,h,l;return(0,o.__generator)(this,(function(o){switch(o.label){case 0:n=po(t),o.label=1;case 1:return o.trys.push([1,3,,4]),[4,n.persistence.runTransaction("notifyLocalViewChanges","readwrite",(function(t){return $u.forEach(e,(function(e){return $u.forEach(e.bn,(function(r){return n.persistence.referenceDelegate.addReference(t,e.targetId,r)})).next((function(){return $u.forEach(e.vn,(function(r){return n.persistence.referenceDelegate.removeReference(t,e.targetId,r)}))}))}))}))];case 2:return o.sent(),[3,4];case 3:if(!rc(r=o.sent()))throw r;return so("LocalStore","Failed to update sequence numbers: "+r),[3,4];case 4:for(i=0,a=e;i<a.length;i++)s=a[i],u=s.targetId,s.fromCache||(c=n.kn.get(u),h=c.snapshotVersion,l=c.withLastLimboFreeSnapshotVersion(h),n.kn=n.kn.insert(u,l));return[2]}}))}))}(r.localStore,a)];case 2:u.sent(),u.label=3;case 3:return[2]}}))}))}function Af(t,e){return(0,o.__awaiter)(this,void 0,void 0,(function(){var n,r;return(0,o.__generator)(this,(function(i){switch(i.label){case 0:return(n=po(t)).currentUser.isEqual(e)?[3,3]:(so("SyncEngine","User change. New user:",e.toKey()),[4,yh(n.localStore,e)]);case 1:return r=i.sent(),n.currentUser=e,function(t,e){t.ko.forEach((function(t){t.forEach((function(t){t.reject(new io(ro.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))}))})),t.ko.clear()}(n),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),[4,Sf(n,r.Ln)];case 2:i.sent(),i.label=3;case 3:return[2]}}))}))}function kf(t,e){var n=po(t),r=n.Co.get(e);if(r&&r.bo)return Fs().add(r.key);var i=Fs(),o=n.Vo.get(e);if(!o)return i;for(var a=0,s=o;a<s.length;a++){var u=s[a],c=n.Po.get(u);i=i.unionWith(c.view.wo)}return i}function Nf(t,e){return(0,o.__awaiter)(this,void 0,void 0,(function(){var n,r,i;return(0,o.__generator)(this,(function(o){switch(o.label){case 0:return[4,Ah((n=po(t)).localStore,e.query,!0)];case 1:return r=o.sent(),i=e.view.Ao(r),[2,(n.isPrimaryClient&&If(n,e.targetId,i.To),i)]}}))}))}function Cf(t){return(0,o.__awaiter)(this,void 0,void 0,(function(){var e;return(0,o.__generator)(this,(function(n){return[2,Nh((e=po(t)).localStore).then((function(t){return Sf(e,t)}))]}))}))}function Of(t,e,n,r){return(0,o.__awaiter)(this,void 0,void 0,(function(){var i,a;return(0,o.__generator)(this,(function(o){switch(o.label){case 0:return[4,function(t,e){var n=po(t),r=po(n._n);return n.persistence.runTransaction("Lookup mutation documents","readonly",(function(t){return r.jt(t,e).next((function(e){return e?n.Mn.pn(t,e):$u.resolve(null)}))}))}((i=po(t)).localStore,e)];case 1:return null===(a=o.sent())?[3,6]:"pending"!==n?[3,3]:[4,Cl(i.remoteStore)];case 2:return o.sent(),[3,4];case 3:"acknowledged"===n||"rejected"===n?(bf(i,e,r||null),yf(i,e),function(t,e){po(po(t)._n).Gt(e)}(i.localStore,e)):lo(),o.label=4;case 4:return[4,Sf(i,a)];case 5:return o.sent(),[3,7];case 6:so("SyncEngine","Cannot apply mutation batch with id: "+e),o.label=7;case 7:return[2]}}))}))}function Df(t,e){return(0,o.__awaiter)(this,void 0,void 0,(function(){var n,r,i,a,s,u,c,h;return(0,o.__generator)(this,(function(o){switch(o.label){case 0:return Ff(n=po(t)),Uf(n),!0!==e||!0===n.$o?[3,3]:(r=n.sharedClientState.getAllActiveQueryTargets(),[4,Rf(n,r.toArray())]);case 1:return i=o.sent(),n.$o=!0,[4,Ml(n.remoteStore,!0)];case 2:for(o.sent(),a=0,s=i;a<s.length;a++)u=s[a],gl(n.remoteStore,u);return[3,7];case 3:return!1!==e||!1===n.$o?[3,7]:(c=[],h=Promise.resolve(),n.Vo.forEach((function(t,e){n.sharedClientState.isLocalQueryTarget(e)?c.push(e):h=h.then((function(){return wf(n,e),Sh(n.localStore,e,!0)})),ml(n.remoteStore,e)})),[4,h]);case 4:return o.sent(),[4,Rf(n,c)];case 5:return o.sent(),function(t){var e=po(t);e.Co.forEach((function(t,n){ml(e.remoteStore,n)})),e.No.ts(),e.Co=new Map,e.Do=new Ss(Bo.comparator)}(n),n.$o=!1,[4,Ml(n.remoteStore,!1)];case 6:o.sent(),o.label=7;case 7:return[2]}}))}))}function Rf(t,e,n){return(0,o.__awaiter)(this,void 0,void 0,(function(){var n,r,i,a,s,u,c,h,l,f,p,d,v,g;return(0,o.__generator)(this,(function(o){switch(o.label){case 0:n=po(t),r=[],i=[],a=0,s=e,o.label=1;case 1:return a<s.length?(u=s[a],c=void 0,(h=n.Vo.get(u))&&0!==h.length?[4,Eh(n.localStore,xa(h[0]))]:[3,7]):[3,13];case 2:c=o.sent(),l=0,f=h,o.label=3;case 3:return l<f.length?(p=f[l],d=n.Po.get(p),[4,Nf(n,d)]):[3,6];case 4:(v=o.sent()).snapshot&&i.push(v.snapshot),o.label=5;case 5:return l++,[3,3];case 6:return[3,11];case 7:return[4,kh(n.localStore,u)];case 8:return g=o.sent(),[4,Eh(n.localStore,g)];case 9:return c=o.sent(),[4,cf(n,Pf(g),u,!1)];case 10:o.sent(),o.label=11;case 11:r.push(c),o.label=12;case 12:return a++,[3,1];case 13:return[2,(n.vo._r(i),r)]}}))}))}function Pf(t){return Aa(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function xf(t){var e=po(t);return po(po(e.localStore).persistence).fn()}function Lf(t,e,n,r){return(0,o.__awaiter)(this,void 0,void 0,(function(){var i,a,s;return(0,o.__generator)(this,(function(o){switch(o.label){case 0:return(i=po(t)).$o?(so("SyncEngine","Ignoring unexpected query state notification."),[3,8]):[3,1];case 1:if(!i.Vo.has(e))return[3,8];switch(n){case"current":case"not-current":return[3,2];case"rejected":return[3,5]}return[3,7];case 2:return[4,Nh(i.localStore)];case 3:return a=o.sent(),s=Vs.createSynthesizedRemoteEventForCurrentChange(e,"current"===n),[4,Sf(i,a,s)];case 4:return o.sent(),[3,8];case 5:return[4,Sh(i.localStore,e,!0)];case 6:return o.sent(),wf(i,e,r),[3,8];case 7:lo(),o.label=8;case 8:return[2]}}))}))}function Mf(t,e,n){return(0,o.__awaiter)(this,void 0,void 0,(function(){var r,i,a,s,u,c,h,l,f,p;return(0,o.__generator)(this,(function(d){switch(d.label){case 0:if(!(r=Ff(t)).$o)return[3,10];i=0,a=e,d.label=1;case 1:return i<a.length?(s=a[i],r.Vo.has(s)?(so("SyncEngine","Adding an already active target "+s),[3,5]):[4,kh(r.localStore,s)]):[3,6];case 2:return u=d.sent(),[4,Eh(r.localStore,u)];case 3:return c=d.sent(),[4,cf(r,Pf(u),c.targetId,!1)];case 4:d.sent(),gl(r.remoteStore,c),d.label=5;case 5:return i++,[3,1];case 6:h=function(t){return(0,o.__generator)(this,(function(e){switch(e.label){case 0:return r.Vo.has(t)?[4,Sh(r.localStore,t,!1).then((function(){ml(r.remoteStore,t),wf(r,t)})).catch(Hc)]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))},l=0,f=n,d.label=7;case 7:return l<f.length?(p=f[l],[5,h(p)]):[3,10];case 8:d.sent(),d.label=9;case 9:return l++,[3,7];case 10:return[2]}}))}))}function Ff(t){var e=po(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=ff.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=kf.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=df.bind(null,e),e.vo._r=Xl.bind(null,e.eventManager),e.vo.Mo=Ql.bind(null,e.eventManager),e}function Uf(t){var e=po(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=vf.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=gf.bind(null,e),e}var jf=function(){function t(){this.synchronizeTabs=!1}return t.prototype.initialize=function(t){return(0,o.__awaiter)(this,void 0,void 0,(function(){return(0,o.__generator)(this,(function(e){switch(e.label){case 0:return this.R=al(t.databaseInfo.databaseId),this.sharedClientState=this.Bo(t),this.persistence=this.qo(t),[4,this.persistence.start()];case 1:return e.sent(),this.gcScheduler=this.Uo(t),this.localStore=this.Ko(t),[2]}}))}))},t.prototype.Uo=function(t){return null},t.prototype.Ko=function(t){return mh(this.persistence,new vh,t.initialUser,this.R)},t.prototype.qo=function(t){return new jh(Bh.bs,this.R)},t.prototype.Bo=function(t){return new $h},t.prototype.terminate=function(){return(0,o.__awaiter)(this,void 0,void 0,(function(){return(0,o.__generator)(this,(function(t){switch(t.label){case 0:return this.gcScheduler&&this.gcScheduler.stop(),[4,this.sharedClientState.shutdown()];case 1:return t.sent(),[4,this.persistence.shutdown()];case 2:return t.sent(),[2]}}))}))},t}(),Vf=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).Qo=e,i.cacheSizeBytes=n,i.forceOwnership=r,i.synchronizeTabs=!1,i}return(0,o.__extends)(e,t),e.prototype.initialize=function(e){return(0,o.__awaiter)(this,void 0,void 0,(function(){var n=this;return(0,o.__generator)(this,(function(r){switch(r.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return r.sent(),[4,Ch(this.localStore)];case 2:return r.sent(),[4,this.Qo.initialize(this,e)];case 3:return r.sent(),[4,Uf(this.Qo.syncEngine)];case 4:return r.sent(),[4,Cl(this.Qo.remoteStore)];case 5:return r.sent(),[4,this.persistence.He((function(){return n.gcScheduler&&!n.gcScheduler.started&&n.gcScheduler.start(n.localStore),Promise.resolve()}))];case 6:return r.sent(),[2]}}))}))},e.prototype.Ko=function(t){return mh(this.persistence,new vh,t.initialUser,this.R)},e.prototype.Uo=function(t){var e=this.persistence.referenceDelegate.garbageCollector;return new Xc(e,t.asyncQueue)},e.prototype.qo=function(t){var e=lh(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?Rc.withCacheSize(this.cacheSizeBytes):Rc.DEFAULT;return new uh(this.synchronizeTabs,e,t.clientId,n,t.asyncQueue,il(),ol(),this.R,this.sharedClientState,!!this.forceOwnership)},e.prototype.Bo=function(t){return new $h},e}(jf),Bf=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n,!1)||this).Qo=e,r.cacheSizeBytes=n,r.synchronizeTabs=!0,r}return(0,o.__extends)(e,t),e.prototype.initialize=function(e){return(0,o.__awaiter)(this,void 0,void 0,(function(){var n,r=this;return(0,o.__generator)(this,(function(i){switch(i.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return i.sent(),n=this.Qo.syncEngine,this.sharedClientState instanceof Jh?(this.sharedClientState.syncEngine={ui:Of.bind(null,n),ai:Lf.bind(null,n),hi:Mf.bind(null,n),fn:xf.bind(null,n),ci:Cf.bind(null,n)},[4,this.sharedClientState.start()]):[3,3];case 2:i.sent(),i.label=3;case 3:return[4,this.persistence.He((function(t){return(0,o.__awaiter)(r,void 0,void 0,(function(){return(0,o.__generator)(this,(function(e){switch(e.label){case 0:return[4,Df(this.Qo.syncEngine,t)];case 1:return e.sent(),this.gcScheduler&&(t&&!this.gcScheduler.started?this.gcScheduler.start(this.localStore):t||this.gcScheduler.stop()),[2]}}))}))}))];case 4:return i.sent(),[2]}}))}))},e.prototype.Bo=function(t){var e=il();if(!Jh.yt(e))throw new io(ro.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=lh(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey);return new Jh(e,t.asyncQueue,n,t.clientId,t.initialUser)},e}(Vf),qf=function(){function t(){}return t.prototype.initialize=function(t,e){return(0,o.__awaiter)(this,void 0,void 0,(function(){var n=this;return(0,o.__generator)(this,(function(r){switch(r.label){case 0:return this.localStore?[3,2]:(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(e),this.remoteStore=this.createRemoteStore(e),this.eventManager=this.createEventManager(e),this.syncEngine=this.createSyncEngine(e,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=function(t){return pf(n.syncEngine,t,1)},this.remoteStore.remoteSyncer.handleCredentialChange=Af.bind(null,this.syncEngine),[4,Ml(this.remoteStore,this.syncEngine.isPrimaryClient)]);case 1:r.sent(),r.label=2;case 2:return[2]}}))}))},t.prototype.createEventManager=function(t){return new Hl},t.prototype.createDatastore=function(t){var e,n=al(t.databaseInfo.databaseId),r=(e=t.databaseInfo,new rl(e));return function(t,e,n){return new ll(t,e,n)}(t.credentials,r,n)},t.prototype.createRemoteStore=function(t){var e,n,r,i,o,a=this;return e=this.localStore,n=this.datastore,r=t.asyncQueue,i=function(t){return pf(a.syncEngine,t,0)},o=tl.yt()?new tl:new Zh,new pl(e,n,r,i,o)},t.prototype.createSyncEngine=function(t,e){return function(t,e,n,r,i,o,a){var s=new sf(t,e,n,r,i,o);return a&&(s.$o=!0),s}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,e)},t.prototype.terminate=function(){return function(t){return(0,o.__awaiter)(this,void 0,void 0,(function(){var e;return(0,o.__generator)(this,(function(n){switch(n.label){case 0:return e=po(t),so("RemoteStore","RemoteStore shutting down."),e.Or.add(5),[4,vl(e)];case 1:return n.sent(),e.Lr.shutdown(),e.Br.set("Unknown"),[2]}}))}))}(this.remoteStore)},t}();var Kf=function(){function t(t){this.observer=t,this.muted=!1}return t.prototype.next=function(t){this.observer.next&&this.jo(this.observer.next,t)},t.prototype.error=function(t){this.observer.error?this.jo(this.observer.error,t):console.error("Uncaught Error in snapshot listener:",t)},t.prototype.Wo=function(){this.muted=!0},t.prototype.jo=function(t,e){var n=this;this.muted||setTimeout((function(){n.muted||t(e)}),0)},t}(),Gf=(function(){function t(t,e){var n=this;this.Go=t,this.R=e,this.metadata=new Ju,this.buffer=new Uint8Array,this.zo=new TextDecoder("utf-8"),this.Ho().then((function(t){t&&t.io()?n.metadata.resolve(t.payload.metadata):n.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             "+JSON.stringify(null==t?void 0:t.payload)))}),(function(t){return n.metadata.reject(t)}))}t.prototype.close=function(){return this.Go.cancel()},t.prototype.getMetadata=function(){return(0,o.__awaiter)(this,void 0,void 0,(function(){return(0,o.__generator)(this,(function(t){return[2,this.metadata.promise]}))}))},t.prototype.Lo=function(){return(0,o.__awaiter)(this,void 0,void 0,(function(){return(0,o.__generator)(this,(function(t){switch(t.label){case 0:return[4,this.getMetadata()];case 1:return[2,(t.sent(),this.Ho())]}}))}))},t.prototype.Ho=function(){return(0,o.__awaiter)(this,void 0,void 0,(function(){var t,e,n,r;return(0,o.__generator)(this,(function(i){switch(i.label){case 0:return[4,this.Jo()];case 1:return null===(t=i.sent())?[2,null]:(e=this.zo.decode(t),n=Number(e),isNaN(n)&&this.Yo("length string ("+e+") is not valid number"),[4,this.Xo(n)]);case 2:return r=i.sent(),[2,new $l(JSON.parse(r),t.length+n)]}}))}))},t.prototype.Zo=function(){return this.buffer.findIndex((function(t){return t==="{".charCodeAt(0)}))},t.prototype.Jo=function(){return(0,o.__awaiter)(this,void 0,void 0,(function(){var t,e;return(0,o.__generator)(this,(function(n){switch(n.label){case 0:return this.Zo()<0?[4,this.tc()]:[3,3];case 1:if(n.sent())return[3,3];n.label=2;case 2:return[3,0];case 3:return 0===this.buffer.length?[2,null]:((t=this.Zo())<0&&this.Yo("Reached the end of bundle when a length string is expected."),e=this.buffer.slice(0,t),[2,(this.buffer=this.buffer.slice(t),e)])}}))}))},t.prototype.Xo=function(t){return(0,o.__awaiter)(this,void 0,void 0,(function(){var e;return(0,o.__generator)(this,(function(n){switch(n.label){case 0:return this.buffer.length<t?[4,this.tc()]:[3,3];case 1:n.sent()&&this.Yo("Reached the end of bundle when more is expected."),n.label=2;case 2:return[3,0];case 3:return e=this.zo.decode(this.buffer.slice(0,t)),[2,(this.buffer=this.buffer.slice(t),e)]}}))}))},t.prototype.Yo=function(t){throw this.Go.cancel(),new Error("Invalid bundle format: "+t)},t.prototype.tc=function(){return(0,o.__awaiter)(this,void 0,void 0,(function(){var t,e;return(0,o.__generator)(this,(function(n){switch(n.label){case 0:return[4,this.Go.read()];case 1:return(t=n.sent()).done||((e=new Uint8Array(this.buffer.length+t.value.length)).set(this.buffer),e.set(t.value,this.buffer.length),this.buffer=e),[2,t.done]}}))}))}}(),function(){function t(t){this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}return t.prototype.lookup=function(t){return(0,o.__awaiter)(this,void 0,void 0,(function(){var e,n=this;return(0,o.__generator)(this,(function(r){switch(r.label){case 0:if(this.ensureCommitNotCalled(),this.mutations.length>0)throw new io(ro.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");return[4,function(t,e){return(0,o.__awaiter)(this,void 0,void 0,(function(){var n,r,i,a,s,u;return(0,o.__generator)(this,(function(o){switch(o.label){case 0:return n=po(t),r=uu(n.R)+"/documents",i={documents:e.map((function(t){return iu(n.R,t)}))},[4,n.$i("BatchGetDocuments",r,i)];case 1:return a=o.sent(),s=new Map,a.forEach((function(t){var e=function(t,e){return"found"in e?function(t,e){fo(!!e.found),e.found.name,e.found.updateTime;var n=ou(t,e.found.name),r=eu(e.found.updateTime),i=new na({mapValue:{fields:e.found.fields}});return ia.newFoundDocument(n,r,i)}(t,e):"missing"in e?function(t,e){fo(!!e.missing),fo(!!e.readTime);var n=ou(t,e.missing),r=eu(e.readTime);return ia.newNoDocument(n,r)}(t,e):lo()}(n.R,t);s.set(e.key.toString(),e)})),u=[],[2,(e.forEach((function(t){var e=s.get(t.toString());fo(!!e),u.push(e)})),u)]}}))}))}(this.datastore,t)];case 1:return[2,((e=r.sent()).forEach((function(t){return n.recordVersion(t)})),e)]}}))}))},t.prototype.set=function(t,e){this.write(e.toMutation(t,this.precondition(t))),this.writtenDocs.add(t.toString())},t.prototype.update=function(t,e){try{this.write(e.toMutation(t,this.preconditionForUpdate(t)))}catch(t){this.lastWriteError=t}this.writtenDocs.add(t.toString())},t.prototype.delete=function(t){this.write(new ws(t,this.precondition(t))),this.writtenDocs.add(t.toString())},t.prototype.commit=function(){return(0,o.__awaiter)(this,void 0,void 0,(function(){var t,e=this;return(0,o.__generator)(this,(function(n){switch(n.label){case 0:if(this.ensureCommitNotCalled(),this.lastWriteError)throw this.lastWriteError;return t=this.readVersions,this.mutations.forEach((function(e){t.delete(e.key.toString())})),t.forEach((function(t,n){var r=Bo.fromPath(n);e.mutations.push(new _s(r,e.precondition(r)))})),[4,function(t,e){return(0,o.__awaiter)(this,void 0,void 0,(function(){var n,r,i;return(0,o.__generator)(this,(function(o){switch(o.label){case 0:return n=po(t),r=uu(n.R)+"/documents",i={writes:e.map((function(t){return fu(n.R,t)}))},[4,n.Ni("Commit",r,i)];case 1:return o.sent(),[2]}}))}))}(this.datastore,this.mutations)];case 1:return n.sent(),this.committed=!0,[2]}}))}))},t.prototype.recordVersion=function(t){var e;if(t.isFoundDocument())e=t.version;else{if(!t.isNoDocument())throw lo();e=_o.min()}var n=this.readVersions.get(t.key.toString());if(n){if(!e.isEqual(n))throw new io(ro.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(t.key.toString(),e)},t.prototype.precondition=function(t){var e=this.readVersions.get(t.toString());return!this.writtenDocs.has(t.toString())&&e?os.updateTime(e):os.none()},t.prototype.preconditionForUpdate=function(t){var e=this.readVersions.get(t.toString());if(!this.writtenDocs.has(t.toString())&&e){if(e.isEqual(_o.min()))throw new io(ro.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return os.updateTime(e)}return os.exists(!0)},t.prototype.write=function(t){this.ensureCommitNotCalled(),this.mutations.push(t)},t.prototype.ensureCommitNotCalled=function(){},t}()),Hf=function(){function t(t,e,n,r){this.asyncQueue=t,this.datastore=e,this.updateFunction=n,this.deferred=r,this.ec=5,this.Zi=new sl(this.asyncQueue,"transaction_retry")}return t.prototype.run=function(){this.ec-=1,this.nc()},t.prototype.nc=function(){var t=this;this.Zi.ji((function(){return(0,o.__awaiter)(t,void 0,void 0,(function(){var t,e,n=this;return(0,o.__generator)(this,(function(r){return t=new Gf(this.datastore),(e=this.sc(t))&&e.then((function(e){n.asyncQueue.enqueueAndForget((function(){return t.commit().then((function(){n.deferred.resolve(e)})).catch((function(t){n.ic(t)}))}))})).catch((function(t){n.ic(t)})),[2]}))}))}))},t.prototype.sc=function(t){try{var e=this.updateFunction(t);return!Uo(e)&&e.catch&&e.then?e:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}},t.prototype.ic=function(t){var e=this;this.ec>0&&this.rc(t)?(this.ec-=1,this.asyncQueue.enqueueAndForget((function(){return e.nc(),Promise.resolve()}))):this.deferred.reject(t)},t.prototype.rc=function(t){if("FirebaseError"===t.name){var e=t.code;return"aborted"===e||"failed-precondition"===e||!Ts(e)}return!1},t}(),zf=function(){function t(t,e,n){var r=this;this.credentials=t,this.asyncQueue=e,this.databaseInfo=n,this.user=qh.UNAUTHENTICATED,this.clientId=go.u(),this.credentialListener=function(){return Promise.resolve()},this.credentials.setChangeListener(e,(function(t){return(0,o.__awaiter)(r,void 0,void 0,(function(){return(0,o.__generator)(this,(function(e){switch(e.label){case 0:return so("FirestoreClient","Received user=",t.uid),[4,this.credentialListener(t)];case 1:return e.sent(),this.user=t,[2]}}))}))}))}return t.prototype.getConfiguration=function(){return(0,o.__awaiter)(this,void 0,void 0,(function(){return(0,o.__generator)(this,(function(t){return[2,{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,credentials:this.credentials,initialUser:this.user,maxConcurrentLimboResolutions:100}]}))}))},t.prototype.setCredentialChangeListener=function(t){this.credentialListener=t},t.prototype.verifyNotTerminated=function(){if(this.asyncQueue.isShuttingDown)throw new io(ro.FAILED_PRECONDITION,"The client has already been terminated.")},t.prototype.terminate=function(){var t=this;this.asyncQueue.enterRestrictedMode();var e=new Ju;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((function(){return(0,o.__awaiter)(t,void 0,void 0,(function(){var t,n;return(0,o.__generator)(this,(function(r){switch(r.label){case 0:return r.trys.push([0,5,,6]),this.onlineComponents?[4,this.onlineComponents.terminate()]:[3,2];case 1:r.sent(),r.label=2;case 2:return this.offlineComponents?[4,this.offlineComponents.terminate()]:[3,4];case 3:r.sent(),r.label=4;case 4:return this.credentials.removeChangeListener(),e.resolve(),[3,6];case 5:return t=r.sent(),n=Vl(t,"Failed to shutdown persistence"),e.reject(n),[3,6];case 6:return[2]}}))}))})),e.promise},t}();function Wf(t,e){return(0,o.__awaiter)(this,void 0,void 0,(function(){var n,r,i=this;return(0,o.__generator)(this,(function(a){switch(a.label){case 0:return t.asyncQueue.verifyOperationInProgress(),so("FirestoreClient","Initializing OfflineComponentProvider"),[4,t.getConfiguration()];case 1:return n=a.sent(),[4,e.initialize(n)];case 2:return a.sent(),r=n.initialUser,t.setCredentialChangeListener((function(t){return(0,o.__awaiter)(i,void 0,void 0,(function(){return(0,o.__generator)(this,(function(n){switch(n.label){case 0:return r.isEqual(t)?[3,2]:[4,yh(e.localStore,t)];case 1:n.sent(),r=t,n.label=2;case 2:return[2]}}))}))})),e.persistence.setDatabaseDeletedListener((function(){return t.terminate()})),t.offlineComponents=e,[2]}}))}))}function Xf(t,e){return(0,o.__awaiter)(this,void 0,void 0,(function(){var n,r;return(0,o.__generator)(this,(function(i){switch(i.label){case 0:return t.asyncQueue.verifyOperationInProgress(),[4,Qf(t)];case 1:return n=i.sent(),so("FirestoreClient","Initializing OnlineComponentProvider"),[4,t.getConfiguration()];case 2:return r=i.sent(),[4,e.initialize(n,r)];case 3:return i.sent(),t.setCredentialChangeListener((function(t){return function(t,e){return(0,o.__awaiter)(this,void 0,void 0,(function(){var n,r;return(0,o.__generator)(this,(function(i){switch(i.label){case 0:return(n=po(t)).asyncQueue.verifyOperationInProgress(),so("RemoteStore","RemoteStore received new credentials"),r=Il(n),n.Or.add(3),[4,vl(n)];case 1:return i.sent(),r&&n.Br.set("Unknown"),[4,n.remoteSyncer.handleCredentialChange(e)];case 2:return i.sent(),n.Or.delete(3),[4,dl(n)];case 3:return i.sent(),[2]}}))}))}(e.remoteStore,t)})),t.onlineComponents=e,[2]}}))}))}function Qf(t){return(0,o.__awaiter)(this,void 0,void 0,(function(){return(0,o.__generator)(this,(function(e){switch(e.label){case 0:return t.offlineComponents?[3,2]:(so("FirestoreClient","Using default OfflineComponentProvider"),[4,Wf(t,new jf)]);case 1:e.sent(),e.label=2;case 2:return[2,t.offlineComponents]}}))}))}function Yf(t){return(0,o.__awaiter)(this,void 0,void 0,(function(){return(0,o.__generator)(this,(function(e){switch(e.label){case 0:return t.onlineComponents?[3,2]:(so("FirestoreClient","Using default OnlineComponentProvider"),[4,Xf(t,new qf)]);case 1:e.sent(),e.label=2;case 2:return[2,t.onlineComponents]}}))}))}function Jf(t){return Qf(t).then((function(t){return t.persistence}))}function $f(t){return Qf(t).then((function(t){return t.localStore}))}function Zf(t){return Yf(t).then((function(t){return t.remoteStore}))}function tp(t){return Yf(t).then((function(t){return t.syncEngine}))}function ep(t){return(0,o.__awaiter)(this,void 0,void 0,(function(){var e,n;return(0,o.__generator)(this,(function(r){switch(r.label){case 0:return[4,Yf(t)];case 1:return e=r.sent(),[2,((n=e.eventManager).onListen=uf.bind(null,e.syncEngine),n.onUnlisten=hf.bind(null,e.syncEngine),n)]}}))}))}function np(t,e,n){var r=this;void 0===n&&(n={});var i=new Ju;return t.asyncQueue.enqueueAndForget((function(){return(0,o.__awaiter)(r,void 0,void 0,(function(){var r;return(0,o.__generator)(this,(function(o){switch(o.label){case 0:return r=function(t,e,n,r,i){var o=new Kf({next:function(o){e.enqueueAndForget((function(){return Wl(t,a)}));var s=o.docs.has(n);!s&&o.fromCache?i.reject(new io(ro.UNAVAILABLE,"Failed to get document because the client is offline.")):s&&o.fromCache&&r&&"server"===r.source?i.reject(new io(ro.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(o)},error:function(t){return i.reject(t)}}),a=new Jl(ka(n.path),o,{includeMetadataChanges:!0,so:!0});return zl(t,a)},[4,ep(t)];case 1:return[2,r.apply(void 0,[o.sent(),t.asyncQueue,e,n,i])]}}))}))})),i.promise}function rp(t,e,n){var r=this;void 0===n&&(n={});var i=new Ju;return t.asyncQueue.enqueueAndForget((function(){return(0,o.__awaiter)(r,void 0,void 0,(function(){var r;return(0,o.__generator)(this,(function(o){switch(o.label){case 0:return r=function(t,e,n,r,i){var o=new Kf({next:function(n){e.enqueueAndForget((function(){return Wl(t,a)})),n.fromCache&&"server"===r.source?i.reject(new io(ro.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(t){return i.reject(t)}}),a=new Jl(n,o,{includeMetadataChanges:!0,so:!0});return zl(t,a)},[4,ep(t)];case 1:return[2,r.apply(void 0,[o.sent(),t.asyncQueue,e,n,i])]}}))}))})),i.promise}var ip=function(t,e,n,r,i,o,a,s){this.databaseId=t,this.appId=e,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.useFetchStreams=s},op=function(){function t(t,e){this.projectId=t,this.database=e||"(default)"}return Object.defineProperty(t.prototype,"isDefaultDatabase",{get:function(){return"(default)"===this.database},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database},t}(),ap=new Map,sp=function(t,e){this.user=e,this.type="OAuth",this.authHeaders={},this.authHeaders.Authorization="Bearer "+t},up=function(){function t(){this.changeListener=null}return t.prototype.getToken=function(){return Promise.resolve(null)},t.prototype.invalidateToken=function(){},t.prototype.setChangeListener=function(t,e){this.changeListener=e,t.enqueueRetryable((function(){return e(qh.UNAUTHENTICATED)}))},t.prototype.removeChangeListener=function(){this.changeListener=null},t}(),cp=function(){function t(t){this.token=t,this.changeListener=null}return t.prototype.getToken=function(){return Promise.resolve(this.token)},t.prototype.invalidateToken=function(){},t.prototype.setChangeListener=function(t,e){var n=this;this.changeListener=e,t.enqueueRetryable((function(){return e(n.token.user)}))},t.prototype.removeChangeListener=function(){this.changeListener=null},t}(),hp=function(){function t(t){var e=this;this.currentUser=qh.UNAUTHENTICATED,this.oc=new Ju,this.cc=0,this.forceRefresh=!1,this.auth=null,this.asyncQueue=null,this.uc=function(){e.cc++,e.currentUser=e.ac(),e.oc.resolve(),e.changeListener&&e.asyncQueue.enqueueRetryable((function(){return e.changeListener(e.currentUser)}))};var n=function(t){so("FirebaseCredentialsProvider","Auth detected"),e.auth=t,e.auth.addAuthTokenListener(e.uc)};t.onInit((function(t){return n(t)})),setTimeout((function(){if(!e.auth){var r=t.getImmediate({optional:!0});r?n(r):(so("FirebaseCredentialsProvider","Auth not yet detected"),e.oc.resolve())}}),0)}return t.prototype.getToken=function(){var t=this,e=this.cc,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((function(n){return t.cc!==e?(so("FirebaseCredentialsProvider","getToken aborted due to token change."),t.getToken()):n?(fo("string"==typeof n.accessToken),new sp(n.accessToken,t.currentUser)):null})):Promise.resolve(null)},t.prototype.invalidateToken=function(){this.forceRefresh=!0},t.prototype.setChangeListener=function(t,e){var n=this;this.asyncQueue=t,this.asyncQueue.enqueueRetryable((function(){return(0,o.__awaiter)(n,void 0,void 0,(function(){return(0,o.__generator)(this,(function(t){switch(t.label){case 0:return[4,this.oc.promise];case 1:return t.sent(),[4,e(this.currentUser)];case 2:return t.sent(),this.changeListener=e,[2]}}))}))}))},t.prototype.removeChangeListener=function(){this.auth&&this.auth.removeAuthTokenListener(this.uc),this.changeListener=function(){return Promise.resolve()}},t.prototype.ac=function(){var t=this.auth&&this.auth.getUid();return fo(null===t||"string"==typeof t),new qh(t)},t}(),lp=function(){function t(t,e,n){this.hc=t,this.lc=e,this.fc=n,this.type="FirstParty",this.user=qh.FIRST_PARTY}return Object.defineProperty(t.prototype,"authHeaders",{get:function(){var t={"X-Goog-AuthUser":this.lc},e=this.hc.auth.getAuthHeaderValueForFirstParty([]);return e&&(t.Authorization=e),this.fc&&(t["X-Goog-Iam-Authorization-Token"]=this.fc),t},enumerable:!1,configurable:!0}),t}(),fp=function(){function t(t,e,n){this.hc=t,this.lc=e,this.fc=n}return t.prototype.getToken=function(){return Promise.resolve(new lp(this.hc,this.lc,this.fc))},t.prototype.setChangeListener=function(t,e){t.enqueueRetryable((function(){return e(qh.FIRST_PARTY)}))},t.prototype.removeChangeListener=function(){},t.prototype.invalidateToken=function(){},t}();function pp(t,e,n){if(!n)throw new io(ro.INVALID_ARGUMENT,"Function "+t+"() cannot be called with an empty "+e+".")}function dp(t,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new io(ro.INVALID_ARGUMENT,"Invalid options passed to function "+t+'(): You cannot specify both "merge" and "mergeFields".');return e}function vp(t,e,n,r){if(!0===e&&!0===r)throw new io(ro.INVALID_ARGUMENT,t+" and "+n+" cannot be used together.")}function gp(t){if(!Bo.isDocumentKey(t))throw new io(ro.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t+" has "+t.length+".")}function mp(t){if(Bo.isDocumentKey(t))throw new io(ro.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but "+t+" has "+t.length+".")}function yp(t){if(void 0===t)return"undefined";if(null===t)return"null";if("string"==typeof t)return t.length>20&&(t=t.substring(0,20)+"..."),JSON.stringify(t);if("number"==typeof t||"boolean"==typeof t)return""+t;if("object"==typeof t){if(t instanceof Array)return"an array";var e=function(t){if(t.constructor){var e=/function\s+([^\s(]+)\s*\(/.exec(t.constructor.toString());if(e&&e.length>1)return e[1]}return null}(t);return e?"a custom "+e+" object":"an object"}return"function"==typeof t?"a function":lo()}function bp(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new io(ro.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=yp(t);throw new io(ro.INVALID_ARGUMENT,"Expected type '"+e.name+"', but it was: "+n)}return t}function wp(t,e){if(e<=0)throw new io(ro.INVALID_ARGUMENT,"Function "+t+"() requires a positive number, but it was: "+e+".")}var _p=function(){function t(t){var e;if(void 0===t.host){if(void 0!==t.ssl)throw new io(ro.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(e=t.ssl)||void 0===e||e;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new io(ro.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.useFetchStreams=!!t.useFetchStreams,vp("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}return t.prototype.isEqual=function(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams},t}(),Ip=function(){function t(t,e){this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new _p({}),this._settingsFrozen=!1,t instanceof op?(this._databaseId=t,this._credentials=new up):(this._app=t,this._databaseId=function(t){if(!Object.prototype.hasOwnProperty.apply(t.options,["projectId"]))throw new io(ro.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new op(t.options.projectId)}(t),this._credentials=new hp(e))}return Object.defineProperty(t.prototype,"app",{get:function(){if(!this._app)throw new io(ro.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_initialized",{get:function(){return this._settingsFrozen},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_terminated",{get:function(){return void 0!==this._terminateTask},enumerable:!1,configurable:!0}),t.prototype._setSettings=function(t){if(this._settingsFrozen)throw new io(ro.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new _p(t),void 0!==t.credentials&&(this._credentials=function(t){if(!t)return new up;switch(t.type){case"gapi":var e=t.client;return fo(!("object"!=typeof e||null===e||!e.auth||!e.auth.getAuthHeaderValueForFirstParty)),new fp(e,t.sessionIndex||"0",t.iamToken||null);case"provider":return t.client;default:throw new io(ro.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(t.credentials))},t.prototype._getSettings=function(){return this._settings},t.prototype._freezeSettings=function(){return this._settingsFrozen=!0,this._settings},t.prototype._delete=function(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask},t.prototype.toJSON=function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}},t.prototype._terminate=function(){return this,(t=ap.get(this))&&(so("ComponentProvider","Removing Datastore"),ap.delete(this),t.terminate()),Promise.resolve();var t},t}(),Tp=function(){function t(t,e,n){this.converter=e,this._key=n,this.type="document",this.firestore=t}return Object.defineProperty(t.prototype,"_path",{get:function(){return this._key.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this._key.path.canonicalString()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return new Sp(this.firestore,this.converter,this._key.path.popLast())},enumerable:!1,configurable:!0}),t.prototype.withConverter=function(e){return new t(this.firestore,e,this._key)},t}(),Ep=function(){function t(t,e,n){this.converter=e,this._query=n,this.type="query",this.firestore=t}return t.prototype.withConverter=function(e){return new t(this.firestore,e,this._query)},t}(),Sp=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,ka(r))||this)._path=r,i.type="collection",i}return(0,o.__extends)(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this._query.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._query.path.canonicalString()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this._path.popLast();return t.isEmpty()?null:new Tp(this.firestore,null,new Bo(t))},enumerable:!1,configurable:!0}),e.prototype.withConverter=function(t){return new e(this.firestore,t,this._path)},e}(Ep);function Ap(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(t=(0,a.getModularInstance)(t),pp("collection","path",e),t instanceof Ip)return mp(n=Ao.fromString.apply(Ao,(0,o.__spreadArray)([e],r))),new Sp(t,null,n);if(!(t instanceof Tp||t instanceof Sp))throw new io(ro.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return mp(n=Ao.fromString.apply(Ao,(0,o.__spreadArray)([t.path],r)).child(Ao.fromString(e))),new Sp(t.firestore,null,n)}function kp(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(t=(0,a.getModularInstance)(t),1===arguments.length&&(e=go.u()),pp("doc","path",e),t instanceof Ip)return gp(n=Ao.fromString.apply(Ao,(0,o.__spreadArray)([e],r))),new Tp(t,null,new Bo(n));if(!(t instanceof Tp||t instanceof Sp))throw new io(ro.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return gp(n=t._path.child(Ao.fromString.apply(Ao,(0,o.__spreadArray)([e],r)))),new Tp(t.firestore,t instanceof Sp?t.converter:null,new Bo(n))}function Np(t,e){return t=(0,a.getModularInstance)(t),e=(0,a.getModularInstance)(e),(t instanceof Tp||t instanceof Sp)&&(e instanceof Tp||e instanceof Sp)&&t.firestore===e.firestore&&t.path===e.path&&t.converter===e.converter}function Cp(t,e){return t=(0,a.getModularInstance)(t),e=(0,a.getModularInstance)(e),t instanceof Ep&&e instanceof Ep&&t.firestore===e.firestore&&Ma(t._query,e._query)&&t.converter===e.converter}var Op=function(){function t(){var t=this;this.dc=Promise.resolve(),this.wc=[],this._c=!1,this.mc=[],this.yc=null,this.gc=!1,this.Ec=!1,this.Tc=[],this.Zi=new sl(this,"async_queue_retry"),this.Ic=function(){var e=ol();e&&so("AsyncQueue","Visibility state changed to "+e.visibilityState),t.Zi.Gi()};var e=ol();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Ic)}return Object.defineProperty(t.prototype,"isShuttingDown",{get:function(){return this._c},enumerable:!1,configurable:!0}),t.prototype.enqueueAndForget=function(t){this.enqueue(t)},t.prototype.enqueueAndForgetEvenWhileRestricted=function(t){this.Ac(),this.Rc(t)},t.prototype.enterRestrictedMode=function(t){if(!this._c){this._c=!0,this.Ec=t||!1;var e=ol();e&&"function"==typeof e.removeEventListener&&e.removeEventListener("visibilitychange",this.Ic)}},t.prototype.enqueue=function(t){var e=this;if(this.Ac(),this._c)return new Promise((function(){}));var n=new Ju;return this.Rc((function(){return e._c&&e.Ec?Promise.resolve():(t().then(n.resolve,n.reject),n.promise)})).then((function(){return n.promise}))},t.prototype.enqueueRetryable=function(t){var e=this;this.enqueueAndForget((function(){return e.wc.push(t),e.bc()}))},t.prototype.bc=function(){return(0,o.__awaiter)(this,void 0,void 0,(function(){var t,e=this;return(0,o.__generator)(this,(function(n){switch(n.label){case 0:if(0===this.wc.length)return[3,5];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.wc[0]()];case 2:return n.sent(),this.wc.shift(),this.Zi.reset(),[3,4];case 3:if(!rc(t=n.sent()))throw t;return so("AsyncQueue","Operation failed with retryable error: "+t),[3,4];case 4:this.wc.length>0&&this.Zi.ji((function(){return e.bc()})),n.label=5;case 5:return[2]}}))}))},t.prototype.Rc=function(t){var e=this,n=this.dc.then((function(){return e.gc=!0,t().catch((function(t){throw e.yc=t,e.gc=!1,uo("INTERNAL UNHANDLED ERROR: ",function(t){var e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+"\n"+t.stack),e}(t)),t})).then((function(t){return e.gc=!1,t}))}));return this.dc=n,n},t.prototype.enqueueAfterDelay=function(t,e,n){var r=this;this.Ac(),this.Tc.indexOf(t)>-1&&(e=0);var i=jl.createAndSchedule(this,t,e,n,(function(t){return r.vc(t)}));return this.mc.push(i),i},t.prototype.Ac=function(){this.yc&&lo()},t.prototype.verifyOperationInProgress=function(){},t.prototype.Pc=function(){return(0,o.__awaiter)(this,void 0,void 0,(function(){var t;return(0,o.__generator)(this,(function(e){switch(e.label){case 0:return[4,t=this.dc];case 1:e.sent(),e.label=2;case 2:if(t!==this.dc)return[3,0];e.label=3;case 3:return[2]}}))}))},t.prototype.Vc=function(t){for(var e=0,n=this.mc;e<n.length;e++)if(n[e].timerId===t)return!0;return!1},t.prototype.Sc=function(t){var e=this;return this.Pc().then((function(){e.mc.sort((function(t,e){return t.targetTimeMs-e.targetTimeMs}));for(var n=0,r=e.mc;n<r.length;n++){var i=r[n];if(i.skipDelay(),"all"!==t&&i.timerId===t)break}return e.Pc()}))},t.prototype.Dc=function(t){this.Tc.push(t)},t.prototype.vc=function(t){var e=this.mc.indexOf(t);this.mc.splice(e,1)},t}();function Dp(t){return function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=t,r=0,i=["next","error","complete"];r<i.length;r++){var o=i[r];if(o in n&&"function"==typeof n[o])return!0}return!1}(t)}!function(){function t(){this._progressObserver={},this._taskCompletionResolver=new Ju,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}t.prototype.onProgress=function(t,e,n){this._progressObserver={next:t,error:e,complete:n}},t.prototype.catch=function(t){return this._taskCompletionResolver.promise.catch(t)},t.prototype.then=function(t,e){return this._taskCompletionResolver.promise.then(t,e)},t.prototype._completeWith=function(t){this._updateProgress(t),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(t)},t.prototype._failWith=function(t){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(t),this._taskCompletionResolver.reject(t)},t.prototype._updateProgress=function(t){this._lastProgress=t,this._progressObserver.next&&this._progressObserver.next(t)}}();var Rp=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this).type="firestore",r._queue=new Op,r._persistenceKey="name"in e?e.name:"[DEFAULT]",r}return(0,o.__extends)(e,t),e.prototype._terminate=function(){return this._firestoreClient||xp(this),this._firestoreClient.terminate()},e}(Ip);function Pp(t){return t._firestoreClient||xp(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function xp(t){var e,n=t._freezeSettings(),r=function(t,e,n,r){return new ip(t,e,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,r.useFetchStreams)}(t._databaseId,(null===(e=t._app)||void 0===e?void 0:e.options.appId)||"",t._persistenceKey,n);t._firestoreClient=new zf(t._credentials,t._queue,r)}function Lp(t,e,n){var r=this,i=new Ju;return t.asyncQueue.enqueue((function(){return(0,o.__awaiter)(r,void 0,void 0,(function(){var r;return(0,o.__generator)(this,(function(o){switch(o.label){case 0:return o.trys.push([0,3,,4]),[4,Wf(t,n)];case 1:return o.sent(),[4,Xf(t,e)];case 2:return o.sent(),i.resolve(),[3,4];case 3:if(!function(t){return"FirebaseError"===t.name?t.code===ro.FAILED_PRECONDITION||t.code===ro.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&t instanceof DOMException)||22===t.code||20===t.code||11===t.code}(r=o.sent()))throw r;return console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+r),i.reject(r),[3,4];case 4:return[2]}}))}))})).then((function(){return i.promise}))}function Mp(t){if(t._initialized||t._terminated)throw new io(ro.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var Fp=function(){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=0;n<t.length;++n)if(0===t[n].length)throw new io(ro.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new No(t)}return t.prototype.isEqual=function(t){return this._internalPath.isEqual(t._internalPath)},t}(),Up=function(){function t(t){this._byteString=t}return t.fromBase64String=function(e){try{return new t(Oo.fromBase64String(e))}catch(e){throw new io(ro.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}},t.fromUint8Array=function(e){return new t(Oo.fromUint8Array(e))},t.prototype.toBase64=function(){return this._byteString.toBase64()},t.prototype.toUint8Array=function(){return this._byteString.toUint8Array()},t.prototype.toString=function(){return"Bytes(base64: "+this.toBase64()+")"},t.prototype.isEqual=function(t){return this._byteString.isEqual(t._byteString)},t}(),jp=function(t){this._methodName=t},Vp=function(){function t(t,e){if(!isFinite(t)||t<-90||t>90)throw new io(ro.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new io(ro.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}return Object.defineProperty(t.prototype,"latitude",{get:function(){return this._lat},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"longitude",{get:function(){return this._long},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this._lat===t._lat&&this._long===t._long},t.prototype.toJSON=function(){return{latitude:this._lat,longitude:this._long}},t.prototype._compareTo=function(t){return mo(this._lat,t._lat)||mo(this._long,t._long)},t}(),Bp=/^__.*__$/,qp=function(){function t(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}return t.prototype.toMutation=function(t,e){return null!==this.fieldMask?new ds(t,this.data,this.fieldMask,e,this.fieldTransforms):new ps(t,this.data,e,this.fieldTransforms)},t}(),Kp=function(){function t(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}return t.prototype.toMutation=function(t,e){return new ds(t,this.data,this.fieldMask,e,this.fieldTransforms)},t}();function Gp(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw lo()}}var Hp=function(){function t(t,e,n,r,i,o){this.settings=t,this.databaseId=e,this.R=n,this.ignoreUndefinedProperties=r,void 0===i&&this.Cc(),this.fieldTransforms=i||[],this.fieldMask=o||[]}return Object.defineProperty(t.prototype,"path",{get:function(){return this.settings.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Nc",{get:function(){return this.settings.Nc},enumerable:!1,configurable:!0}),t.prototype.xc=function(e){return new t(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.R,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)},t.prototype.kc=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.xc({path:n,Fc:!1});return r.$c(t),r},t.prototype.Oc=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.xc({path:n,Fc:!1});return r.Cc(),r},t.prototype.Mc=function(t){return this.xc({path:void 0,Fc:!0})},t.prototype.Lc=function(t){return ld(t,this.settings.methodName,this.settings.Bc||!1,this.path,this.settings.qc)},t.prototype.contains=function(t){return void 0!==this.fieldMask.find((function(e){return t.isPrefixOf(e)}))||void 0!==this.fieldTransforms.find((function(e){return t.isPrefixOf(e.field)}))},t.prototype.Cc=function(){if(this.path)for(var t=0;t<this.path.length;t++)this.$c(this.path.get(t))},t.prototype.$c=function(t){if(0===t.length)throw this.Lc("Document fields must not be empty");if(Gp(this.Nc)&&Bp.test(t))throw this.Lc('Document fields cannot begin and end with "__"')},t}(),zp=function(){function t(t,e,n){this.databaseId=t,this.ignoreUndefinedProperties=e,this.R=n||al(t)}return t.prototype.Uc=function(t,e,n,r){return void 0===r&&(r=!1),new Hp({Nc:t,methodName:e,qc:n,path:No.emptyPath(),Fc:!1,Bc:r},this.databaseId,this.R,this.ignoreUndefinedProperties)},t}();function Wp(t){var e=t._freezeSettings(),n=al(t._databaseId);return new zp(t._databaseId,!!e.ignoreUndefinedProperties,n)}function Xp(t,e,n,r,i,o){void 0===o&&(o={});var a=t.Uc(o.merge||o.mergeFields?2:0,e,n,i);sd("Data must be an object, but it was:",a,r);var s,u,c=od(r,a);if(o.merge)s=new Co(a.fieldMask),u=a.fieldTransforms;else if(o.mergeFields){for(var h=[],l=0,f=o.mergeFields;l<f.length;l++){var p=ud(e,f[l],n);if(!a.contains(p))throw new io(ro.INVALID_ARGUMENT,"Field '"+p+"' is specified in your field mask but missing from your input data.");fd(h,p)||h.push(p)}s=new Co(h),u=a.fieldTransforms.filter((function(t){return s.covers(t.field)}))}else s=null,u=a.fieldTransforms;return new qp(new na(c),s,u)}var Qp=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,o.__extends)(e,t),e.prototype._toFieldTransform=function(t){if(2!==t.Nc)throw 1===t.Nc?t.Lc(this._methodName+"() can only appear at the top level of your update data"):t.Lc(this._methodName+"() cannot be used with set() unless you pass {merge:true}");return t.fieldMask.push(t.path),null},e.prototype.isEqual=function(t){return t instanceof e},e}(jp);function Yp(t,e,n){return new Hp({Nc:3,qc:e.settings.qc,methodName:t._methodName,Fc:n},e.databaseId,e.R,e.ignoreUndefinedProperties)}var Jp=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,o.__extends)(e,t),e.prototype._toFieldTransform=function(t){return new rs(t.path,new Qa)},e.prototype.isEqual=function(t){return t instanceof e},e}(jp),$p=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).Kc=n,r}return(0,o.__extends)(e,t),e.prototype._toFieldTransform=function(t){var e=Yp(this,t,!0),n=this.Kc.map((function(t){return id(t,e)})),r=new Ya(n);return new rs(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(jp),Zp=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).Kc=n,r}return(0,o.__extends)(e,t),e.prototype._toFieldTransform=function(t){var e=Yp(this,t,!0),n=this.Kc.map((function(t){return id(t,e)})),r=new $a(n);return new rs(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(jp),td=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).Qc=n,r}return(0,o.__extends)(e,t),e.prototype._toFieldTransform=function(t){var e=new ts(t.R,Ga(t.R,this.Qc));return new rs(t.path,e)},e.prototype.isEqual=function(t){return this===t},e}(jp);function ed(t,e,n,r){var i=t.Uc(1,e,n);sd("Data must be an object, but it was:",i,r);var o=[],s=na.empty();To(r,(function(t,r){var u=hd(e,t,n);r=(0,a.getModularInstance)(r);var c=i.Oc(u);if(r instanceof Qp)o.push(u);else{var h=id(r,c);null!=h&&(o.push(u),s.set(u,h))}}));var u=new Co(o);return new Kp(s,u,i.fieldTransforms)}function nd(t,e,n,r,i,o){var s=t.Uc(1,e,n),u=[ud(e,r,n)],c=[i];if(o.length%2!=0)throw new io(ro.INVALID_ARGUMENT,"Function "+e+"() needs to be called with an even number of arguments that alternate between field names and values.");for(var h=0;h<o.length;h+=2)u.push(ud(e,o[h])),c.push(o[h+1]);for(var l=[],f=na.empty(),p=u.length-1;p>=0;--p)if(!fd(l,u[p])){var d=u[p],v=c[p];v=(0,a.getModularInstance)(v);var g=s.Oc(d);if(v instanceof Qp)l.push(d);else{var m=id(v,g);null!=m&&(l.push(d),f.set(d,m))}}var y=new Co(l);return new Kp(f,y,s.fieldTransforms)}function rd(t,e,n,r){return void 0===r&&(r=!1),id(n,t.Uc(r?4:3,e))}function id(t,e){if(ad(t=(0,a.getModularInstance)(t)))return sd("Unsupported field value:",e,t),od(t,e);if(t instanceof jp)return function(t,e){if(!Gp(e.Nc))throw e.Lc(t._methodName+"() can only be used with update() and set()");if(!e.path)throw e.Lc(t._methodName+"() is not currently supported inside arrays");var n=t._toFieldTransform(e);n&&e.fieldTransforms.push(n)}(t,e),null;if(void 0===t&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.Fc&&4!==e.Nc)throw e.Lc("Nested arrays are not supported");return function(t,e){for(var n=[],r=0,i=0,o=t;i<o.length;i++){var a=id(o[i],e.Mc(r));null==a&&(a={nullValue:"NULL_VALUE"}),n.push(a),r++}return{arrayValue:{values:n}}}(t,e)}return function(t,e){if(null===(t=(0,a.getModularInstance)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return Ga(e.R,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){var n=wo.fromDate(t);return{timestampValue:$s(e.R,n)}}if(t instanceof wo)return n=new wo(t.seconds,1e3*Math.floor(t.nanoseconds/1e3)),{timestampValue:$s(e.R,n)};if(t instanceof Vp)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof Up)return{bytesValue:Zs(e.R,t._byteString)};if(t instanceof Tp){n=e.databaseId;var r=t.firestore._databaseId;if(!r.isEqual(n))throw e.Lc("Document reference is for database "+r.projectId+"/"+r.database+" but should be for database "+n.projectId+"/"+n.database);return{referenceValue:nu(t.firestore._databaseId||e.databaseId,t._key.path)}}throw e.Lc("Unsupported field value: "+yp(t))}(t,e)}function od(t,e){var n={};return Eo(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):To(t,(function(t,r){var i=id(r,e.kc(t));null!=i&&(n[t]=i)})),{mapValue:{fields:n}}}function ad(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof wo||t instanceof Vp||t instanceof Up||t instanceof Tp||t instanceof jp)}function sd(t,e,n){if(!ad(n)||!function(t){return"object"==typeof t&&null!==t&&(Object.getPrototypeOf(t)===Object.prototype||null===Object.getPrototypeOf(t))}(n)){var r=yp(n);throw"an object"===r?e.Lc(t+" a custom object"):e.Lc(t+" "+r)}}function ud(t,e,n){if((e=(0,a.getModularInstance)(e))instanceof Fp)return e._internalPath;if("string"==typeof e)return hd(t,e);throw ld("Field path arguments must be of type string or FieldPath.",t,!1,void 0,n)}var cd=new RegExp("[~\\*/\\[\\]]");function hd(t,e,n){if(e.search(cd)>=0)throw ld("Invalid field path ("+e+"). Paths must not contain '~', '*', '/', '[', or ']'",t,!1,void 0,n);try{return(new(Fp.bind.apply(Fp,(0,o.__spreadArray)([void 0],e.split(".")))))._internalPath}catch(dv){throw ld("Invalid field path ("+e+"). Paths must not be empty, begin with '.', end with '.', or contain '..'",t,!1,void 0,n)}}function ld(t,e,n,r,i){var o=r&&!r.isEmpty(),a=void 0!==i,s="Function "+e+"() called with invalid data";n&&(s+=" (via `toFirestore()`)");var u="";return(o||a)&&(u+=" (found",o&&(u+=" in field "+r),a&&(u+=" in document "+i),u+=")"),new io(ro.INVALID_ARGUMENT,(s+=". ")+t+u)}function fd(t,e){return t.some((function(t){return t.isEqual(e)}))}var pd=function(){function t(t,e,n,r,i){this._firestore=t,this._userDataWriter=e,this._key=n,this._document=r,this._converter=i}return Object.defineProperty(t.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ref",{get:function(){return new Tp(this._firestore,this._converter,this._key)},enumerable:!1,configurable:!0}),t.prototype.exists=function(){return null!==this._document},t.prototype.data=function(){if(this._document){if(this._converter){var t=new dd(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}},t.prototype.get=function(t){if(this._document){var e=this._document.data.field(vd("DocumentSnapshot.get",t));if(null!==e)return this._userDataWriter.convertValue(e)}},t}(),dd=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,o.__extends)(e,t),e.prototype.data=function(){return t.prototype.data.call(this)},e}(pd);function vd(t,e){return"string"==typeof e?hd(t,e):e instanceof Fp?e._internalPath:e._delegate._internalPath}var gd=function(){function t(t,e){this.hasPendingWrites=t,this.fromCache=e}return t.prototype.isEqual=function(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache},t}(),md=function(t){function e(e,n,r,i,o,a){var s=this;return(s=t.call(this,e,n,r,i,a)||this)._firestore=e,s._firestoreImpl=e,s.metadata=o,s}return(0,o.__extends)(e,t),e.prototype.exists=function(){return t.prototype.exists.call(this)},e.prototype.data=function(t){if(void 0===t&&(t={}),this._document){if(this._converter){var e=new yd(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(e,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}},e.prototype.get=function(t,e){if(void 0===e&&(e={}),this._document){var n=this._document.data.field(vd("DocumentSnapshot.get",t));if(null!==n)return this._userDataWriter.convertValue(n,e.serverTimestamps)}},e}(pd),yd=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,o.__extends)(e,t),e.prototype.data=function(e){return void 0===e&&(e={}),t.prototype.data.call(this,e)},e}(md),bd=function(){function t(t,e,n,r){this._firestore=t,this._userDataWriter=e,this._snapshot=r,this.metadata=new gd(r.hasPendingWrites,r.fromCache),this.query=n}return Object.defineProperty(t.prototype,"docs",{get:function(){var t=[];return this.forEach((function(e){return t.push(e)})),t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this._snapshot.docs.size},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"empty",{get:function(){return 0===this.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t,e){var n=this;this._snapshot.docs.forEach((function(r){t.call(e,new yd(n._firestore,n._userDataWriter,r.key,r,new gd(n._snapshot.mutatedKeys.has(r.key),n._snapshot.fromCache),n.query.converter))}))},t.prototype.docChanges=function(t){void 0===t&&(t={});var e=!!t.includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new io(ro.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(t,e){if(t._snapshot.oldDocs.isEmpty()){var n=0;return t._snapshot.docChanges.map((function(e){return{type:"added",doc:new yd(t._firestore,t._userDataWriter,e.doc.key,e.doc,new gd(t._snapshot.mutatedKeys.has(e.doc.key),t._snapshot.fromCache),t.query.converter),oldIndex:-1,newIndex:n++}}))}var r=t._snapshot.oldDocs;return t._snapshot.docChanges.filter((function(t){return e||3!==t.type})).map((function(e){var n=new yd(t._firestore,t._userDataWriter,e.doc.key,e.doc,new gd(t._snapshot.mutatedKeys.has(e.doc.key),t._snapshot.fromCache),t.query.converter),i=-1,o=-1;return 0!==e.type&&(i=r.indexOf(e.doc.key),r=r.delete(e.doc.key)),1!==e.type&&(o=(r=r.add(e.doc)).indexOf(e.doc.key)),{type:wd(e.type),doc:n,oldIndex:i,newIndex:o}}))}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges},t}();function wd(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return lo()}}function _d(t,e){return t instanceof md&&e instanceof md?t._firestore===e._firestore&&t._key.isEqual(e._key)&&(null===t._document?null===e._document:t._document.isEqual(e._document))&&t._converter===e._converter:t instanceof bd&&e instanceof bd&&t._firestore===e._firestore&&Cp(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._snapshot.isEqual(e._snapshot)}function Id(t){if(Ca(t)&&0===t.explicitOrderBy.length)throw new io(ro.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var Td=function(){};function Ed(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var r=0,i=e;r<i.length;r++){var o=i[r];t=o._apply(t)}return t}var Sd=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).jc=e,i.Wc=n,i.Gc=r,i.type="where",i}return(0,o.__extends)(e,t),e.prototype._apply=function(t){var e=Wp(t.firestore),n=function(t,e,n,r,i,o,a){var s;if(i.isKeyField()){if("array-contains"===o||"array-contains-any"===o)throw new io(ro.INVALID_ARGUMENT,"Invalid Query. You can't perform '"+o+"' queries on FieldPath.documentId().");if("in"===o||"not-in"===o){Rd(a,o);for(var u=[],c=0,h=a;c<h.length;c++){var l=h[c];u.push(Dd(r,t,l))}s={arrayValue:{values:u}}}else s=Dd(r,t,a)}else"in"!==o&&"not-in"!==o&&"array-contains-any"!==o||Rd(a,o),s=rd(n,"where",a,"in"===o||"not-in"===o);var f=ha.create(i,o,s);return function(t,e){if(e.g()){var n=Da(t);if(null!==n&&!n.isEqual(e.field))throw new io(ro.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '"+n.toString()+"' and '"+e.field.toString()+"'");var r=Oa(t);null!==r&&Pd(t,e.field,r)}var i=function(t,e){for(var n=0,r=t.filters;n<r.length;n++){var i=r[n];if(e.indexOf(i.op)>=0)return i.op}return null}(t,function(t){switch(t){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==i)throw i===e.op?new io(ro.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '"+e.op.toString()+"' filter."):new io(ro.INVALID_ARGUMENT,"Invalid query. You cannot use '"+e.op.toString()+"' filters with '"+i.toString()+"' filters.")}(t,f),f}(t._query,0,e,t.firestore._databaseId,this.jc,this.Wc,this.Gc);return new Ep(t.firestore,t.converter,function(t,e){var n=t.filters.concat([e]);return new Sa(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}(t._query,n))},e}(Td),Ad=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).jc=e,r.zc=n,r.type="orderBy",r}return(0,o.__extends)(e,t),e.prototype._apply=function(t){var e=function(t,e,n){if(null!==t.startAt)throw new io(ro.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==t.endAt)throw new io(ro.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new _a(e,n);return function(t,e){if(null===Oa(t)){var n=Da(t);null!==n&&Pd(t,n,e.field)}}(t,r),r}(t._query,this.jc,this.zc);return new Ep(t.firestore,t.converter,function(t,e){var n=t.explicitOrderBy.concat([e]);return new Sa(t.path,t.collectionGroup,n,t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(t._query,e))},e}(Td),kd=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.Hc=n,i.Jc=r,i}return(0,o.__extends)(e,t),e.prototype._apply=function(t){return new Ep(t.firestore,t.converter,La(t._query,this.Hc,this.Jc))},e}(Td),Nd=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.Yc=n,i.Xc=r,i}return(0,o.__extends)(e,t),e.prototype._apply=function(t){var e=Od(t,this.type,this.Yc,this.Xc);return new Ep(t.firestore,t.converter,function(t,e){return new Sa(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,e,t.endAt)}(t._query,e))},e}(Td),Cd=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.Yc=n,i.Xc=r,i}return(0,o.__extends)(e,t),e.prototype._apply=function(t){var e=Od(t,this.type,this.Yc,this.Xc);return new Ep(t.firestore,t.converter,function(t,e){return new Sa(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,e)}(t._query,e))},e}(Td);function Od(t,e,n,r){if(n[0]=(0,a.getModularInstance)(n[0]),n[0]instanceof pd)return function(t,e,n,r,i){if(!r)throw new io(ro.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for "+n+"().");for(var o=[],a=0,s=Pa(t);a<s.length;a++){var u=s[a];if(u.field.isKeyField())o.push(Qo(e,r.key));else{var c=r.data.field(u.field);if(Lo(c))throw new io(ro.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+u.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===c){var h=u.field.canonicalString();throw new io(ro.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '"+h+"' (used as the orderBy) does not exist.")}o.push(c)}}return new ba(o,i)}(t._query,t.firestore._databaseId,e,n[0]._document,r);var i=Wp(t.firestore);return function(t,e,n,r,i,o){var a=t.explicitOrderBy;if(i.length>a.length)throw new io(ro.INVALID_ARGUMENT,"Too many arguments provided to "+r+"(). The number of arguments must be less than or equal to the number of orderBy() clauses");for(var s=[],u=0;u<i.length;u++){var c=i[u];if(a[u].field.isKeyField()){if("string"!=typeof c)throw new io(ro.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in "+r+"(), but got a "+typeof c);if(!Ra(t)&&-1!==c.indexOf("/"))throw new io(ro.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to "+r+"() must be a plain document ID, but '"+c+"' contains a slash.");var h=t.path.child(Ao.fromString(c));if(!Bo.isDocumentKey(h))throw new io(ro.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to "+r+"() must result in a valid document path, but '"+h+"' is not because it contains an odd number of segments.");var l=new Bo(h);s.push(Qo(e,l))}else{var f=rd(n,r,c);s.push(f)}}return new ba(s,o)}(t._query,t.firestore._databaseId,i,e,n,r)}function Dd(t,e,n){if("string"==typeof(n=(0,a.getModularInstance)(n))){if(""===n)throw new io(ro.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!Ra(e)&&-1!==n.indexOf("/"))throw new io(ro.INVALID_ARGUMENT,"Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '"+n+"' contains a '/' character.");var r=e.path.child(Ao.fromString(n));if(!Bo.isDocumentKey(r))throw new io(ro.INVALID_ARGUMENT,"Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '"+r+"' is not because it has an odd number of segments ("+r.length+").");return Qo(t,new Bo(r))}if(n instanceof Tp)return Qo(t,n._key);throw new io(ro.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: "+yp(n)+".")}function Rd(t,e){if(!Array.isArray(t)||0===t.length)throw new io(ro.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '"+e.toString()+"' filters.");if(t.length>10)throw new io(ro.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters support a maximum of 10 elements in the value array.")}function Pd(t,e,n){if(!n.isEqual(e))throw new io(ro.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '"+e.toString()+"' and so you must also use '"+e.toString()+"' as your first argument to orderBy(), but your first orderBy() is on field '"+n.toString()+"' instead.")}var xd=function(){function t(){}return t.prototype.convertValue=function(t,e){switch(void 0===e&&(e="none"),qo(t)){case 0:return null;case 1:return t.booleanValue;case 2:return Po(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,e);case 5:return t.stringValue;case 6:return this.convertBytes(xo(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,e);case 10:return this.convertObject(t.mapValue,e);default:throw lo()}},t.prototype.convertObject=function(t,e){var n=this,r={};return To(t.fields,(function(t,i){r[t]=n.convertValue(i,e)})),r},t.prototype.convertGeoPoint=function(t){return new Vp(Po(t.latitude),Po(t.longitude))},t.prototype.convertArray=function(t,e){var n=this;return(t.values||[]).map((function(t){return n.convertValue(t,e)}))},t.prototype.convertServerTimestamp=function(t,e){switch(e){case"previous":var n=Mo(t);return null==n?null:this.convertValue(n,e);case"estimate":return this.convertTimestamp(Fo(t));default:return null}},t.prototype.convertTimestamp=function(t){var e=Ro(t);return new wo(e.seconds,e.nanos)},t.prototype.convertDocumentKey=function(t,e){var n=Ao.fromString(t);fo(ku(n));var r=new op(n.get(1),n.get(3)),i=new Bo(n.popFirst(5));return r.isEqual(e)||uo("Document "+i+" contains a document reference within a different database ("+r.projectId+"/"+r.database+") which is not supported. It will be treated as a reference in the current database ("+e.projectId+"/"+e.database+") instead."),i},t}();function Ld(t,e,n){return t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e}var Md=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return(0,o.__extends)(e,t),e.prototype.convertBytes=function(t){return new Up(t)},e.prototype.convertReference=function(t){var e=this.convertDocumentKey(t,this.firestore._databaseId);return new Tp(this.firestore,null,e)},e}(xd),Fd=function(){function t(t,e){this._firestore=t,this._commitHandler=e,this._mutations=[],this._committed=!1,this._dataReader=Wp(t)}return t.prototype.set=function(t,e,n){this._verifyNotCommitted();var r=Ud(t,this._firestore),i=Ld(r.converter,e,n),o=Xp(this._dataReader,"WriteBatch.set",r._key,i,null!==r.converter,n);return this._mutations.push(o.toMutation(r._key,os.none())),this},t.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];this._verifyNotCommitted();var o,s=Ud(t,this._firestore);return o="string"==typeof(e=(0,a.getModularInstance)(e))||e instanceof Fp?nd(this._dataReader,"WriteBatch.update",s._key,e,n,r):ed(this._dataReader,"WriteBatch.update",s._key,e),this._mutations.push(o.toMutation(s._key,os.exists(!0))),this},t.prototype.delete=function(t){this._verifyNotCommitted();var e=Ud(t,this._firestore);return this._mutations=this._mutations.concat(new ws(e._key,os.none())),this},t.prototype.commit=function(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()},t.prototype._verifyNotCommitted=function(){if(this._committed)throw new io(ro.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")},t}();function Ud(t,e){if((t=(0,a.getModularInstance)(t)).firestore!==e)throw new io(ro.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}var jd=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return(0,o.__extends)(e,t),e.prototype.convertBytes=function(t){return new Up(t)},e.prototype.convertReference=function(t){var e=this.convertDocumentKey(t,this.firestore._databaseId);return new Tp(this.firestore,null,e)},e}(xd);function Vd(t,e,n){t=bp(t,Tp);var r=bp(t.firestore,Rp),i=Ld(t.converter,e,n);return Kd(r,[Xp(Wp(r),"setDoc",t._key,i,null!==t.converter,n).toMutation(t._key,os.none())])}function Bd(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];t=bp(t,Tp);var o=bp(t.firestore,Rp),s=Wp(o);return Kd(o,[("string"==typeof(e=(0,a.getModularInstance)(e))||e instanceof Fp?nd(s,"updateDoc",t._key,e,n,r):ed(s,"updateDoc",t._key,e)).toMutation(t._key,os.exists(!0))])}function qd(t){for(var e,n,r,i=[],s=1;s<arguments.length;s++)i[s-1]=arguments[s];t=(0,a.getModularInstance)(t);var u={includeMetadataChanges:!1},c=0;"object"!=typeof i[c]||Dp(i[c])||(u=i[c],c++);var h,l,f,p={includeMetadataChanges:u.includeMetadataChanges};if(Dp(i[c])){var d=i[c];i[c]=null===(e=d.next)||void 0===e?void 0:e.bind(d),i[c+1]=null===(n=d.error)||void 0===n?void 0:n.bind(d),i[c+2]=null===(r=d.complete)||void 0===r?void 0:r.bind(d)}if(t instanceof Tp)l=bp(t.firestore,Rp),f=ka(t._key.path),h={next:function(e){i[c]&&i[c](Gd(l,t,e))},error:i[c+1],complete:i[c+2]};else{var v=bp(t,Ep);l=bp(v.firestore,Rp),f=v._query;var g=new jd(l);h={next:function(t){i[c]&&i[c](new bd(l,g,v,t))},error:i[c+1],complete:i[c+2]},Id(t._query)}return function(t,e,n,r){var i=this,a=new Kf(r),s=new Jl(e,a,n);return t.asyncQueue.enqueueAndForget((function(){return(0,o.__awaiter)(i,void 0,void 0,(function(){var e;return(0,o.__generator)(this,(function(n){switch(n.label){case 0:return e=zl,[4,ep(t)];case 1:return[2,e.apply(void 0,[n.sent(),s])]}}))}))})),function(){a.Wo(),t.asyncQueue.enqueueAndForget((function(){return(0,o.__awaiter)(i,void 0,void 0,(function(){var e;return(0,o.__generator)(this,(function(n){switch(n.label){case 0:return e=Wl,[4,ep(t)];case 1:return[2,e.apply(void 0,[n.sent(),s])]}}))}))}))}}(Pp(l),f,p,h)}function Kd(t,e){return function(t,e){var n=this,r=new Ju;return t.asyncQueue.enqueueAndForget((function(){return(0,o.__awaiter)(n,void 0,void 0,(function(){var n;return(0,o.__generator)(this,(function(i){switch(i.label){case 0:return n=lf,[4,tp(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}}))}))})),r.promise}(Pp(t),e)}function Gd(t,e,n){var r=n.docs.get(e._key),i=new jd(t);return new md(t,i,e._key,r,new gd(n.hasPendingWrites,n.fromCache),e.converter)}var Hd=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this)._firestore=e,r}return(0,o.__extends)(e,t),e.prototype.get=function(e){var n=this,r=Ud(e,this._firestore),i=new jd(this._firestore);return t.prototype.get.call(this,e).then((function(t){return new md(n._firestore,i,r._key,t._document,new gd(!1,!1),r.converter)}))},e}(function(){function t(t,e){this._firestore=t,this._transaction=e,this._dataReader=Wp(t)}return t.prototype.get=function(t){var e=this,n=Ud(t,this._firestore),r=new Md(this._firestore);return this._transaction.lookup([n._key]).then((function(t){if(!t||1!==t.length)return lo();var i=t[0];if(i.isFoundDocument())return new pd(e._firestore,r,i.key,i,n.converter);if(i.isNoDocument())return new pd(e._firestore,r,n._key,null,n.converter);throw lo()}))},t.prototype.set=function(t,e,n){var r=Ud(t,this._firestore),i=Ld(r.converter,e,n),o=Xp(this._dataReader,"Transaction.set",r._key,i,null!==r.converter,n);return this._transaction.set(r._key,o),this},t.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];var o,s=Ud(t,this._firestore);return o="string"==typeof(e=(0,a.getModularInstance)(e))||e instanceof Fp?nd(this._dataReader,"Transaction.update",s._key,e,n,r):ed(this._dataReader,"Transaction.update",s._key,e),this._transaction.update(s._key,o),this},t.prototype.delete=function(t){var e=Ud(t,this._firestore);return this._transaction.delete(e._key),this},t}());function zd(){if("undefined"==typeof Uint8Array)throw new io(ro.UNIMPLEMENTED,"Uint8Arrays are not available in this environment.")}function Wd(){if("undefined"==typeof atob)throw new io(ro.UNIMPLEMENTED,"Blobs are unavailable in Firestore in this environment.")}var Xd=function(){function t(t){this._delegate=t}return t.fromBase64String=function(e){return Wd(),new t(Up.fromBase64String(e))},t.fromUint8Array=function(e){return zd(),new t(Up.fromUint8Array(e))},t.prototype.toBase64=function(){return Wd(),this._delegate.toBase64()},t.prototype.toUint8Array=function(){return zd(),this._delegate.toUint8Array()},t.prototype.isEqual=function(t){return this._delegate.isEqual(t._delegate)},t.prototype.toString=function(){return"Blob(base64: "+this.toBase64()+")"},t}(),Qd=function(){function t(){}return t.prototype.enableIndexedDbPersistence=function(t,e){return function(t,e){Mp(t=bp(t,Rp));var n=Pp(t),r=t._freezeSettings(),i=new qf;return Lp(n,i,new Vf(i,r.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(t._delegate,{forceOwnership:e})},t.prototype.enableMultiTabIndexedDbPersistence=function(t){return function(t){Mp(t=bp(t,Rp));var e=Pp(t),n=t._freezeSettings(),r=new qf;return Lp(e,r,new Bf(r,n.cacheSizeBytes))}(t._delegate)},t.prototype.clearIndexedDbPersistence=function(t){return function(t){var e=this;if(t._initialized&&!t._terminated)throw new io(ro.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var n=new Ju;return t._queue.enqueueAndForgetEvenWhileRestricted((function(){return(0,o.__awaiter)(e,void 0,void 0,(function(){var e;return(0,o.__generator)(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,function(t){return(0,o.__awaiter)(this,void 0,void 0,(function(){var e;return(0,o.__generator)(this,(function(n){switch(n.label){case 0:return tc.yt()?(e=t+"main",[4,tc.delete(e)]):[2,Promise.resolve()];case 1:return n.sent(),[2]}}))}))}(lh(t._databaseId,t._persistenceKey))];case 1:return r.sent(),n.resolve(),[3,3];case 2:return e=r.sent(),n.reject(e),[3,3];case 3:return[2]}}))}))})),n.promise}(t._delegate)},t}(),Yd=function(){function t(t,e,n){var r=this;this._delegate=e,this.Zc=n,this.INTERNAL={delete:function(){return r.terminate()}},t instanceof op||(this.tu=t)}return Object.defineProperty(t.prototype,"_databaseId",{get:function(){return this._delegate._databaseId},enumerable:!1,configurable:!0}),t.prototype.settings=function(t){var e=this._delegate._getSettings();t.merge||e.host===t.host||co("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),t.merge&&delete(t=Object.assign(Object.assign({},e),t)).merge,this._delegate._setSettings(t)},t.prototype.useEmulator=function(t,e,n){void 0===n&&(n={}),function(t,e,n,r){var i;void 0===r&&(r={});var o=(t=bp(t,Ip))._getSettings();if("firestore.googleapis.com"!==o.host&&o.host!==e&&co("Host has been set in both settings() and useEmulator(), emulator host will be used"),t._setSettings(Object.assign(Object.assign({},o),{host:e+":"+n,ssl:!1})),r.mockUserToken){var s,u;if("string"==typeof r.mockUserToken)s=r.mockUserToken,u=qh.MOCK_USER;else{s=(0,a.createMockUserToken)(r.mockUserToken,null===(i=t._app)||void 0===i?void 0:i.options.projectId);var c=r.mockUserToken.sub||r.mockUserToken.user_id;if(!c)throw new io(ro.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new qh(c)}t._credentials=new cp(new sp(s,u))}}(this._delegate,t,e,n)},t.prototype.enableNetwork=function(){return function(t){var e=this;return t.asyncQueue.enqueue((function(){return(0,o.__awaiter)(e,void 0,void 0,(function(){var e,n;return(0,o.__generator)(this,(function(r){switch(r.label){case 0:return[4,Jf(t)];case 1:return e=r.sent(),[4,Zf(t)];case 2:return n=r.sent(),[2,(e.setNetworkEnabled(!0),function(t){var e=po(t);return e.Or.delete(0),dl(e)}(n))]}}))}))}))}(Pp(bp(this._delegate,Rp)))},t.prototype.disableNetwork=function(){return function(t){var e=this;return t.asyncQueue.enqueue((function(){return(0,o.__awaiter)(e,void 0,void 0,(function(){var e,n;return(0,o.__generator)(this,(function(r){switch(r.label){case 0:return[4,Jf(t)];case 1:return e=r.sent(),[4,Zf(t)];case 2:return n=r.sent(),[2,(e.setNetworkEnabled(!1),function(t){return(0,o.__awaiter)(this,void 0,void 0,(function(){var e;return(0,o.__generator)(this,(function(n){switch(n.label){case 0:return(e=po(t)).Or.add(0),[4,vl(e)];case 1:return n.sent(),e.Br.set("Offline"),[2]}}))}))}(n))]}}))}))}))}(Pp(bp(this._delegate,Rp)))},t.prototype.enablePersistence=function(t){var e=!1,n=!1;return t&&vp("synchronizeTabs",e=!!t.synchronizeTabs,"experimentalForceOwningTab",n=!!t.experimentalForceOwningTab),e?this.Zc.enableMultiTabIndexedDbPersistence(this):this.Zc.enableIndexedDbPersistence(this,n)},t.prototype.clearPersistence=function(){return this.Zc.clearIndexedDbPersistence(this)},t.prototype.terminate=function(){return this.tu&&(this.tu._removeServiceInstance("firestore"),this.tu._removeServiceInstance("firestore-exp")),this._delegate._delete()},t.prototype.waitForPendingWrites=function(){return function(t){var e=this,n=new Ju;return t.asyncQueue.enqueueAndForget((function(){return(0,o.__awaiter)(e,void 0,void 0,(function(){var e;return(0,o.__generator)(this,(function(r){switch(r.label){case 0:return e=mf,[4,tp(t)];case 1:return[2,e.apply(void 0,[r.sent(),n])]}}))}))})),n.promise}(Pp(bp(this._delegate,Rp)))},t.prototype.onSnapshotsInSync=function(t){return function(t,e){return function(t,e){var n=this,r=new Kf(e);return t.asyncQueue.enqueueAndForget((function(){return(0,o.__awaiter)(n,void 0,void 0,(function(){var e;return(0,o.__generator)(this,(function(n){switch(n.label){case 0:return e=function(t,e){po(t).Gr.add(e),e.next()},[4,ep(t)];case 1:return[2,e.apply(void 0,[n.sent(),r])]}}))}))})),function(){r.Wo(),t.asyncQueue.enqueueAndForget((function(){return(0,o.__awaiter)(n,void 0,void 0,(function(){var e;return(0,o.__generator)(this,(function(n){switch(n.label){case 0:return e=function(t,e){po(t).Gr.delete(e)},[4,ep(t)];case 1:return[2,e.apply(void 0,[n.sent(),r])]}}))}))}))}}(Pp(t=bp(t,Rp)),Dp(e)?e:{next:e})}(this._delegate,t)},Object.defineProperty(t.prototype,"app",{get:function(){if(!this.tu)throw new io(ro.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.tu},enumerable:!1,configurable:!0}),t.prototype.collection=function(t){try{return new hv(this,Ap(this._delegate,t))}catch(t){throw nv(t,"collection()","Firestore.collection()")}},t.prototype.doc=function(t){try{return new ev(this,kp(this._delegate,t))}catch(t){throw nv(t,"doc()","Firestore.doc()")}},t.prototype.collectionGroup=function(t){try{return new sv(this,function(t,e){if(t=bp(t,Ip),pp("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new io(ro.INVALID_ARGUMENT,"Invalid collection ID '"+e+"' passed to function collectionGroup(). Collection IDs must not contain '/'.");return new Ep(t,null,function(t){return new Sa(Ao.emptyPath(),t)}(e))}(this._delegate,t))}catch(t){throw nv(t,"collectionGroup()","Firestore.collectionGroup()")}},t.prototype.runTransaction=function(t){var e=this;return function(t,e){return function(t,e){var n=this,r=new Ju;return t.asyncQueue.enqueueAndForget((function(){return(0,o.__awaiter)(n,void 0,void 0,(function(){var n;return(0,o.__generator)(this,(function(i){switch(i.label){case 0:return[4,function(t){return Yf(t).then((function(t){return t.datastore}))}(t)];case 1:return n=i.sent(),new Hf(t.asyncQueue,n,e,r).run(),[2]}}))}))})),r.promise}(Pp(t),(function(n){return e(new Hd(t,n))}))}(this._delegate,(function(n){return t(new $d(e,n))}))},t.prototype.batch=function(){var t=this;return Pp(this._delegate),new Zd(new Fd(this._delegate,(function(e){return Kd(t._delegate,e)})))},t.prototype.loadBundle=function(t){throw new io(ro.FAILED_PRECONDITION,'"loadBundle()" does not exist, have you imported "firebase/firestore/bundle"?')},t.prototype.namedQuery=function(t){throw new io(ro.FAILED_PRECONDITION,'"namedQuery()" does not exist, have you imported "firebase/firestore/bundle"?')},t}(),Jd=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return(0,o.__extends)(e,t),e.prototype.convertBytes=function(t){return new Xd(new Up(t))},e.prototype.convertReference=function(t){var e=this.convertDocumentKey(t,this.firestore._databaseId);return ev.eu(e,this.firestore,null)},e}(xd);var $d=function(){function t(t,e){this._firestore=t,this._delegate=e,this._userDataWriter=new Jd(t)}return t.prototype.get=function(t){var e=this,n=lv(t);return this._delegate.get(n).then((function(t){return new ov(e._firestore,new md(e._firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,n.converter))}))},t.prototype.set=function(t,e,n){var r=lv(t);return n?(dp("Transaction.set",n),this._delegate.set(r,e,n)):this._delegate.set(r,e),this},t.prototype.update=function(t,e,n){for(var r,i=[],a=3;a<arguments.length;a++)i[a-3]=arguments[a];var s=lv(t);return 2===arguments.length?this._delegate.update(s,e):(r=this._delegate).update.apply(r,(0,o.__spreadArray)([s,e,n],i)),this},t.prototype.delete=function(t){var e=lv(t);return this._delegate.delete(e),this},t}(),Zd=function(){function t(t){this._delegate=t}return t.prototype.set=function(t,e,n){var r=lv(t);return n?(dp("WriteBatch.set",n),this._delegate.set(r,e,n)):this._delegate.set(r,e),this},t.prototype.update=function(t,e,n){for(var r,i=[],a=3;a<arguments.length;a++)i[a-3]=arguments[a];var s=lv(t);return 2===arguments.length?this._delegate.update(s,e):(r=this._delegate).update.apply(r,(0,o.__spreadArray)([s,e,n],i)),this},t.prototype.delete=function(t){var e=lv(t);return this._delegate.delete(e),this},t.prototype.commit=function(){return this._delegate.commit()},t}(),tv=function(){function t(t,e,n){this._firestore=t,this._userDataWriter=e,this._delegate=n}return t.prototype.fromFirestore=function(t,e){var n=new yd(this._firestore._delegate,this._userDataWriter,t._key,t._document,t.metadata,null);return this._delegate.fromFirestore(new av(this._firestore,n),null!=e?e:{})},t.prototype.toFirestore=function(t,e){return e?this._delegate.toFirestore(t,e):this._delegate.toFirestore(t)},t.nu=function(e,n){var r=t.su,i=r.get(e);i||(i=new WeakMap,r.set(e,i));var o=i.get(n);return o||(o=new t(e,new Jd(e),n),i.set(n,o)),o},t}();tv.su=new WeakMap;var ev=function(){function t(t,e){this.firestore=t,this._delegate=e,this._userDataWriter=new Jd(t)}return t.iu=function(e,n,r){if(e.length%2!=0)throw new io(ro.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+e.canonicalString()+" has "+e.length);return new t(n,new Tp(n._delegate,r,new Bo(e)))},t.eu=function(e,n,r){return new t(n,new Tp(n._delegate,r,e))},Object.defineProperty(t.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return new hv(this.firestore,this._delegate.parent)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this._delegate.path},enumerable:!1,configurable:!0}),t.prototype.collection=function(t){try{return new hv(this.firestore,Ap(this._delegate,t))}catch(t){throw nv(t,"collection()","DocumentReference.collection()")}},t.prototype.isEqual=function(t){return(t=(0,a.getModularInstance)(t))instanceof Tp&&Np(this._delegate,t)},t.prototype.set=function(t,e){e=dp("DocumentReference.set",e);try{return e?Vd(this._delegate,t,e):Vd(this._delegate,t)}catch(t){throw nv(t,"setDoc()","DocumentReference.set()")}},t.prototype.update=function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];try{return 1===arguments.length?Bd(this._delegate,t):Bd.apply(void 0,(0,o.__spreadArray)([this._delegate,t,e],n))}catch(t){throw nv(t,"updateDoc()","DocumentReference.update()")}},t.prototype.delete=function(){return Kd(bp((t=this._delegate).firestore,Rp),[new ws(t._key,os.none())]);var t},t.prototype.onSnapshot=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=rv(e),i=iv(e,(function(e){return new ov(t.firestore,new md(t.firestore._delegate,t._userDataWriter,e._key,e._document,e.metadata,t._delegate.converter))}));return qd(this._delegate,r,i)},t.prototype.get=function(t){var e=this;return("cache"===(null==t?void 0:t.source)?function(t){t=bp(t,Tp);var e=bp(t.firestore,Rp),n=Pp(e),r=new jd(e);return function(t,e){var n=this,r=new Ju;return t.asyncQueue.enqueueAndForget((function(){return(0,o.__awaiter)(n,void 0,void 0,(function(){var n;return(0,o.__generator)(this,(function(i){switch(i.label){case 0:return n=function(t,e,n){return(0,o.__awaiter)(this,void 0,void 0,(function(){var r,i;return(0,o.__generator)(this,(function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,function(t,e){var n=po(t);return n.persistence.runTransaction("read document","readonly",(function(t){return n.Mn.mn(t,e)}))}(t,e)];case 1:return(i=o.sent()).isFoundDocument()?n.resolve(i):i.isNoDocument()?n.resolve(null):n.reject(new io(ro.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),[3,3];case 2:return r=o.sent(),i=Vl(r,"Failed to get document '"+e+" from cache"),n.reject(i),[3,3];case 3:return[2]}}))}))},[4,$f(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}}))}))})),r.promise}(n,t._key).then((function(n){return new md(e,r,t._key,n,new gd(null!==n&&n.hasLocalMutations,!0),t.converter)}))}(this._delegate):"server"===(null==t?void 0:t.source)?function(t){t=bp(t,Tp);var e=bp(t.firestore,Rp);return np(Pp(e),t._key,{source:"server"}).then((function(n){return Gd(e,t,n)}))}(this._delegate):function(t){t=bp(t,Tp);var e=bp(t.firestore,Rp);return np(Pp(e),t._key).then((function(n){return Gd(e,t,n)}))}(this._delegate)).then((function(t){return new ov(e.firestore,new md(e.firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,e._delegate.converter))}))},t.prototype.withConverter=function(e){return new t(this.firestore,e?this._delegate.withConverter(tv.nu(this.firestore,e)):this._delegate.withConverter(null))},t}();function nv(t,e,n){return t.message=t.message.replace(e,n),t}function rv(t){for(var e=0,n=t;e<n.length;e++){var r=n[e];if("object"==typeof r&&!Dp(r))return r}return{}}function iv(t,e){var n,r,i;return{next:function(t){i.next&&i.next(e(t))},error:null===(n=(i=Dp(t[0])?t[0]:Dp(t[1])?t[1]:"function"==typeof t[0]?{next:t[0],error:t[1],complete:t[2]}:{next:t[1],error:t[2],complete:t[3]}).error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}var ov=function(){function t(t,e){this._firestore=t,this._delegate=e}return Object.defineProperty(t.prototype,"ref",{get:function(){return new ev(this._firestore,this._delegate.ref)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"exists",{get:function(){return this._delegate.exists()},enumerable:!1,configurable:!0}),t.prototype.data=function(t){return this._delegate.data(t)},t.prototype.get=function(t,e){return this._delegate.get(t,e)},t.prototype.isEqual=function(t){return _d(this._delegate,t._delegate)},t}(),av=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,o.__extends)(e,t),e.prototype.data=function(t){return this._delegate.data(t)},e}(ov),sv=function(){function t(t,e){this.firestore=t,this._delegate=e,this._userDataWriter=new Jd(t)}return t.prototype.where=function(e,n,r){try{return new t(this.firestore,Ed(this._delegate,function(t,e,n){var r=e,i=vd("where",t);return new Sd(i,r,n)}(e,n,r)))}catch(e){throw nv(e,/(orderBy|where)\(\)/,"Query.$1()")}},t.prototype.orderBy=function(e,n){try{return new t(this.firestore,Ed(this._delegate,function(t,e){void 0===e&&(e="asc");var n=e,r=vd("orderBy",t);return new Ad(r,n)}(e,n)))}catch(e){throw nv(e,/(orderBy|where)\(\)/,"Query.$1()")}},t.prototype.limit=function(e){try{return new t(this.firestore,Ed(this._delegate,function(t){return wp("limit",t),new kd("limit",t,"F")}(e)))}catch(e){throw nv(e,"limit()","Query.limit()")}},t.prototype.limitToLast=function(e){try{return new t(this.firestore,Ed(this._delegate,function(t){return wp("limitToLast",t),new kd("limitToLast",t,"L")}(e)))}catch(e){throw nv(e,"limitToLast()","Query.limitToLast()")}},t.prototype.startAt=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,Ed(this._delegate,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Nd("startAt",t,!0)}.apply(void 0,e)))}catch(e){throw nv(e,"startAt()","Query.startAt()")}},t.prototype.startAfter=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,Ed(this._delegate,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Nd("startAfter",t,!1)}.apply(void 0,e)))}catch(e){throw nv(e,"startAfter()","Query.startAfter()")}},t.prototype.endBefore=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,Ed(this._delegate,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Cd("endBefore",t,!0)}.apply(void 0,e)))}catch(e){throw nv(e,"endBefore()","Query.endBefore()")}},t.prototype.endAt=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,Ed(this._delegate,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Cd("endAt",t,!1)}.apply(void 0,e)))}catch(e){throw nv(e,"endAt()","Query.endAt()")}},t.prototype.isEqual=function(t){return Cp(this._delegate,t._delegate)},t.prototype.get=function(t){var e=this;return("cache"===(null==t?void 0:t.source)?function(t){t=bp(t,Ep);var e=bp(t.firestore,Rp),n=Pp(e),r=new jd(e);return function(t,e){var n=this,r=new Ju;return t.asyncQueue.enqueueAndForget((function(){return(0,o.__awaiter)(n,void 0,void 0,(function(){var n;return(0,o.__generator)(this,(function(i){switch(i.label){case 0:return n=function(t,e,n){return(0,o.__awaiter)(this,void 0,void 0,(function(){var r,i,a,s,u;return(0,o.__generator)(this,(function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,Ah(t,e,!0)];case 1:return u=o.sent(),r=new rf(e,u.Bn),i=r._o(u.documents),a=r.applyChanges(i,!1),n.resolve(a.snapshot),[3,3];case 2:return s=o.sent(),u=Vl(s,"Failed to execute query '"+e+" against cache"),n.reject(u),[3,3];case 3:return[2]}}))}))},[4,$f(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}}))}))})),r.promise}(n,t._query).then((function(n){return new bd(e,r,t,n)}))}(this._delegate):"server"===(null==t?void 0:t.source)?function(t){t=bp(t,Ep);var e=bp(t.firestore,Rp),n=Pp(e),r=new jd(e);return rp(n,t._query,{source:"server"}).then((function(n){return new bd(e,r,t,n)}))}(this._delegate):function(t){t=bp(t,Ep);var e=bp(t.firestore,Rp),n=Pp(e),r=new jd(e);return Id(t._query),rp(n,t._query).then((function(n){return new bd(e,r,t,n)}))}(this._delegate)).then((function(t){return new cv(e.firestore,new bd(e.firestore._delegate,e._userDataWriter,e._delegate,t._snapshot))}))},t.prototype.onSnapshot=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=rv(e),i=iv(e,(function(e){return new cv(t.firestore,new bd(t.firestore._delegate,t._userDataWriter,t._delegate,e._snapshot))}));return qd(this._delegate,r,i)},t.prototype.withConverter=function(e){return new t(this.firestore,e?this._delegate.withConverter(tv.nu(this.firestore,e)):this._delegate.withConverter(null))},t}(),uv=function(){function t(t,e){this._firestore=t,this._delegate=e}return Object.defineProperty(t.prototype,"type",{get:function(){return this._delegate.type},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"doc",{get:function(){return new av(this._firestore,this._delegate.doc)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"oldIndex",{get:function(){return this._delegate.oldIndex},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"newIndex",{get:function(){return this._delegate.newIndex},enumerable:!1,configurable:!0}),t}(),cv=function(){function t(t,e){this._firestore=t,this._delegate=e}return Object.defineProperty(t.prototype,"query",{get:function(){return new sv(this._firestore,this._delegate.query)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this._delegate.size},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"empty",{get:function(){return this._delegate.empty},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"docs",{get:function(){var t=this;return this._delegate.docs.map((function(e){return new av(t._firestore,e)}))},enumerable:!1,configurable:!0}),t.prototype.docChanges=function(t){var e=this;return this._delegate.docChanges(t).map((function(t){return new uv(e._firestore,t)}))},t.prototype.forEach=function(t,e){var n=this;this._delegate.forEach((function(r){t.call(e,new av(n._firestore,r))}))},t.prototype.isEqual=function(t){return _d(this._delegate,t._delegate)},t}(),hv=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this).firestore=e,r._delegate=n,r}return(0,o.__extends)(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._delegate.path},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this._delegate.parent;return t?new ev(this.firestore,t):null},enumerable:!1,configurable:!0}),e.prototype.doc=function(t){try{return new ev(this.firestore,void 0===t?kp(this._delegate):kp(this._delegate,t))}catch(t){throw nv(t,"doc()","CollectionReference.doc()")}},e.prototype.add=function(t){var e=this;return function(t,e){var n=bp(t.firestore,Rp),r=kp(t),i=Ld(t.converter,e);return Kd(n,[Xp(Wp(t.firestore),"addDoc",r._key,i,null!==t.converter,{}).toMutation(r._key,os.exists(!1))]).then((function(){return r}))}(this._delegate,t).then((function(t){return new ev(e.firestore,t)}))},e.prototype.isEqual=function(t){return Np(this._delegate,t._delegate)},e.prototype.withConverter=function(t){return new e(this.firestore,t?this._delegate.withConverter(tv.nu(this.firestore,t)):this._delegate.withConverter(null))},e}(sv);function lv(t){return bp(t,Tp)}var fv=function(){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._delegate=new(Fp.bind.apply(Fp,(0,o.__spreadArray)([void 0],t)))}return t.documentId=function(){return new t(No.keyField().canonicalString())},t.prototype.isEqual=function(t){return(t=(0,a.getModularInstance)(t))instanceof Fp&&this._delegate._internalPath.isEqual(t._internalPath)},t}(),pv=function(){function t(t){this._delegate=t}return t.serverTimestamp=function(){var e=new Jp("serverTimestamp");return e._methodName="FieldValue.serverTimestamp",new t(e)},t.delete=function(){var e=new Qp("deleteField");return e._methodName="FieldValue.delete",new t(e)},t.arrayUnion=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new $p("arrayUnion",t)}.apply(void 0,e);return r._methodName="FieldValue.arrayUnion",new t(r)},t.arrayRemove=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Zp("arrayRemove",t)}.apply(void 0,e);return r._methodName="FieldValue.arrayRemove",new t(r)},t.increment=function(e){var n=function(t){return new td("increment",t)}(e);return n._methodName="FieldValue.increment",new t(n)},t.prototype.isEqual=function(t){return this._delegate.isEqual(t._delegate)},t}();var dv,vv={Firestore:Yd,GeoPoint:Vp,Timestamp:wo,Blob:Xd,Transaction:$d,WriteBatch:Zd,DocumentReference:ev,DocumentSnapshot:ov,Query:sv,QueryDocumentSnapshot:av,QuerySnapshot:cv,CollectionReference:hv,FieldPath:fv,FieldValue:pv,setLogLevel:function(t){var e;e=t,oo.setLogLevel(e)},CACHE_SIZE_UNLIMITED:-1};(function(t,e){t.INTERNAL.registerComponent(new s.Component("firestore",(function(t){return function(t,e){return new Yd(t,new Rp(t,e),new Qd)}(t.getProvider("app").getImmediate(),t.getProvider("auth-internal"))}),"PUBLIC").setServiceProps(Object.assign({},vv)))})(dv=r.default),dv.registerVersion("@firebase/firestore","2.4.1");var gv={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},mv=function(t){function e(n,r,i){var o=t.call(this,r)||this;return Object.setPrototypeOf(o,e.prototype),o.code=n,o.details=i,o}return(0,o.__extends)(e,t),e}(Error);var yv=function(){function t(t,e){var n=this;this.auth=null,this.messaging=null,this.auth=t.getImmediate({optional:!0}),this.messaging=e.getImmediate({optional:!0}),this.auth||t.get().then((function(t){return n.auth=t}),(function(){})),this.messaging||e.get().then((function(t){return n.messaging=t}),(function(){}))}return t.prototype.getAuthToken=function(){return(0,o.__awaiter)(this,void 0,void 0,(function(){var t;return(0,o.__generator)(this,(function(e){switch(e.label){case 0:if(!this.auth)return[2,void 0];e.label=1;case 1:return e.trys.push([1,3,,4]),[4,this.auth.getToken()];case 2:return(t=e.sent())?[2,t.accessToken]:[2,void 0];case 3:return e.sent(),[2,void 0];case 4:return[2]}}))}))},t.prototype.getInstanceIdToken=function(){return(0,o.__awaiter)(this,void 0,void 0,(function(){return(0,o.__generator)(this,(function(t){switch(t.label){case 0:if(!this.messaging||!("Notification"in self)||"granted"!==Notification.permission)return[2,void 0];t.label=1;case 1:return t.trys.push([1,3,,4]),[4,this.messaging.getToken()];case 2:return[2,t.sent()];case 3:return t.sent(),[2,void 0];case 4:return[2]}}))}))},t.prototype.getContext=function(){return(0,o.__awaiter)(this,void 0,void 0,(function(){var t,e;return(0,o.__generator)(this,(function(n){switch(n.label){case 0:return[4,this.getAuthToken()];case 1:return t=n.sent(),[4,this.getInstanceIdToken()];case 2:return e=n.sent(),[2,{authToken:t,instanceIdToken:e}]}}))}))},t}();function bv(t,e){var n={};for(var r in t)t.hasOwnProperty(r)&&(n[r]=e(t[r]));return n}var wv=function(){function t(){}return t.prototype.encode=function(t){var e=this;if(null==t)return null;if(t instanceof Number&&(t=t.valueOf()),"number"===typeof t&&isFinite(t))return t;if(!0===t||!1===t)return t;if("[object String]"===Object.prototype.toString.call(t))return t;if(t instanceof Date)return t.toISOString();if(Array.isArray(t))return t.map((function(t){return e.encode(t)}));if("function"===typeof t||"object"===typeof t)return bv(t,(function(t){return e.encode(t)}));throw new Error("Data cannot be encoded in JSON: "+t)},t.prototype.decode=function(t){var e=this;if(null==t)return t;if(t["@type"])switch(t["@type"]){case"type.googleapis.com/google.protobuf.Int64Value":case"type.googleapis.com/google.protobuf.UInt64Value":var n=Number(t.value);if(isNaN(n))throw new Error("Data cannot be decoded from JSON: "+t);return n;default:throw new Error("Data cannot be decoded from JSON: "+t)}return Array.isArray(t)?t.map((function(t){return e.decode(t)})):"function"===typeof t||"object"===typeof t?bv(t,(function(t){return e.decode(t)})):t},t}();var _v=function(){function t(t,e,n,r,i,o){var a=this;void 0===i&&(i="us-central1"),this.app_=t,this.appCheckProvider=r,this.fetchImpl=o,this.serializer=new wv,this.emulatorOrigin=null,this.INTERNAL={delete:function(){return Promise.resolve(a.deleteService())}},this.contextProvider=new yv(e,n),this.cancelAllRequests=new Promise((function(t){a.deleteService=function(){return t()}}));try{var s=new URL(i);this.customDomain=s.origin,this.region="us-central1"}catch(dv){this.customDomain=null,this.region=i}}return Object.defineProperty(t.prototype,"app",{get:function(){return this.app_},enumerable:!1,configurable:!0}),t.prototype._url=function(t){var e=this.app_.options.projectId;return null!==this.emulatorOrigin?this.emulatorOrigin+"/"+e+"/"+this.region+"/"+t:null!==this.customDomain?this.customDomain+"/"+t:"https://"+this.region+"-"+e+".cloudfunctions.net/"+t},t.prototype.useEmulator=function(t,e){this.emulatorOrigin="http://"+t+":"+e},t.prototype.useFunctionsEmulator=function(t){this.emulatorOrigin=t},t.prototype.httpsCallable=function(t,e){var n=this;return function(r){return n.call(t,r,e||{})}},t.prototype.postJSON=function(t,e,n){return(0,o.__awaiter)(this,void 0,void 0,(function(){var r,i,a;return(0,o.__generator)(this,(function(o){switch(o.label){case 0:return n["Content-Type"]="application/json",[4,this.getAppCheckToken()];case 1:null!==(r=o.sent())&&(n["X-Firebase-AppCheck"]=r),o.label=2;case 2:return o.trys.push([2,4,,5]),[4,this.fetchImpl(t,{method:"POST",body:JSON.stringify(e),headers:n})];case 3:return i=o.sent(),[3,5];case 4:return o.sent(),[2,{status:0,json:null}];case 5:a=null,o.label=6;case 6:return o.trys.push([6,8,,9]),[4,i.json()];case 7:return a=o.sent(),[3,9];case 8:return o.sent(),[3,9];case 9:return[2,{status:i.status,json:a}]}}))}))},t.prototype.getAppCheckToken=function(){return(0,o.__awaiter)(this,void 0,void 0,(function(){var t;return(0,o.__generator)(this,(function(e){switch(e.label){case 0:return(t=this.appCheckProvider.getImmediate({optional:!0}))?[4,t.getToken()]:[3,2];case 1:return[2,e.sent().token];case 2:return[2,null]}}))}))},t.prototype.call=function(t,e,n){return(0,o.__awaiter)(this,void 0,void 0,(function(){var r,i,a,s,u,c,h,l,f,p,d;return(0,o.__generator)(this,(function(o){switch(o.label){case 0:return r=this._url(t),e=this.serializer.encode(e),i={data:e},a={},[4,this.contextProvider.getContext()];case 1:return(s=o.sent()).authToken&&(a.Authorization="Bearer "+s.authToken),s.instanceIdToken&&(a["Firebase-Instance-ID-Token"]=s.instanceIdToken),u=n.timeout||7e4,c=function(t){var e,n=new Promise((function(n,r){e=setTimeout((function(){r(new mv("deadline-exceeded","deadline-exceeded"))}),t)}));return{timer:e,promise:n}}(u),h=c.timer,l=c.promise,[4,Promise.race([Iv(h,this.postJSON(r,i,a)),l,Iv(h,this.cancelAllRequests)])];case 2:if(!(f=o.sent()))throw new mv("cancelled","Firebase Functions instance was deleted.");if(p=function(t,e,n){var r=function(t){if(t>=200&&t<300)return"ok";switch(t){case 0:case 500:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}(t),i=r,o=void 0;try{var a=e&&e.error;if(a){var s=a.status;if("string"===typeof s){if(!gv[s])return new mv("internal","internal");r=gv[s],i=s}var u=a.message;"string"===typeof u&&(i=u),void 0!==(o=a.details)&&(o=n.decode(o))}}catch(dv){}return"ok"===r?null:new mv(r,i,o)}(f.status,f.json,this.serializer),p)throw p;if(!f.json)throw new mv("internal","Response is not valid JSON object.");if("undefined"===typeof(d=f.json.data)&&(d=f.json.result),"undefined"===typeof d)throw new mv("internal","Response is missing data field.");return[2,{data:this.serializer.decode(d)}]}}))}))},t}();function Iv(t,e){return(0,o.__awaiter)(this,void 0,void 0,(function(){var n;return(0,o.__generator)(this,(function(r){switch(r.label){case 0:return[4,e];case 1:return n=r.sent(),clearTimeout(t),[2,n]}}))}))}!function(t,e){var n={Functions:_v};t.INTERNAL.registerComponent(new s.Component("functions",(function(t,n){var r=n.instanceIdentifier,i=t.getProvider("app").getImmediate(),o=t.getProvider("auth-internal"),a=t.getProvider("app-check-internal"),s=t.getProvider("messaging");return new _v(i,o,s,a,r,e)}),"PUBLIC").setServiceProps(n).setMultipleInstances(!0))}(r.default,fetch.bind(self)),r.default.registerVersion("@firebase/functions","0.6.16");var Tv,Ev=n(8676),Sv="0.4.32",Av=1e4,kv="w:0.4.32",Nv="FIS_v2",Cv=36e5,Ov=((Tv={})["missing-app-config-values"]='Missing App configuration value: "{$valueName}"',Tv["not-registered"]="Firebase Installation is not registered.",Tv["installation-not-found"]="Firebase Installation not found.",Tv["request-failed"]='{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',Tv["app-offline"]="Could not process request. Application offline.",Tv["delete-pending-registration"]="Can't delete installation while there is a pending registration request.",Tv),Dv=new a.ErrorFactory("installations","Installations",Ov);function Rv(t){return t instanceof a.FirebaseError&&t.code.includes("request-failed")}function Pv(t){return"https://firebaseinstallations.googleapis.com/v1/projects/"+t.projectId+"/installations"}function xv(t){return{token:t.token,requestStatus:2,expiresIn:(e=t.expiresIn,Number(e.replace("s","000"))),creationTime:Date.now()};var e}function Lv(t,e){return(0,o.__awaiter)(this,void 0,void 0,(function(){var n,r;return(0,o.__generator)(this,(function(i){switch(i.label){case 0:return[4,e.json()];case 1:return n=i.sent(),r=n.error,[2,Dv.create("request-failed",{requestName:t,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})]}}))}))}function Mv(t){var e=t.apiKey;return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":e})}function Fv(t,e){var n=e.refreshToken,r=Mv(t);return r.append("Authorization",function(t){return"FIS_v2 "+t}(n)),r}function Uv(t){return(0,o.__awaiter)(this,void 0,void 0,(function(){var e;return(0,o.__generator)(this,(function(n){switch(n.label){case 0:return[4,t()];case 1:return(e=n.sent()).status>=500&&e.status<600?[2,t()]:[2,e]}}))}))}function jv(t,e){var n=e.fid;return(0,o.__awaiter)(this,void 0,void 0,(function(){var e,r,i,a,s,u;return(0,o.__generator)(this,(function(o){switch(o.label){case 0:return e=Pv(t),r=Mv(t),i={fid:n,authVersion:Nv,appId:t.appId,sdkVersion:kv},a={method:"POST",headers:r,body:JSON.stringify(i)},[4,Uv((function(){return fetch(e,a)}))];case 1:return(s=o.sent()).ok?[4,s.json()]:[3,3];case 2:return u=o.sent(),[2,{fid:u.fid||n,registrationStatus:2,refreshToken:u.refreshToken,authToken:xv(u.authToken)}];case 3:return[4,Lv("Create Installation",s)];case 4:throw o.sent()}}))}))}function Vv(t){return new Promise((function(e){setTimeout(e,t)}))}var Bv=/^[cdef][\w-]{21}$/;function qv(){try{var t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;var e=function(t){return(e=t,btoa(String.fromCharCode.apply(String,(0,o.__spreadArray)([],(0,o.__read)(e)))).replace(/\+/g,"-").replace(/\//g,"_")).substr(0,22);var e}(t);return Bv.test(e)?e:""}catch(Xp){return""}}function Kv(t){return t.appName+"!"+t.appId}var Gv=new Map;function Hv(t,e){var n=Kv(t);zv(n,e),function(t,e){var n=Xv();n&&n.postMessage({key:t,fid:e});Qv()}(n,e)}function zv(t,e){var n,r,i=Gv.get(t);if(i)try{for(var a=(0,o.__values)(i),s=a.next();!s.done;s=a.next()){(0,s.value)(e)}}catch(u){n={error:u}}finally{try{s&&!s.done&&(r=a.return)&&r.call(a)}finally{if(n)throw n.error}}}var Wv=null;function Xv(){return!Wv&&"BroadcastChannel"in self&&((Wv=new BroadcastChannel("[Firebase] FID Change")).onmessage=function(t){zv(t.data.key,t.data.fid)}),Wv}function Qv(){0===Gv.size&&Wv&&(Wv.close(),Wv=null)}var Yv,Jv,$v="firebase-installations-store",Zv=null;function tg(){return Zv||(Zv=(0,Ev.openDb)("firebase-installations-database",1,(function(t){if(0===t.oldVersion)t.createObjectStore($v)}))),Zv}function eg(t,e){return(0,o.__awaiter)(this,void 0,void 0,(function(){var n,r,i,a,s;return(0,o.__generator)(this,(function(o){switch(o.label){case 0:return n=Kv(t),[4,tg()];case 1:return r=o.sent(),i=r.transaction($v,"readwrite"),[4,(a=i.objectStore($v)).get(n)];case 2:return s=o.sent(),[4,a.put(e,n)];case 3:return o.sent(),[4,i.complete];case 4:return o.sent(),s&&s.fid===e.fid||Hv(t,e.fid),[2,e]}}))}))}function ng(t){return(0,o.__awaiter)(this,void 0,void 0,(function(){var e,n,r;return(0,o.__generator)(this,(function(i){switch(i.label){case 0:return e=Kv(t),[4,tg()];case 1:return n=i.sent(),[4,(r=n.transaction($v,"readwrite")).objectStore($v).delete(e)];case 2:return i.sent(),[4,r.complete];case 3:return i.sent(),[2]}}))}))}function rg(t,e){return(0,o.__awaiter)(this,void 0,void 0,(function(){var n,r,i,a,s,u;return(0,o.__generator)(this,(function(o){switch(o.label){case 0:return n=Kv(t),[4,tg()];case 1:return r=o.sent(),i=r.transaction($v,"readwrite"),[4,(a=i.objectStore($v)).get(n)];case 2:return s=o.sent(),void 0!==(u=e(s))?[3,4]:[4,a.delete(n)];case 3:return o.sent(),[3,6];case 4:return[4,a.put(u,n)];case 5:o.sent(),o.label=6;case 6:return[4,i.complete];case 7:return o.sent(),!u||s&&s.fid===u.fid||Hv(t,u.fid),[2,u]}}))}))}function ig(t){return(0,o.__awaiter)(this,void 0,void 0,(function(){var e,n,r;return(0,o.__generator)(this,(function(i){switch(i.label){case 0:return[4,rg(t,(function(n){var r=function(t){return sg(t||{fid:qv(),registrationStatus:0})}(n),i=function(t,e){if(0===e.registrationStatus){if(!navigator.onLine)return{installationEntry:e,registrationPromise:Promise.reject(Dv.create("app-offline"))};var n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=function(t,e){return(0,o.__awaiter)(this,void 0,void 0,(function(){var n,r;return(0,o.__generator)(this,(function(i){switch(i.label){case 0:return i.trys.push([0,2,,7]),[4,jv(t,e)];case 1:return n=i.sent(),[2,eg(t,n)];case 2:return Rv(r=i.sent())&&409===r.customData.serverCode?[4,ng(t)]:[3,4];case 3:return i.sent(),[3,6];case 4:return[4,eg(t,{fid:e.fid,registrationStatus:0})];case 5:i.sent(),i.label=6;case 6:throw r;case 7:return[2]}}))}))}(t,n);return{installationEntry:n,registrationPromise:r}}return 1===e.registrationStatus?{installationEntry:e,registrationPromise:og(t)}:{installationEntry:e}}(t,r);return e=i.registrationPromise,i.installationEntry}))];case 1:return""!==(n=i.sent()).fid?[3,3]:(r={},[4,e]);case 2:return[2,(r.installationEntry=i.sent(),r)];case 3:return[2,{installationEntry:n,registrationPromise:e}]}}))}))}function og(t){return(0,o.__awaiter)(this,void 0,void 0,(function(){var e,n,r,i;return(0,o.__generator)(this,(function(o){switch(o.label){case 0:return[4,ag(t)];case 1:e=o.sent(),o.label=2;case 2:return 1!==e.registrationStatus?[3,5]:[4,Vv(100)];case 3:return o.sent(),[4,ag(t)];case 4:return e=o.sent(),[3,2];case 5:return 0!==e.registrationStatus?[3,7]:[4,ig(t)];case 6:return n=o.sent(),r=n.installationEntry,(i=n.registrationPromise)?[2,i]:[2,r];case 7:return[2,e]}}))}))}function ag(t){return rg(t,(function(t){if(!t)throw Dv.create("installation-not-found");return sg(t)}))}function sg(t){return 1===(e=t).registrationStatus&&e.registrationTime+Av<Date.now()?{fid:t.fid,registrationStatus:0}:t;var e}function ug(t,e){var n=t.appConfig,r=t.platformLoggerProvider;return(0,o.__awaiter)(this,void 0,void 0,(function(){var t,i,a,s,u,c,h;return(0,o.__generator)(this,(function(o){switch(o.label){case 0:return t=function(t,e){var n=e.fid;return Pv(t)+"/"+n+"/authTokens:generate"}(n,e),i=Fv(n,e),(a=r.getImmediate({optional:!0}))&&i.append("x-firebase-client",a.getPlatformInfoString()),s={installation:{sdkVersion:kv}},u={method:"POST",headers:i,body:JSON.stringify(s)},[4,Uv((function(){return fetch(t,u)}))];case 1:return(c=o.sent()).ok?[4,c.json()]:[3,3];case 2:return h=o.sent(),[2,xv(h)];case 3:return[4,Lv("Generate Auth Token",c)];case 4:throw o.sent()}}))}))}function cg(t,e){return void 0===e&&(e=!1),(0,o.__awaiter)(this,void 0,void 0,(function(){var n,r,i;return(0,o.__generator)(this,(function(a){switch(a.label){case 0:return[4,rg(t.appConfig,(function(r){if(!lg(r))throw Dv.create("not-registered");var i=r.authToken;if(!e&&function(t){return 2===t.requestStatus&&!function(t){var e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+Cv}(t)}(i))return r;if(1===i.requestStatus)return n=function(t,e){return(0,o.__awaiter)(this,void 0,void 0,(function(){var n,r;return(0,o.__generator)(this,(function(i){switch(i.label){case 0:return[4,hg(t.appConfig)];case 1:n=i.sent(),i.label=2;case 2:return 1!==n.authToken.requestStatus?[3,5]:[4,Vv(100)];case 3:return i.sent(),[4,hg(t.appConfig)];case 4:return n=i.sent(),[3,2];case 5:return 0===(r=n.authToken).requestStatus?[2,cg(t,e)]:[2,r]}}))}))}(t,e),r;if(!navigator.onLine)throw Dv.create("app-offline");var a=function(t){var e={requestStatus:1,requestTime:Date.now()};return(0,o.__assign)((0,o.__assign)({},t),{authToken:e})}(r);return n=function(t,e){return(0,o.__awaiter)(this,void 0,void 0,(function(){var n,r,i;return(0,o.__generator)(this,(function(a){switch(a.label){case 0:return a.trys.push([0,3,,8]),[4,ug(t,e)];case 1:return n=a.sent(),i=(0,o.__assign)((0,o.__assign)({},e),{authToken:n}),[4,eg(t.appConfig,i)];case 2:return a.sent(),[2,n];case 3:return!Rv(r=a.sent())||401!==r.customData.serverCode&&404!==r.customData.serverCode?[3,5]:[4,ng(t.appConfig)];case 4:return a.sent(),[3,7];case 5:return i=(0,o.__assign)((0,o.__assign)({},e),{authToken:{requestStatus:0}}),[4,eg(t.appConfig,i)];case 6:a.sent(),a.label=7;case 7:throw r;case 8:return[2]}}))}))}(t,a),a}))];case 1:return r=a.sent(),n?[4,n]:[3,3];case 2:return i=a.sent(),[3,4];case 3:i=r.authToken,a.label=4;case 4:return[2,i]}}))}))}function hg(t){return rg(t,(function(t){if(!lg(t))throw Dv.create("not-registered");var e,n=t.authToken;return 1===(e=n).requestStatus&&e.requestTime+Av<Date.now()?(0,o.__assign)((0,o.__assign)({},t),{authToken:{requestStatus:0}}):t}))}function lg(t){return void 0!==t&&2===t.registrationStatus}function fg(t){return(0,o.__awaiter)(this,void 0,void 0,(function(){var e;return(0,o.__generator)(this,(function(n){switch(n.label){case 0:return[4,ig(t)];case 1:return(e=n.sent().registrationPromise)?[4,e]:[3,3];case 2:n.sent(),n.label=3;case 3:return[2]}}))}))}function pg(t,e){return(0,o.__awaiter)(this,void 0,void 0,(function(){var n,r,i,a;return(0,o.__generator)(this,(function(o){switch(o.label){case 0:return n=function(t,e){var n=e.fid;return Pv(t)+"/"+n}(t,e),r=Fv(t,e),i={method:"DELETE",headers:r},[4,Uv((function(){return fetch(n,i)}))];case 1:return(a=o.sent()).ok?[3,3]:[4,Lv("Delete Installation",a)];case 2:throw o.sent();case 3:return[2]}}))}))}function dg(t,e){var n=t.appConfig;return function(t,e){Xv();var n=Kv(t),r=Gv.get(n);r||(r=new Set,Gv.set(n,r)),r.add(e)}(n,e),function(){!function(t,e){var n=Kv(t),r=Gv.get(n);r&&(r.delete(e),0===r.size&&Gv.delete(n),Qv())}(n,e)}}function vg(t){return Dv.create("missing-app-config-values",{valueName:t})}(Yv=r.default).INTERNAL.registerComponent(new s.Component("installations",(function(t){var e=t.getProvider("app").getImmediate(),n=function(t){var e,n;if(!t||!t.options)throw vg("App Configuration");if(!t.name)throw vg("App Name");try{for(var r=(0,o.__values)(["projectId","apiKey","appId"]),i=r.next();!i.done;i=r.next()){var a=i.value;if(!t.options[a])throw vg(a)}}catch(s){e={error:s}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}(e),r={appConfig:n,platformLoggerProvider:t.getProvider("platform-logger")},i={app:e,getId:function(){return function(t){return(0,o.__awaiter)(this,void 0,void 0,(function(){var e,n,r;return(0,o.__generator)(this,(function(i){switch(i.label){case 0:return[4,ig(t.appConfig)];case 1:return e=i.sent(),n=e.installationEntry,(r=e.registrationPromise)?r.catch(console.error):cg(t).catch(console.error),[2,n.fid]}}))}))}(r)},getToken:function(t){return function(t,e){return void 0===e&&(e=!1),(0,o.__awaiter)(this,void 0,void 0,(function(){return(0,o.__generator)(this,(function(n){switch(n.label){case 0:return[4,fg(t.appConfig)];case 1:return n.sent(),[4,cg(t,e)];case 2:return[2,n.sent().token]}}))}))}(r,t)},delete:function(){return function(t){return(0,o.__awaiter)(this,void 0,void 0,(function(){var e,n;return(0,o.__generator)(this,(function(r){switch(r.label){case 0:return[4,rg(e=t.appConfig,(function(t){if(!t||0!==t.registrationStatus)return t}))];case 1:if(!(n=r.sent()))return[3,6];if(1!==n.registrationStatus)return[3,2];throw Dv.create("delete-pending-registration");case 2:if(2!==n.registrationStatus)return[3,6];if(navigator.onLine)return[3,3];throw Dv.create("app-offline");case 3:return[4,pg(e,n)];case 4:return r.sent(),[4,ng(e)];case 5:r.sent(),r.label=6;case 6:return[2]}}))}))}(r)},onIdChange:function(t){return dg(r,t)}};return i}),"PUBLIC")),Yv.registerVersion("@firebase/installations",Sv);var gg,mg=((Jv={})["missing-app-config-values"]='Missing App configuration value: "{$valueName}"',Jv["only-available-in-window"]="This method is available in a Window context.",Jv["only-available-in-sw"]="This method is available in a service worker context.",Jv["permission-default"]="The notification permission was not granted and dismissed instead.",Jv["permission-blocked"]="The notification permission was not granted and blocked instead.",Jv["unsupported-browser"]="This browser doesn't support the API's required to use the firebase SDK.",Jv["failed-service-worker-registration"]="We are unable to register the default service worker. {$browserErrorMessage}",Jv["token-subscribe-failed"]="A problem occurred while subscribing the user to FCM: {$errorInfo}",Jv["token-subscribe-no-token"]="FCM returned no token when subscribing the user to push.",Jv["token-unsubscribe-failed"]="A problem occurred while unsubscribing the user from FCM: {$errorInfo}",Jv["token-update-failed"]="A problem occurred while updating the user from FCM: {$errorInfo}",Jv["token-update-no-token"]="FCM returned no token when updating the user to push.",Jv["use-sw-after-get-token"]="The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.",Jv["invalid-sw-registration"]="The input to useServiceWorker() must be a ServiceWorkerRegistration.",Jv["invalid-bg-handler"]="The input to setBackgroundMessageHandler() must be a function.",Jv["invalid-vapid-key"]="The public VAPID key must be a string.",Jv["use-vapid-key-after-get-token"]="The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used.",Jv),yg=new a.ErrorFactory("messaging","Messaging",mg),bg="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",wg="google.c.a.c_id";function _g(t){var e=new Uint8Array(t);return btoa(String.fromCharCode.apply(String,(0,o.__spreadArray)([],(0,o.__read)(e)))).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Ig(t){for(var e=(t+"=".repeat((4-t.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),n=atob(e),r=new Uint8Array(n.length),i=0;i<n.length;++i)r[i]=n.charCodeAt(i);return r}!function(t){t.PUSH_RECEIVED="push-received",t.NOTIFICATION_CLICKED="notification-clicked"}(gg||(gg={}));var Tg="fcm_token_details_db",Eg="fcm_token_object_Store";function Sg(t){return(0,o.__awaiter)(this,void 0,void 0,(function(){var e,n,r,i=this;return(0,o.__generator)(this,(function(a){switch(a.label){case 0:return"databases"in indexedDB?[4,indexedDB.databases()]:[3,2];case 1:if(e=a.sent(),n=e.map((function(t){return t.name})),!n.includes(Tg))return[2,null];a.label=2;case 2:return r=null,[4,(0,Ev.openDb)(Tg,5,(function(e){return(0,o.__awaiter)(i,void 0,void 0,(function(){var n,i,a,s;return(0,o.__generator)(this,(function(o){switch(o.label){case 0:return e.oldVersion<2?[2]:e.objectStoreNames.contains(Eg)?[4,(n=e.transaction.objectStore(Eg)).index("fcmSenderId").get(t)]:[2];case 1:return i=o.sent(),[4,n.clear()];case 2:if(o.sent(),!i)return[2];if(2===e.oldVersion){if(!(a=i).auth||!a.p256dh||!a.endpoint)return[2];r={token:a.fcmToken,createTime:null!==(s=a.createTime)&&void 0!==s?s:Date.now(),subscriptionOptions:{auth:a.auth,p256dh:a.p256dh,endpoint:a.endpoint,swScope:a.swScope,vapidKey:"string"===typeof a.vapidKey?a.vapidKey:_g(a.vapidKey)}}}else(3===e.oldVersion||4===e.oldVersion)&&(r={token:(a=i).fcmToken,createTime:a.createTime,subscriptionOptions:{auth:_g(a.auth),p256dh:_g(a.p256dh),endpoint:a.endpoint,swScope:a.swScope,vapidKey:_g(a.vapidKey)}});return[2]}}))}))}))];case 3:return a.sent().close(),[4,(0,Ev.deleteDb)(Tg)];case 4:return a.sent(),[4,(0,Ev.deleteDb)("fcm_vapid_details_db")];case 5:return a.sent(),[4,(0,Ev.deleteDb)("undefined")];case 6:return a.sent(),[2,Ag(r)?r:null]}}))}))}function Ag(t){if(!t||!t.subscriptionOptions)return!1;var e=t.subscriptionOptions;return"number"===typeof t.createTime&&t.createTime>0&&"string"===typeof t.token&&t.token.length>0&&"string"===typeof e.auth&&e.auth.length>0&&"string"===typeof e.p256dh&&e.p256dh.length>0&&"string"===typeof e.endpoint&&e.endpoint.length>0&&"string"===typeof e.swScope&&e.swScope.length>0&&"string"===typeof e.vapidKey&&e.vapidKey.length>0}var kg="firebase-messaging-store",Ng=null;function Cg(){return Ng||(Ng=(0,Ev.openDb)("firebase-messaging-database",1,(function(t){if(0===t.oldVersion)t.createObjectStore(kg)}))),Ng}function Og(t){return(0,o.__awaiter)(this,void 0,void 0,(function(){var e,n,r;return(0,o.__generator)(this,(function(i){switch(i.label){case 0:return e=Pg(t),[4,Cg()];case 1:return[4,i.sent().transaction(kg).objectStore(kg).get(e)];case 2:return(n=i.sent())?[2,n]:[3,3];case 3:return[4,Sg(t.appConfig.senderId)];case 4:return(r=i.sent())?[4,Dg(t,r)]:[3,6];case 5:return i.sent(),[2,r];case 6:return[2]}}))}))}function Dg(t,e){return(0,o.__awaiter)(this,void 0,void 0,(function(){var n,r,i;return(0,o.__generator)(this,(function(o){switch(o.label){case 0:return n=Pg(t),[4,Cg()];case 1:return r=o.sent(),[4,(i=r.transaction(kg,"readwrite")).objectStore(kg).put(e,n)];case 2:return o.sent(),[4,i.complete];case 3:return o.sent(),[2,e]}}))}))}function Rg(t){return(0,o.__awaiter)(this,void 0,void 0,(function(){var e,n,r;return(0,o.__generator)(this,(function(i){switch(i.label){case 0:return e=Pg(t),[4,Cg()];case 1:return n=i.sent(),[4,(r=n.transaction(kg,"readwrite")).objectStore(kg).delete(e)];case 2:return i.sent(),[4,r.complete];case 3:return i.sent(),[2]}}))}))}function Pg(t){return t.appConfig.appId}function xg(t,e){return(0,o.__awaiter)(this,void 0,void 0,(function(){var n,r,i,a,s,u;return(0,o.__generator)(this,(function(o){switch(o.label){case 0:return[4,Ug(t)];case 1:n=o.sent(),r=jg(e),i={method:"POST",headers:n,body:JSON.stringify(r)},o.label=2;case 2:return o.trys.push([2,5,,6]),[4,fetch(Fg(t.appConfig),i)];case 3:return[4,o.sent().json()];case 4:return a=o.sent(),[3,6];case 5:throw s=o.sent(),yg.create("token-subscribe-failed",{errorInfo:s});case 6:if(a.error)throw u=a.error.message,yg.create("token-subscribe-failed",{errorInfo:u});if(!a.token)throw yg.create("token-subscribe-no-token");return[2,a.token]}}))}))}function Lg(t,e){return(0,o.__awaiter)(this,void 0,void 0,(function(){var n,r,i,a,s,u;return(0,o.__generator)(this,(function(o){switch(o.label){case 0:return[4,Ug(t)];case 1:n=o.sent(),r=jg(e.subscriptionOptions),i={method:"PATCH",headers:n,body:JSON.stringify(r)},o.label=2;case 2:return o.trys.push([2,5,,6]),[4,fetch(Fg(t.appConfig)+"/"+e.token,i)];case 3:return[4,o.sent().json()];case 4:return a=o.sent(),[3,6];case 5:throw s=o.sent(),yg.create("token-update-failed",{errorInfo:s});case 6:if(a.error)throw u=a.error.message,yg.create("token-update-failed",{errorInfo:u});if(!a.token)throw yg.create("token-update-no-token");return[2,a.token]}}))}))}function Mg(t,e){return(0,o.__awaiter)(this,void 0,void 0,(function(){var n,r,i,a,s;return(0,o.__generator)(this,(function(o){switch(o.label){case 0:return[4,Ug(t)];case 1:n=o.sent(),r={method:"DELETE",headers:n},o.label=2;case 2:return o.trys.push([2,5,,6]),[4,fetch(Fg(t.appConfig)+"/"+e,r)];case 3:return[4,o.sent().json()];case 4:if((i=o.sent()).error)throw a=i.error.message,yg.create("token-unsubscribe-failed",{errorInfo:a});return[3,6];case 5:throw s=o.sent(),yg.create("token-unsubscribe-failed",{errorInfo:s});case 6:return[2]}}))}))}function Fg(t){return"https://fcmregistrations.googleapis.com/v1/projects/"+t.projectId+"/registrations"}function Ug(t){var e=t.appConfig,n=t.installations;return(0,o.__awaiter)(this,void 0,void 0,(function(){var t;return(0,o.__generator)(this,(function(r){switch(r.label){case 0:return[4,n.getToken()];case 1:return t=r.sent(),[2,new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":e.apiKey,"x-goog-firebase-installations-auth":"FIS "+t})]}}))}))}function jg(t){var e=t.p256dh,n=t.auth,r=t.endpoint,i=t.vapidKey,o={web:{endpoint:r,auth:n,p256dh:e}};return i!==bg&&(o.web.applicationPubKey=i),o}function Vg(t,e,n){return(0,o.__awaiter)(this,void 0,void 0,(function(){var r,i,a,s;return(0,o.__generator)(this,(function(o){switch(o.label){case 0:if("granted"!==Notification.permission)throw yg.create("permission-blocked");return[4,Gg(e,n)];case 1:return r=o.sent(),[4,Og(t)];case 2:return i=o.sent(),a={vapidKey:n,swScope:e.scope,endpoint:r.endpoint,auth:_g(r.getKey("auth")),p256dh:_g(r.getKey("p256dh"))},i?[3,3]:[2,Kg(t,a)];case 3:if(function(t,e){var n=e.vapidKey===t.vapidKey,r=e.endpoint===t.endpoint,i=e.auth===t.auth,o=e.p256dh===t.p256dh;return n&&r&&i&&o}(i.subscriptionOptions,a))return[3,8];o.label=4;case 4:return o.trys.push([4,6,,7]),[4,Mg(t,i.token)];case 5:return o.sent(),[3,7];case 6:return s=o.sent(),console.warn(s),[3,7];case 7:return[2,Kg(t,a)];case 8:return Date.now()>=i.createTime+6048e5?[2,qg({token:i.token,createTime:Date.now(),subscriptionOptions:a},t,e)]:[2,i.token];case 9:return[2]}}))}))}function Bg(t,e){return(0,o.__awaiter)(this,void 0,void 0,(function(){var n,r;return(0,o.__generator)(this,(function(i){switch(i.label){case 0:return[4,Og(t)];case 1:return(n=i.sent())?[4,Mg(t,n.token)]:[3,4];case 2:return i.sent(),[4,Rg(t)];case 3:i.sent(),i.label=4;case 4:return[4,e.pushManager.getSubscription()];case 5:return(r=i.sent())?[2,r.unsubscribe()]:[2,!0]}}))}))}function qg(t,e,n){return(0,o.__awaiter)(this,void 0,void 0,(function(){var r,i,a;return(0,o.__generator)(this,(function(s){switch(s.label){case 0:return s.trys.push([0,3,,5]),[4,Lg(e,t)];case 1:return r=s.sent(),i=(0,o.__assign)((0,o.__assign)({},t),{token:r,createTime:Date.now()}),[4,Dg(e,i)];case 2:return s.sent(),[2,r];case 3:return a=s.sent(),[4,Bg(e,n)];case 4:throw s.sent(),a;case 5:return[2]}}))}))}function Kg(t,e){return(0,o.__awaiter)(this,void 0,void 0,(function(){var n,r;return(0,o.__generator)(this,(function(i){switch(i.label){case 0:return[4,xg(t,e)];case 1:return n=i.sent(),r={token:n,createTime:Date.now(),subscriptionOptions:e},[4,Dg(t,r)];case 2:return i.sent(),[2,r.token]}}))}))}function Gg(t,e){return(0,o.__awaiter)(this,void 0,void 0,(function(){var n;return(0,o.__generator)(this,(function(r){switch(r.label){case 0:return[4,t.pushManager.getSubscription()];case 1:return(n=r.sent())?[2,n]:[2,t.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Ig(e)})]}}))}))}function Hg(t){return"object"===typeof t&&!!t&&wg in t}function zg(t){return new Promise((function(e){setTimeout(e,t)}))}var Wg=function(){function t(t){var e=this;this.firebaseDependencies=t,this.isOnBackgroundMessageUsed=null,this.vapidKey=null,this.bgMessageHandler=null,self.addEventListener("push",(function(t){t.waitUntil(e.onPush(t))})),self.addEventListener("pushsubscriptionchange",(function(t){t.waitUntil(e.onSubChange(t))})),self.addEventListener("notificationclick",(function(t){t.waitUntil(e.onNotificationClick(t))}))}return Object.defineProperty(t.prototype,"app",{get:function(){return this.firebaseDependencies.app},enumerable:!1,configurable:!0}),t.prototype.setBackgroundMessageHandler=function(t){if(this.isOnBackgroundMessageUsed=!1,!t||"function"!==typeof t)throw yg.create("invalid-bg-handler");this.bgMessageHandler=t},t.prototype.onBackgroundMessage=function(t){var e=this;return this.isOnBackgroundMessageUsed=!0,this.bgMessageHandler=t,function(){e.bgMessageHandler=null}},t.prototype.getToken=function(){var t,e;return(0,o.__awaiter)(this,void 0,void 0,(function(){var n;return(0,o.__generator)(this,(function(r){switch(r.label){case 0:return this.vapidKey?[3,2]:[4,Og(this.firebaseDependencies)];case 1:n=r.sent(),this.vapidKey=null!==(e=null===(t=null===n||void 0===n?void 0:n.subscriptionOptions)||void 0===t?void 0:t.vapidKey)&&void 0!==e?e:bg,r.label=2;case 2:return[2,Vg(this.firebaseDependencies,self.registration,this.vapidKey)]}}))}))},t.prototype.deleteToken=function(){return Bg(this.firebaseDependencies,self.registration)},t.prototype.requestPermission=function(){throw yg.create("only-available-in-window")},t.prototype.usePublicVapidKey=function(t){if(null!==this.vapidKey)throw yg.create("use-vapid-key-after-get-token");if("string"!==typeof t||0===t.length)throw yg.create("invalid-vapid-key");this.vapidKey=t},t.prototype.useServiceWorker=function(){throw yg.create("only-available-in-window")},t.prototype.onMessage=function(){throw yg.create("only-available-in-window")},t.prototype.onTokenRefresh=function(){throw yg.create("only-available-in-window")},t.prototype.onPush=function(t){return(0,o.__awaiter)(this,void 0,void 0,(function(){var e,n,r,i;return(0,o.__generator)(this,(function(o){switch(o.label){case 0:return e=function(t){var e=t.data;if(!e)return null;try{return e.json()}catch(n){return null}}(t),e?[4,Jg()]:(console.debug("FirebaseMessaging: failed to get parsed MessagePayload from the PushEvent. Skip handling the push."),[2]);case 1:return function(t){return t.some((function(t){return"visible"===t.visibilityState&&!t.url.startsWith("chrome-extension://")}))}(n=o.sent())?[2,Yg(n,e)]:(r=!1,e.notification?[4,$g(Xg(e))]:[3,3]);case 2:o.sent(),r=!0,o.label=3;case 3:return!0===r&&!1===this.isOnBackgroundMessageUsed?[2]:(this.bgMessageHandler&&(i=function(t){var e={from:t.from,collapseKey:t.collapse_key,messageId:t.fcm_message_id};return function(t,e){if(e.notification){t.notification={};var n=e.notification.title;n&&(t.notification.title=n);var r=e.notification.body;r&&(t.notification.body=r);var i=e.notification.image;i&&(t.notification.image=i)}}(e,t),function(t,e){e.data&&(t.data=e.data)}(e,t),function(t,e){if(e.fcmOptions){t.fcmOptions={};var n=e.fcmOptions.link;n&&(t.fcmOptions.link=n);var r=e.fcmOptions.analytics_label;r&&(t.fcmOptions.analyticsLabel=r)}}(e,t),e}(e),"function"===typeof this.bgMessageHandler?this.bgMessageHandler(i):this.bgMessageHandler.next(i)),[4,zg(1e3)]);case 4:return o.sent(),[2]}}))}))},t.prototype.onSubChange=function(t){var e,n;return(0,o.__awaiter)(this,void 0,void 0,(function(){var r;return(0,o.__generator)(this,(function(i){switch(i.label){case 0:return t.newSubscription?[3,2]:[4,Bg(this.firebaseDependencies,self.registration)];case 1:case 5:return i.sent(),[2];case 2:return[4,Og(this.firebaseDependencies)];case 3:return r=i.sent(),[4,Bg(this.firebaseDependencies,self.registration)];case 4:return i.sent(),[4,Vg(this.firebaseDependencies,self.registration,null!==(n=null===(e=null===r||void 0===r?void 0:r.subscriptionOptions)||void 0===e?void 0:e.vapidKey)&&void 0!==n?n:bg)]}}))}))},t.prototype.onNotificationClick=function(t){var e,n;return(0,o.__awaiter)(this,void 0,void 0,(function(){var r,i,a,s,u;return(0,o.__generator)(this,(function(o){switch(o.label){case 0:return(r=null===(n=null===(e=t.notification)||void 0===e?void 0:e.data)||void 0===n?void 0:n.FCM_MSG)?t.action?[2]:(t.stopImmediatePropagation(),t.notification.close(),i=function(t){var e,n,r,i=null!==(n=null===(e=t.fcmOptions)||void 0===e?void 0:e.link)&&void 0!==n?n:null===(r=t.notification)||void 0===r?void 0:r.click_action;if(i)return i;return Hg(t.data)?self.location.origin:null}(r),i?(a=new URL(i,self.location.href),s=new URL(self.location.origin),a.host!==s.host?[2]:[4,Qg(a)]):[2]):[2];case 1:return(u=o.sent())?[3,4]:[4,self.clients.openWindow(i)];case 2:return u=o.sent(),[4,zg(3e3)];case 3:return o.sent(),[3,6];case 4:return[4,u.focus()];case 5:u=o.sent(),o.label=6;case 6:return u?(r.messageType=gg.NOTIFICATION_CLICKED,r.isFirebaseMessaging=!0,[2,u.postMessage(r)]):[2]}}))}))},t}();function Xg(t){var e,n=(0,o.__assign)({},t.notification);return n.data=((e={}).FCM_MSG=t,e),n}function Qg(t){return(0,o.__awaiter)(this,void 0,void 0,(function(){var e,n,r,i,a,s,u;return(0,o.__generator)(this,(function(c){switch(c.label){case 0:return[4,Jg()];case 1:e=c.sent();try{for(n=(0,o.__values)(e),r=n.next();!r.done;r=n.next())if(i=r.value,a=new URL(i.url,self.location.href),t.host===a.host)return[2,i]}catch(h){s={error:h}}finally{try{r&&!r.done&&(u=n.return)&&u.call(n)}finally{if(s)throw s.error}}return[2,null]}}))}))}function Yg(t,e){var n,r;e.isFirebaseMessaging=!0,e.messageType=gg.PUSH_RECEIVED;try{for(var i=(0,o.__values)(t),a=i.next();!a.done;a=i.next()){a.value.postMessage(e)}}catch(s){n={error:s}}finally{try{a&&!a.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}}function Jg(){return self.clients.matchAll({type:"window",includeUncontrolled:!0})}function $g(t){var e,n=t.actions,r=Notification.maxActions;return n&&r&&n.length>r&&console.warn("This browser only supports "+r+" actions. The remaining actions will not be displayed."),self.registration.showNotification(null!==(e=t.title)&&void 0!==e?e:"",t)}var Zg=function(){function t(t){var e=this;this.firebaseDependencies=t,this.vapidKey=null,this.onMessageCallback=null,navigator.serviceWorker.addEventListener("message",(function(t){return e.messageEventListener(t)}))}return Object.defineProperty(t.prototype,"app",{get:function(){return this.firebaseDependencies.app},enumerable:!1,configurable:!0}),t.prototype.messageEventListener=function(t){return(0,o.__awaiter)(this,void 0,void 0,(function(){var e,n;return(0,o.__generator)(this,(function(r){switch(r.label){case 0:return(e=t.data).isFirebaseMessaging?(this.onMessageCallback&&e.messageType===gg.PUSH_RECEIVED&&("function"===typeof this.onMessageCallback?this.onMessageCallback(function(t){return delete t.messageType,delete t.isFirebaseMessaging,t}(Object.assign({},e))):this.onMessageCallback.next(Object.assign({},e))),Hg(n=e.data)&&"1"===n["google.c.a.e"]?[4,this.logEvent(e.messageType,n)]:[3,2]):[2];case 1:r.sent(),r.label=2;case 2:return[2]}}))}))},t.prototype.getVapidKey=function(){return this.vapidKey},t.prototype.getSwReg=function(){return this.swRegistration},t.prototype.getToken=function(t){return(0,o.__awaiter)(this,void 0,void 0,(function(){return(0,o.__generator)(this,(function(e){switch(e.label){case 0:return"default"!==Notification.permission?[3,2]:[4,Notification.requestPermission()];case 1:e.sent(),e.label=2;case 2:if("granted"!==Notification.permission)throw yg.create("permission-blocked");return[4,this.updateVapidKey(null===t||void 0===t?void 0:t.vapidKey)];case 3:return e.sent(),[4,this.updateSwReg(null===t||void 0===t?void 0:t.serviceWorkerRegistration)];case 4:return e.sent(),[2,Vg(this.firebaseDependencies,this.swRegistration,this.vapidKey)]}}))}))},t.prototype.updateVapidKey=function(t){return(0,o.__awaiter)(this,void 0,void 0,(function(){return(0,o.__generator)(this,(function(e){return t?this.vapidKey=t:this.vapidKey||(this.vapidKey=bg),[2]}))}))},t.prototype.updateSwReg=function(t){return(0,o.__awaiter)(this,void 0,void 0,(function(){return(0,o.__generator)(this,(function(e){switch(e.label){case 0:return t||this.swRegistration?[3,2]:[4,this.registerDefaultSw()];case 1:e.sent(),e.label=2;case 2:if(!t&&this.swRegistration)return[2];if(!(t instanceof ServiceWorkerRegistration))throw yg.create("invalid-sw-registration");return this.swRegistration=t,[2]}}))}))},t.prototype.registerDefaultSw=function(){return(0,o.__awaiter)(this,void 0,void 0,(function(){var t,e;return(0,o.__generator)(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),t=this,[4,navigator.serviceWorker.register("/firebase-messaging-sw.js",{scope:"/firebase-cloud-messaging-push-scope"})];case 1:return t.swRegistration=n.sent(),this.swRegistration.update().catch((function(){})),[3,3];case 2:throw e=n.sent(),yg.create("failed-service-worker-registration",{browserErrorMessage:e.message});case 3:return[2]}}))}))},t.prototype.deleteToken=function(){return(0,o.__awaiter)(this,void 0,void 0,(function(){return(0,o.__generator)(this,(function(t){switch(t.label){case 0:return this.swRegistration?[3,2]:[4,this.registerDefaultSw()];case 1:t.sent(),t.label=2;case 2:return[2,Bg(this.firebaseDependencies,this.swRegistration)]}}))}))},t.prototype.requestPermission=function(){return(0,o.__awaiter)(this,void 0,void 0,(function(){var t;return(0,o.__generator)(this,(function(e){switch(e.label){case 0:return"granted"===Notification.permission?[2]:[4,Notification.requestPermission()];case 1:if("granted"===(t=e.sent()))return[2];throw"denied"===t?yg.create("permission-blocked"):yg.create("permission-default")}}))}))},t.prototype.usePublicVapidKey=function(t){if(null!==this.vapidKey)throw yg.create("use-vapid-key-after-get-token");if("string"!==typeof t||0===t.length)throw yg.create("invalid-vapid-key");this.vapidKey=t},t.prototype.useServiceWorker=function(t){if(!(t instanceof ServiceWorkerRegistration))throw yg.create("invalid-sw-registration");if(this.swRegistration)throw yg.create("use-sw-after-get-token");this.swRegistration=t},t.prototype.onMessage=function(t){var e=this;return this.onMessageCallback=t,function(){e.onMessageCallback=null}},t.prototype.setBackgroundMessageHandler=function(){throw yg.create("only-available-in-sw")},t.prototype.onBackgroundMessage=function(){throw yg.create("only-available-in-sw")},t.prototype.onTokenRefresh=function(){return function(){}},t.prototype.logEvent=function(t,e){return(0,o.__awaiter)(this,void 0,void 0,(function(){var n;return(0,o.__generator)(this,(function(r){switch(r.label){case 0:return n=function(t){switch(t){case gg.NOTIFICATION_CLICKED:return"notification_open";case gg.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}(t),[4,this.firebaseDependencies.analyticsProvider.get()];case 1:return r.sent().logEvent(n,{message_id:e["google.c.a.c_id"],message_name:e["google.c.a.c_l"],message_time:e["google.c.a.ts"],message_device_time:Math.floor(Date.now()/1e3)}),[2]}}))}))},t}();function tm(t){return yg.create("missing-app-config-values",{valueName:t})}var em={isSupported:nm};function nm(){return self&&"ServiceWorkerGlobalScope"in self?"indexedDB"in self&&null!==indexedDB&&"PushManager"in self&&"Notification"in self&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey"):"indexedDB"in window&&null!==indexedDB&&navigator.cookieEnabled&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")}r.default.INTERNAL.registerComponent(new s.Component("messaging",(function(t){var e=t.getProvider("app").getImmediate(),n=function(t){var e,n;if(!t||!t.options)throw tm("App Configuration Object");if(!t.name)throw tm("App Name");var r=t.options;try{for(var i=(0,o.__values)(["projectId","apiKey","appId","messagingSenderId"]),a=i.next();!a.done;a=i.next()){var s=a.value;if(!r[s])throw tm(s)}}catch(u){e={error:u}}finally{try{a&&!a.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return{appName:t.name,projectId:r.projectId,apiKey:r.apiKey,appId:r.appId,senderId:r.messagingSenderId}}(e),r={app:e,appConfig:n,installations:t.getProvider("installations").getImmediate(),analyticsProvider:t.getProvider("analytics-internal")};if(!nm())throw yg.create("unsupported-browser");return self&&"ServiceWorkerGlobalScope"in self?new Wg(r):new Zg(r)}),"PUBLIC").setServiceProps(em));n(2224);var rm,im,om="https://www.googletagmanager.com/gtag/js";!function(t){t.EVENT="event",t.SET="set",t.CONFIG="config"}(rm||(rm={})),function(t){t.ADD_SHIPPING_INFO="add_shipping_info",t.ADD_PAYMENT_INFO="add_payment_info",t.ADD_TO_CART="add_to_cart",t.ADD_TO_WISHLIST="add_to_wishlist",t.BEGIN_CHECKOUT="begin_checkout",t.CHECKOUT_PROGRESS="checkout_progress",t.EXCEPTION="exception",t.GENERATE_LEAD="generate_lead",t.LOGIN="login",t.PAGE_VIEW="page_view",t.PURCHASE="purchase",t.REFUND="refund",t.REMOVE_FROM_CART="remove_from_cart",t.SCREEN_VIEW="screen_view",t.SEARCH="search",t.SELECT_CONTENT="select_content",t.SELECT_ITEM="select_item",t.SELECT_PROMOTION="select_promotion",t.SET_CHECKOUT_OPTION="set_checkout_option",t.SHARE="share",t.SIGN_UP="sign_up",t.TIMING_COMPLETE="timing_complete",t.VIEW_CART="view_cart",t.VIEW_ITEM="view_item",t.VIEW_ITEM_LIST="view_item_list",t.VIEW_PROMOTION="view_promotion",t.VIEW_SEARCH_RESULTS="view_search_results"}(im||(im={}));var am,sm=new jt.Logger("@firebase/analytics");function um(t,e,n,r,i,a){return(0,o.__awaiter)(this,void 0,void 0,(function(){var s,u,c,h;return(0,o.__generator)(this,(function(o){switch(o.label){case 0:s=r[i],o.label=1;case 1:return o.trys.push([1,7,,8]),s?[4,e[s]]:[3,3];case 2:return o.sent(),[3,6];case 3:return[4,Promise.all(n)];case 4:return u=o.sent(),c=u.find((function(t){return t.measurementId===i})),c?[4,e[c.appId]]:[3,6];case 5:o.sent(),o.label=6;case 6:return[3,8];case 7:return h=o.sent(),sm.error(h),[3,8];case 8:return t(rm.CONFIG,i,a),[2]}}))}))}function cm(t,e,n,r,i){return(0,o.__awaiter)(this,void 0,void 0,(function(){var a,s,u,c,h,l,f,p;return(0,o.__generator)(this,(function(o){switch(o.label){case 0:return o.trys.push([0,4,,5]),a=[],i&&i.send_to?(s=i.send_to,Array.isArray(s)||(s=[s]),[4,Promise.all(n)]):[3,2];case 1:for(u=o.sent(),c=function(t){var n=u.find((function(e){return e.measurementId===t})),r=n&&e[n.appId];if(!r)return a=[],"break";a.push(r)},h=0,l=s;h<l.length&&(f=l[h],"break"!==c(f));h++);o.label=2;case 2:return 0===a.length&&(a=Object.values(e)),[4,Promise.all(a)];case 3:return o.sent(),t(rm.EVENT,r,i||{}),[3,5];case 4:return p=o.sent(),sm.error(p),[3,5];case 5:return[2]}}))}))}function hm(t,e,n,r,i){var a=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];window[r].push(arguments)};return window[i]&&"function"===typeof window[i]&&(a=window[i]),window[i]=function(t,e,n,r){return function(i,a,s){return(0,o.__awaiter)(this,void 0,void 0,(function(){var u;return(0,o.__generator)(this,(function(o){switch(o.label){case 0:return o.trys.push([0,6,,7]),i!==rm.EVENT?[3,2]:[4,cm(t,e,n,a,s)];case 1:return o.sent(),[3,5];case 2:return i!==rm.CONFIG?[3,4]:[4,um(t,e,n,r,a,s)];case 3:return o.sent(),[3,5];case 4:t(rm.SET,a),o.label=5;case 5:return[3,7];case 6:return u=o.sent(),sm.error(u),[3,7];case 7:return[2]}}))}))}}(a,t,e,n),{gtagCore:a,wrappedGtag:window[i]}}var lm=((am={})["already-exists"]="A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.",am["already-initialized"]="Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.",am["interop-component-reg-failed"]="Firebase Analytics Interop Component failed to instantiate: {$reason}",am["invalid-analytics-context"]="Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}",am["indexeddb-unavailable"]="IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}",am["fetch-throttle"]="The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.",am["config-fetch-failed"]="Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}",am["no-api-key"]='The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',am["no-app-id"]='The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',am),fm=new a.ErrorFactory("analytics","Analytics",lm),pm=new(function(){function t(t,e){void 0===t&&(t={}),void 0===e&&(e=1e3),this.throttleMetadata=t,this.intervalMillis=e}return t.prototype.getThrottleMetadata=function(t){return this.throttleMetadata[t]},t.prototype.setThrottleMetadata=function(t,e){this.throttleMetadata[t]=e},t.prototype.deleteThrottleMetadata=function(t){delete this.throttleMetadata[t]},t}());function dm(t){return new Headers({Accept:"application/json","x-goog-api-key":t})}function vm(t){var e;return(0,o.__awaiter)(this,void 0,void 0,(function(){var n,r,i,a,s,u,c;return(0,o.__generator)(this,(function(o){switch(o.label){case 0:return n=t.appId,r=t.apiKey,i={method:"GET",headers:dm(r)},a="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig".replace("{app-id}",n),[4,fetch(a,i)];case 1:if(200===(s=o.sent()).status||304===s.status)return[3,6];u="",o.label=2;case 2:return o.trys.push([2,4,,5]),[4,s.json()];case 3:return c=o.sent(),(null===(e=c.error)||void 0===e?void 0:e.message)&&(u=c.error.message),[3,5];case 4:return o.sent(),[3,5];case 5:throw fm.create("config-fetch-failed",{httpStatus:s.status,responseMessage:u});case 6:return[2,s.json()]}}))}))}function gm(t,e,n,r){var i=e.throttleEndTimeMillis,s=e.backoffCount;return void 0===r&&(r=pm),(0,o.__awaiter)(this,void 0,void 0,(function(){var e,u,c,h,l,f,p;return(0,o.__generator)(this,(function(o){switch(o.label){case 0:e=t.appId,u=t.measurementId,o.label=1;case 1:return o.trys.push([1,3,,4]),[4,mm(n,i)];case 2:return o.sent(),[3,4];case 3:if(c=o.sent(),u)return sm.warn("Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID "+u+' provided in the "measurementId" field in the local Firebase config. ['+c.message+"]"),[2,{appId:e,measurementId:u}];throw c;case 4:return o.trys.push([4,6,,7]),[4,vm(t)];case 5:return h=o.sent(),r.deleteThrottleMetadata(e),[2,h];case 6:if(!function(t){if(!(t instanceof a.FirebaseError)||!t.customData)return!1;var e=Number(t.customData.httpStatus);return 429===e||500===e||503===e||504===e}(l=o.sent())){if(r.deleteThrottleMetadata(e),u)return sm.warn("Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID "+u+' provided in the "measurementId" field in the local Firebase config. ['+l.message+"]"),[2,{appId:e,measurementId:u}];throw l}return f=503===Number(l.customData.httpStatus)?(0,a.calculateBackoffMillis)(s,r.intervalMillis,30):(0,a.calculateBackoffMillis)(s,r.intervalMillis),p={throttleEndTimeMillis:Date.now()+f,backoffCount:s+1},r.setThrottleMetadata(e,p),sm.debug("Calling attemptFetch again in "+f+" millis"),[2,gm(t,p,n,r)];case 7:return[2]}}))}))}function mm(t,e){return new Promise((function(n,r){var i=Math.max(e-Date.now(),0),o=setTimeout(n,i);t.addEventListener((function(){clearTimeout(o),r(fm.create("fetch-throttle",{throttleEndTimeMillis:e}))}))}))}var ym=function(){function t(){this.listeners=[]}return t.prototype.addEventListener=function(t){this.listeners.push(t)},t.prototype.abort=function(){this.listeners.forEach((function(t){return t()}))},t}();function bm(t,e,n,r,i,s){return(0,o.__awaiter)(this,void 0,void 0,(function(){var u,c,h,l,f,p,d;return(0,o.__generator)(this,(function(v){switch(v.label){case 0:return u=function(t,e,n){return void 0===e&&(e=pm),(0,o.__awaiter)(this,void 0,void 0,(function(){var r,i,a,s,u,c,h=this;return(0,o.__generator)(this,(function(l){if(r=t.options,i=r.appId,a=r.apiKey,s=r.measurementId,!i)throw fm.create("no-app-id");if(!a){if(s)return[2,{measurementId:s,appId:i}];throw fm.create("no-api-key")}return u=e.getThrottleMetadata(i)||{backoffCount:0,throttleEndTimeMillis:Date.now()},c=new ym,setTimeout((function(){return(0,o.__awaiter)(h,void 0,void 0,(function(){return(0,o.__generator)(this,(function(t){return c.abort(),[2]}))}))}),void 0!==n?n:6e4),[2,gm({appId:i,apiKey:a,measurementId:s},u,c,e)]}))}))}(t),u.then((function(e){n[e.measurementId]=e.appId,t.options.measurementId&&e.measurementId!==t.options.measurementId&&sm.warn("The measurement ID in the local Firebase config ("+t.options.measurementId+") does not match the measurement ID fetched from the server ("+e.measurementId+"). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.")})).catch((function(t){return sm.error(t)})),e.push(u),c=function(){return(0,o.__awaiter)(this,void 0,void 0,(function(){var t;return(0,o.__generator)(this,(function(e){switch(e.label){case 0:return(0,a.isIndexedDBAvailable)()?[3,1]:(sm.warn(fm.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),[2,!1]);case 1:return e.trys.push([1,3,,4]),[4,(0,a.validateIndexedDBOpenable)()];case 2:return e.sent(),[3,4];case 3:return t=e.sent(),sm.warn(fm.create("indexeddb-unavailable",{errorInfo:t}).message),[2,!1];case 4:return[2,!0]}}))}))}().then((function(t){return t?r.getId():void 0})),[4,Promise.all([u,c])];case 1:return h=v.sent(),l=h[0],f=h[1],function(){for(var t=window.document.getElementsByTagName("script"),e=0,n=Object.values(t);e<n.length;e++){var r=n[e];if(r.src&&r.src.includes(om))return r}return null}()||function(t,e){var n=document.createElement("script");n.src=om+"?l="+t+"&id="+e,n.async=!0,document.head.appendChild(n)}(s,l.measurementId),i("js",new Date),(d={}).origin="firebase",d.update=!0,p=d,null!=f&&(p.firebase_id=f),i(rm.CONFIG,l.measurementId,p),[2,l.measurementId]}}))}))}var wm,_m,Im={},Tm=[],Em={},Sm="dataLayer",Am="gtag",km=!1;function Nm(t){if(km)throw fm.create("already-initialized");t.dataLayerName&&(Sm=t.dataLayerName),t.gtagName&&(Am=t.gtagName)}function Cm(t,e){!function(){var t=[];if((0,a.isBrowserExtension)()&&t.push("This is a browser extension environment."),(0,a.areCookiesEnabled)()||t.push("Cookies are not available."),t.length>0){var e=t.map((function(t,e){return"("+(e+1)+") "+t})).join(" "),n=fm.create("invalid-analytics-context",{errorInfo:e});sm.warn(n.message)}}();var n=t.options.appId;if(!n)throw fm.create("no-app-id");if(!t.options.apiKey){if(!t.options.measurementId)throw fm.create("no-api-key");sm.warn('The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID '+t.options.measurementId+' provided in the "measurementId" field in the local Firebase config.')}if(null!=Im[n])throw fm.create("already-exists",{id:n});if(!km){!function(t){var e=[];Array.isArray(window[t])?e=window[t]:window[t]=e}(Sm);var r=hm(Im,Tm,Em,Sm,Am),i=r.wrappedGtag,s=r.gtagCore;_m=i,wm=s,km=!0}Im[n]=bm(t,Tm,Em,e,wm,Sm);var u={app:t,logEvent:function(t,e,r){(function(t,e,n,r,i){return(0,o.__awaiter)(this,void 0,void 0,(function(){var a,s;return(0,o.__generator)(this,(function(u){switch(u.label){case 0:return i&&i.global?(t(rm.EVENT,n,r),[2]):[3,1];case 1:return[4,e];case 2:a=u.sent(),s=(0,o.__assign)((0,o.__assign)({},r),{send_to:a}),t(rm.EVENT,n,s),u.label=3;case 3:return[2]}}))}))})(_m,Im[n],t,e,r).catch((function(t){return sm.error(t)}))},setCurrentScreen:function(t,e){(function(t,e,n,r){return(0,o.__awaiter)(this,void 0,void 0,(function(){var i;return(0,o.__generator)(this,(function(o){switch(o.label){case 0:return r&&r.global?(t(rm.SET,{screen_name:n}),[2,Promise.resolve()]):[3,1];case 1:return[4,e];case 2:i=o.sent(),t(rm.CONFIG,i,{update:!0,screen_name:n}),o.label=3;case 3:return[2]}}))}))})(_m,Im[n],t,e).catch((function(t){return sm.error(t)}))},setUserId:function(t,e){(function(t,e,n,r){return(0,o.__awaiter)(this,void 0,void 0,(function(){var i;return(0,o.__generator)(this,(function(o){switch(o.label){case 0:return r&&r.global?(t(rm.SET,{user_id:n}),[2,Promise.resolve()]):[3,1];case 1:return[4,e];case 2:i=o.sent(),t(rm.CONFIG,i,{update:!0,user_id:n}),o.label=3;case 3:return[2]}}))}))})(_m,Im[n],t,e).catch((function(t){return sm.error(t)}))},setUserProperties:function(t,e){(function(t,e,n,r){return(0,o.__awaiter)(this,void 0,void 0,(function(){var i,a,s,u,c;return(0,o.__generator)(this,(function(o){switch(o.label){case 0:if(!r||!r.global)return[3,1];for(i={},a=0,s=Object.keys(n);a<s.length;a++)u=s[a],i["user_properties."+u]=n[u];return t(rm.SET,i),[2,Promise.resolve()];case 1:return[4,e];case 2:c=o.sent(),t(rm.CONFIG,c,{update:!0,user_properties:n}),o.label=3;case 3:return[2]}}))}))})(_m,Im[n],t,e).catch((function(t){return sm.error(t)}))},setAnalyticsCollectionEnabled:function(t){(function(t,e){return(0,o.__awaiter)(this,void 0,void 0,(function(){var n;return(0,o.__generator)(this,(function(r){switch(r.label){case 0:return[4,t];case 1:return n=r.sent(),window["ga-disable-"+n]=!e,[2]}}))}))})(Im[n],t).catch((function(t){return sm.error(t)}))},INTERNAL:{delete:function(){return delete Im[n],Promise.resolve()}}};return u}var Om="analytics";function Dm(){return(0,o.__awaiter)(this,void 0,void 0,(function(){return(0,o.__generator)(this,(function(t){switch(t.label){case 0:if((0,a.isBrowserExtension)())return[2,!1];if(!(0,a.areCookiesEnabled)())return[2,!1];if(!(0,a.isIndexedDBAvailable)())return[2,!1];t.label=1;case 1:return t.trys.push([1,3,,4]),[4,(0,a.validateIndexedDBOpenable)()];case 2:return[2,t.sent()];case 3:return t.sent(),[2,!1];case 4:return[2]}}))}))}!function(t){t.INTERNAL.registerComponent(new s.Component(Om,(function(t){return Cm(t.getProvider("app").getImmediate(),t.getProvider("installations").getImmediate())}),"PUBLIC").setServiceProps({settings:Nm,EventName:im,isSupported:Dm})),t.INTERNAL.registerComponent(new s.Component("analytics-internal",(function(t){try{return{logEvent:t.getProvider(Om).getImmediate().logEvent}}catch(dv){throw fm.create("interop-component-reg-failed",{reason:dv})}}),"PRIVATE")),t.registerVersion("@firebase/analytics","0.6.18")}(r.default);var Rm,Pm,xm,Lm="0.4.18",Mm=Lm,Fm="FB-PERF-TRACE-MEASURE",Um="_wt_",jm="_fcp",Vm="_fid",Bm="@firebase/performance/config",qm="@firebase/performance/configexpire",Km="Performance",Gm=((Rm={})["trace started"]="Trace {$traceName} was started before.",Rm["trace stopped"]="Trace {$traceName} is not running.",Rm["nonpositive trace startTime"]="Trace {$traceName} startTime should be positive.",Rm["nonpositive trace duration"]="Trace {$traceName} duration should be positive.",Rm["no window"]="Window is not available.",Rm["no app id"]="App id is not available.",Rm["no project id"]="Project id is not available.",Rm["no api key"]="Api key is not available.",Rm["invalid cc log"]="Attempted to queue invalid cc event",Rm["FB not default"]="Performance can only start when Firebase app instance is the default one.",Rm["RC response not ok"]="RC response is not ok",Rm["invalid attribute name"]="Attribute name {$attributeName} is invalid.",Rm["invalid attribute value"]="Attribute value {$attributeValue} is invalid.",Rm["invalid custom metric name"]="Custom metric name {$customMetricName} is invalid",Rm["invalid String merger input"]="Input for String merger is invalid, contact support team to resolve.",Rm),Hm=new a.ErrorFactory("performance",Km,Gm),zm=new jt.Logger(Km);zm.logLevel=jt.LogLevel.INFO;var Wm,Xm=function(){function t(t){if(this.window=t,!t)throw Hm.create("no window");this.performance=t.performance,this.PerformanceObserver=t.PerformanceObserver,this.windowLocation=t.location,this.navigator=t.navigator,this.document=t.document,this.navigator&&this.navigator.cookieEnabled&&(this.localStorage=t.localStorage),t.perfMetrics&&t.perfMetrics.onFirstInputDelay&&(this.onFirstInputDelay=t.perfMetrics.onFirstInputDelay)}return t.prototype.getUrl=function(){return this.windowLocation.href.split("?")[0]},t.prototype.mark=function(t){this.performance&&this.performance.mark&&this.performance.mark(t)},t.prototype.measure=function(t,e,n){this.performance&&this.performance.measure&&this.performance.measure(t,e,n)},t.prototype.getEntriesByType=function(t){return this.performance&&this.performance.getEntriesByType?this.performance.getEntriesByType(t):[]},t.prototype.getEntriesByName=function(t){return this.performance&&this.performance.getEntriesByName?this.performance.getEntriesByName(t):[]},t.prototype.getTimeOrigin=function(){return this.performance&&(this.performance.timeOrigin||this.performance.timing.navigationStart)},t.prototype.requiredApisAvailable=function(){return fetch&&Promise&&this.navigator&&this.navigator.cookieEnabled?!!(0,a.isIndexedDBAvailable)()||(zm.info("IndexedDB is not supported by current browswer"),!1):(zm.info("Firebase Performance cannot start if browser does not support fetch and Promise or cookie is disabled."),!1)},t.prototype.setupObserver=function(t,e){if(this.PerformanceObserver){var n=new this.PerformanceObserver((function(t){for(var n=0,r=t.getEntries();n<r.length;n++){var i=r[n];e(i)}}));n.observe({entryTypes:[t]})}},t.getInstance=function(){return void 0===Pm&&(Pm=new t(xm)),Pm},t}();function Qm(t,e){var n=t.length-e.length;if(n<0||n>1)throw Hm.create("invalid String merger input");for(var r=[],i=0;i<t.length;i++)r.push(t.charAt(i)),e.length>i&&r.push(e.charAt(i));return r.join("")}var Ym,Jm,$m=function(){function t(){this.instrumentationEnabled=!0,this.dataCollectionEnabled=!0,this.loggingEnabled=!1,this.tracesSamplingRate=1,this.networkRequestsSamplingRate=1,this.logEndPointUrl="https://firebaselogging.googleapis.com/v0cc/log?format=json_proto",this.flTransportEndpointUrl=Qm("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),this.transportKey=Qm("AzSC8r6ReiGqFMyfvgow","Iayx0u-XT3vksVM-pIV"),this.logSource=462,this.logTraceAfterSampling=!1,this.logNetworkAfterSampling=!1,this.configTimeToLive=12}return t.prototype.getAppId=function(){var t=this.firebaseAppInstance&&this.firebaseAppInstance.options&&this.firebaseAppInstance.options.appId;if(!t)throw Hm.create("no app id");return t},t.prototype.getProjectId=function(){var t=this.firebaseAppInstance&&this.firebaseAppInstance.options&&this.firebaseAppInstance.options.projectId;if(!t)throw Hm.create("no project id");return t},t.prototype.getApiKey=function(){var t=this.firebaseAppInstance&&this.firebaseAppInstance.options&&this.firebaseAppInstance.options.apiKey;if(!t)throw Hm.create("no api key");return t},t.prototype.getFlTransportFullUrl=function(){return this.flTransportEndpointUrl.concat("?key=",this.transportKey)},t.getInstance=function(){return void 0===Wm&&(Wm=new t),Wm},t}();function Zm(){return Ym}!function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.VISIBLE=1]="VISIBLE",t[t.HIDDEN=2]="HIDDEN"}(Jm||(Jm={}));var ty=["firebase_","google_","ga_"],ey=new RegExp("^[a-zA-Z]\\w*$");function ny(){var t=Xm.getInstance().navigator;return"serviceWorker"in t?t.serviceWorker.controller?2:3:1}function ry(){switch(Xm.getInstance().document.visibilityState){case"visible":return Jm.VISIBLE;case"hidden":return Jm.HIDDEN;default:return Jm.UNKNOWN}}function iy(){var t=Xm.getInstance().navigator.connection;switch(t&&t.effectiveType){case"slow-2g":return 1;case"2g":return 2;case"3g":return 3;case"4g":return 4;default:return 0}}var oy="0.0.1",ay=!0,sy="FIREBASE_INSTALLATIONS_AUTH";function uy(t){var e=function(){var t=Xm.getInstance().localStorage;if(!t)return;var e=t.getItem(qm);if(!e||(n=e,!(Number(n)>Date.now())))return;var n;var r=t.getItem(Bm);if(!r)return;try{return JSON.parse(r)}catch(Xp){return}}();return e?(hy(e),Promise.resolve()):function(t){return function(){var t=$m.getInstance().installationsService.getToken();return t.then((function(t){})),t}().then((function(e){var n="https://firebaseremoteconfig.googleapis.com/v1/projects/"+$m.getInstance().getProjectId()+"/namespaces/fireperf:fetch?key="+$m.getInstance().getApiKey(),r=new Request(n,{method:"POST",headers:{Authorization:sy+" "+e},body:JSON.stringify({app_instance_id:t,app_instance_id_token:e,app_id:$m.getInstance().getAppId(),app_version:Mm,sdk_version:oy})});return fetch(r).then((function(t){if(t.ok)return t.json();throw Hm.create("RC response not ok")}))})).catch((function(){zm.info(cy)}))}(t).then(hy).then((function(t){return function(t){var e=Xm.getInstance().localStorage;if(!t||!e)return;e.setItem(Bm,JSON.stringify(t)),e.setItem(qm,String(Date.now()+60*$m.getInstance().configTimeToLive*60*1e3))}(t)}),(function(){}))}var cy="Could not fetch config, will use default configs";function hy(t){if(!t)return t;var e=$m.getInstance(),n=t.entries||{};return void 0!==n.fpr_enabled?e.loggingEnabled="true"===String(n.fpr_enabled):e.loggingEnabled=ay,n.fpr_log_source&&(e.logSource=Number(n.fpr_log_source)),n.fpr_log_endpoint_url&&(e.logEndPointUrl=n.fpr_log_endpoint_url),n.fpr_log_transport_key&&(e.transportKey=n.fpr_log_transport_key),void 0!==n.fpr_vc_network_request_sampling_rate&&(e.networkRequestsSamplingRate=Number(n.fpr_vc_network_request_sampling_rate)),void 0!==n.fpr_vc_trace_sampling_rate&&(e.tracesSamplingRate=Number(n.fpr_vc_trace_sampling_rate)),e.logTraceAfterSampling=ly(e.tracesSamplingRate),e.logNetworkAfterSampling=ly(e.networkRequestsSamplingRate),t}function ly(t){return Math.random()<=t}var fy,py=1;function dy(){return py=2,fy=fy||function(){var t=Xm.getInstance().document;return new Promise((function(e){if(t&&"complete"!==t.readyState){var n=function(){"complete"===t.readyState&&(t.removeEventListener("readystatechange",n),e())};t.addEventListener("readystatechange",n)}else e()}))}().then((function(){return function(){var t=$m.getInstance().installationsService.getId();return t.then((function(t){Ym=t})),t}()})).then((function(t){return uy(t)})).then((function(){return vy()}),(function(){return vy()}))}function vy(){py=3}var gy,my=1e4,yy=3,by=[],wy=!1;function _y(t){setTimeout((function(){if(0!==yy)return by.length?void function(){var t=by.splice(0,1e3),e=t.map((function(t){return{source_extension_json_proto3:t.message,event_time_ms:String(t.eventTime)}}));(function(t,e){return function(t){var e=$m.getInstance().getFlTransportFullUrl();return fetch(e,{method:"POST",body:JSON.stringify(t)})}(t).then((function(t){return t.ok||zm.info("Call to Firebase backend failed."),t.json()})).then((function(t){var n=Number(t.nextRequestWaitMillis),r=my;isNaN(n)||(r=Math.max(n,r));var i=t.logResponseDetails;Array.isArray(i)&&i.length>0&&"RETRY_REQUEST_LATER"===i[0].responseAction&&(by=(0,o.__spreadArray)((0,o.__spreadArray)([],e),by),zm.info("Retry transport request later.")),yy=3,_y(r)}))})({request_time_ms:String(Date.now()),client_info:{client_type:1,js_client_info:{}},log_source:$m.getInstance().logSource,log_event:e},t).catch((function(){by=(0,o.__spreadArray)((0,o.__spreadArray)([],t),by),yy--,zm.info("Tries left: "+yy+"."),_y(my)}))}():_y(my)}),t)}function Iy(t){if(!t.eventTime||!t.message)throw Hm.create("invalid cc log");by=(0,o.__spreadArray)((0,o.__spreadArray)([],by),[t])}function Ty(t,e){gy||(gy=function(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];Iy({message:t.apply(void 0,e),eventTime:Date.now()})}}(Ay)),gy(t,e)}function Ey(t){var e=$m.getInstance();!e.instrumentationEnabled&&t.isAuto||(e.dataCollectionEnabled||t.isAuto)&&Xm.getInstance().requiredApisAvailable()&&(t.isAuto&&ry()!==Jm.VISIBLE||(3===py?Sy(t):dy().then((function(){return Sy(t)}),(function(){return Sy(t)}))))}function Sy(t){if(Zm()){var e=$m.getInstance();e.loggingEnabled&&e.logTraceAfterSampling&&setTimeout((function(){return Ty(t,1)}),0)}}function Ay(t,e){return 0===e?function(t){var e={url:t.url,http_method:t.httpMethod||0,http_response_code:200,response_payload_bytes:t.responsePayloadBytes,client_start_time_us:t.startTimeUs,time_to_response_initiated_us:t.timeToResponseInitiatedUs,time_to_response_completed_us:t.timeToResponseCompletedUs},n={application_info:ky(),network_request_metric:e};return JSON.stringify(n)}(t):function(t){var e={name:t.name,is_auto:t.isAuto,client_start_time_us:t.startTimeUs,duration_us:t.durationUs};0!==Object.keys(t.counters).length&&(e.counters=t.counters);var n=t.getAttributes();0!==Object.keys(n).length&&(e.custom_attributes=n);var r={application_info:ky(),trace_metric:e};return JSON.stringify(r)}(t)}function ky(){return{google_app_id:$m.getInstance().getAppId(),app_instance_id:Zm(),web_app_info:{sdk_version:Mm,page_url:Xm.getInstance().getUrl(),service_worker_status:ny(),visibility_state:ry(),effective_connection_type:iy()},application_process_state:0}}var Ny=["_fp",jm,Vm];var Cy=function(){function t(t,e,n){void 0===e&&(e=!1),this.name=t,this.isAuto=e,this.state=1,this.customAttributes={},this.counters={},this.api=Xm.getInstance(),this.randomId=Math.floor(1e6*Math.random()),this.isAuto||(this.traceStartMark="FB-PERF-TRACE-START-"+this.randomId+"-"+this.name,this.traceStopMark="FB-PERF-TRACE-STOP-"+this.randomId+"-"+this.name,this.traceMeasure=n||"FB-PERF-TRACE-MEASURE-"+this.randomId+"-"+this.name,n&&this.calculateTraceMetrics())}return t.prototype.start=function(){if(1!==this.state)throw Hm.create("trace started",{traceName:this.name});this.api.mark(this.traceStartMark),this.state=2},t.prototype.stop=function(){if(2!==this.state)throw Hm.create("trace stopped",{traceName:this.name});this.state=3,this.api.mark(this.traceStopMark),this.api.measure(this.traceMeasure,this.traceStartMark,this.traceStopMark),this.calculateTraceMetrics(),Ey(this)},t.prototype.record=function(t,e,n){if(t<=0)throw Hm.create("nonpositive trace startTime",{traceName:this.name});if(e<=0)throw Hm.create("nonpositive trace duration",{traceName:this.name});if(this.durationUs=Math.floor(1e3*e),this.startTimeUs=Math.floor(1e3*t),n&&n.attributes&&(this.customAttributes=(0,o.__assign)({},n.attributes)),n&&n.metrics)for(var r=0,i=Object.keys(n.metrics);r<i.length;r++){var a=i[r];isNaN(Number(n.metrics[a]))||(this.counters[a]=Number(Math.floor(n.metrics[a])))}Ey(this)},t.prototype.incrementMetric=function(t,e){void 0===e&&(e=1),void 0===this.counters[t]?this.putMetric(t,e):this.putMetric(t,this.counters[t]+e)},t.prototype.putMetric=function(t,e){if(n=t,r=this.name,0===n.length||n.length>100||!(r&&r.startsWith(Um)&&Ny.indexOf(n)>-1)&&n.startsWith("_"))throw Hm.create("invalid custom metric name",{customMetricName:t});var n,r;this.counters[t]=function(t){var e=Math.floor(t);return e<t&&zm.info("Metric value should be an Integer, setting the value as : "+e+"."),e}(e)},t.prototype.getMetric=function(t){return this.counters[t]||0},t.prototype.putAttribute=function(t,e){var n,r=!(0===(n=t).length||n.length>40)&&!ty.some((function(t){return n.startsWith(t)}))&&!!n.match(ey),i=function(t){return 0!==t.length&&t.length<=100}(e);if(r&&i)this.customAttributes[t]=e;else{if(!r)throw Hm.create("invalid attribute name",{attributeName:t});if(!i)throw Hm.create("invalid attribute value",{attributeValue:e})}},t.prototype.getAttribute=function(t){return this.customAttributes[t]},t.prototype.removeAttribute=function(t){void 0!==this.customAttributes[t]&&delete this.customAttributes[t]},t.prototype.getAttributes=function(){return(0,o.__assign)({},this.customAttributes)},t.prototype.setStartTime=function(t){this.startTimeUs=t},t.prototype.setDuration=function(t){this.durationUs=t},t.prototype.calculateTraceMetrics=function(){var t=this.api.getEntriesByName(this.traceMeasure),e=t&&t[0];e&&(this.durationUs=Math.floor(1e3*e.duration),this.startTimeUs=Math.floor(1e3*(e.startTime+this.api.getTimeOrigin())))},t.createOobTrace=function(e,n,r){var i=Xm.getInstance().getUrl();if(i){var o=new t(Um+i,!0),a=Math.floor(1e3*Xm.getInstance().getTimeOrigin());o.setStartTime(a),e&&e[0]&&(o.setDuration(Math.floor(1e3*e[0].duration)),o.putMetric("domInteractive",Math.floor(1e3*e[0].domInteractive)),o.putMetric("domContentLoadedEventEnd",Math.floor(1e3*e[0].domContentLoadedEventEnd)),o.putMetric("loadEventEnd",Math.floor(1e3*e[0].loadEventEnd)));if(n){var s=n.find((function(t){return"first-paint"===t.name}));s&&s.startTime&&o.putMetric("_fp",Math.floor(1e3*s.startTime));var u=n.find((function(t){return"first-contentful-paint"===t.name}));u&&u.startTime&&o.putMetric(jm,Math.floor(1e3*u.startTime)),r&&o.putMetric(Vm,Math.floor(1e3*r))}Ey(o)}},t.createUserTimingTrace=function(e){Ey(new t(e,!1,e))},t}();function Oy(t){var e=t;if(e&&void 0!==e.responseStart){var n=Xm.getInstance().getTimeOrigin(),r=Math.floor(1e3*(e.startTime+n)),i=e.responseStart?Math.floor(1e3*(e.responseStart-e.startTime)):void 0,o=Math.floor(1e3*(e.responseEnd-e.startTime));!function(t){var e=$m.getInstance();if(e.instrumentationEnabled){var n=t.url,r=e.logEndPointUrl.split("?")[0],i=e.flTransportEndpointUrl.split("?")[0];n!==r&&n!==i&&e.loggingEnabled&&e.logNetworkAfterSampling&&setTimeout((function(){return Ty(t,0)}),0)}}({url:e.name&&e.name.split("?")[0],responsePayloadBytes:e.transferSize,startTimeUs:r,timeToResponseInitiatedUs:i,timeToResponseCompletedUs:o})}}function Dy(){Zm()&&(setTimeout((function(){return function(){var t=Xm.getInstance(),e=t.getEntriesByType("navigation"),n=t.getEntriesByType("paint");if(t.onFirstInputDelay){var r=setTimeout((function(){Cy.createOobTrace(e,n),r=void 0}),5e3);t.onFirstInputDelay((function(t){r&&(clearTimeout(r),Cy.createOobTrace(e,n,t))}))}else Cy.createOobTrace(e,n)}()}),0),setTimeout((function(){return function(){for(var t=Xm.getInstance(),e=t.getEntriesByType("resource"),n=0,r=e;n<r.length;n++){Oy(r[n])}t.setupObserver("resource",Oy)}()}),0),setTimeout((function(){return function(){for(var t=Xm.getInstance(),e=t.getEntriesByType("measure"),n=0,r=e;n<r.length;n++){Ry(r[n])}t.setupObserver("measure",Ry)}()}),0))}function Ry(t){var e=t.name;e.substring(0,Fm.length)!==Fm&&Cy.createUserTimingTrace(e)}var Py=function(){function t(t){this.app=t,Xm.getInstance().requiredApisAvailable()&&(0,a.validateIndexedDBOpenable)().then((function(t){t&&(wy||(_y(5500),wy=!0),dy().then(Dy,Dy))})).catch((function(t){zm.info("Environment doesn't support IndexedDB: "+t)}))}return t.prototype.trace=function(t){return new Cy(t)},Object.defineProperty(t.prototype,"instrumentationEnabled",{get:function(){return $m.getInstance().instrumentationEnabled},set:function(t){$m.getInstance().instrumentationEnabled=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"dataCollectionEnabled",{get:function(){return $m.getInstance().dataCollectionEnabled},set:function(t){$m.getInstance().dataCollectionEnabled=t},enumerable:!1,configurable:!0}),t}();!function(t){var e=function(t,e){if("[DEFAULT]"!==t.name)throw Hm.create("FB not default");if("undefined"===typeof window)throw Hm.create("no window");return function(t){xm=t}(window),$m.getInstance().firebaseAppInstance=t,$m.getInstance().installationsService=e,new Py(t)};t.INTERNAL.registerComponent(new s.Component("performance",(function(t){var n=t.getProvider("app").getImmediate(),r=t.getProvider("installations").getImmediate();return e(n,r)}),"PUBLIC")),t.registerVersion("@firebase/performance",Lm)}(r.default);var xy=n(1071),Ly={apiKey:xy.f.FIREBASE_API_KEY,authDomain:xy.f.FIREBASE_AUTH_DOMAIN,projectId:xy.f.FIREBASE_PROJECT_ID,storageBucket:xy.f.FIREBASE_STORAGE_BUCKET,messagingSenderId:xy.f.FIREBASE_MESSAGING_SENDER_ID,appId:xy.f.FIREBASE_APP_ID,measurementId:xy.f.FIREBASE_MEASURMENT_ID};r.default.apps.length?r.default.app():r.default.initializeApp(Ly);r.default.app().functions(),r.default.auth();var My=r.default.firestore(),Fy=(r.default.firestore.FieldValue.arrayUnion,r.default.firestore.FieldValue.arrayRemove,r.default.firestore.FieldValue.serverTimestamp)},6385:function(t,e,n){"use strict";n.d(e,{xc:function(){return g},fC:function(){return m},EF:function(){return y}});var r=n(4051),i=n.n(r),o=n(7630),a=n(1685),s=n(8546),u=n(2107);function c(t,e,n,r,i,o,a){try{var s=t[o](a),u=s.value}catch(c){return void n(c)}s.done?e(u):Promise.resolve(u).then(r,i)}function h(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function l(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function f(t,e,n){return e&&l(t.prototype,e),n&&l(t,n),t}var p=function(){function t(){h(this,t)}return f(t,[{key:"getSeenWelcomeScreen",value:function(){return"true"===localStorage.getItem("welcome-screen")}},{key:"setSeenWelcomeScreen",value:function(t){var e=t?"true":"false";localStorage.setItem("welcome-screen",e)}},{key:"setIsAdmin",value:function(t){var e=t?"true":"false";localStorage.setItem("isAdmin",e)}},{key:"getIsAdmin",value:function(){return"true"===localStorage.getItem("isAdmin")}}]),t}(),d=function(){function t(){h(this,t)}return f(t,[{key:"getExportSettings",value:function(){var t=localStorage.getItem("exportSettings");return t?JSON.parse(t):null}},{key:"setExportSettings",value:function(t){localStorage.setItem("exportSettings",JSON.stringify(t))}},{key:"getSeenUpdate",value:function(){return"true"===localStorage.getItem("hasSeenNewUpdate-".concat(o.A))}},{key:"setSeenUpdate",value:function(){localStorage.setItem("hasSeenNewUpdate-".concat(o.A),"true")}}]),t}(),v=function(){function t(){h(this,t)}return f(t,[{key:"getUser",value:function(){var t=localStorage.getItem("user");if(null===t)return null;var e=JSON.parse(t);return new a.$2(e)}},{key:"setUser",value:function(t){localStorage.setItem("user",JSON.stringify(t.toJSON()))}},{key:"updateUser",value:function(t){return(e=i().mark((function e(){var n;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.Z.getUser(t);case 2:return(n=e.sent)&&localStorage.setItem("user",JSON.stringify(n.toJSON())),e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(t){c(o,r,i,a,s,"next",t)}function s(t){c(o,r,i,a,s,"throw",t)}a(void 0)}))})();var e}},{key:"removeUser",value:function(){localStorage.removeItem("user")}},{key:"initTempUser",value:function(){var t=(0,s.c9)(),e=new a.j$({uid:t});localStorage.setItem("tempUser",JSON.stringify(e.toJSON()))}},{key:"getTempUser",value:function(){var t=localStorage.getItem("tempUser");if(null===t)return null;var e=JSON.parse(t);return new a.j$(e)}}]),t}(),g=new v,m=new p,y=new d},8546:function(t,e,n){"use strict";n.d(e,{yv:function(){return r},r8:function(){return i},l_:function(){return o},Ao:function(){return a},c9:function(){return s}});function r(){return!!window.location.hostname.includes("shots.so")}function i(){return!1}function o(t,e){var n=document.createElement("a");n.download=e,n.href=t,document.body.appendChild(n),n.click(),document.body.removeChild(n),n.remove()}var a=function(){var t=navigator.userAgent;return t.match(/chrome|chromium|crios/i)?"chrome":t.match(/firefox|fxios/i)?"firefox":t.match(/safari/i)?"safari":t.match(/opr\//i)?"opera":t.match(/edg/i)?"edge":"unknown"};function s(){return Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15)}},7332:function(){},7663:function(t){!function(){var e={162:function(t){var e,n,r=t.exports={};function i(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function a(t){if(e===setTimeout)return setTimeout(t,0);if((e===i||!e)&&setTimeout)return e=setTimeout,setTimeout(t,0);try{return e(t,0)}catch(r){try{return e.call(null,t,0)}catch(r){return e.call(this,t,0)}}}!function(){try{e="function"===typeof setTimeout?setTimeout:i}catch(t){e=i}try{n="function"===typeof clearTimeout?clearTimeout:o}catch(t){n=o}}();var s,u=[],c=!1,h=-1;function l(){c&&s&&(c=!1,s.length?u=s.concat(u):h=-1,u.length&&f())}function f(){if(!c){var t=a(l);c=!0;for(var e=u.length;e;){for(s=u,u=[];++h<e;)s&&s[h].run();h=-1,e=u.length}s=null,c=!1,function(t){if(n===clearTimeout)return clearTimeout(t);if((n===o||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(t);try{n(t)}catch(e){try{return n.call(null,t)}catch(e){return n.call(this,t)}}}(t)}}function p(t,e){this.fun=t,this.array=e}function d(){}r.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];u.push(new p(t,e)),1!==u.length||c||a(f)},p.prototype.run=function(){this.fun.apply(null,this.array)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={},r.on=d,r.addListener=d,r.once=d,r.off=d,r.removeListener=d,r.removeAllListeners=d,r.emit=d,r.prependListener=d,r.prependOnceListener=d,r.listeners=function(t){return[]},r.binding=function(t){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(t){throw new Error("process.chdir is not supported")},r.umask=function(){return 0}}},n={};function r(t){var i=n[t];if(void 0!==i)return i.exports;var o=n[t]={exports:{}},a=!0;try{e[t](o,o.exports,r),a=!1}finally{a&&delete n[t]}return o.exports}r.ab="//";var i=r(162);t.exports=i}()},1850:function(t,e,n){"use strict";n.d(e,{y:function(){return T}});var r=n(7582),i=n(8474),o=n(4222),a=n(3912),s={setTimeout:function(t,e){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];var o=s.delegate;return(null===o||void 0===o?void 0:o.setTimeout)?o.setTimeout.apply(o,(0,r.__spreadArray)([t,e],(0,r.__read)(n))):setTimeout.apply(void 0,(0,r.__spreadArray)([t,e],(0,r.__read)(n)))},clearTimeout:function(t){var e=s.delegate;return((null===e||void 0===e?void 0:e.clearTimeout)||clearTimeout)(t)},delegate:void 0};function u(){}var c=h("C",void 0,void 0);function h(t,e,n){return{kind:t,value:e,error:n}}var l=n(8846),f=function(t){function e(e){var n=t.call(this)||this;return n.isStopped=!1,e?(n.destination=e,(0,o.Nn)(e)&&e.add(n)):n.destination=b,n}return(0,r.__extends)(e,t),e.create=function(t,e,n){return new g(t,e,n)},e.prototype.next=function(t){this.isStopped?y(function(t){return h("N",t,void 0)}(t),this):this._next(t)},e.prototype.error=function(t){this.isStopped?y(h("E",void 0,t),this):(this.isStopped=!0,this._error(t))},e.prototype.complete=function(){this.isStopped?y(c,this):(this.isStopped=!0,this._complete())},e.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,t.prototype.unsubscribe.call(this),this.destination=null)},e.prototype._next=function(t){this.destination.next(t)},e.prototype._error=function(t){try{this.destination.error(t)}finally{this.unsubscribe()}},e.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},e}(o.w0),p=Function.prototype.bind;function d(t,e){return p.call(t,e)}var v=function(){function t(t){this.partialObserver=t}return t.prototype.next=function(t){var e=this.partialObserver;if(e.next)try{e.next(t)}catch(n){m(n)}},t.prototype.error=function(t){var e=this.partialObserver;if(e.error)try{e.error(t)}catch(n){m(n)}else m(t)},t.prototype.complete=function(){var t=this.partialObserver;if(t.complete)try{t.complete()}catch(e){m(e)}},t}(),g=function(t){function e(e,n,r){var o,s,u=t.call(this)||this;(0,i.m)(e)||!e?o={next:null!==e&&void 0!==e?e:void 0,error:null!==n&&void 0!==n?n:void 0,complete:null!==r&&void 0!==r?r:void 0}:u&&a.v.useDeprecatedNextContext?((s=Object.create(e)).unsubscribe=function(){return u.unsubscribe()},o={next:e.next&&d(e.next,s),error:e.error&&d(e.error,s),complete:e.complete&&d(e.complete,s)}):o=e;return u.destination=new v(o),u}return(0,r.__extends)(e,t),e}(f);function m(t){var e;a.v.useDeprecatedSynchronousErrorHandling?(0,l.O)(t):(e=t,s.setTimeout((function(){var t=a.v.onUnhandledError;if(!t)throw e;t(e)})))}function y(t,e){var n=a.v.onStoppedNotification;n&&s.setTimeout((function(){return n(t,e)}))}var b={closed:!0,next:u,error:function(t){throw t},complete:u},w="function"===typeof Symbol&&Symbol.observable||"@@observable";function _(t){return t}function I(t){return 0===t.length?_:1===t.length?t[0]:function(e){return t.reduce((function(t,e){return e(t)}),e)}}var T=function(){function t(t){t&&(this._subscribe=t)}return t.prototype.lift=function(e){var n=new t;return n.source=this,n.operator=e,n},t.prototype.subscribe=function(t,e,n){var r,a=this,s=(r=t)&&r instanceof f||function(t){return t&&(0,i.m)(t.next)&&(0,i.m)(t.error)&&(0,i.m)(t.complete)}(r)&&(0,o.Nn)(r)?t:new g(t,e,n);return(0,l.x)((function(){var t=a,e=t.operator,n=t.source;s.add(e?e.call(s,n):n?a._subscribe(s):a._trySubscribe(s))})),s},t.prototype._trySubscribe=function(t){try{return this._subscribe(t)}catch(e){t.error(e)}},t.prototype.forEach=function(t,e){var n=this;return new(e=E(e))((function(e,r){var i=new g({next:function(e){try{t(e)}catch(n){r(n),i.unsubscribe()}},error:r,complete:e});n.subscribe(i)}))},t.prototype._subscribe=function(t){var e;return null===(e=this.source)||void 0===e?void 0:e.subscribe(t)},t.prototype[w]=function(){return this},t.prototype.pipe=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return I(t)(this)},t.prototype.toPromise=function(t){var e=this;return new(t=E(t))((function(t,n){var r;e.subscribe((function(t){return r=t}),(function(t){return n(t)}),(function(){return t(r)}))}))},t.create=function(e){return new t(e)},t}();function E(t){var e;return null!==(e=null!==t&&void 0!==t?t:a.v.Promise)&&void 0!==e?e:Promise}},4222:function(t,e,n){"use strict";n.d(e,{Lc:function(){return u},w0:function(){return s},Nn:function(){return c}});var r=n(7582),i=n(8474),o=(0,n(1819).d)((function(t){return function(e){t(this),this.message=e?e.length+" errors occurred during unsubscription:\n"+e.map((function(t,e){return e+1+") "+t.toString()})).join("\n  "):"",this.name="UnsubscriptionError",this.errors=e}})),a=n(3699),s=function(){function t(t){this.initialTeardown=t,this.closed=!1,this._parentage=null,this._finalizers=null}return t.prototype.unsubscribe=function(){var t,e,n,a,s;if(!this.closed){this.closed=!0;var u=this._parentage;if(u)if(this._parentage=null,Array.isArray(u))try{for(var c=(0,r.__values)(u),l=c.next();!l.done;l=c.next()){l.value.remove(this)}}catch(m){t={error:m}}finally{try{l&&!l.done&&(e=c.return)&&e.call(c)}finally{if(t)throw t.error}}else u.remove(this);var f=this.initialTeardown;if((0,i.m)(f))try{f()}catch(y){s=y instanceof o?y.errors:[y]}var p=this._finalizers;if(p){this._finalizers=null;try{for(var d=(0,r.__values)(p),v=d.next();!v.done;v=d.next()){var g=v.value;try{h(g)}catch(b){s=null!==s&&void 0!==s?s:[],b instanceof o?s=(0,r.__spreadArray)((0,r.__spreadArray)([],(0,r.__read)(s)),(0,r.__read)(b.errors)):s.push(b)}}}catch(w){n={error:w}}finally{try{v&&!v.done&&(a=d.return)&&a.call(d)}finally{if(n)throw n.error}}}if(s)throw new o(s)}},t.prototype.add=function(e){var n;if(e&&e!==this)if(this.closed)h(e);else{if(e instanceof t){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=null!==(n=this._finalizers)&&void 0!==n?n:[]).push(e)}},t.prototype._hasParent=function(t){var e=this._parentage;return e===t||Array.isArray(e)&&e.includes(t)},t.prototype._addParent=function(t){var e=this._parentage;this._parentage=Array.isArray(e)?(e.push(t),e):e?[e,t]:t},t.prototype._removeParent=function(t){var e=this._parentage;e===t?this._parentage=null:Array.isArray(e)&&(0,a.P)(e,t)},t.prototype.remove=function(e){var n=this._finalizers;n&&(0,a.P)(n,e),e instanceof t&&e._removeParent(this)},t.EMPTY=function(){var e=new t;return e.closed=!0,e}(),t}(),u=s.EMPTY;function c(t){return t instanceof s||t&&"closed"in t&&(0,i.m)(t.remove)&&(0,i.m)(t.add)&&(0,i.m)(t.unsubscribe)}function h(t){(0,i.m)(t)?t():t.unsubscribe()}},3912:function(t,e,n){"use strict";n.d(e,{v:function(){return r}});var r={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},3699:function(t,e,n){"use strict";function r(t,e){if(t){var n=t.indexOf(e);0<=n&&t.splice(n,1)}}n.d(e,{P:function(){return r}})},1819:function(t,e,n){"use strict";function r(t){var e=t((function(t){Error.call(t),t.stack=(new Error).stack}));return e.prototype=Object.create(Error.prototype),e.prototype.constructor=e,e}n.d(e,{d:function(){return r}})},8846:function(t,e,n){"use strict";n.d(e,{x:function(){return o},O:function(){return a}});var r=n(3912),i=null;function o(t){if(r.v.useDeprecatedSynchronousErrorHandling){var e=!i;if(e&&(i={errorThrown:!1,error:null}),t(),e){var n=i,o=n.errorThrown,a=n.error;if(i=null,o)throw a}}else t()}function a(t){r.v.useDeprecatedSynchronousErrorHandling&&i&&(i.errorThrown=!0,i.error=t)}},8474:function(t,e,n){"use strict";function r(t){return"function"===typeof t}n.d(e,{m:function(){return r}})},7582:function(t,e,n){"use strict";n.r(e),n.d(e,{__extends:function(){return i},__assign:function(){return o},__rest:function(){return a},__decorate:function(){return s},__param:function(){return u},__esDecorate:function(){return c},__runInitializers:function(){return h},__propKey:function(){return l},__setFunctionName:function(){return f},__metadata:function(){return p},__awaiter:function(){return d},__generator:function(){return v},__createBinding:function(){return g},__exportStar:function(){return m},__values:function(){return y},__read:function(){return b},__spread:function(){return w},__spreadArrays:function(){return _},__spreadArray:function(){return I},__await:function(){return T},__asyncGenerator:function(){return E},__asyncDelegator:function(){return S},__asyncValues:function(){return A},__makeTemplateObject:function(){return k},__importStar:function(){return C},__importDefault:function(){return O},__classPrivateFieldGet:function(){return D},__classPrivateFieldSet:function(){return R},__classPrivateFieldIn:function(){return P},__addDisposableResource:function(){return x},__disposeResources:function(){return M}});var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},r(t,e)};function i(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var o=function(){return o=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},o.apply(this,arguments)};function a(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n}function s(t,e,n,r){var i,o=arguments.length,a=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(o<3?i(a):o>3?i(e,n,a):i(e,n))||a);return o>3&&a&&Object.defineProperty(e,n,a),a}function u(t,e){return function(n,r){e(n,r,t)}}function c(t,e,n,r,i,o){function a(t){if(void 0!==t&&"function"!==typeof t)throw new TypeError("Function expected");return t}for(var s,u=r.kind,c="getter"===u?"get":"setter"===u?"set":"value",h=!e&&t?r.static?t:t.prototype:null,l=e||(h?Object.getOwnPropertyDescriptor(h,r.name):{}),f=!1,p=n.length-1;p>=0;p--){var d={};for(var v in r)d[v]="access"===v?{}:r[v];for(var v in r.access)d.access[v]=r.access[v];d.addInitializer=function(t){if(f)throw new TypeError("Cannot add initializers after decoration has completed");o.push(a(t||null))};var g=(0,n[p])("accessor"===u?{get:l.get,set:l.set}:l[c],d);if("accessor"===u){if(void 0===g)continue;if(null===g||"object"!==typeof g)throw new TypeError("Object expected");(s=a(g.get))&&(l.get=s),(s=a(g.set))&&(l.set=s),(s=a(g.init))&&i.unshift(s)}else(s=a(g))&&("field"===u?i.unshift(s):l[c]=s)}h&&Object.defineProperty(h,r.name,l),f=!0}function h(t,e,n){for(var r=arguments.length>2,i=0;i<e.length;i++)n=r?e[i].call(t,n):e[i].call(t);return r?n:void 0}function l(t){return"symbol"===typeof t?t:"".concat(t)}function f(t,e,n){return"symbol"===typeof e&&(e=e.description?"[".concat(e.description,"]"):""),Object.defineProperty(t,"name",{configurable:!0,value:n?"".concat(n," ",e):e})}function p(t,e){if("object"===typeof Reflect&&"function"===typeof Reflect.metadata)return Reflect.metadata(t,e)}function d(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{u(r.next(t))}catch(e){o(e)}}function s(t){try{u(r.throw(t))}catch(e){o(e)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((r=r.apply(t,e||[])).next())}))}function v(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(s){return function(u){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,s[0]&&(a=0)),a;)try{if(n=1,r&&(i=2&s[0]?r.return:s[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,s[1])).done)return i;switch(r=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,r=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===s[0]||2===s[0])){a=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){a.label=s[1];break}if(6===s[0]&&a.label<i[1]){a.label=i[1],i=s;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(s);break}i[2]&&a.ops.pop(),a.trys.pop();continue}s=e.call(t,a)}catch(u){s=[6,u],r=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,u])}}}var g=Object.create?function(t,e,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(e,n);i&&!("get"in i?!e.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,i)}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]};function m(t,e){for(var n in t)"default"===n||Object.prototype.hasOwnProperty.call(e,n)||g(e,t,n)}function y(t){var e="function"===typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"===typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function b(t,e){var n="function"===typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),a=[];try{for(;(void 0===e||e-->0)&&!(r=o.next()).done;)a.push(r.value)}catch(s){i={error:s}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a}function w(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(b(arguments[e]));return t}function _(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],a=0,s=o.length;a<s;a++,i++)r[i]=o[a];return r}function I(t,e,n){if(n||2===arguments.length)for(var r,i=0,o=e.length;i<o;i++)!r&&i in e||(r||(r=Array.prototype.slice.call(e,0,i)),r[i]=e[i]);return t.concat(r||Array.prototype.slice.call(e))}function T(t){return this instanceof T?(this.v=t,this):new T(t)}function E(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,i=n.apply(t,e||[]),o=[];return r={},a("next"),a("throw"),a("return"),r[Symbol.asyncIterator]=function(){return this},r;function a(t){i[t]&&(r[t]=function(e){return new Promise((function(n,r){o.push([t,e,n,r])>1||s(t,e)}))})}function s(t,e){try{!function(t){t.value instanceof T?Promise.resolve(t.value.v).then(u,c):h(o[0][2],t)}(i[t](e))}catch(n){h(o[0][3],n)}}function u(t){s("next",t)}function c(t){s("throw",t)}function h(t,e){t(e),o.shift(),o.length&&s(o[0][0],o[0][1])}}function S(t){var e,n;return e={},r("next"),r("throw",(function(t){throw t})),r("return"),e[Symbol.iterator]=function(){return this},e;function r(r,i){e[r]=t[r]?function(e){return(n=!n)?{value:T(t[r](e)),done:!1}:i?i(e):e}:i}}function A(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e,n=t[Symbol.asyncIterator];return n?n.call(t):(t=y(t),e={},r("next"),r("throw"),r("return"),e[Symbol.asyncIterator]=function(){return this},e);function r(n){e[n]=t[n]&&function(e){return new Promise((function(r,i){(function(t,e,n,r){Promise.resolve(r).then((function(e){t({value:e,done:n})}),e)})(r,i,(e=t[n](e)).done,e.value)}))}}}function k(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}var N=Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e};function C(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.prototype.hasOwnProperty.call(t,n)&&g(e,t,n);return N(e,t),e}function O(t){return t&&t.__esModule?t:{default:t}}function D(t,e,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"===typeof e?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(t):r?r.value:e.get(t)}function R(t,e,n,r,i){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"===typeof e?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?i.call(t,n):i?i.value=n:e.set(t,n),n}function P(t,e){if(null===e||"object"!==typeof e&&"function"!==typeof e)throw new TypeError("Cannot use 'in' operator on non-object");return"function"===typeof t?e===t:t.has(e)}function x(t,e,n){if(null!==e&&void 0!==e){if("object"!==typeof e&&"function"!==typeof e)throw new TypeError("Object expected.");var r;if(n){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");r=e[Symbol.asyncDispose]}if(void 0===r){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");r=e[Symbol.dispose]}if("function"!==typeof r)throw new TypeError("Object not disposable.");t.stack.push({value:e,dispose:r,async:n})}else n&&t.stack.push({async:!0});return e}var L="function"===typeof SuppressedError?SuppressedError:function(t,e,n){var r=new Error(n);return r.name="SuppressedError",r.error=t,r.suppressed=e,r};function M(t){function e(e){t.error=t.hasError?new L(e,t.error,"An error was suppressed during disposal."):e,t.hasError=!0}return function n(){for(;t.stack.length;){var r=t.stack.pop();try{var i=r.dispose&&r.dispose.call(r.value);if(r.async)return Promise.resolve(i).then(n,(function(t){return e(t),n()}))}catch(o){e(o)}}if(t.hasError)throw t.error}()}e.default={__extends:i,__assign:o,__rest:a,__decorate:s,__param:u,__metadata:p,__awaiter:d,__generator:v,__createBinding:g,__exportStar:m,__values:y,__read:b,__spread:w,__spreadArrays:_,__spreadArray:I,__await:T,__asyncGenerator:E,__asyncDelegator:S,__asyncValues:A,__makeTemplateObject:k,__importStar:C,__importDefault:O,__classPrivateFieldGet:D,__classPrivateFieldSet:R,__classPrivateFieldIn:P,__addDisposableResource:x,__disposeResources:M}}},function(t){var e=function(e){return t(t.s=e)};t.O(0,[774,179],(function(){return e(6363),e(387)}));var n=t.O();_N_E=n}]);